!function(){function t(e,i,n){function s(r,a){if(!i[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[r]={exports:{}};e[r][0].call(u.exports,function(t){return s(e[r][1][t]||t)},u,u.exports,t,e,i,n)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}return t}()({1:[function(t,e,i){"use strict";var n=t("./CRSMap"),s=t("./CRSCustom").CRSCustom,o=s.extend({options:{},initialize:function(t){s.prototype.initialize.call(this,t,this.options)}});o.EGIS4490=n.EGIS4490,o.EPSG3395=n.EPSG3395,o.EPSG4326=n.EPSG4326,o.EPSG3857=n.EPSG3857,e.exports.CRS=o,e.exports.crs=function(t){return new o(t)}},{"./CRSCustom":2,"./CRSMap":3}],2:[function(t,e,i){"use strict";var n=L.Class.extend({projection:L.Projection.LonLat,includes:L.CRS.Earth,options:{resolutions:[],origin:[],bounds:L.bounds([-180,-90],[180,90])},R:6378137,code:-1,initialize:function(t){if(t=t||{},L.Util.setOptions(this,t),this.transformation=this.options.transformation,this.options.origin&&(this.transformation=new L.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.resolutions){this._scales=[];for(var e=this.options.resolutions.length-1;e>=0;e--)this.options.resolutions[e]&&(this._scales[e]=1/this.options.resolutions[e])}this.infinite=!this.options.bounds},distance:function(t,e){return Math.sqrt(Math.pow(t.lng-e.lng,2)+Math.pow(t.lat-e.lat,2))},scale:function(t){var e,i,n,s,o=Math.floor(t);return t===o?t>=this._scales.length?this._scales[this._scales.length-1]:this._scales[t]:(e=this._scales[o],i=this._scales[o+1],n=i-e,s=t-o,e+n*s)},zoom:function(t){var e,i,n=this._closestElement(this._scales,t),s=this._scales.indexOf(n);return t===n?s:(e=s+1,i=this._scales[e]-n,(t-n)/i+s)},_closestElement:function(t,e){for(var i,n=t.length;n--;)t[n]<=e&&(void 0===i||i<t[n])&&(i=t[n]);return i},area:function t(e){for(var t=0,i=e.length,n=e[i-1][0],s=e[i-1][1],o=0;o<i;o++){var r=e[o][0],a=e[o][1];t+=this._toRadians(r-n)*(2+Math.sin(this._toRadians(s))+Math.sin(this._toRadians(a))),n=r,s=a}return Math.abs(t*this.R*this.R/2)},_toRadians:function(t){return t/180*Math.PI}});e.exports.CRSCustom=n,e.exports.crsCustom=function(t){return new n(t)}},{}],3:[function(t,e,i){"use strict";var n=t("./EGIS4490"),s=function(t){for(var e=0,i=t.length,n=t[i-1][0],s=t[i-1][1],r=0;r<i;r++){var a=t[r][0],l=t[r][1];e+=o(a-n)*(2+Math.sin(o(s))+Math.sin(o(l))),n=a,s=l}return e*this.R*this.R/2},o=function(t){return t/180*Math.PI};L.CRS.EPSG3395.area=L.CRS.EPSG4326.area=L.CRS.EPSG3857.area=s,e.exports={EGIS4490:n,EPSG3395:L.CRS.EPSG3395,EPSG4326:L.CRS.EPSG4326,EPSG3857:L.CRS.EPSG3857}},{"./EGIS4490":4}],4:[function(t,e,i){"use strict";var n=t("./CRSCustom").CRSCustom;e.exports=function(){for(var t=[],e=[-400,400],i=.0779701782390466,s=0;s<=50;s++)t.push(i),i/=2;return new n({resolutions:t,origin:e})}()},{"./CRSCustom":2}],5:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"bottomleft",prefix:"<div>厦门亿力吉奥信息科技有限公司©2020</div>"},initialize:function(t){L.setOptions(this,t),this._attributions={}},onAdd:function(t){var e=this;t.attributionControl=e,e._container=L.DomUtil.create("div","egis-control-attribution"),L.DomEvent&&L.DomEvent.disableClickPropagation(e._container);for(var i in t._layers)t._layers[i].getAttribution&&e.addAttribution(t._layers[i].getAttribution());return e._update(),e._container},onRemove:function(t){},setPrefix:function(t){return this},addAttribution:function(t){var e=this;return t?(e._attributions[t]||(e._attributions[t]=0),e._attributions[t]++,e._update(),e):e},removeAttribution:function(t){var e=this;return t?(e._attributions[t]&&(e._attributions[t]--,e._update()),e):e},_update:function(){var t=this;if(t._map){var e=[];for(var i in t._attributions)t._attributions[i]&&e.push(i);var n=[];t.options.prefix&&n.push(t.options.prefix),e.length&&n.push(e.join(", ")),t._container.innerHTML=n.join(" | ")}}});L.Map.mergeOptions({}),L.Map.addInitHook(function(){var t=this;this.options.attrControl&&(new s).addTo(t)}),e.exports.AttributionControl=s,e.exports.attributionControl=function(){return new s}},{"./Control":7}],6:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"topleft"},onRemove:function(t){L.DomUtil.remove(this._container)},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","egis-control egis-control-boxzoom egis-control-boxzoom-active egis-bar"),i=L.DomUtil.create("a","zoomIn",e);i.title="拉框放大",L.DomEvent.on(i,"mousedown",L.DomEvent.stopPropagation).on(i,"click",L.DomEvent.stopPropagation).on(i,"click",this._boxZoomIn,this);var n=L.DomUtil.create("a","zoomOut",e);n.title="拉框缩小",L.DomEvent.on(n,"mousedown",L.DomEvent.stopPropagation).on(n,"click",L.DomEvent.stopPropagation).on(n,"click",this._boxZoomOut,this);var s=L.DomUtil.create("a","stops",e);return s.title="取消操作",L.DomEvent.on(s,"mousedown dbclick",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.stopPropagation).on(s,"click",this._stopZoomInOrOut,this),e},_stopZoomInOrOut:function(){var t=this._map;(t.boxZoomInOrOut._zoomType="in")&&(t.boxZoomInOrOut.disable(),L.DomUtil.removeClass(t._container,"zoomInClick")),(t.boxZoomInOrOut._zoomType="out")&&(t.boxZoomInOrOut.disable(),L.DomUtil.removeClass(t._container,"zoomOutClick"))},_boxZoomIn:function(){var t=this._map;t.boxZoomInOrOut.disable(),L.DomUtil.removeClass(t._container,"zoomOutClick"),L.DomUtil.addClass(t._container,"zoomInClick"),t.boxZoomInOrOut._zoomType="in",t.boxZoomInOrOut.enable()},_boxZoomOut:function(){var t=this._map;t.boxZoomInOrOut.disable(),L.DomUtil.addClass(t._container,"zoomOutClick"),t.boxZoomInOrOut._zoomType="out",t.boxZoomInOrOut.enable()}});e.exports.BoxZoom=s,e.exports.boxZoom=function(t){return new s(t)}},{"./Control":7}],7:[function(t,e,i){"use strict";var n=L.Control.extend({options:{position:"bottomleft"},initialize:function(t){L.Control.prototype.initialize.call(this,t)}});e.exports.Control=n,e.exports.control=function(){return new n}},{}],8:[function(t,e,i){"use strict";var n,s=t("./Control");n=s.Control.extend({options:{position:"topleft"},onRemove:function(t){L.DomUtil.remove(div)},onAdd:function(t){this._map=t,this._graphicsLayer=egis.layer.graphicsLayer();var e=L.DomUtil.create("div","egis-control egis-draw"),i=L.DomUtil.create("div"," egis-draw-section",e),n=L.DomUtil.create("div"," egis-draw-toolbar egis-bar egis-draw-toolbar-top",i),s=L.DomUtil.create("div"," egis-draw-section",e),o=L.DomUtil.create("div"," egis-draw-toolbar egis-bar ",s),r=L.DomUtil.create("div"," egis-draw-section",e),a=L.DomUtil.create("div"," egis-draw-toolbar egis-bar ",r);s.style.marginTop="10px",r.style.marginTop="10px";var l=L.DomUtil.create("a","pointButtons",n);l.href="#",l.title="开始画点",L.DomEvent.on(l,"mousedown dblclick ",L.DomEvent.stopPropagation).on(l,"click",L.DomEvent.stop).on(l,"click",this._startDrawMarker,this);var h=L.DomUtil.create("a","circleButtons",n);h.href="#",h.title="开始画圆",L.DomEvent.on(h,"mousedown dblclick ",L.DomEvent.stopPropagation).on(h,"click",L.DomEvent.stop).on(h,"click",this._startDrawCircle,this);var u=L.DomUtil.create("a","rectangularButtons",n);u.href="#",u.title="开始画矩形",L.DomEvent.on(u,"mousedown dblclick ",L.DomEvent.stopPropagation).on(u,"click",L.DomEvent.stop).on(u,"click",this._startDrawRectangular,this);var c=L.DomUtil.create("a","polylineButtons",n);c.href="#",c.title="开始画线",L.DomEvent.on(c,"mousedown dblclick ",L.DomEvent.stopPropagation).on(c,"click",L.DomEvent.stop).on(c,"click",this._startDrawPolyline,this);var p=L.DomUtil.create("a","polygonButtons",n);p.href="#",p.title="开始画多边形",L.DomEvent.on(p,"mousedown dblclick ",L.DomEvent.stopPropagation).on(p,"click",L.DomEvent.stop).on(p,"click",this._startDrawPolygon,this);var d=L.DomUtil.create("a","stops",n);d.href="#",d.title="取消画图",L.DomEvent.on(d,"mousedown dblclick ",L.DomEvent.stopPropagation).on(d,"click",L.DomEvent.stop).on(d,"click",this._stopDraw,this);var y=L.DomUtil.create("a","edits",o);y.href="#",y.title="开始编辑",L.DomEvent.on(y,"mousedown dblclick ",L.DomEvent.stopPropagation).on(y,"click",L.DomEvent.stop).on(y,"click",this._startEdit,this);var f=L.DomUtil.create("a","stops",o);f.href="#",f.title="取消编辑",L.DomEvent.on(f,"mousedown dblclick ",L.DomEvent.stopPropagation).on(f,"click",L.DomEvent.stop).on(f,"click",this._disableEdit,this);var _=L.DomUtil.create("a","selectButtons",a);_.href="#",_.title="开始选择",L.DomEvent.on(_,"mousedown dblclick ",L.DomEvent.stopPropagation).on(_,"click",L.DomEvent.stop).on(_,"click",this._starSelect,this);var m=L.DomUtil.create("a","deleteButtons",a);m.href="#",m.title="删除选择图形",L.DomEvent.on(m,"mousedown dblclick ",L.DomEvent.stopPropagation).on(m,"click",L.DomEvent.stop).on(m,"click",this._deleteSelected,this);var g=L.DomUtil.create("a","stops",a);return g.href="#",g.title="取消选择",L.DomEvent.on(g,"mousedown dblclick ",L.DomEvent.stopPropagation).on(g,"click",L.DomEvent.stop).on(g,"click",this._stopSelect,this),e},_starSelect:function(){this._stopDraw(),this._stopSelect(),this._selectGraphic=new egis.handler.Select({target:this._map,graphicsLayer:this._graphicsLayer}),this._selectGraphic.enable()},_deleteSelected:function(){this._stopDraw(),this._selectGraphic.deleteSelect()},_stopSelect:function(){this._selectGraphic&&this._selectGraphic.disable()},_startDrawCircle:function(){this._stopSelect(),this._stopDraw(),this._drawCircle?this._drawCircle.enable():(this._drawCircle=new egis.handler.Draw({target:this._map,type:"circle",graphicsLayer:this._graphicsLayer}),this._drawCircle.enable())},_startDrawMarker:function(){this._stopSelect(),this._stopDraw(),this._drawPoint?this._drawPoint.enable():(this._drawPoint=new egis.handler.Draw({target:this._map,type:"point",graphicsLayer:this._graphicsLayer}),this._drawPoint.enable())},_startDrawRectangular:function(){this._stopSelect(),this._stopDraw(),this._drawRectangle?this._drawRectangle.enable():(this._drawRectangle=new egis.handler.Draw({target:this._map,type:"rectangle",graphicsLayer:this._graphicsLayer}),this._drawRectangle.enable())},_startDrawPolygon:function(){this._stopSelect(),this._stopDraw(),this._drawPolygon?this._drawPolygon.enable():(this._drawPolygon=new egis.handler.Draw({target:this._map,type:"polygon",graphicsLayer:this._graphicsLayer}),this._drawPolygon.enable())},_startDrawPolyline:function(){this._stopSelect(),this._stopDraw(),this._drawPolyline?this._drawPolyline.enable():(this._drawPolyline=new egis.handler.Draw({target:this._map,type:"polyline",graphicsLayer:this._graphicsLayer}),this._drawPolyline.enable())},_stopDraw:function(){this._drawPolyline&&this._drawPolyline.enabled()&&this._drawPolyline.disable(),this._drawCircle&&this._drawCircle.enabled()&&this._drawCircle.disable(),this._drawPoint&&this._drawPoint.enabled()&&this._drawPoint.disable(),this._drawPolygon&&this._drawPolygon.enabled()&&this._drawPolygon.disable(),this._drawRectangle&&this._drawRectangle.enabled()&&this._drawRectangle.disable(),this._disableEdit()},_startEdit:function(){this._stopDraw(),this._stopSelect(),this._editTool||(this._editTool=new egis.handler.Edit({target:this._map,graphicsLayer:this._graphicsLayer})),this._editTool.enable()},_disableEdit:function(){this._editTool&&this._editTool.enabled()&&this._editTool.disable()}}),e.exports.DrawAndEdit=n,e.exports.drawAndEdit=function(t){return new n(t)}},{"./Control":7}],9:[function(t,e,i){"use strict";var n,s=t("./Control");n=s.Control.extend({options:{position:"topleft"},onRemove:function(t){L.DomUtil.remove(this._container)},onAdd:function(t){this.options.center||(this.options.center=t.getCenter()),this.options.zoom||(this.options.zoom=t.getZoom());var e=L.DomUtil.create("div","egis-control "),i=L.DomUtil.create("div","  egis-bar egis-draw-toolbar-top",e),n=L.DomUtil.create("div"," egis-bar",e);return n.style.marginTop="10px",this._backLink=L.DomUtil.create("a","backButtons",i),this._backLink.href="#",this._backLink.title="前一视图",L.DomEvent.on(this._backLink,"mousedown dblclick ",L.DomEvent.stopPropagation).on(this._backLink,"click",L.DomEvent.stop).on(this._backLink,"click",this._goBack,this),this._frontLink=L.DomUtil.create("a","frontButtons",i),this._frontLink.href="#",this._frontLink.title="后一视图",L.DomEvent.on(this._frontLink,"mousedown dblclick ",L.DomEvent.stopPropagation).on(this._frontLink,"click",L.DomEvent.stop).on(this._frontLink,"click",this._goFwd,this),this._homeLink=L.DomUtil.create("a","homeButtons",n),this._homeLink.href="#",this._homeLink.title="返回首页",L.DomEvent.on(this._homeLink,"mousedown dblclick ",L.DomEvent.stopPropagation).on(this._homeLink,"click",L.DomEvent.stop).on(this._homeLink,"click",this._goHome,this),this._viewHistory=[{center:this.options.center,zoom:this.options.zoom}],this._curIndx=-1,this._updateDisabled(),t.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),t.setView(this.options.center,this.options.zoom),e},_goHome:function(){if(this.options.bbox)try{this._map.fitBounds(this.options.bbox)}catch(t){this._map.setView(this.options.center,this.options.zoom)}this._map.setView(this.options.center,this.options.zoom)},_goBack:function(){if(0!==this._curIndx){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx--,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_goFwd:function(){if(this._curIndx!=this._viewHistory.length-1){this._map.off("moveend",this._updateHistory,this),this._map.once("moveend",function(){this._map.on("moveend",this._updateHistory,this)},this),this._curIndx++,this._updateDisabled();var t=this._viewHistory[this._curIndx];this._map.setView(t.center,t.zoom)}},_updateHistory:function(){var t={center:this._map.getCenter(),zoom:this._map.getZoom()},e=this._curIndx+1;this._viewHistory.splice(e,this._viewHistory.length-e,t),this._curIndx++,this._updateDisabled()},_setFwdEnabled:function(t){var e="egis-control-navbar-fwd-disabled";t===!0?(L.DomUtil.removeClass(this._frontLink,e),L.DomUtil.removeClass(this._frontLink,"egis-disabled")):(L.DomUtil.addClass(this._frontLink,e),L.DomUtil.addClass(this._frontLink,"egis-disabled"))},_setBackEnabled:function(t){t===!0?(L.DomUtil.removeClass(this._backLink,"egis-control-navbar-back-disabled"),L.DomUtil.removeClass(this._backLink,"egis-disabled")):(L.DomUtil.addClass(this._backLink,"egis-control-navbar-back-disabled"),L.DomUtil.addClass(this._backLink,"egis-disabled"))},_updateDisabled:function(){this._curIndx==this._viewHistory.length-1?this._setFwdEnabled(!1):this._setFwdEnabled(!0),this._curIndx<=0?this._setBackEnabled(!1):this._setBackEnabled(!0)}}),e.exports.FrontAndBackView=n,e.exports.frontAndBackView=function(t){return new n(t)}},{"./Control":7}],10:[function(t,e,i){"use strict";var n=(t("./Control"),L.Control.Layers.extend({_onInputClick:function(){var t,e,i=this,n=i._form.getElementsByTagName("input"),s=[],o=[];i._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=i._getLayer(t.layerId).layer,t.checked?s.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)o[r].setVisible(!1);for(r=0;r<s.length;r++)s[r].setVisible(!0);i._handlingClick=!1,i._refocusOnMap()}}));e.exports.LayerSwitcher=n,e.exports.layerSwitcher=function(t,e,i){return new n(t,e,i)}},{"./Control":7}],11:[function(t,e,i){"use strict";var n=t("./Control"),s=t("../Render/GISCanvas").GISCanvas,o=(t("../Symbol/SimpleMarkerSymbol").SimpleMarkerSymbol,t("../Geometry/GeometryUtil").GeometryUtil),r=n.Control.extend({options:{position:"bottomright",layerInfos:null},initialize:function(t){L.setOptions(this,t),this._canvas=new s,this._canvas._initContainer()},onAdd:function(t){var e=this,i=L.DomUtil.create("h5","egis-control-legend-title");return i.innerHTML="No Legend",i.style.display="none",this._container=L.DomUtil.create("div","egis-control-legend"),this._container.style.maxHeight=.7*document.documentElement.clientHeight+"px",this._container.appendChild(i),L.DomEvent&&(L.DomEvent.disableScrollPropagation(this._container),L.DomEvent.disableClickPropagation(this._container)),this.options.layerInfos.forEach(function(t){var n=L.DomUtil.create("div");e._createLegendItem(t,n),t.layer.on("visiblechanged",function(t){i.style.display="none",t.visible?n.style.display="block":(n.style.display="none",parseInt(window.getComputedStyle(e._container).height)<=10&&(i.style.display="block"))}),e._container.appendChild(n)}),this._container},onRemove:function(t){},_setCanvasSize:function(t,e){this._canvas._container.width=t,this._canvas._container.height=e},_createLegendItem:function(t,e){var i,n=this,s=t.layer.getRenderer();if(t.title){var o=L.DomUtil.create("h5","egis-control-legend-title");o.innerHTML=t.title,e.appendChild(o)}"simple"===s.type?this._createMainLegend(t.layer.getGeometryType(),s.getSymbol(),s.getLabel(),e):"uniqueValue"===s.type?(s.getUniqueValueInfos().forEach(function(i){n._createMainLegend(t.layer.getGeometryType(),i.symbol,i.label,e)}),(i=s.getDefaultSymbol())&&this._createMainLegend(t.layer.getGeometryType(),i,s.getDefaultLabel(),e)):"classBreak"===s.type&&(s.getClassBreakInfos().forEach(function(i){n._createMainLegend(t.layer.getGeometryType(),i.symbol,i.label,e)}),i=s.getDefaultSymbol(),this._createMainLegend(t.layer.getGeometryType(),s.getDefaultSymbol(),s.getDefaultLabel(),e)),this._createSubLegend(t.layer.getGeometryType(),s,e)},_createMainLegend:function(t,e,i,n){var s=this,o=L.DomUtil.create("p","egis-control-legend-item"),r=L.DomUtil.create("img","egis-control-legend-icon"),a=L.DomUtil.create("span","egis-control-legend-label"),l=function(e){r.src=s._getIconUrl(t,{symbol:e}),a.innerHTML=i,o.appendChild(r),o.appendChild(a)};if("PictureFillSymbol"===e.getType()){var h=L.DomUtil.create("div");e=e.clone().on("imgload",function(){l.call(s,e),h.appendChild(o)}),n.appendChild(h)}else l.call(this,e),n.appendChild(o)},_createSubLegend:function(t,e,i){var n=this;e.getVisualVariables().forEach(function(s){if(s.stops){s.stops.sort(function(t,e){return t.value>e.value});var o=s.type+"Ramp",r=L.DomUtil.create("div","egis-control-legend-item"),a=L.DomUtil.create("h6","egis-control-legend-subtitle");if(a.innerHTML=s.label,"colorRamp"===o||"opacityRamp"===o){var l=L.DomUtil.create("img","egis-control-legend-color_scoper"),h=L.DomUtil.create("div","egis-control-legend-icon_wrap");l.src=n._getIconUrl(o,{stops:s.stops}),h.style.display="inline-block",h.appendChild(l),s.stops.forEach(function(t,e){var i=L.DomUtil.create("span","egis-control-legend-label");i.innerHTML=0===e?"<"+t.value:e===s.stops.length-1?">"+t.value:t.value,i.style.position="absolute",i.style.top=e/(s.stops.length-1)*(20*s.stops.length-5)+"px",i.style.paddingLeft="25px",i.style.marginTop="-5px",r.appendChild(i)}),r.appendChild(h),i.appendChild(a),i.appendChild(r)}else"sizeRamp"===o&&"point"===t&&(i.appendChild(a),s.stops.forEach(function(t,o){var r,a,l=L.DomUtil.create("p"),h=L.DomUtil.create("img","egis-control-legend-icon"),u=L.DomUtil.create("span","egis-control-legend-label");a="simple"===e.type?e.getSymbol().clone():(e.getUniqueValueInfos?e.getUniqueValueInfos():e.getClassBreakInfos())[0].symbol.setFill(!1).setOutline({width:1,color:"#000",opacity:.8}),r=n._getIconUrl("point",{symbol:a.setSize(t.size)}),u.innerHTML=0==o?"< "+t.value:o===s.stops.length-1?">"+t.value:t.value,h.src=r,l.appendChild(h),l.appendChild(u),i.appendChild(l)}))}})},_getIconUrl:function(t,e){if(this._canvas._ctx.clearRect(0,0,20,20),this._canvas._drawing=!0,this._setCanvasSize(22,22),"polygon"===t){var i=e.symbol.getOutline(),n=20+2*i.width,s=n;this._setCanvasSize(n,s),this._canvas.drawPolygon(o.translateMultiArrToPointArr([[[i.width,s/2],[n-i.width,i.width],[n-i.width,s-i.width],[i.width,s-i.width],[i.width,s/2]]]),e.symbol.options,{_pxBounds:{min:{x:n,y:s}},_clickTolerance:function(){return 0}})}else if("polyline"===t){var r=e.symbol.getWidth();this._setCanvasSize(40,r),this._canvas.drawLine(o.translateMultiArrToPointArr([[[0,r/2],[40,r/2]]]),e.symbol.options)}else if("point"===t){var a=e.symbol.getSize(),r=a+e.symbol.getOutline().width;switch(this._setCanvasSize(r,r),e.symbol.getSymbolStyle()){case"circle":this._canvas.drawCircleSymbol({radius:a/2,center:{x:r/2,y:r/2}},e.symbol.options,{_empty:function(){return!1}});break;case"cross":this._canvas._drawCross({x:r/2,y:r/2},e.symbol.options,{_empty:function(){return!1}});break;case"triangle":this._canvas._drawTriangle({x:r/2,y:r/2},e.symbol.options,{_empty:function(){return!1}});break;case"square":this._canvas._drawSquare({x:r/2,y:r/2},e.symbol.options,{_empty:function(){return!1}})}}else if("colorRamp"===t||"opacityRamp"===t){var l=this._canvas._ctx,h=e.stops.length,s=20*h;this._setCanvasSize(20,s),gradient=l.createLinearGradient(0,0,0,s),e.stops.forEach(function(e,i){gradient.addColorStop(i/h,"colorRamp"===t?e.color:"rgba(144, 144, 144, "+e.opacity+")")}),l.fillStyle=gradient,l.fillRect(0,0,20,s)}return this._canvas._container.toDataURL()}});e.exports.Legend=r,e.exports.legend=function(){return new r}},{"../Geometry/GeometryUtil":58,"../Render/GISCanvas":128,"../Symbol/SimpleMarkerSymbol":147,"./Control":7}],12:[function(t,e,i){"use strict";var n,s=t("./Control");n=s.Control.extend({options:{position:"topleft"},onRemove:function(t){L.DomUtil.remove(this.container)},onAdd:function(t){this._map=t,this._graphicsLayer=egis.layer.graphicsLayer(),this.container=L.DomUtil.create("div","egis-control egis-draw");var e=L.DomUtil.create("div"," egis-draw-section",this.container),i=L.DomUtil.create("div"," egis-draw-toolbar egis-bar egis-draw-toolbar-top",e),n=L.DomUtil.create("a","distanceButtons",i),s=L.DomUtil.create("a","circleButtons",i),o=L.DomUtil.create("a","rectangularButtons",i),r=L.DomUtil.create("a","polygonButtons",i),a=L.DomUtil.create("a","stops",i),l=L.DomUtil.create("a","deleteButtons",i);return n.href="#",n.title="长度测量",L.DomEvent.on(n,"mousedown dblclick ",L.DomEvent.stopPropagation).on(n,"click",L.DomEvent.stop).on(n,"click",this._startMeasurePolyline,this),s.href="#",s.title="测量圆面积",L.DomEvent.on(s,"mousedown dbclick ",L.DomEvent.stopPropagation).on(s,"click",L.DomEvent.stop).on(s,"click",this._startMeasureCircle,this),o.href="#",o.title="测量矩形面积",L.DomEvent.on(o,"mousedown dbclick ",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",this._startMeasureRectangle,this),r.href="#",r.title="测量多边形面积",L.DomEvent.on(r,"mousedown dblclick ",L.DomEvent.stopPropagation).on(r,"click",L.DomEvent.stop).on(r,"click",this._startMeasurePolygon,this),a.href="#",a.title="取消测量",L.DomEvent.on(a,"mousedown dblclick ",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.stop).on(a,"click",this._stopMeasure,this),l.href="#",l.title="删除图层",L.DomEvent.on(l,"mousedown dblclick ",L.DomEvent.stopPropagation).on(l,"click",L.DomEvent.stop).on(l,"click",this._deleteAll,this),this._pointIndx=0,this._distanceIndx=0,this._pointCenterX=0,this._pointCenterY=0,this._area=0,this.container},_startMeasureCircle:function(){this._stopMeasure(),this._drawCircle||(this._drawCircle=new egis.handler.Draw({target:this._map,type:"circle",graphicsLayer:this._graphicsLayer})),this._drawCircle.enable(),this._drawCircle.on("drawend",this._circleMeasure,this)},_circleMeasure:function(t){var e=t.graphic.getGeometry(),i=e.toJSON(),n=Math.abs(this._getArea(i.coordinates[0])).toFixed(2),s=n.toString().length;this._textSymbol=new egis.symbol.TextSymbol({text:n+"m²",font:"6px STXiHei",isCache:!0,color:"red",fill:!0,backgroundColor:"white",opacity:.5}),s>7&&s<10?(n=(n/1e4).toFixed(2),this._textSymbol.setText(n+"万m²")):s>9&&(s>13?(n=(n/1e10).toFixed(2),this._textSymbol.setText(n+"万km²")):(n=(n/1e6).toFixed(2),this._textSymbol.setText(n+"km²"))),this._graphic=new egis.Graphic({geometry:e.center,symbol:this._textSymbol}),this._graphicsLayer.addGraphic(this._graphic)},_startMeasureRectangle:function(){this._stopMeasure(),this._drawRectangle||(this._drawRectangle=new egis.handler.Draw({target:this._map,type:"rectangle",graphicsLayer:this._graphicsLayer})),this._drawRectangle.enable(),this._drawRectangle.on("drawend",this._rectangleMeasure,this)},_rectangleMeasure:function(t){var e=t.graphic.getGeometry(),i=new egis.geometry.Point((e.xmin+e.xmax)/2,(e.ymin+e.ymax)/2),n=e.toJSON(),s=Math.abs(this._getArea(n.coordinates[0])).toFixed(2),o=s.toString().length;this._textSymbol=new egis.symbol.TextSymbol({text:s+"m²",font:"6px STXiHei",isCache:!0,color:"red",fill:!0,backgroundColor:"white",opacity:.5}),o>7&&o<10?(s=(s/1e4).toFixed(2),this._textSymbol.setText(s+"万m²")):o>9&&(o>13?(s=(s/1e10).toFixed(2),this._textSymbol.setText(s+"万km²")):(s=(s/1e6).toFixed(2),this._textSymbol.setText(s+"km²"))),this._graphic=new egis.Graphic({geometry:i,symbol:this._textSymbol}),this._graphicsLayer.addGraphic(this._graphic)},_getArea:function(t){for(var e=0,i=t.length,n=t[i-1][0],s=t[i-1][1],o=0;o<i;o++){var r=t[o][0],a=t[o][1];e+=this._toRadians(r-n)*(2+Math.sin(this._toRadians(s))+Math.sin(this._toRadians(a))),n=r,s=a}return 6371e3*e*6371e3/2},_startMeasurePolygon:function(){this._stopMeasure(),this._drawPolygon||(this._drawPolygon=new egis.handler.Draw({target:this._map,type:"polygon",graphicsLayer:this._graphicsLayer})),this._drawPolygon.enable(),this._drawPolygon.on("drawstart",this._startPolygonMeasure,this),this._drawPolygon.on("draw",this._showPolygonMeasureText,this),this._drawPolygon.on("drawend",this._stopPolygonMeasure,this)},_stopPolygonMeasure:function(){this._pointIndx=0,this._pointCenterX=0,this._pointCenterY=0,this._area=0},_startPolygonMeasure:function(t){var e=t.graphic.getGeometry();this._pointCenterX=this._pointCenterX+e.getPoint(0,this._pointIndx).x,this._pointCenterY=this._pointCenterY+e.getPoint(0,this._pointIndx).y,this._pointIndx++},_showPolygonMeasureText:function(t){if(this._pointIndx>0){var e=t.graphic.getGeometry();this._polygonPointX=e.getPoint(0,this._pointIndx).x,this._polygonPointY=e.getPoint(0,this._pointIndx).y,this._polygonFirstPointX=e.getPoint(0,0).x,this._polygonFirstPointY=e.getPoint(0,0).y,this._pointCenterX=this._pointCenterX+this._polygonPointX,this._pointCenterY=this._pointCenterY+this._polygonPointY,this._polygonPointX1=e.getPoint(0,this._pointIndx-1).x,this._polygonPointY1=e.getPoint(0,this._pointIndx-1).y,this._polygonPointToRadians=this._toRadians(this._polygonPointX-this._polygonPointX1),this._polygonPointToRadians1=2+Math.sin(this._toRadians(this._polygonPointY))+Math.sin(this._toRadians(this._polygonPointY1));var i=new egis.geometry.Point(this._pointCenterX/(this._pointIndx+1),this._pointCenterY/(this._pointIndx+1));if(this._textSymbol=new egis.symbol.TextSymbol({text:"",font:"6px STXiHei",isCache:!0,color:"red",fill:!0,backgroundColor:"white",opacity:.5}),this._pointIndx<2){this._area=this._area+this._polygonPointToRadians*this._polygonPointToRadians1;var n=0}else this._pointIndx<3?(this._graphicsLayer.removeGraphic(this._graphic),this._area=this._area+this._polygonPointToRadians*this._polygonPointToRadians1+this._toRadians(this._polygonFirstPointX-this._polygonPointX)*(2+Math.sin(this._toRadians(this._polygonPointY))+Math.sin(this._toRadians(this._polygonFirstPointY))),n=Math.abs(6371e3*this._area*6371e3/2).toFixed(2)):(this._graphicsLayer.removeGraphic(this._graphic),this._area=this._area+this._polygonPointToRadians*this._polygonPointToRadians1+this._toRadians(this._polygonFirstPointX-this._polygonPointX)*(2+Math.sin(this._toRadians(this._polygonPointY))+Math.sin(this._toRadians(this._polygonFirstPointY)))-this._toRadians(this._polygonFirstPointX-this._polygonPointX1)*(2+Math.sin(this._toRadians(this._polygonPointY1))+Math.sin(this._toRadians(this._polygonFirstPointY))),n=Math.abs(6371e3*this._area*6371e3/2).toFixed(2));var s=n.toString().length;this._textSymbol.setText(n+"m²"),s>7&&s<10?(n=(n/1e4).toFixed(2),this._textSymbol.setText(n+"万m²")):s>9&&(s>13?(n=(n/1e10).toFixed(2),this._textSymbol.setText(n+"万km²")):(n=(n/1e6).toFixed(2),this._textSymbol.setText(n+"km²"))),this._pointIndx++,this._graphic=new egis.Graphic({geometry:i,symbol:this._textSymbol}),this._graphicsLayer.addGraphic(this._graphic)}},_toRadians:function(t){return t/180*Math.PI},_startMeasurePolyline:function(){this._pointIndx=0,this._stopMeasure(),this._drawPolyline||(this._drawPolyline=new egis.handler.Draw({target:this._map,type:"polyline",graphicsLayer:this._graphicsLayer})),this._drawPolyline.enable(),this._drawPolyline.on("drawstart",this._startPolylineMeasure,this),this._drawPolyline.on("draw",this._showPolylineMeasureText,this),this._drawPolyline.on("drawend",this._stopPolylineMeasure,this)},_startPolylineMeasure:function(t){var e=t.graphic.getGeometry(),i=new egis.geometry.Point(e.getPoint(0,this._pointIndx).x,e.getPoint(0,this._pointIndx).y);this._pointIndx++,this._textSymbol=new egis.symbol.TextSymbol({text:"起点",font:"6px STXiHei",isCache:!0,offset:[-10,-10],color:"red",fill:!0,backgroundColor:"white",opacity:.5}),this._graphic1=new egis.Graphic({geometry:i,symbol:this._textSymbol}),this._graphicsLayer.addGraphic(this._graphic1)},_showPolylineMeasureText:function(t){if(this._pointIndx>0){var e=t.graphic.getGeometry(),i=new egis.geometry.Point(e.getPoint(0,this._pointIndx).x,e.getPoint(0,this._pointIndx).y),n=e.getPoint(0,this._pointIndx).toLatLng(),s=e.getPoint(0,this._pointIndx-1).toLatLng(),o=this._map.distance(n,s);this._distanceIndx=this._distanceIndx+o,this._polylineDistance=this._distanceIndx.toFixed(2),this._polylineDistanceLength=this._polylineDistance.toString().length,this._pointIndx++,this._distanceString=this._polylineDistance+"m",this._textSymbol=new egis.symbol.TextSymbol({text:this._distanceString,font:"6px STXiHei",isCache:!0,offset:[-10,-10],color:"red",fill:!0,backgroundColor:"white",opacity:.5}),this._graphic=new egis.Graphic({geometry:i,symbol:this._textSymbol}),this._graphicsLayer.addGraphic(this._graphic),this._polylineDistanceLength>6&&(this._polylineDistanceLength>10?(this._polylineDistance=(this._polylineDistance/1e7).toFixed(2),this._distanceString=this._polylineDistance+"万km",this._textSymbol.setText(this._distanceString)):(this._polylineDistance=(this._polylineDistance/1e3).toFixed(2),this._distanceString=this._polylineDistance+"km",this._textSymbol.setText(this._distanceString)))}},_stopPolylineMeasure:function(){this._pointIndx>1&&(this._graphicsLayer.removeGraphic(this._graphic),this._textSymbol.setText("总长"+this._distanceString),this._graphicsLayer.addGraphic(this._graphic)),this._pointIndx=0,this._distanceIndx=0},_stopMeasure:function(){this._drawPolyline&&this._drawPolyline.enabled()&&(this._drawPolyline.disable(),1==this._pointIndx?this._graphicsLayer.removeGraphic(this._graphic1):(this._graphicsLayer.removeGraphic(this._graphic),this._textSymbol.setText("总长"+this._distanceString),this._graphicsLayer.addGraphic(this._graphic)),this._distanceIndx=0,this._pointIndx=0),this._drawCircle&&this._drawCircle.enabled()&&this._drawCircle.disable(),this._drawPolygon&&this._drawPolygon.enabled()&&(2==this._pointIndx&&this._graphicsLayer.removeGraphic(this._graphic),this._area=0,this._pointCenterX=0,this._pointCenterY=0,this._drawPolygon.disable()),this._drawRectangle&&this._drawRectangle.enabled()&&this._drawRectangle.disable(),this._pointIndx=0},_deleteAll:function(){this._stopMeasure(),this._graphicsLayer.clearGraphics()}}),e.exports.MeasureControl=n,e.exports.measureControl=function(t){return new n(t)}},{"./Control":7}],13:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"bottomright",color:"#fff",fontSize:12},initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){var e=L.DomUtil.create("div","egis-control-MousePosition"),i=this.options;return this._containerNode=e,e.style.color=i.color,e.style.fontSize=i.fontSize+"px",t.on("mousemove",this._updateContent,this),e},_updateContent:function(t){
var e=this._containerNode,i=t.latlng,n=i?i.lng.toFixed(4)+","+i.lat.toFixed(4):"";if("string"==typeof n)e.innerHTML=n;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(n)}},onRemove:function(t){t.off("mousemove",this._updateContent,this)},setFontColor:function(t){this._containerNode.style.color=t},setFontSize:function(t){this._containerNode.style.fontSize=t+"px"}});L.Map.mergeOptions({mousePositionControl:!1}),L.Map.addInitHook(function(){var t=this;t.options.mousePositionControl&&(t.mousePositionControl=(new s).addTo(t))}),e.exports.MousePosition=s,e.exports.mousePosition=function(t){return new s(t)}},{"./Control":7}],14:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-3,zoomLevelFixed:!0,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!0,width:150,height:150,collapsedWidth:20,collapsedHeight:20,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1,opacity:0,fillOpacity:0},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"隐藏",showText:"显示"},mapOptions:{zoomControl:!1}},initialize:function(t,e){L.Util.setOptions(this,e),this.options.aimingRectOptions.clickable=!1,this._layer=t},onAdd:function(t){this.options.width<=50&&(this.options.width=50),this.options.width>=250&&(this.options.width=250),this.options.height<=50&&(this.options.height=50),this.options.height>=250&&(this.options.height=250),this._mainMap=t,this._container=L.DomUtil.create("div","egis-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",L.DomEvent.disableClickPropagation(this._container),L.DomEvent.on(this._container,"mousewheel",L.DomEvent.stopPropagation);var e={scaleControl:!1,attributionControl:!1,attrControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:t.options.crs,renderer:new egis.renderer.GISCanvas};if(e=L.Util.extend(this.options.mapOptions,e),this._miniMap=new egis.Map(this._container,e),Array.isArray(this._layer))for(var i in this._layer)this._miniMap.addLayer(this._layer[i]);return this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(L.Util.bind(function(){this._aimingRect=L.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)},this)),this._container},addTo:function(t){L.Control.prototype.addTo.call(this,t);var e=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},addNormalLayer:function(t){if(Array.isArray(t))for(var e in t)this._miniMap.addLayer(t[e]);else this._miniMap.addLayer(t);return this},changeLayer:function(t){if(Array.isArray(t))for(var e in t)this._miniMap.removeLayer(t[e]);else this._miniMap.removeLayer(t);return this},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this.options.strings.hideText,"egis-control-minimap-toggle-display egis-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_createButton:function(t,e,i,n,s,o){var r=L.DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e;var a=L.DomEvent.stopPropagation;return L.DomEvent.on(r,"click",a).on(r,"mousedown",a).on(r,"dblclick",a).on(r,"click",L.DomEvent.preventDefault).on(r,"click",s,o),r},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1},_onMainMapMoved:function(t){this._miniMapMoving&&(this._miniMapMoving=!1)},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),i=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:i,ne:n}}},_onMiniMapMoving:function(t){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),n=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=n,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t}});L.Map.mergeOptions({}),L.Map.addInitHook(function(){}),e.exports.OverViewMap=s,e.exports.overViewMap=function(t){return new s(t)}},{"./Control":7}],15:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"topleft",panOffset:250},onAdd:function(t){var e=this,i=L.DomUtil,n="egis-control-pan",s=i.create("div",n),o=e.options.panOffset;s.style.margin="10px 0 10px 6px";var r=e._panButton,a=L.Point;r("Up",n+"-up",s,t,new a(0,-o)),r("Left",n+"-left",s,t,new a(-o,0)),r("Right",n+"-right",s,t,new a(o,0)),r("Down",n+"-down",s,t,new a(0,o));var l=i.get(t._controlCorners.topleft);return i.hasClass(l,"has-egis-pan-control")||i.addClass(l,"has-egis-pan-control"),s},onRemove:function(t){var e=L.DomUtil,i=e.get(t._controlCorners.topleft);e.hasClass(i,"has-egis-pan-control")&&e.removeClass(i,"has-egis-pan-control")},_panButton:function(t,e,i,n,s){var o=L.DomUtil.create("div",e+"-wrap",i),r=L.DomUtil.create("a",e,o);r.href="#",r.title=t;var a=L.DomEvent;return a.on(r,"click",a.stopPropagation).on(r,"click",a.preventDefault).on(r,"click",function(){n.panBy(s)},n).on(r,"dblclick",a.stopPropagation),r}});L.Map.mergeOptions({panControl:!1}),L.Map.addInitHook(function(){var t=this;t.options.panControl&&(t.panControl=new s,t.addControl(t.panControl))}),e.exports.PanControl=s,e.exports.panControl=function(){return new s}},{"./Control":7}],16:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!1},onAdd:function(t){this.options.maxWidth<100&&(this.options.maxWidth=100),this.options.maxWidth>400&&(this.options.maxWidth=400);var e=L.DomUtil.create("div","egis-control-scale"),i=this.options;return this._addScales(i,"egis-control-scale-line",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){var e=this;t.off(e.options.updateWhenIdle?"moveend":"move",e._update,e)},_addScales:function(t,e,i){var n=L.DomUtil,s=n.create;t.metric&&(this._mScale=s("div",e,i)),t.imperial&&(this._iScale=s("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){var e=this,i=e.options;i.metric&&t&&e._updateMetric(t),i.imperial&&t&&e._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,s=3.2808399*t,o=this,r=o._getRoundNum;s>5280?(e=s/5280,i=r(e),this._updateScale(o._iScale,i+" mi",i/e)):(n=r(s),this._updateScale(o._iScale,n+" ft",n/s))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}});L.Map.addInitHook(function(){this.options.scaleControl&&(new s).addTo(this)}),e.exports.Scale=s,e.exports.scale=function(t){return new s(t)}},{"./Control":7}],17:[function(t,e,n){"use strict";function s(){var t={};t.query=location.search.substr(1),t.parsed=decodeURIComponent(t.query),t.data=t.parsed.split("&"),t.result={};for(var e=0;e<t.data.length;e++){var i=t.data[e].split("=");t.result[i[0]]=i[1]}return t.result}function o(t){function e(t){l.Send.lat=t.lat,l.Send.lng=t.lng}var i=L.icon({iconUrl:"assets/images/ShareLocation/IconMapSend.png",iconBaseUrl:"assets/images/ShareLocation/IconMapSend.png",iconSize:[32,32],iconAnchor:[25,50],popupAnchor:[-20,-50]});void 0!=l.Send.Marker&&l.Send.Marker._latlng?l.Send.Marker.setLatLng(t.getCenter()):(i.options.iconUrl=l.url+i.options.iconBaseUrl,l.Send.Marker=L.marker(t.getCenter(),{draggable:!0,icon:i}),e(t.getCenter()),l.Send.Marker.on("dragend",function(t){L.LocShare.Send.returnShareLocation(),e(t.target.getLatLng()),l.Send.Marker.openPopup()}),l.Send.Marker.bindPopup(l.Send.Popup),l.Send.Marker.addTo(t)),l.Send.Marker.openPopup(),l.Send.Marker.id="SendMarker"}var r=t("./Control"),a=t("./../Util"),l=L.LocShare={map:void 0,url:"",Send:{Marker:{},Popup:function(){return L.popup().setContent('<div style="padding-top:10px"><input id="sendText" type="text" style="border-color:#a7a7a7;border:solid;border-width:2px;border-radius:5px;height:30px;" size="30" onkeyup="L.LocShare.Send.UpdateMessage( this )" placeholder="请输入要传递的信息"/></div><div style="height:35px;"><button id="closeBtn" style="border-style:solid;border-radius:5px;border-color:#3d94f6;float:right;color:white;background-color:#3d94f6;height:35px;font-size:15px;line-height:3px;margin:5px;"onclick="L.LocShare.Send.closeShareLocation()">取消</button><button id="getUrlBtn" style="border-style:solid;border-radius:5px;border-color:#3d94f6;float:right;color:white;background-color:#3d94f6;height:35px;font-size:15px;line-height:3px;margin:5px;"onclick="L.LocShare.Send.copyPrompt()">分享</button></div></div>')}()},Receive:{Marker:{},Popup:function(){return L.popup()}()}},h=r.Control.extend({options:{position:"topleft",title:"位置分享"},onAdd:function(t){l.map=t,l.url=this._detectIconPath();var e=L.DomUtil.create("div","egis-bar egis-control"),i=s();return isFinite(i.lat)&&isFinite(i.lng)?(this.link=L.DomUtil.create("a","egis-bar-recyle",e),this.link.title="取消"):(this.link=L.DomUtil.create("a","egis-bar-part-share",e),this.link.title=this.options.title),this.link.href="#",L.DomEvent.on(this.link,"click",this._click,this),L.DomEvent.on(this.link,"dblclick",this._dblclick,this),e},_dblclick:function(t){return L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),!1},_click:function(t){if(L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),document.getElementsByClassName("egis-bar-recyle")[0]){var e=s();if(isFinite(e.lat)&&isFinite(e.lng)){for(i in l.map._layers)if("ReceiveMarker"==l.map._layers[i].id){l.map.removeLayer(l.map._layers[i]),l.Receive.Marker=void 0;break}for(i in l.map._layers)if("SendMarker"==l.map._layers[i].id){l.map.removeLayer(l.map._layers[i]),l.Send.Marker=void 0;break}document.getElementsByClassName("egis-bar-recyle")[0].className="egis-bar-part-share",document.getElementsByClassName("egis-bar-part-share")[0].title="位置共享"}else l.Send.closeShareLocation()}else l.Send.appendObj=this.options,o(this._map),document.getElementsByClassName("egis-bar-part-share")[0].className="egis-bar-recyle",document.getElementsByClassName("egis-bar-recyle")[0].title="取消";return!1},_detectIconPath:function(){return egis.baseUrl}});L.Map.mergeOptions({shareLocation:!1}),L.Map.addInitHook(function(){this.options.shareLocationControl&&(this.shareLocation=new h,this.addControl(this.shareLocation));var t=function(t){var e=L.icon({iconUrl:"assets/images/ShareLocation/IconMapReceive.png",iconBaseUrl:"assets/images/ShareLocation/IconMapReceive.png",iconSize:[32,32],iconAnchor:[25,50],popupAnchor:[-10,-50]});l.url=l.Receive.detectIconPath();var i=s();isFinite(i.lat)&&isFinite(i.lng)&&(l.Receive.lat=+i.lat,l.Receive.lng=+i.lng,e.options.iconUrl=l.url+e.options.iconBaseUrl,l.Receive.Marker=L.marker([l.Receive.lat,l.Receive.lng],{icon:e}),l.Receive.Marker.id="ReceiveMarker",void 0==i.M||"undefined"==i.M||(l.Receive.message=i.M,l.Receive.Marker.bindPopup(l.Receive.message)),l.Receive.Marker.addTo(t))};this.whenReady(function(){t(this)},this)}),l.Send.UpdateMessage=function(t){var e=encodeURIComponent(t.value);l.Send.Message=e},e.exports.ShareLocation=h,e.exports.shareLocation=function(){return new h},l.Send.copyPrompt=function(){var t="",e=function(){var t="";if(l.Send.appendObj){for(var e in l.Send.appendObj)l.Send.appendObj.hasOwnProperty(e)&&(t+=e+"="+l.Send.appendObj[e]+"&");return t}return null};if(void 0==l.Send.Message||null==l.Send.Message||""==l.Send.Message){t=location.origin+location.pathname+"?lat="+l.Send.lat+"&lng="+l.Send.lng;var i=e();i&&(t+="&"+i)}else{t=location.origin+location.pathname+"?lat="+l.Send.lat+"&lng="+l.Send.lng+"&M="+l.Send.Message;var i=e();i&&(t+="&"+i)}l.Send.Copy=L.popup().setContent('<div style="padding-top:15px"><input id="copyText" type="text" style="border-color:#a7a7a7;border:solid;width:300px;border-width:2px;border-radius:5px;height:30px;" size="30"  value="'+t+'" /></div><div style="height:35px;"><span style="position: absolute;font-size: 14px;margin-top: 10px;">请按【Ctrl+C】复制至剪贴板！</span><button id="closeBtn" style="border-style:solid;border-radius:5px;border-color:#3d94f6;float:right;color:white;background-color:#3d94f6;height:35px;font-size:15px;line-height:3px;margin:5px;"onclick="L.LocShare.Send.closeShareLocation();">结束</button><button id="closeBtn" style="border-style:solid;border-radius:5px;border-color:#3d94f6;float:right;color:white;background-color:#3d94f6;height:35px;font-size:15px;line-height:3px;margin:5px;"onclick="L.LocShare.Send.returnShareLocation()">返回</button></div></div>'),l.Send.Marker.bindPopup(l.Send.Copy),l.Send.Marker.openPopup(),document.getElementById("copyText").select()},l.Send.closeShareLocation=function(){l.Send.Marker&&(l.map.removeLayer(l.Send.Marker),l.Send.Marker=void 0,document.getElementsByClassName("egis-bar-recyle")[0].className="egis-bar-part-share",document.getElementsByClassName("egis-bar-part-share")[0].title="位置共享")},l.Receive.closeShareLocation=function(){l.Receive.Marker&&(l.map.removeLayer(l.Receive.Marker),l.Receive.Marker=void 0)},l.Send.returnShareLocation=function(){var t=l.Send.Message;a.objectHandle.isUndefined(t)&&(t=""),l.Send.Marker.bindPopup(l.Send.Popup),l.Send.Marker.openPopup(),document.getElementById("sendText").value=decodeURIComponent(t)},l.Receive.detectIconPath=function(){return egis.baseUrl}},{"./../Util":154,"./Control":7}],18:[function(t,e,i){"use strict";var n=t("./Control"),s=n.Control.extend({options:{offsetX:0,offsetY:0,position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="egis-control-zoom",i=L.DomUtil.create("div",e+" egis-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,s){var o=L.DomUtil.create("a",i,n);return o.innerHTML=t,o.href="#",o.title=e,L.DomEvent.on(o,"mousedown dblclick",L.DomEvent.stopPropagation).on(o,"click",L.DomEvent.stop).on(o,"click",s,this).on(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="egis-disabled";L.DomUtil.removeClass(this._zoomInButton,e),L.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&L.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&L.DomUtil.addClass(this._zoomInButton,e)}});L.Map.mergeOptions({}),L.Map.addInitHook(function(){}),e.exports.Zoom=s,e.exports.zoom=function(){return new s}},{"./Control":7}],19:[function(t,e,i){"use strict";var n=t("./Control"),s=function(){var t=L.Draggable.extend({options:{position:"topleft"},initialize:function(t,e,i){var n=this;L.Draggable.prototype.initialize.call(n,t,t),n._element=t,n._stepHeight=e,n._knobHeight=i,n.on("predrag",function(){var t=this;t._newPos.x=0,t._newPos.y=t._adjust(t._newPos.y)},n)},_adjust:function(t){var e=Math,i=e.round(this._toValue(t));return i=e.max(0,e.min(this._maxValue,i)),this._toY(i)},_toY:function(t){return this._k*t+this._m},_toValue:function(t){return(t-this._m)/this._k},setSteps:function(t){var e=this,i=t*e._stepHeight;return e._maxValue=t-1,e._k=-e._stepHeight,e._m=i-(e._stepHeight+e._knobHeight)/2,this},setPosition:function(t){return L.DomUtil.setPosition(this._element,L.point(0,this._adjust(t))),this},setValue:function(t){this.setPosition(this._toY(t))},getValue:function(){var t=this;return t._toValue(L.DomUtil.getPosition(t._element).y)}});return n.Control.extend({options:{position:"topleft",stepHeight:6,knobHeight:4,styleNS:"egis-control-zoomslider"},onAdd:function(e){var i=this;return i._map=e,i._ui=i._createUI(),i._knob=new t(i._ui.knob,i.options.stepHeight,i.options.knobHeight),e.whenReady(i._initKnob,i).whenReady(i._initEvents,i).whenReady(i._updateSize,i).whenReady(i._updateKnobValue,i).whenReady(i._updateDisabled,i),i._ui.bar},onRemove:function(t){var e=this;t.off("zoomlevelschange",e._updateSize,e).off("zoomend zoomlevelschange",e._updateKnobValue,e).off("zoomend zoomlevelschange",e._updateDisabled,e)},_createUI:function(){var t={},e=this.options.styleNS,i=L.DomUtil.create;t.bar=i("div",e+" egis-bar"),t.zoomIn=this._createZoomBtn("in","top",t.bar),t.wrap=i("div",e+"-wrap egis-bar-part",t.bar),t.zoomOut=this._createZoomBtn("out","bottom",t.bar),t.body=i("div",e+"-body",t.wrap),t.knob=i("div",e+"-knob"),t.knob.appendChild(document.createElement("span"));var n=L.DomEvent,s=n.disableClickPropagation;return s(t.bar),s(t.knob),t},_createZoomBtn:function(t,e,i){var n=this.options.styleNS+"-"+t+" egis-bar-part egis-bar-part-"+e,s=L.DomUtil.create("a",n,i);return s.href="#",s.title="Zoom "+t,L.DomEvent.on(s,"click",L.DomEvent.preventDefault),s},_initKnob:function(){this._knob.enable(),this._ui.body.appendChild(this._ui.knob)},_initEvents:function(){var t=this;t._map.on("zoomlevelschange",t._updateSize,t).on("zoomend zoomlevelschange",t._updateKnobValue,t).on("zoomend zoomlevelschange",t._updateDisabled,t);var e=L.DomEvent;e.on(t._ui.body,"click",t._onSliderClick,t),e.on(t._ui.zoomIn,"click",t._zoomIn,t),e.on(t._ui.zoomOut,"click",t._zoomOut,t),t._knob.on("dragend",t._updateMapZoom,t)},_onSliderClick:function(t){var e=t.touches,i=this,n=e&&1===e.length?e[0]:t,s=L.DomEvent.getMousePosition(n,i._ui.body).y;i._knob.setPosition(s),i._updateMapZoom()},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_zoomLevels:function(){var t=this._map.getMaxZoom()-this._map.getMinZoom()+1;return t<1/0?t:0},_toZoomLevel:function(t){return t+this._map.getMinZoom()},_toValue:function(t){return t-this._map.getMinZoom()},_updateSize:function(){var t=this,e=t._zoomLevels();t.options.styleNS;t._ui.body.style.height=t.options.stepHeight*e+"px",t._knob.setSteps(e)},_updateMapZoom:function(){this._map.setZoom(this._toZoomLevel(this._knob.getValue()))},_updateKnobValue:function(){this._knob.setValue(this._toValue(this._map.getZoom()))},_updateDisabled:function(){var t=this,e=t._map,i=e.getZoom(),n=t.options.styleNS+"-disabled",s=L.DomUtil,o=s.removeClass,r=t._ui;o(r.zoomIn,n),o(r.zoomOut,n);var a=s.addClass;i===e.getMinZoom()&&a(r.zoomOut,n),i===e.getMaxZoom()&&a(r.zoomIn,n)}})}();L.Map.mergeOptions({zoomSliderControl:!1}),L.Map.addInitHook(function(){this.options.zoomSliderControl&&(this.zoomsliderControl=new s,this.addControl(this.zoomsliderControl))}),e.exports.ZoomSlider=s,e.exports.zoomSlider=function(t){return new s(t)}},{"./Control":7}],20:[function(t,e,i){"use strict";var n=(t("../Geometry/Point").Point,t("../Geometry/Polyline").Polyline,t("../Geometry/Polygon").Polygon,t("../Geometry/MultiPoint").MultiPoint,L.Evented.extend({options:{uint8array:void 0},initialize:function(){this._array=new Uint8Array},addArray:function(t){var e=this._array.length+t.length;if(this._array.length>0){var i=this._array;this._array=new Uint8Array(e);for(var n=0,s=0;n<this._array.length;n++,s=e-n)n<i.length?this._array[n]=i[n]:this._array[n]=t[s]}else this._array=t},getArray:function(){return this._array}}));e.exports.ByteArray=n,e.exports.byteArray=function(t){return new n(t)}},{"../Geometry/MultiPoint":59,"../Geometry/Point":61,"../Geometry/Polygon":62,"../Geometry/Polyline":63}],21:[function(t,e,i){"use strict";var n=t("./Snap").Snap,s=t("./FeatureSnapEnum").FeatureSnapEnum,o=n.extend({options:{snapMode:s.eoHitEdge,snapLayers:[],nosnapLayers:[],tolerance:5,offsetX:0,offsetY:0},initialize:function(t){L.setOptions(this,t),n.prototype.initialize.call(this,null,this.options)},setOffset:function(t){this.options.offsetX=t.x,this.options.offsetY=t.y},initFeatures:function(t){this._geos=t},setLayersData:function(t){this._layersData=t},snap:function(t){this._reGeo={isSnap:!1},this._distmp=0;for(var e=0;e<this._geos.length;e++)this.snapTest(t,this._geos[e]);return this._reGeo}});e.exports.DeviceSnapAgent=o,e.exports.deviceSnapAgent=function(t){return new o(t)}},{"./FeatureSnapEnum":25,"./Snap":30}],22:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/get-iterator"),o=n(s),r=t("babel-runtime/core-js/map"),a=n(r),l=t("../Layers/GraphicsLayer").GraphicsLayer,h=t("../Features/Graphic").Graphic,u=t("../Geometry/Point").Point,c=t("../Geometry/Extent").Extent,p=t("../Symbol/SimpleMarkerSymbol").SimpleMarkerSymbol,d=t("./DeviceSnapAgent").DeviceSnapAgent,y=t("./GridSnapAgent").GridSnapAgent,f=(t("./FeatureCache").FeatureCache,t("./SpatialParam").SpatialParam),_=L.Handler.extend({options:{snapOptions:{EditorLayer:102001,target:void 0}},initialize:function(t){L.Util.setOptions(this,t),this.options.target&&(this._map=this.options.target,this._editorlayer=(new l).addTo(this._map),this.createEditorEnvironment(),this.initFeatureCache(),this.snaplist=new a.default,this.Stack=new a.default,this.tolerance=this.options.tolerance)},snaplist:new a.default,initFeatureCache:function(){if(!this._featureCache&&this._map)for(var t=0;t<this._map.getLayers().length;t++)if("featuresLayer"==this._map.getLayers()[t].getType()){this._featureCache=this._map.getLayers()[t].dataSource;break}},getSelectionSet:function(){return this._map.getSelectionSet()},getFeatureCache:function(){return this._featureCache},_dataChange:function(t){try{this.createEditorEnvironment()}catch(t){}},delSnapbyKey:function(t){this.snaplist.get(t)instanceof y&&this._gridSnapGraphic&&this._editorlayer.removeGraphics([this._gridSnapGraphic]),this.snaplist.get(t)instanceof d&&this._deviceSnapGraphic&&this._editorlayer.removeGraphics([this._deviceSnapGraphic]),this.snaplist.delete(t)},addSnapAgent:function(t){this.snaplist.has(t.options.snapKey)||(t.options.target||(t.options.target=this._map),this.snaplist.set(t.options.snapKey,t))},snap:function(t){return{reGeoDevice:this.snapDevice(t),reGeoGrid:this.snapGrid(t)}},snapDevice:function(t){var e=new a.default,i=!0,n=!1,s=void 0;try{for(var r,l=(0,o.default)(this.snaplist);!(i=(r=l.next()).done);i=!0){var y=r.value;if(y[1]instanceof d){var _=this._map.latLngToLayerPoint(t.latlng),m=new L.Point(_.x+y[1].options.tolerance,_.y+y[1].options.tolerance),g=this._map.layerPointToLatLng(m),v=new L.Point(_.x-y[1].options.tolerance,_.y-y[1].options.tolerance),b=this._map.layerPointToLatLng(v),x=Math.min(g.lng,b.lng),w=Math.max(g.lng,b.lng),S=Math.min(g.lat,b.lat),P=Math.max(g.lat,b.lat),T=new c(x,S,w,P);this._deviceSnapGraphic&&this._editorlayer.removeGraphics([this._deviceSnapGraphic]),t.latlng=new L.LatLng(t.latlng.lat,t.latlng.lng);var C=new f({geometry:T,lyrIds:y[1].options.snapLayers}),M=this._featureCache.search(C);y[1].initFeatures(M);var k=y[1].snap(t);if(k.isSnap){e.set(y[0],k);var E=k.geometry,D=new u(E.lng?E.lng:E.x,E.lat?E.lat:E.y),I=k.geotype;switch(I){case 0:I="square";break;case 1:I="triangle";break;case 2:I="crosssquare";break;case 3:I="linesquare"}var B=new p({scale:1,fill:!1,opacity:.7,offset:[0,0],isCache:!1,stroke:!0,outline:{opacity:1,width:1},size:10,symbolStyle:I});this._deviceSnapGraphic=new h({geometry:D,symbol:B,interactive:!1,draggable:!1}),this._editorlayer.addGraphic(this._deviceSnapGraphic)}else this._deviceSnapGraphic&&this._editorlayer.removeGraphics([this._deviceSnapGraphic])}}}catch(t){n=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}return e},filterbyQuadtree:function(t){},snapGrid:function(t){var e=new a.default,i=!0,n=!1,s=void 0;try{for(var r,l=(0,o.default)(this.snaplist);!(i=(r=l.next()).done);i=!0){var c=r.value;if(c[1]instanceof y){this._gridSnapGraphic&&this._editorlayer.removeGraphics([this._gridSnapGraphic]);var d=c[1].snap(t);if(d.isGridSnap){e.set(c[0],d);var f=new u(d.geometry.lng,d.geometry.lat),_=new p({scale:1,fill:!1,opacity:.7,offset:[0,0],isCache:!0,stroke:!0,size:10,outline:{width:1,color:"#ff0000",opacity:1},symbolStyle:"circle"});this._gridSnapGraphic=new h({geometry:f,symbol:_,interactive:!1,draggable:!1}),this._editorlayer.addGraphic(this._gridSnapGraphic)}else this._gridSnapGraphic&&this._editorlayer.removeGraphics([this._gridSnapGraphic])}}}catch(t){n=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(n)throw s}}return e},createEditorEnvironment:function(){},queryRenderedFeatures:function(t,e){return this._map.queryRenderedFeatures(t,e)},queryRenderedFeaturesbyAttr:function(t,e){return this._map.queryRenderedFeaturesbyAttr(t,e)},queryRenderedeleSymbolFeatures:function(t,e){return this._map.queryRenderedeleSymbolFeatures(t,e)}});e.exports.Editor=_,e.exports.editor=function(t){return new _(t)}},{"../Features/Graphic":36,"../Geometry/Extent":54,"../Geometry/Point":61,"../Layers/GraphicsLayer":103,"../Symbol/SimpleMarkerSymbol":147,"./DeviceSnapAgent":21,"./FeatureCache":24,"./GridSnapAgent":27,"./SpatialParam":31,"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/map":165}],23:[function(require,module,exports){"use strict";var Point=require("../Geometry/Point").Point,Polyline=require("../Geometry/Polyline").Polyline,Polygon=require("../Geometry/Polygon").Polygon,MultiPoint=require("../Geometry/MultiPoint").MultiPoint,Feature=L.Evented.extend({options:{id:void 0,geometry:void 0,attribute:void 0},initialize:function(t){L.setOptions(this,t),this.options.id?this.id=this.options.id:this.id=this.getGuid(),this.geometry=this.options.geometry,this.attribute=this.options.attribute},id:"",geometry:null,attribute:void 0,_S4:function _S4(){return(1048576*(1+Number(eval(window.atob("TWF0aC5yYW5kb20oKQ=="))))|0).toString(16).substring(1)},getGuid:function(){return this._S4()+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+this._S4()+this._S4()},fromJSON:function(t){var e;if("string"==typeof t)try{e=JSON.parse(jsonStr)}catch(t){return{status:"转化失败",errorContent:"字符串格式不正确"}}else e=t;return this._fromJSON(e)},_fromJSON:function(t){var e=t.geometry,i=e.coordinates,n=t.properties,s=new Feature;switch(e.type){case"Point":new Point(i);break;case"LineString":new Polyline(i);break;case"Polygon":new Polygon(i);break;case"MultiPoint":new MultiPoint(i);break;case"MultiLineString":new Polyline(i);break;case"MultiPolygon":}return s._geometry=e,s._id="",s._attribute=n,s},destroy:function(){this.attribute=null,this.geometry=null}});module.exports.Feature=Feature,module.exports.feature=function(t){return new Feature(t)}},{"../Geometry/MultiPoint":59,"../Geometry/Point":61,"../Geometry/Polygon":62,"../Geometry/Polyline":63}],24:[function(require,module,exports){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _defineProperty(t,e,i){return e in t?(0,_defineProperty3.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,_from2.default)(t)}function convertfromfile(t,e){return new FeatureCache(t)}
var _defineProperty2=require("babel-runtime/core-js/object/define-property"),_defineProperty3=_interopRequireDefault(_defineProperty2),_isIterable2=require("babel-runtime/core-js/is-iterable"),_isIterable3=_interopRequireDefault(_isIterable2),_iterator35=require("babel-runtime/core-js/symbol/iterator"),_iterator36=_interopRequireDefault(_iterator35),_symbol=require("babel-runtime/core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_from=require("babel-runtime/core-js/array/from"),_from2=_interopRequireDefault(_from),_create=require("babel-runtime/core-js/object/create"),_create2=_interopRequireDefault(_create),_stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_sinh=require("babel-runtime/core-js/math/sinh"),_sinh2=_interopRequireDefault(_sinh),_keys=require("babel-runtime/core-js/object/keys"),_keys2=_interopRequireDefault(_keys),_getIterator2=require("babel-runtime/core-js/get-iterator"),_getIterator3=_interopRequireDefault(_getIterator2),_map=require("babel-runtime/core-js/map"),_map2=_interopRequireDefault(_map),_L$Class$extend,_slicedToArray=function(){function t(t,e){var i=[],n=!0,s=!1,o=void 0;try{for(var r,a=(0,_getIterator3.default)(t);!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if((0,_isIterable3.default)(Object(e)))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator36.default?function(t){return typeof t}:function(t){return t&&"function"==typeof _symbol2.default&&t.constructor===_symbol2.default&&t!==_symbol2.default.prototype?"symbol":typeof t},SpatialQuery=require("./SpatialQuery").SpatialQuery,Feature=require("./Feature").Feature,GISService=require("../Task/GISService").GISService,VectorWorker=require("../workers/VectorWorker").VectorWorker,TimerWorker=require("../workers/TimerWorker").TimerWorker,Point=require("../Geometry/Point").Point,Polyline=require("../Geometry/Polyline").Polyline,Polygon=require("../Geometry/Polygon").Polygon,Circle=require("../Geometry/Circle").Circle,MultiPoint=require("../Geometry/MultiPoint").MultiPoint,ByteArray=require("./ByteArray").ByteArray,MSManager=require("../MicroService/MSManager").MSManager,FeatureCache=L.Class.extend((_L$Class$extend={includes:L.Mixin.Events,options:{isOffline:!1},USER_CACHE_KEY:"ms-user-cache",userCache:new _map2.default,showlayersData:new _map2.default,tmplayersData:new _map2.default,serverlayersData:new _map2.default,request:null,filterData:[],initialize:function(t){L.setOptions(this,t),this.url=this.options.url,this._explainurl=this.options.explainurl,this.showlayersData=new _map2.default,this.tmplayersData=new _map2.default,this.serverlayersData=new _map2.default,this.issnaplayersData=new _map2.default,this.isAnalysislayersData=new _map2.default,this.alllayersData=new _map2.default,this.request=null,this.filterData=[],Math.toDegrees||(Math.toDegrees=function(t){return 180*t/Math.PI})},setOptionParam:function(t,e){this.options&&this.options.params?this.options.params[t]=e:console.error("参数设置失败")},clearCache:function(){this.showlayersData=new _map2.default,this.tmplayersData=new _map2.default,this.serverlayersData=new _map2.default,this.issnaplayersData=new _map2.default,this.isAnalysislayersData=new _map2.default,this.alllayersData=new _map2.default,this.request=null,this.filterData=[]},filter:function(t){return this.getFilterCacheData(t)},_filter:function(t){return this.getFilterCacheData(t)},clearFilter:function(){this.filterData=null},_setFilter:function(t){if(this.filterData&&0!=this.filterData.length){for(var e=this.filterData,i=0;i<this.filterData.length;i++)for(var n=this.filterData[i].join("-"),s=0;s<t.length;s++)if(t[s].layerid==this.filterData[i].layerid)for(var o=0;o<t[s].children.length;o++)if(n.indexOf(t[s].children[o])>-1);else{var r=t[s].children[o];this.filterData[s].children.push(r)}t=e}else this.filterData=t;this._filter(t)},setFilter:function(t){if(this.filterData&&0!=this.filterData.length){for(var e=this.filterData,i=0;i<this.filterData.length;i++)for(var n=this.filterData[i].children.join("-"),s=0;s<t.length;s++)if(t[s].layerid==this.filterData[i].layerid)for(var o=0;o<t[s].children.length;o++)if(n.indexOf(t[s].children[o])>-1);else{var r=t[s].children[o];this.filterData[s].children.push(r)}t=e}else this.filterData=t;this.filter(t)},datafilter:function(){new _map2.default;return this.filterData&&this.filterData.length>0?this.getFilterCacheData(this.filterData):this.getAllCache()},getFilterCacheData:function(t){var e=this.getSvrCacheData(t),i=this.getTmpCacheData(t),n=!0,s=!1,o=void 0;try{for(var r,a=(0,_getIterator3.default)(i);!(n=(r=a.next()).done);n=!0){var l=r.value;e.has(l[0])?e.get(l[0]).concat(l[1]):e.set(l[0],l[1])}}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return e},getSvrCacheData:function(t){var e=new _map2.default,i=new _map2.default,n=this.serverlayersData;if(t){for(var s=0;s<t.length;s++)if(n.get(t[s].layerid)){for(var o=[],r=0;r<n.get(t[s].layerid).length;r++){for(var a=n.get(t[s].layerid)[r].attribute.psrid,l=n.get(t[s].layerid)[r].attribute.sbid,h=!1,u=0;u<t[s].children.length;u++)a==t[s].children[u]&&(h=!0);if(n.get(131404))for(var u=0;u<n.get(131404).length;u++)if(h&&n.get(131404)[u].attribute.sbid==l)if(i.get(t[s].layerid))i.get(t[s].layerid).set(n.get(131404)[u].attribute.sbid,n.get(131404)[u].attribute.sbid);else{var c=new _map2.default;c.set(n.get(131404)[u].attribute.sbid,n.get(131404)[u].attribute.sbid),i.set(t[s].layerid,c)}h&&o.push(n.get(t[s].layerid)[r])}e.get(t[s].layerid)?e.get(t[s].layerid).push(o):e.set(t[s].layerid,o)}if(n.get(131404))for(var p=0;p<n.get(131404).length;p++)i.get(n.get(131404)[p].attribute.layerid)&&i.get(n.get(131404)[p].attribute.layerid).get(n.get(131404)[p].attribute.sbid)&&(e.get(131404)?e.get(131404).push(n.get(131404)[p]):e.set(131404,[n.get(131404)[p]]))}return e},getTmpCacheData:function(t){var e=new _map2.default,i=new _map2.default,n=this.tmplayersData;if(t){for(var s=0;s<t.length;s++)if(n.get(t[s].layerid)){for(var o=[],r=0;r<n.get(t[s].layerid).length;r++){for(var a=n.get(t[s].layerid)[r].attribute.psrid,l=n.get(t[s].layerid)[r].attribute.sbid,h=!1,u=0;u<t[s].children.length;u++)a==t[s].children[u]&&(h=!0);if(n.get(131404))for(var u=0;u<n.get(131404).length;u++)if(n.get(131404)[u].attribute.sbid==l)if(i.get(t[s].layerid))i.get(t[s].layerid).set(n.get(131404)[u].attribute.sbid,n.get(131404)[u].attribute.sbid);else{var c=new _map2.default;c.set(n.get(131404)[u].attribute.sbid,n.get(131404)[u].attribute.sbid),i.set(t[s].layerid,c)}h&&o.push(n.get(t[s].layerid)[r])}e.get(t[s].layerid)?e.get(t[s].layerid).push(o):e.set(t[s].layerid,o)}if(n.get(131404))for(var p=0;p<n.get(131404).length;p++)i.get(n.get(131404)[p].attribute.layerid)&&i.get(n.get(131404)[p].attribute.layerid).get(n.get(131404)[p].attribute.sbid)&&(e.get(131404)?e.get(131404).push(n.get(131404)[p]):e.set(131404,[n.get(131404)[p]]))}return e},setMap:function(t){this._query=new SpatialQuery(t)},setElecColor:function(){},getSvrCacheDataold:function(t){var e=new _map2.default,i=new _map2.default,n=this.serverlayersData;if(t){for(var s=0;s<t.length;s++)if(n.get(t[s].layerid)){for(var o=[],r=0;r<n.get(t[s].layerid).length;r++){for(var a=n.get(t[s].layerid)[r].psrid,l=n.get(t[s].layerid)[r].sbid,h=!1,u=0;u<t[s].children.length;u++)a==t[s].children[u]&&(h=!0);if(n.get(131404))for(var u=0;u<n.get(131404).length;u++)if(h&&n.get(131404)[u].sbid==l)if(i.get(t[s].layerid))i.get(t[s].layerid).set(n.get(131404)[u].sbid,n.get(131404)[u].sbid);else{var c=new _map2.default;c.set(n.get(131404)[u].sbid,n.get(131404)[u].sbid),i.set(t[s].layerid,c)}h&&o.push(n.get(t[s].layerid)[r])}e.get(t[s].layerid)?e.get(t[s].layerid).push(o):e.set(t[s].layerid,o)}if(n.get(131404))for(var p=0;p<n.get(131404).length;p++)i.get(n.get(131404)[p].layerid)&&i.get(n.get(131404)[p].layerid).get(n.get(131404)[p].sbid)&&(e.get(131404)?e.get(131404).push(n.get(131404)[p]):e.set(131404,[n.get(131404)[p]]))}return e},getTmpCacheDataold:function(t){var e=new _map2.default,i=new _map2.default,n=this.tmplayersData;if(t){for(var s=0;s<t.length;s++)if(n.get(t[s].layerid)){for(var o=[],r=0;r<n.get(t[s].layerid).length;r++){for(var a=n.get(t[s].layerid)[r].psrid,l=n.get(t[s].layerid)[r].sbid,h=!1,u=0;u<t[s].children.length;u++)a==t[s].children[u]&&(h=!0);if(n.get(131404))for(var u=0;u<n.get(131404).length;u++)if(n.get(131404)[u].sbid==l)if(i.get(t[s].layerid))i.get(t[s].layerid).set(n.get(131404)[u].sbid,n.get(131404)[u].sbid);else{var c=new _map2.default;c.set(n.get(131404)[u].sbid,n.get(131404)[u].sbid),i.set(t[s].layerid,c)}h&&o.push(n.get(t[s].layerid)[r])}e.get(t[s].layerid)?e.get(t[s].layerid).push(o):e.set(t[s].layerid,o)}if(n.get(131404))for(var p=0;p<n.get(131404).length;p++)i.get(n.get(131404)[p].layerid)&&i.get(n.get(131404)[p].layerid).get(n.get(131404)[p].sbid)&&(e.get(131404)?e.get(131404).push(n.get(131404)[p]):e.set(131404,[n.get(131404)[p]]))}return e},order:function(t){},_addNewCachesData:function(t){},addServerCachesData:function(t){var e=new _map2.default,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){for(var a=o.value,l=a[1],h=0;h<l.length;h++)l[h].visable=!0,l[h].snapable=!0,l[h].Analysisable=!0,l[h].issvr=!0;e.set(a[0],l)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}this.serverlayersData=e},addCachesData:function(t){var e=!0;if(!this.tmplayersData||this.tmplayersData.size<1){var i=new _map2.default,n=!0,s=!1,o=void 0;try{for(var r,a=(0,_getIterator3.default)(t);!(n=(r=a.next()).done);n=!0){for(var l=r.value,h=l[1],u=0;u<h.length;u++)h[u].visable||(h[u].visable=!1),h[u].snapable||(h[u].snapable=!1),h[u].Analysisable||(h[u].Analysisable=!1),h[u].id||(e=!1),h[u].istmp=!0;i.set(l[0],h)}}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}return e&&(this.tmplayersData=i),e}var i=this.tmplayersData,c=!0,p=!1,d=void 0;try{for(var y,f=(0,_getIterator3.default)(t);!(c=(y=f.next()).done);c=!0){var l=y.value;if(this.tmplayersData.has(l[0]))for(var h=l[1],_=i.get(l[0]),u=0;u<h.length;u++){for(var m=!1,g=0,v=0;v<_.length;v++)if(h[u].id==_[v].id){m=!0,g=v;break}h[u].visable||(h[u].visable=!1),h[u].snapable||(h[u].snapable=!1),h[u].Analysisable||(h[u].Analysisable=!1),h[u].id||(e=!1),h[u].istmp=!0,m?_[g]=h[u]:_.push(h[u])}else{for(var h=l[1],u=0;u<h.length;u++)h[u].visable||(h[u].visable=!1),h[u].snapable||(h[u].snapable=!1),h[u].Analysisable||(h[u].Analysisable=!1),h[u].id||(e=!1),h[u].istmp=!0;i.set(l[0],h)}}}catch(t){p=!0,d=t}finally{try{!c&&f.return&&f.return()}finally{if(p)throw d}}return e&&(this.tmplayersData=i),e},_addFixCacheData:function(t){var e=!0,i=!1,n=void 0;try{for(var s,o=(0,_getIterator3.default)(t);!(e=(s=o.next()).done);e=!0)for(var r=s.value,a=r[1],l=0;l<a.length;l++){var h=a[l].attribute;h.visable=!0,h.snapable=!0,h.Analysisable=!0,h.issvr=!0}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.serverlayersData=t},_addTmpCacheData:function(t){var e=!0,i=!1,n=void 0;try{for(var s,o=(0,_getIterator3.default)(t);!(e=(s=o.next()).done);e=!0)for(var r=s.value,a=r[1],l=0;l<a.length;l++){var h=a[l].attribute;h.visable=!!h.visable,h.snapable=!!h.snapable,h.Analysisable=!!h.Analysisable,h.issvr=!!h.issvr}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}this.tmplayersData=t},getVisableCache:function(){var t=this.datafilter(),e=new _map2.default,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){for(var a=o.value,l=a[1],h=[],u=0;u<l.length;u++)l[u].attribute.visable&&h.push(l[u]);e.set(a[0],h),l=null,h=null}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}return this.showlayersData=e,e=null,t=null,this.showlayersData},delLayersDatasById:function(t){if(!t)return null;if(t instanceof Array){if(t.length>0)for(var e=0;e<t.length;e++)this.delLayersDataById(t[e])}else this.delLayersDataById(t)},delLayersDataById:function(t){var e;if(delIndex&&delIndex instanceof Feature){var i,n=this.serverlayersData,s=t.attribute,o=!1;s.layerid&&(o=!0,i=s.layerid);var r=!0,a=!1,l=void 0;try{for(var h,u=(0,_getIterator3.default)(n);!(r=(h=u.next()).done);r=!0){var c=h.value,p=c[1],d=c[0];if(o){if(d!=i)continue;for(var y=p.length-1;y>=0;y--){var f=p[y].id;if(f==t.id){p.splice(y,1);var _={id:f,geometry:p[y].geometry,attribute:p[y].attribute};e=new Feature(_);break}}}else for(var y=p.length-1;y>=0;y--){var f=p[y].id;if(f==t.id){p.splice(y,1);var _={id:f,geometry:p[y].geometry,attribute:p[y].attribute};e=new Feature(_);break}}}}catch(t){a=!0,l=t}finally{try{!r&&u.return&&u.return()}finally{if(a)throw l}}}this.localFeature=e,this.localFeatureState=2},delLayersDatas:function(t){if(!t)return null;if(t instanceof Array){if(t.length>0)for(var e=0;e<t.length;e++)this.delLayersData(t[e])}else this.delLayersData(t)},delLayersData:function(t){if(t&&t instanceof Feature){var e,i=this.serverlayersData,n=t.attribute,s=!1;n.layerid&&(s=!0,e=n.layerid);var o=!0,r=!1,a=void 0;try{for(var l,h=(0,_getIterator3.default)(i);!(o=(l=h.next()).done);o=!0){var u=l.value,c=u[1],p=u[0];if(s){if(p!=e)continue;for(var d=c.length-1;d>=0;d--){var y=c[d].attribute,f=!0;for(var _ in n)y[_]!=n[_]&&(f=!1);f&&c.splice(d,1)}}else{for(var d=c.length-1;d>=0;d--){var y=c[d].attribute;for(var _ in n)y[_]!=n[_]&&(f=!1)}f&&c.splice(d,1)}}}catch(t){r=!0,a=t}finally{try{!o&&h.return&&h.return()}finally{if(r)throw a}}}},getSnapCache:function(){var t=this.datafilter(),e=new _map2.default,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){for(var a=o.value,l=a[1],h=[],u=0;u<l.length;u++)l[u].snapable&&h.push(l[u]);e.set(a[0],h)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}return this.issnaplayersData=e,this.issnaplayersData},getAnalysisCache:function(){var t=this.datafilter(),e=new _map2.default,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){for(var a=o.value,l=a[1],h=[],u=0;u<l.length;u++)l[u].snapable&&h.push(l[u]);e.set(a[0],h)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}return this.isAnalysislayersData=e,this.isAnalysislayersData},getAllCache:function(){var t=this.serverlayersData,e=this.tmplayersData,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(e);!(i=(o=r.next()).done);i=!0){var a=o.value;t.has(a[0])?t.get(a[0]).concat(a[1]):t.set(a[0],a[1])}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}return t},startOfflineCache:function(){var t=this;this.request=window.indexedDB.open("editorDB"),this.db=null,this.request.onerror=function(t){console.log("数据库打开报错")},request.onsuccess=function(e){t.db=request.result,console.log("数据库打开成功")},request.onupgradeneeded=function(e){t.db=e.target.result;t.db.createObjectStore("layersData",{keyPath:"id"})}},stopOfflineCache:function(){},delCacheDatas:function(t){if(t)if("string"==typeof t){if("all"!=t)return;this.tmplayersData.clear()}else t instanceof Array&&(t[0],Graphic)},addGeoJSON:function(t){},_S4:function _S4(){return(1048576*(1+eval(window.atob("TWF0aC5yYW5kb20oKQ==")))|0).toString(16).substring(1)},getGuid:function(){return this._S4()+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+this._S4()+this._S4()},addEditCacheData:function(t){if(this.editCache||(this.editCache=new _map2.default),""!=this.stateid&&this.stateid||(t.stateid="vercum_"+this.getGuid(),this.stateid=t.stateid),this.editCache.has(t.stateid))this.editCache.get(t.stateid).get(t.editStatus).push(t.feature);else{var e=new _map2.default;e.set("add",[]),e.set("edit",[]),e.set("del",[]),e.get(t.editStatus).push(t.feature),this.editCache.set(t.stateid,e)}},addEditCacheDatas:function(t){if(this.editCache||(this.editCache=new _map2.default),""!=this.stateid&&this.stateid||(t.stateid="vercum_"+this.getGuid(),this.stateid=t.stateid),this.editCache.has(t.stateid))this.editCache.get(t.stateid).get(t.editStatus).concat(t.feature);else{var e=new _map2.default;e.set("add",[]),e.set("edit",[]),e.set("del",[]);var i=e.get(t.editStatus).concat(t.feature);e.delete(t.editStatus),e.set(t.editStatus,i),this.editCache.set(t.stateid,e)}},updateEditCacheDataStateId:function(t){if(this.editCache&&this.editCache.has(this.stateid)){var e=this.editCache.get(this.stateid);this.stateid=t.stateid,this.editCache=new _map2.default,this.editCache.set(t.stateid,e)}},delEditCacheData:function(t){this.editCache&&this.editCache.has(t.stateid)&&this.editCache.delete(t.stateid)},clearEditCacheData:function(){this.editCache=new _map2.default,this.stateid=""},addBinary:function(t,e,i){var n=this;this.vecworker&&(this.vecworker.clear(),delete this.vecworker),this.vecworker=new VectorWorker,this.vecworker.sendMessge(t),this.vecworker.on("workerMsg",function(t){var s=n._svrbinaryToFeature(t.data);e?n._addFixCacheData(s):n._addTmpCacheData(s),"function"==typeof i&&i(),t.data=null,n.vecworker.off("workerMsg"),n.vecworker&&(n.vecworker.clear(),n.vecworker=null,delete n.vecworker)})},getExplainData:function(){var t=this,e=this._explainurl?this._explainurl:this.url;e+="?request=getinterpretations&token="+this.options.params.token,this._gisServer||(this._gisServer=new GISService),this._gisServer._vecajax({url:e,method:"post"}).then(function(e){t._gisServer=null,null},function(t){console.log(t)}).catch(function(t){console.log(t)})},layer:null,setLayer:function(t){this.layer=t},getMarkerKey:function(t){return t.byteNodetype+"-"+t.layerid+"-"+t.oid},fusionMapData:function(t,e){e||(e=new _map2.default);var i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(e);!(i=(o=r.next()).done);i=!0)for(var a=o.value,l=(a[0],a[1]),h=l.length-1;h>=0;h--){var u=l[h].attribute;this.vecModifiedDatas[this.getMarkerKey(u)]&&l.splice(h,1)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}var c=!0,p=!1,d=void 0;try{for(var y,f=(0,_getIterator3.default)(t);!(c=(y=f.next()).done);c=!0){var _=y.value;_[0];_[1].forEach(function(t){var i=t.attribute.byteNodetype;e.get(i)?e.get(i).push(t):e.set(i,[t])})}}catch(t){p=!0,d=t}finally{try{!c&&f.return&&f.return()}finally{if(p)throw d}}return e},vecModifiedDatas:{},getVecModifiedKeys:function(){return this.vecModifiedDatas},addVecModifiedKeys:function(t,e){var i=this.getMarkerKey(t.attribute),n=!0,s=this.userCache.get(this.USER_CACHE_KEY);if(s)for(var o=0;o<s.length;o++){var r=s[o];if(this.getMarkerKey(r.attribute)==i){s[o]=t,n=!1;break}}n&&(this.vecModifiedDatas[i]=e)},removeVecModifiedKeys:function(t){delete this.vecModifiedDatas[t]},getUserFeatures:function(){return this.userCache},addUserFeature:function(t,e){if(e===this.layer.byteNodeEnm.GEO_TYPE_LABEL)return console.warn("131404是保留分组名，添加失败"),!1;var i=e||this.USER_CACHE_KEY;if(this.userCache||(this.userCache=new _map2.default),t.attribute||(t.attribute={}),t.attribute.visable=!!attribute.visable,t.attribute.snapable=!!attribute.snapable,t.attribute.Analysisable=!!attribute.Analysisable,t.attribute.issvr=!!attribute.issvr,this.getVecModifiedKeys()[this.getMarkerKey(t.attribute)]){var n=!0,s=!1,o=void 0;try{for(var r,a=(0,_getIterator3.default)(this.userCache);!(n=(r=a.next()).done);n=!0)for(var l=r.value,h=(l[0],l[1]),u=0;u<h.length;u++){var c=h[u];if(this.getMarkerKey(c.attribute)==this.getMarkerKey(t.attribute)){h[u]=t;break}}}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}this.updateUserCacheData()}else{var p=this.getMarkerKey(t.attribute),d=!0,y=this.userCache.get(this.USER_CACHE_KEY);if(y)for(var f=0;f<y.length;f++){var _=y[f];if(this.getMarkerKey(_.attribute)==p){y[f]=t,d=!1;break}}d&&(this.userCache.get(i)?this.userCache.get(i).push(t):this.userCache.set(i,[t]),this.addVecModifiedKeys(t,1))}},removeUserFeature:function(t,e){var i=(e||this.USER_CACHE_KEY,!0),n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(this.userCache);!(i=(o=r.next()).done);i=!0)for(var a=o.value,l=(a[0],a[1]),h=l.length-1;h>=0;h--){var u=this.getMarkerKey(l[h].attribute),c=this.getMarkerKey(t.attribute);u==c&&(l.splice(h,1),t.attribute&&(this.getVecModifiedKeys()[c]=2),t=null)}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}this.updateUserCacheData()},clearUserFeatures:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=(0,_getIterator3.default)(this.userCache);!(t=(n=s.next()).done);t=!0){var o=n.value;this.userCache.get(o[0]).forEach(function(t){null})}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}this.userCache.clear(),this.vecModifiedDatas={},this.stateid="",this.updateUserCacheData()},updateUserCacheData:function(t){this.layer.updateCacheData()},rasterCache:{},getRequestCacheData:function(){var t=[];if((0,_keys2.default)(this.rasterCache).length>0)for(var e in this.rasterCache){var i={id:e};i.adds=this.removeItemByBounds([].concat(_toConsumableArray(this.rasterCache[e].adds)),this.layer._map.getBounds()),i.updates=this.removeItemByBounds([].concat(_toConsumableArray(this.rasterCache[e].updates)),this.layer._map.getBounds()),i.deletes=this.removeItemByBounds([].concat(_toConsumableArray(this.rasterCache[e].deletes)),this.layer._map.getBounds()),i.adds.length>0||i.updates.length>0||i.deletes.length>0?t.push(i):delete this.rasterCache[e]}return t},removeItemByBounds:function(t,e){var i=e.getNorth(),n=e.getSouth(),s=e.getEast(),o=e.getWest();if(t&&t.length>0)for(var r=t.length-1;r>=0;r--)if(t[r].shape){var a=t[r].shape.type,l=t[r].shape.coordinates,h=0,u=0,c=!1;switch(a){case"LineString":for(var p=0;p<l.length;p++)if(h=l[p][0],u=l[p][1],h>=o&&h<=s&&u>=n&&u<=i){c=!0;break}c||t.splice(r,1);break;case"Polygon":for(var d=0;d<l.length&&!c;d++){for(var y=0;y<l[d].length;y++)if(h=l[d][y][0],u=l[d][y][1],h>=o&&h<=s&&u>=n&&u<=i){c=!0;break}c||t.splice(r,1)}break;case"Point":h=l[0],u=l[1],(h<o||h>s||u<n||u>i)&&t.splice(r,1)}}return t},removeItems:function(t,e){var i={};t.forEach(function(t,e,n){i[t]=!0});for(var n=e.length-1;n>=0;n--)i[e[n].oid]&&e.splice(n,1)},removeUpdatedCaches:function(t){var e=[];try{for(var i=t.split(";"),n=0;n<i.length;n++){var s=i[n].split(":");e.push({id:s[0],oids:s[1].split(",")})}if(e)for(var o=0;o<e.length;o++){var r=e[o].id,a=e[o].oids;this.removeItems(a,this.rasterCache[r].adds),this.removeItems(a,this.rasterCache[r].updates),this.removeItems(a,this.rasterCache[r].deletes)}}catch(t){}},excludeLayers:[],removeDuplicateCache:function(t,e){for(var i={},n=t.length-1;n>=0;n--){var s=t[n].oid;t[n].shape?i[s]?this.excludeLayers.indexOf(Number(e))==-1&&t.splice(n,1):i[s]=!0:t.splice(n,1)}},addRasterCache:function(t){if(!t)return console.warn("请添加有效的缓存数据:","当前为"+String(t)),!1;for(var e=0;e<t.length;e++){this.rasterCache[t[e].id]||(this.rasterCache[t[e].id]={adds:[],updates:[],deletes:[]});var i=this.rasterCache[t[e].id];t[e].adds&&(i.adds=this.rasterCache[t[e].id].adds.concat(t[e].adds)),t[e].updates&&(i.adds=this.rasterCache[t[e].id].adds.concat(t[e].updates)),t[e].deletes&&(i.deletes=this.rasterCache[t[e].id].deletes.concat(t[e].deletes)),this.removeDuplicateCache(i.adds,t[e].id),this.removeDuplicateCache(i.deletes,t[e].id);for(var n={},s=0;s<i.deletes.length;s++)n[i.deletes[s].oid]=!0;for(var o=i.adds.length-1;o>=0;o--)if(n[i.adds[o].oid])try{i.adds.splice(o,1)}catch(t){console.error("删除缓存设备出错")}n=null}},getRasterCaches:function(){return this.rasterCache},getData:function(t,e){var i=this;clearTimeout(this.delayId),this.delayId=setTimeout(function(){i.options.frontserverfun&&"function"==typeof i.options.frontserverfun?i.options.frontserverfun(i,"frontSerset",{extent:t,size:e}):i.url?i.fetchVecs(t,e):i.queryData(t,e)},200)},frontSerset:function(t,e){this.setUrl(t),this.fetchVecs(e.extent,e.size)},getTileColandRow:function(t,e){var i=Math.floor(this.longitudeToTileX(this.metersXToLongitude(t[0]),e)).toFixed(0),n=Math.floor(this.latitudeToTileY(this.metersYToLatitude(t[1]),e)).toFixed(0);return{x:parseInt(i),y:parseInt(n)}},longitudeToTileX:function(t,e){return this.pixelXToTileX(this.longitudeToPixelX(t,e),e)},longitudeToPixelX:function(t,e){return(t+180)/360*(this.Tile.TILE_SIZE<<e)},pixelXToTileX:function(t,e){return Math.min(Math.max(t/this.Tile.TILE_SIZE,0),Math.pow(2,e)-1)},Tile:{TILE_SIZE:256},latitudeToTileY:function(t,e){return this.pixelYToTileY(this.latitudeToPixelY(t,e),e)},latitudeToPixelY:function(t,e){var i=Math.sin(t*Math.PI/180);return(.5-Math.log((1+i)/(1-i))/(4*Math.PI))*(this.Tile.TILE_SIZE<<e)},pixelYToTileY:function(t,e){return Math.min(Math.max(t/this.Tile.TILE_SIZE,0),Math.pow(2,e)-1)},metersXToLongitude:function(t){return Math.toDegrees(t/this.WGS84.EQUATORIALRADIUS)},metersYToLatitude:function(t){return Math.toDegrees(Math.atan((0,_sinh2.default)(t/this.WGS84.EQUATORIALRADIUS)))},WGS84:{EQUATORIALRADIUS:6378137,POLARRADIUS:6356752.3142,INVERSEFLATTENING:298.257223563},getVecTileData:function(t,e){if(this.clearCache(),this._gisServers)for(var i=0;i<this._gisServers.length;i++)this._gisServers[i].requestAbort();this._gisServers=[];var n=[t.xmin,t.ymin],s=[t.xmax,t.ymax],o=this.getTileColandRow(n,e),r=this.getTileColandRow(s,e);this.num=(r.x+1-o.x)*(r.y+1-o.y),this.numtmp=0,this.numtmp2=0;for(var a=o.x;a<r.x+1;a++)for(var l=o.y;l<r.y+1;l++){var h={x:a,y:l,z:e};this.fetchVectiles(h)}},setTimetick:function(t){this.options.params.timetick=t},getVeccustomTileData:function(t,e){this.clearCache(),this._gisServers=[];var i=[t.xmin,t.ymin],n=[t.xmax,t.ymax],s=this.getTileColandRow(i,e),o=this.getTileColandRow(n,e);this.num=(o.x-s.x)*(o.y-s.y),this.numtmp=0;for(var r=s.x;r<o.x;r++)for(var a=s.y;a<o.y;a++){var l={x:r,y:a,z:e};this.fetchVectiles(l)}},getVecTileUrl:function(t){var e=this.getUrl();this.options.params&&(this.options.params.X=t.x,this.options.params.Y=t.y,this.options.params.Z=t.z),e=L.Util.template(e,L.extend(t,this.options.params));var i=L.extend({},this.options.params);return e+=L.Util.getParamString(i)},_addTilesFixCacheData:function(t){if(this.serverlayersData&&this.serverlayersData.size>0){var e=!0,i=!1,n=void 0;try{for(var s,o=(0,_getIterator3.default)(t);!(e=(s=o.next()).done);e=!0){var r=s.value,a=r[1],l=this.serverlayersData.get(r[0]);if(l)for(var h=0;h<a.length;h++){for(var u=!1,c=a[h].attribute,p=0;p<l.length;p++)if(l[p].attribute.psrid&&c.psrid&&l[p].attribute.psrid==c.psrid){u=!0;break}c.visable=!0,c.snapable=!0,c.Analysisable=!0,c.issvr=!0,u||l.push(a[h])}else{for(var h=0;h<a.length;h++){var c=a[h].attribute;c.visable=!0,c.snapable=!0,c.Analysisable=!0,c.issvr=!0}this.serverlayersData.set(r[0],a)}}}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}else this._addFixCacheData(t)},fetchCustomTileVecs:function(t,e){var i=this;t||(t=this.getExtent()),e||(e=this.getSize());var n=this.getVecsUrl(t,e.x,e.y);n&&(this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,null==this.options.params.request||void 0==this.options.params.request?(this._layers&&this.removeAll(),this._renderImage(n,bounds),n=null):(this._gisServer||(this._gisServer=new GISService),this._gisServer._vecajax({url:n,method:"post"}).then(function(t){(t.message?JSON.parse(t.message):{success:!0}).success?i.options.params.request&&"getvectormap"==i.options.params.request.toLowerCase()&&(i.vecworker&&(i.vecworker.clear(),delete i.vecworker),i.vecworker=new VectorWorker,i.vecworker.sendMessge(t),i.vecworker.on("workerMsg",function(t){var e=i._svrbinaryToFeature(t.data);i._addFixCacheData(e),e=i.getVisableCache(),i.fire("cacheloaded",{type:"cacheloaded",data:e}),e=null,t.data=null,i.vecworker.off("workerMsg"),i.vecworker&&(i.vecworker.clear(),i.vecworker=null,delete i.vecworker)})):i.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:t.message}),i._gisServer=null,t=null},function(t){console.warn(t)}).catch(function(t){console.warn(t)}))),n=null,bounds=null,e=null,ne=null,sw=null,top=null,top=null},fetchVectiles:function(t){var e=this,i=this.getVecTileUrl(t);if(i)if(this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,null==this.options.params.request||void 0==this.options.params.request)this._layers&&this.removeAll(),this._renderImage(i,bounds),i=null;else{this._gisServers||(this._gisServers=[]);var n=new GISService({async:!0});this._gisServers.push(n),n._vecajax({url:i,method:"post"}).then(function(t){e.numtmp++;var i=t.message?JSON.parse(t.message):{success:!0};if(!i.success||i.success&&"false"==i.success.toLowerCase())e.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:t.message});else if(e.options.params.request&&("getvectormap"==e.options.params.request.toLowerCase()||"getvectortile"==e.options.params.request.toLowerCase())){var n=e.dataExcute(t),s=e._svrbinaryToFeature(n);e._addTilesFixCacheData(s),s=e.getVisableCache(),e.numtmp==e.num&&e.fire("cacheloaded",{type:"cacheloaded",data:s})}t=null},function(t){console.warn(t)}).catch(function(t){console.warn(t)})}i=null,bounds=null,size=null},dataExcute:function(t){function e(){var t=new _map2.default,e=new _map2.default;if(u.length<1)return t;p=f,g=c+p;var h=r(c,g);p=h,h=null,c=g,g=c+p;for(var b=l(c,g),x=JSON.parse(b),L=0;L<x.length;L++)e.set(x[L].type,x[L].attributes);for(c=g,v=0;g<u.length;c=g,v++){var w=new _map2.default;p=f,g=c+p;var S=r(c,g),P=e.get(S);if(P){w.set("byteNodetype",S);for(var L=0;L<P.length;L++){var T=P[L],C={};for(var M in T)C.name=M,C.type=T[M];switch(C.type){case 0:var k=0;p=d,c=g,g=c+p,k=a(c,g),w.set(C.name,k);break;case 1:var E=0;p=f,c=g,g=c+p,E=r(c,g),w.set(C.name,E);break;case 2:var D=0;p=y,c=g,g=c+p,D=o(c,g),w.set(C.name,D);break;case 3:var I=0;p=_,c=g,g=c+p,I=n(c,g),w.set(C.name,I);break;case 4:var B=0;p=m,c=g,g=c+p,B=s(c,g),w.set(C.name,B);break;case 5:var A="",G=0;p=f,c=g,g=c+p,G=r(c,g),p=G,G=null,c=g,g=c+p,A=l(c,g),w.set(C.name,A);break;case 6:break;case 7:var O=i();w.set(C.name,O);break;case 8:}}var R=w.get("graphyid");w.set("sbid",R),w.delete("graphyid"),w.get("layerid")||w.set("layerid",w.get("byteNodetype"));try{t.has(w.get("layerid"))?t.get(w.get("layerid")).push(w):t.set(w.get("layerid"),[w])}catch(t){"131405"==w.get("byteNodetype")&&console.log(t)}}}return t}function i(){var t={};p=f,c=g,g=c+p;for(var e=r(c,g),i=[],n=[],o=0;o<e/16;o++){p=m,c=g,g=c+p;var a=s(c,g);p=m,c=g,g=c+p;var l=s(c,g);n.push(a,l),l=null,a=null}p=f,c=g,g=c+p;for(var h=r(c,g),u=[],d=[],y=0;y<h/4;y++){p=f,c=g,g=c+p;var _=r(c,g);u.push(_),y%3==0&&d.push(_),_=null}h=null,t.georelation=u,u=null;for(var v=0,b=v+1;v<d.length;v++,b++){var x=d[v]-1,L=void 0;L=v==d.length-1?n.length:d[b]-1;for(var w=n.slice(x,L),S=[],P=0,T=P+1;P<w.length-1;P+=2,T=P+1)S.push([w[P],w[T]]);i.push(S)}return c=g,e=null,t.coords=i,i=null,t}function n(t,e){var i=u.slice(t,e),n=new DataView(i.buffer),s=n.getFloat32(0,!0);return i=null,n=null,s}function s(t,e){var i=u.slice(t,e),n=new DataView(i.buffer),s=n.getFloat64(0,!0);return i=null,n=null,s}function o(t,e){var i=u.slice(t,e),n=new DataView(i.buffer),s=n.getUint32(0,!0);return i=null,n=null,s}function r(t,e){var i=u.slice(t,e),n=new DataView(i.buffer),s=n.getInt32(0,!0);return i=null,n=null,s}function a(t,e){var i=u.slice(t,e),n=new DataView(i.buffer),s=n.getUint8(0,!0);return i=null,n=null,s}function l(t,e){var i=u.slice(t,e),n=h(i);return i=null,n}function h(t){if("string"==typeof t)return t;for(var e="",i=t,n=0;n<i.length;n++){var s=i[n].toString(2),o=s.match(/^1+?(?=0)/);if(o&&8==s.length){for(var r=o[0].length,a=i[n].toString(2).slice(7-r),l=1;l<r;l++)a+=i[l+n].toString(2).slice(2);e+=String.fromCharCode(parseInt(a,2)),n+=r-1}else e+=String.fromCharCode(i[n])}return e}var u,c=0,p=0,d=1,y=2,f=4,_=4,m=8,g=0,v=0;return function(t){(u=t.buffer)instanceof Uint8Array||(u=new Uint8Array(u));var i=e();return u=null,i}(t)},queryData:function(t,e){
var i=this.getVisableCache();this.fire("cacheloaded",{type:"cacheloaded",data:i})},addFeatures:function(t,e){e?this._addFixCacheData(t):this._addTmpCacheData(t)},addFeature:function(t,e){if(e)if(t.attribute){var i=t.attribute;i.visable=!0,i.snapable=!0,i.Analysisable=!0,i.issvr=!0;var n=t.attribute.layerid;this.serverlayersData.get(n)?this.serverlayersData.get(n).push(t):this.serverlayersData.set(n,[t])}else{t.attribute={};var i=t.attribute;i.visable=!0,i.snapable=!0,i.Analysisable=!0,i.issvr=!0,this.serverlayersData.get(1314)?this.serverlayersData.get(1314).push():this.serverlayersData.set(1314,[t])}else if(t.attribute){var i=t.attribute;i.visable=!!i.visable,i.snapable=!!i.snapable,i.Analysisable=!!i.Analysisable,i.issvr=!!i.issvr;var n=t.attribute.layerid;this.tmplayersData.get(n)?this.tmplayersData.get(n).push(t):this.tmplayersData.set(n,[t])}else{t.attribute={};var i=t.attribute;i.visable=!!i.visable,i.snapable=!!i.snapable,i.Analysisable=!!i.Analysisable,i.issvr=!!i.issvr,this.tmplayersData.get(1314)?this.tmplayersData.get(1314).push():this.tmplayersData.set(1314,[t])}this.localFeature=t,this.localFeatureState=0},_updateCache:function(t){},exportJSONFile:function(t){var e=(0,_stringify2.default)(this.strMapToObj(this.getAllCache())),i=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=window.URL.createObjectURL(i),s=document.createElement("a");s.href=n,s.download=t+".json",s.click(),window.URL.revokeObjectURL(i)},exportCustomBinaryfile:function(t){var e=new ByteArray,i=[],n=!0,s=!1,o=void 0;try{for(var r,a=(0,_getIterator3.default)(this.getAllCache());!(n=(r=a.next()).done);n=!0){var l=r.value,h=l[1][0],u={};u.type=l[0];var c=this._getUint8Arrayobj({data:l[0],type:5});e.addArray(c);var p=[];for(var d in h){var y=h[d];switch(void 0===y?"undefined":_typeof(y)){case"number":break;case"string":break;case"boolean":break;case"object":break;case"function":break;case"underfined":}p.push({});var f=this._getUint8Arrayobj({data:lyrattr,type:5});e.addArray(f)}u.attr=p,i.push(u)}}catch(t){s=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(s)throw o}}},addCustomBinaryfile:function(t){},_getUint8Arrayobj:function(t){var e,i=0;switch(t.type){case 0:i=1;var n=new ArrayBuffer(i),s=new DataView(n);s.setUint8(0,t.data),e=new Uint8Array(s.buffer);break;case 1:i=4;var n=new ArrayBuffer(i),s=new DataView(n);s.setInt32(0,t.data),e=new Uint8Array(s.buffer);break;case 2:i=4;var n=new ArrayBuffer(i),s=new DataView(n);s.setUint32(0,t.data),e=new Uint8Array(s.buffer);break;case 3:i=4;var n=new ArrayBuffer(i),s=new DataView(n);s.setFloat32(0,t.data),e=new Uint8Array(s.buffer);break;case 4:i=8;var n=new ArrayBuffer(i),s=new DataView(n);s.setFloat64(0,t.data),e=new Uint8Array(s.buffer);break;case 5:i=t.data.length,e=new Uint8Array(i);for(var o=0;o<i;o++)e[o]=t.data.charCodeAt(o);break;case 6:break;case 7:break;case 8:}return e},strMapToObj:function(t){var e=(0,_create2.default)(null),i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){var a=o.value,l=_slicedToArray(a,2),h=l[0],u=l[1];e[h]=u}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}return e},search:function(t){var e=t.getType();this._query.setIsSource(t.getisSource());var i=t.getlyrIds(),n=t.getpsrids(),s={};if(t.getGeometry&&(s=t.getGeometry()),e){if("QueryParam"==e)return this._query.seachFeaturesbyArr(n,i);if("SpatialParam"==e)return t.getisElesearch()?this._query.searchEleFeatures(s,i):this._query.searchFeaturesByGeometry(s,i)}return[]},getVecsUrl:function(t,e,i){if(t.getXmin()<0||t.getYmax()<0||t.getXmax()<0||t.getYmin()<0)return null;var n=[t.getXmin(),t.getYmin(),t.getXmax(),t.getYmax()].join(",");return this.exportURL(L.extend({},{bbox:n,height:i,width:e},this.options.params))},exportURL:function(t){return this.getUrl()+L.Util.getParamString(t)},getUrl:function(){return this.url},setUrl:function(t){this.url=t},getExtent:function(){var t=this._map.getBounds(),e=t.getNorthEast(),i=t.getSouthWest();return new Extent(i.lng,i.lat,e.lng,e.lat)},getSize:function(){var t=this._map.getSize(),e=this._map.latLngToLayerPoint(bounds._northEast),i=this._map.latLngToLayerPoint(bounds._southWest);return(e.y>0||i.y<t.y)&&(t.y=i.y-e.y),t},fetchVecs:function(t,e){var i=this;if(t||(t=this.getExtent()),e||(e=this.getSize()),this.options.params.isdeg){var n=new Point(t.getXmin(),t.getYmin()),s=new Point(t.getXmax(),t.getYmax());n=egis.tool.Util.projectWebMercatorToLngLat(n.x,n.y),s=egis.tool.Util.projectWebMercatorToLngLat(s.x,s.y),t=new Extent(n.lng,n.lat,s.lng,s.lat)}var o=this.getVecsUrl(t,e.x,e.y),r=this.getRequestCacheData();r.length>0&&(o+="&edits="+(0,_stringify2.default)(r)),o&&(o+="&test="+(new Date).getTime(),this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,null==this.options.params.request||void 0==this.options.params.request?(this._layers&&this.removeAll(),this._renderImage(o,bounds),o=null):(this._gisServer||(this._gisServer=new GISService),this._gisServer._vecajax({url:o,method:"GET"==String(this.options.method).toUpperCase()?"get":"post"}).then(function(t){var e=t.message?JSON.parse(t.message):{success:!1},n=e.UpdateOids;i.removeUpdatedCaches(n),e.success?i.options.params.request&&"getvectormap"==i.options.params.request.toLowerCase()&&(i.vecworker&&(i.vecworker.clear(),delete i.vecworker),i.vecworker=new VectorWorker,i.vecworker.sendMessge(t),i.vecworker.on("workerMsg",function(t){if("[object Object]"==Object.prototype.toString.call(t.data)){var e=new _map2.default;for(var n in t.data){for(var s=0;s<t.data[n].length;s++){var o=t.data[n][s],r=new _map2.default;for(var a in o)r.set(a,o[a]);t.data[n][s]=r}e.set(n,t.data[n])}t.data=e}var l=i._svrbinaryToFeature(t.data);i._addFixCacheData(l),l=i.getVisableCache(),i.options.eleColor&&"function"==typeof i.options.eleColor?i.options.eleColor(i,"cacheloaded",{type:"cacheloaded",data:l}):i.fire("cacheloaded",{type:"cacheloaded",data:l}),l=null,t.data=null,i.vecworker.off("workerMsg"),i.vecworker&&(i.vecworker.clear(),i.vecworker=null,delete i.vecworker)})):i.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:t.message}),i._gisServer=null,t=null},function(t){i.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:t})}).catch(function(t){}))),o=null,e=null}},_defineProperty(_L$Class$extend,"_S4",function _S4(){return(1048576*(1+eval(window.atob("TWF0aC5yYW5kb20oKQ==")))|0).toString(16).substring(1)}),_defineProperty(_L$Class$extend,"getGuid",function(){return this._S4()+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+"-"+this._S4()+this._S4()+this._S4()}),_defineProperty(_L$Class$extend,"EQ",function(t,e){return t-e<=1e-9&&t-e>=-1e-9}),_defineProperty(_L$Class$extend,"getRadius",function(t,e,i,n,s,o){var r,a,l,h,u,c,p,d;if(r=2*(i-t),a=2*(n-e),l=Math.pow(i,2)-Math.pow(t,2)+Math.pow(n,2)-Math.pow(e,2),h=2*(s-t),u=2*(o-e),c=Math.pow(s,2)-Math.pow(t,2)+Math.pow(o,2)-Math.pow(e,2),p=r*u-a*h,d=a*h-r*u,this.EQ(p,0)||this.EQ(d,0))return!1;var y=(l*u-a*c)/p,f=(l*h-r*c)/d;return{radius:Math.sqrt((t-y)*(t-y)+(e-f)*(e-f)),x:y,y:f}}),_defineProperty(_L$Class$extend,"_svrbinaryToFeature2",function(t){var e=new _map2.default,i=!0,n=!1,s=void 0;try{for(var o,r=(0,_getIterator3.default)(t);!(i=(o=r.next()).done);i=!0){var a=o.value,l=a[0],h=a[1],u=[];if(131404!=l&&131405!=l){for(var c=0;c<h.length;c++){var p={},d={},y=this.getGuid(),f=!0,_=!1,m=void 0;try{for(var g,v=(0,_getIterator3.default)(h[c]);!(f=(g=v.next()).done);f=!0){var b=g.value;if("shape"==b[0]){var x=h[c].get("geometrytype"),L=h[c].get("byteNodetype"),w=b[1];switch(L){case 131401:var S=0,P=0;switch(x){case 2:S=w.coords[0][1][0],P=w.coords[0][1][1];break;case 3:S=(Math.max(w.coords[0][0][0],w.coords[0][1][0],w.coords[0][2][0],w.coords[0][3][0],w.coords[0][4][0])+Math.min(w.coords[0][0][0],w.coords[0][1][0],w.coords[0][2][0],w.coords[0][3][0],w.coords[0][4][0]))/2,P=(Math.max(w.coords[0][0][1],w.coords[0][1][1],w.coords[0][2][1],w.coords[0][3][1],w.coords[0][4][1])+Math.min(w.coords[0][0][1],w.coords[0][1][1],w.coords[0][2][1],w.coords[0][3][1],w.coords[0][4][1]))/2;break;case 5:S=w.coords[0][1][0],P=w.coords[0][1][1];break;case 6:S=w.coords[0][1][0],P=w.coords[0][1][1];break;default:S=w.coords[0][0],P=w.coords[0][1]}d=new Point(S,P);break;case 131402:d=new Polyline(w.coords);break;case 131403:d=new Polygon(w.coords)}p.coords=b[1].coords}else p[b[0]]=b[1]}}catch(t){_=!0,m=t}finally{try{!f&&v.return&&v.return()}finally{if(_)throw m}}var T=new Feature({id:y,attribute:p,geometry:d});u.push(T)}e.set(l,u)}}}catch(t){n=!0,s=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw s}}var C=t.get(131404);if(C){for(var M=t.get(131405),k=[],E=[],D=0;D<C.length;D++){var I=C[D],B=I.get("sbid"),A=[],G=[],O=[],R=[],y=this.getGuid(),p={},U=!0,z=!1,j=void 0;try{for(var F,N=(0,_getIterator3.default)(C[D]);!(U=(F=N.next()).done);U=!0){var b=F.value;p[b[0]]=b[1]}}catch(t){z=!0,j=t}finally{try{!U&&N.return&&N.return()}finally{if(z)throw j}}for(var H=M.length-1;H>-1;H--){if(M[H].get("sbid")==B){var S=M[H].get("x"),P=M[H].get("y");A.push(new Point([S,P])),P=null,S=null;var Z=M[H].get("labelangle");G.push(Z),Z=null;var q=M[H].get("text");O.push(q),q=null;var V={},W=!0,Y=!1,X=void 0;try{for(var J,K=(0,_getIterator3.default)(M[H]);!(W=(J=K.next()).done);W=!0){var Q=J.value;V[Q[0]]=Q[1]}}catch(t){Y=!0,X=t}finally{try{!W&&K.return&&K.return()}finally{if(Y)throw X}}R.push(V),V=null,M.splice(H,1)}}p.infoattr=M,p.angles=G,p.texts=O;var $=new MultiPoint(A),tt=new Feature({id:y,attribute:p,geometry:$});!!p.outlinewidth&&p.outlinewidth!=-1?E.push(tt):k.push(tt)}k=k.concat(E),e.set(131404,k)}return e}),_defineProperty(_L$Class$extend,"_compareStateId",function(){}),_defineProperty(_L$Class$extend,"_svrbinaryToFeature",function(t){var e=new _map2.default,i=(new _map2.default,[]),n=new _map2.default,s=!0,o=!1,r=void 0;try{for(var a,l=(0,_getIterator3.default)(t);!(s=(a=l.next()).done);s=!0){var h=a.value,u=h[0],c=h[1],p=[];if(131404!=u&&131405!=u){for(var d=0;d<c.length;d++){var y={},f={},_=this.getGuid(),m=!1,g=!0,v=!1,b=void 0;try{for(var x,L=(0,_getIterator3.default)(c[d]);!(g=(x=L.next()).done);g=!0){var w=x.value;if("shape"==w[0]){var S=c[d].get("geometrytype"),P=c[d].get("byteNodetype"),T=w[1];try{if(T.coords&&T.georelation&&(T.coords=egis.tool.Util.convertCoordsByRelation(T.coords,T.georelation)),null==T.coords){console.log("三元组解析出错");continue}}catch(t){console.error("三元组解析出错，使用原有坐标")}switch(P){case 131401:var C=0,M=0;switch(S){case 2:C=T.coords[0][1][0],M=T.coords[0][1][1];break;case 3:if(T.coords[0].length<5)if(m=!1,2==T.coords[0].length)try{C=(Math.min(T.coords[0][0][0],T.coords[0][1][0])+Math.max(T.coords[0][0][0],T.coords[0][1][0]))/2,M=(Math.min(T.coords[0][0][1],T.coords[0][1][1])+Math.max(T.coords[0][0][1],T.coords[0][1][1]))/2}catch(t){i.push(c[d])}else m=!0;else try{C=(Math.max(T.coords[0][0][0],T.coords[0][1][0],T.coords[0][2][0],T.coords[0][3][0],T.coords[0][4][0])+Math.min(T.coords[0][0][0],T.coords[0][1][0],T.coords[0][2][0],T.coords[0][3][0],T.coords[0][4][0]))/2,M=(Math.max(T.coords[0][0][1],T.coords[0][1][1],T.coords[0][2][1],T.coords[0][3][1],T.coords[0][4][1])+Math.min(T.coords[0][0][1],T.coords[0][1][1],T.coords[0][2][1],T.coords[0][3][1],T.coords[0][4][1]))/2}catch(t){i.push(c[d])}break;case 5:C=T.coords[0][1][0],M=T.coords[0][1][1];break;case 6:C=T.coords[0][1][0],M=T.coords[0][1][1];break;default:C=T.coords[0][0],M=T.coords[0][1]}f=new Point(C,M);break;case 131402:f=new Polyline(T.coords);break;case 131403:if(3!=T.georelation[1]||2!=T.georelation[2]&&4!=T.georelation[2])if(T.coords&&2==T.coords[0].length){var k=Math.min(T.coords[0][0][0],T.coords[0][1][0]),E=Math.max(T.coords[0][0][0],T.coords[0][1][0]),D=Math.min(T.coords[0][0][1],T.coords[0][1][1]),I=Math.max(T.coords[0][0][1],T.coords[0][1][1]);f=new Polygon([[[k,D],[k,I],[E,I],[E,D],[k,D]]])}else f=new Polygon(T.coords);else{var B=this.getRadius(T.coords[0][0][0],T.coords[0][0][1],T.coords[0][1][0],T.coords[0][1][1],T.coords[0][2][0],T.coords[0][2][1]),k=Math.min(T.coords[0][0][0],T.coords[0][1][0],T.coords[0][2][0],T.coords[0][3][0],T.coords[0][4][0]),E=Math.max(T.coords[0][0][0],T.coords[0][1][0],T.coords[0][2][0],T.coords[0][3][0],T.coords[0][4][0]),D=Math.min(T.coords[0][0][1],T.coords[0][1][1],T.coords[0][2][1],T.coords[0][3][1],T.coords[0][4][1]),I=Math.max(T.coords[0][0][1],T.coords[0][1][1],T.coords[0][2][1],T.coords[0][3][1],T.coords[0][4][1]);C=(E+k)/2,M=(I+D)/2;f=new Circle(new Point(C,M),B.radius)}}y.coords=w[1].coords}else y[w[0]]=w[1],this.stateid&&"stateid"==w[0]&&w[1]==this.stateid&&(this.options.clearCallback?this.options.clearCallback():(this.fire("vecSyncComplete"),this.clearUserFeatures(),this.clearEditCacheData()))}}catch(t){v=!0,b=t}finally{try{!g&&L.return&&L.return()}finally{if(v)throw b}}if(!m){0==y.elestatus&&(n[y.layerid+"_"+y.psrid]=!0,y.symbolcolor=12632256);var A=new Feature({id:_,attribute:y,geometry:f});p.push(A)}}e.set(u,p)}}}catch(t){o=!0,r=t}finally{try{!s&&l.return&&l.return()}finally{if(o)throw r}}if(this.editCache&&this.editCache.size>0){var G=this.editCache.get(this.stateid)?this.editCache.get(this.stateid).get("del"):[],O=[].concat(_toConsumableArray(G)),R=this.editCache.get(this.stateid)?this.editCache.get(this.stateid).get("edit"):[],U=[].concat(_toConsumableArray(R)),z=!0,j=!1,F=void 0;try{for(var N,H=(0,_getIterator3.default)(e);!(z=(N=H.next()).done);z=!0)for(var Z=N.value,q=Z[1],V=q.length-1;V>=0;V--){for(var y=q[V].attribute,W=O.length-1;W>=0;W--)y.psrid==O[W].getAttribute().psrid&&(q.splice(V,1),O.splice(W,1));for(var Y=U.length-1;Y>=0;Y--)y.psrid==U[Y].getAttribute().psrid&&(q.splice(V,1),U.splice(Y,1))}}catch(t){j=!0,F=t}finally{try{!z&&H.return&&H.return()}finally{if(j)throw F}}}var X=t.get(131404);if(X){var J=[],K=[],Q=t.get(131405);if(Q){for(var $=0;$<X.length;$++){var tt=X[$],et=tt.get("sbid"),it=tt.get("layeridtmp"),nt=[],st=[],ot=[],rt=[],_=this.getGuid(),y={},at=!0,lt=!1,ht=void 0;try{for(var ut,ct=(0,_getIterator3.default)(X[$]);!(at=(ut=ct.next()).done);at=!0){var w=ut.value;y[w[0]]=w[1]}}catch(t){lt=!0,ht=t}finally{try{!at&&ct.return&&ct.return()}finally{if(lt)throw ht}}for(var pt=Q.length-1;pt>-1;pt--){var dt=Q[pt].get("sbid"),yt=Q[pt].get("layeridtmp");if(dt==et&&yt==it){var C=Q[pt].get("x"),M=Q[pt].get("y");nt.push(new Point([C,M]));var ft=Q[pt].get("labelangle");st.push(ft);var _t=Q[pt].get("text");ot.push(_t);var mt={},gt=!0,vt=!1,bt=void 0;try{for(var xt,Lt=(0,_getIterator3.default)(Q[pt]);!(gt=(xt=Lt.next()).done);gt=!0){var wt=xt.value;mt[wt[0]]=wt[1]}}catch(t){vt=!0,bt=t}finally{try{!gt&&Lt.return&&Lt.return()}finally{if(vt)throw bt}}rt.push(mt),Q.splice(pt,1)}}y.angles=st,y.texts=ot,y.layerid=it,n[it+"_"+et]&&(y.labelcolor=12632256);var St=new MultiPoint(nt),Pt=new Feature({id:_,attribute:y,geometry:St});!!y.outlinewidth&&y.outlinewidth!=-1?K.push(Pt):J.push(Pt)}J=J.concat(K),e.set(131404,J)}}return e}),_defineProperty(_L$Class$extend,"_svrbinaryToFeature1",function(t){var e=new _map2.default,i=new _map2.default,n=[],s=t.get(131404);if(s){var o=t.get(131405);if(o)for(var r=0;r<s.length;r++){var a=s[r],l=a.get("sbid"),h=a.get("layerid"),u=[],c=[],p=[],d=[],y=this.getGuid(),f={},_=!0,m=!1,g=void 0;try{for(var v,b=(0,_getIterator3.default)(s[r]);!(_=(v=b.next()).done);_=!0){var x=v.value;f[x[0]]=x[1]}}catch(t){m=!0,g=t}finally{try{!_&&b.return&&b.return()}finally{if(m)throw g}}for(var L=o.length-1;L>-1;L--){var w=o[L].get("sbid"),S=o[L].get("layerid");if(w==l&&S==h){var P=o[L].get("x"),T=o[L].get("y");u.push(new Point([P,T])),T=null,P=null;var C=o[L].get("labelangle");c.push(C),C=null;var M=o[L].get("text");p.push(M),M=null;var k={},E=!0,D=!1,I=void 0;try{for(var B,A=(0,_getIterator3.default)(o[L]);!(E=(B=A.next()).done);E=!0){var G=B.value;k[G[0]]=G[1]}}catch(t){D=!0,I=t}finally{try{!E&&A.return&&A.return()}finally{if(D)throw I}}d.push(k),k=null,o.splice(L,1)}}f.infoattr=o,f.angles=c,f.texts=p,f.layerid=layerid;var O=new MultiPoint(u),R=new Feature({id:y,attribute:f,geometry:O});if(i.get(layerid))i.get(layerid).set(l,R);else{var U=new _map2.default;U.set(l,R),i.set(layerid,U)}}}var z=!0,j=!1,F=void 0;try{for(var N,H=(0,_getIterator3.default)(t);!(z=(N=H.next()).done);z=!0){var Z=N.value,q=Z[0],V=Z[1],W=[];if(131404!=q&&131405!=q){for(var Y=0;Y<V.length;Y++){var f={},X={},y=this.getGuid(),J=!1,K=!0,Q=!1,$=void 0;try{for(var tt,et=(0,_getIterator3.default)(V[Y]);!(K=(tt=et.next()).done);K=!0){var x=tt.value;if("shape"==x[0]){var it=V[Y].get("geometrytype"),nt=V[Y].get("byteNodetype"),st=x[1];switch(nt){case 131401:var P=0,T=0;switch(it){case 2:P=st.coords[0][1][0],T=st.coords[0][1][1];break;case 3:st.coords[0].length<5&&(J=!0);try{P=(Math.max(st.coords[0][0][0],st.coords[0][1][0],st.coords[0][2][0],st.coords[0][3][0],st.coords[0][4][0])+Math.min(st.coords[0][0][0],st.coords[0][1][0],st.coords[0][2][0],st.coords[0][3][0],st.coords[0][4][0]))/2,T=(Math.max(st.coords[0][0][1],st.coords[0][1][1],st.coords[0][2][1],st.coords[0][3][1],st.coords[0][4][1])+Math.min(st.coords[0][0][1],st.coords[0][1][1],st.coords[0][2][1],st.coords[0][3][1],st.coords[0][4][1]))/2}catch(t){n.push(V[Y])}break;case 5:P=st.coords[0][1][0],T=st.coords[0][1][1];break;case 6:P=st.coords[0][1][0],T=st.coords[0][1][1];break;default:P=st.coords[0][0],T=st.coords[0][1]}X=new Point(P,T);break;case 131402:X=new Polyline(st.coords);break;case 131403:if(3!=st.georelation[1]||2!=st.georelation[2]&&4!=st.georelation[2])X=new Polygon(st.coords);else{var ot=this.getRadius(st.coords[0][0][0],st.coords[0][0][1],st.coords[0][1][0],st.coords[0][1][1],st.coords[0][2][0],st.coords[0][2][1]),rt=Math.min(st.coords[0][0][0],st.coords[0][1][0],st.coords[0][2][0],st.coords[0][3][0],st.coords[0][4][0]),at=Math.max(st.coords[0][0][0],st.coords[0][1][0],st.coords[0][2][0],st.coords[0][3][0],st.coords[0][4][0]),lt=Math.min(st.coords[0][0][1],st.coords[0][1][1],st.coords[0][2][1],st.coords[0][3][1],st.coords[0][4][1]),ht=Math.max(st.coords[0][0][1],st.coords[0][1][1],st.coords[0][2][1],st.coords[0][3][1],st.coords[0][4][1]);P=(at+rt)/2,T=(ht+lt)/2;X=new Circle(new Point(P,T),ot.radius)}}f.coords=x[1].coords}else f[x[0]]=x[1]}}catch(t){Q=!0,$=t}finally{try{!K&&et.return&&et.return()}finally{if(Q)throw $}}if(!J){var ut=new Feature({id:y,attribute:f,geometry:X});W.push(ut)}}e.set(q,W)}}}catch(t){j=!0,F=t}finally{try{!z&&H.return&&H.return()}finally{if(j)throw F}}return e}),_defineProperty(_L$Class$extend,"_custombinaryToFeature",function(t){var e=!0,i=!1,n=void 0;try{for(var s,o=(0,_getIterator3.default)(t);!(e=(s=o.next()).done);e=!0)for(var r=s.value,a=(r[0],r[1]),l=0;l<a.length;l++)a[l]}catch(t){i=!0,n=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw n}}}),_defineProperty(_L$Class$extend,"createbyteArray",function(){}),_defineProperty(_L$Class$extend,"fetchnewVecs",function(t,e){var i=this;t||(t=this.getExtent()),e||(e=this.getSize());var n=this.getVecsUrl(t,e.x,e.y);n&&(n+="&test="+(new Date).getTime(),this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,null==this.options.params.request||void 0==this.options.params.request?(this._layers&&this.removeAll(),this._renderImage(n,bounds),n=null):(this._gisServer||(this._gisServer=new GISService),this._gisServer._vecajax({url:n,method:"post"}).then(function(t){var e;try{e=JSON.parse(t),i.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:t})}catch(i){e=t,t=null}e.resultValue&&(e=e.resultValue),i.options.params.request&&"getvectormap"==i.options.params.request.toLowerCase()&&(i.vecworker&&(i.vecworker.clear(),delete i.vecworker),i.vecworker=new VectorWorker,i.vecworker.sendMessge(e),i.vecworker.on("workerMsg",function(t){var e=t.data;i.fire("cacheloaded",{type:"cacheloaded",data:e}),e=null,t.data=null,i.vecworker.off("workerMsg"),i.vecworker&&(i.vecworker.clear(),i.vecworker=null,delete i.vecworker)})),e=null,i._gisServer=null,t=null},function(t){console.log(t)}).catch(function(t){console.log(t)}))),n=null,bounds=null,e=null,top=null}),_L$Class$extend));FeatureCache.convertfromfile=convertfromfile,module.exports.FeatureCache=FeatureCache,module.exports.featureCache=function(t){return new FeatureCache(t)}},{"../Geometry/Circle":51,"../Geometry/MultiPoint":59,"../Geometry/Point":61,"../Geometry/Polygon":62,"../Geometry/Polyline":63,"../MicroService/MSManager":118,"../Task/GISService":151,"../workers/TimerWorker":158,"../workers/VectorWorker":159,"./ByteArray":20,"./Feature":23,"./SpatialQuery":32,"babel-runtime/core-js/array/from":161,"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/is-iterable":163,"babel-runtime/core-js/json/stringify":164,"babel-runtime/core-js/map":165,"babel-runtime/core-js/math/sinh":166,"babel-runtime/core-js/object/create":167,"babel-runtime/core-js/object/define-property":168,"babel-runtime/core-js/object/keys":170,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],25:[function(t,e,i){"use strict";var n={eoHitNull:0,eoHitTerminal:1,eoHitSymbolAnchor:2,eoHitVertex:4,eoHitEdge:8,eoHitCenter:16,eoHitMidPoint:32};e.exports.FeatureSnapEnum=n},{}],26:[function(t,e,i){"use strict";var n=t("../Layers/GraphicsLayer"),s=t("../Features/Graphic").Graphic,o=t("../Geometry/Polyline").Polyline,r=t("../Symbol/SimpleLineSymbol").SimpleLineSymbol,a=n.GraphicsLayer.extend({options:{stationCoordinates:[],gridParameter:{gridWidth:4,gridHeight:4,isVisible:!0}},gridThinLine:null,gridLine:null,gridThickLine:null,initialize:function(t){this._layers={},t=L.Util.setOptions(this,t),n.GraphicsLayer.prototype.initialize.call(this,this.options),this._stationCoordinates=this._switchStationCoordinates(t.stationCoordinates),this._gridParameter=t.gridParameter,t.gridParameter.isVisible?this.addGridLayer():this.removeGridLayers()},addGridLayer:function(){var t=this._getGridLinePaths(this._stationCoordinates,this._gridParameter),e=new o(t.outGridLine),i=this.options.color||"#595959",n=new o(t.outThinGridLine),a=new r({color:i,width:.5}),l=new r({color:i,width:1.2}),h=new o(t.outThickGridLine),u=new r({color:i,width:2});this.gridThinLine=new s({geometry:n,symbol:a,interactive:!1,draggable:!1}),this.gridLine=new s({geometry:e,symbol:l,interactive:!1,draggable:!1}),this.gridThickLine=new s({geometry:h,symbol:u,interactive:!1,draggable:!1}),this.addGraphic(this.gridThinLine),this.addGraphic(this.gridLine),this.addGraphic(this.gridThickLine),this.fire("loadedGrid")},setGridParameter:function(t,e){t.isVisible?(this.removeGridLayer(),this._gridParameter=t,e&&(this._stationCoordinates=this._switchStationCoordinates(e)),this.addGridLayer()):this.removeGridLayer()},getGridOption:function(){return{stationCoordinates:this._stationCoordinates,gridParameter:this._gridParameter}},removeGridLayers:function(){this.removeGridLayer()},removeGridLayer:function(){(this.gridLine||this.gridThickLine)&&this.removeGraphics(),this.gridLine=null,this.gridThickLine=null},_getGridLinePaths:function(t,e){for(var i=t[0][0]-t[0][0]%e.gridWidth,n=t[0][1]-t[0][1]%e.gridHeight,s=t[2][0]-t[2][0]%e.gridWidth+e.gridWidth,o=t[2][1]-t[2][1]%e.gridHeight+e.gridHeight,r=[],a=[],l=[],h=[],u=(o-n)/e.gridHeight,c=(s-i)/e.gridWidth,p=0;p<=u;p++)h=[],p==u?(h=[t[3],t[2]],a.push(h)):0==p?(h=[t[0],t[1]],a.push(h)):(h=[[t[0][0],n+p*e.gridHeight],[t[1][0],n+p*e.gridHeight]],p%25==0?a.push(h):p%5==0?r.push(h):l.push(h));for(var d=0;d<=c;d++)h=[],d==c?(h=[t[1],t[2]],a.push(h)):0==d?(h=[t[0],t[3]],a.push(h)):(h=[[i+d*e.gridWidth,t[0][1]],[i+d*e.gridWidth,t[3][1]]],d%25==0?a.push(h):d%5==0?r.push(h):l.push(h));return{outGridLine:r,outThickGridLine:a,outThinGridLine:l}},_switchStationCoordinates:function(t){for(var e=t[0][0],i=t[0][1],n=t[0][0],s=t[0][1],o=1;o<t.length;o++)t[o][0]>n?n=t[o][0]:t[o][0]<e&&(e=t[o][0]),t[o][1]<i?i=t[o][1]:t[o][1]>s&&(s=t[o][1]);return[[e,i],[n,i],[n,s],[e,s]]},gridLayerByZooming:function(){switch(this._map.getZoom()){case 17:this._gridParameter.gridHeight=8*this._oneGridHeight,this._gridParameter.gridWidth=8*this._oneGridWeight;break;case 18:this._gridParameter.gridHeight=4*this._oneGridHeight,this._gridParameter.gridWidth=4*this._oneGridWeight;break;case 19:this._gridParameter.gridHeight=2*this._oneGridHeight,this._gridParameter.gridWidth=2*this._oneGridWeight;break;case 20:this._gridParameter.gridHeight=this._oneGridHeight,this._gridParameter.gridWidth=this._oneGridWeight;break;case 21:this._gridParameter.gridHeight=this._oneGridHeight/2,this._gridParameter.gridWidth=this._oneGridWeight/2;break;case 22:this._gridParameter.gridHeight=this._oneGridHeight/4,this._gridParameter.gridWidth=this._oneGridWeight/4;break;case 23:this._gridParameter.gridHeight=this._oneGridHeight/8,this._gridParameter.gridWidth=this._oneGridWeight/8;break;case 24:this._gridParameter.gridHeight=this._oneGridHeight/16,this._gridParameter.gridWidth=this._oneGridWeight/16;break;case 25:this._gridParameter.gridHeight=this._oneGridHeight/32,this._gridParameter.gridWidth=this._oneGridWeight/32}this.setGridParameter(this._gridParameter)},addTo:function(t){return t.addLayer(this),this._map=t,this._oneGridHeight=this._gridParameter.gridHeight,this._oneGridWeight=this._gridParameter.gridWidth,this}});e.exports.GridLayer=a,e.exports.gridLayer=function(t){return new a(t)}},{"../Features/Graphic":36,"../Geometry/Polyline":63,"../Layers/GraphicsLayer":103,"../Symbol/SimpleLineSymbol":146}],27:[function(t,e,i){"use strict";var n=t("./Snap").Snap,s=(t("./GridSnapEnum").GridSnapEnum,t("../Geometry/Point").Point),o=n.extend({options:{gridlayer:void 0,tolerance:5,gridSnapType:[0,1]},initialize:function(t){L.setOptions(this,t),n.prototype.initialize.call(this,null,this.options),this._gridOption=t.gridlayer.getGridOption()},snap:function(t){if(this._reGeo={isGridSnap:!1},this.options._tolerance=this._getRealDistance(t.latlng),this._isPointInStation(t,this._gridOption.stationCoordinates)){var e=t.latlng.lng-t.latlng.lng%this._gridOption.gridParameter.gridWidth,i=t.latlng.lat-t.latlng.lat%this._gridOption.gridParameter.gridHeight,n=e+this._gridOption.gridParameter.gridWidth,o=i+this._gridOption.gridParameter.gridHeight;e<=this._gridOption.stationCoordinates[0][0]&&(e=this._gridOption.stationCoordinates[0][0]),i<=this._gridOption.stationCoordinates[0][1]&&(i=this._gridOption.stationCoordinates[0][1]),o>=this._gridOption.stationCoordinates[2][1]&&(o=this._gridOption.stationCoordinates[2][1]),n>=this._gridOption.stationCoordinates[2][0]&&(n=this._gridOption.stationCoordinates[2][0]);var r=[[e,i],[n,i],[n,o],[e,o]],a=null;if(this._isInArr(0,this.options.gridSnapType))for(var l=0;l<4;l++){var h={lng:r[l][0],lat:r[l][1]};this._getP2PDistance(new s(h.lng,h.lat),new s(t.latlng.lng,t.latlng.lat))<this.options._tolerance&&(null!=a?this._getP2PDistance(new s(h.lng,h.lat),new s(t.latlng.lng,t.latlng.lat))<a&&(a=this._getP2PDistance(new s(h.lng,h.lat),new s(t.latlng.lng,t.latlng.lat)),this._reGeo.geometry=h):(a=this._getP2PDistance(new s(h.lng,h.lat),new s(t.latlng.lng,t.latlng.lat)),this._reGeo.geometry=h),this._reGeo.snapGridOption=this.options.gridlayer.getGridOption(),this._reGeo.isGridSnap=!0)}if(this._isInArr(1,this.options.gridSnapType)&&!this._reGeo.isGridSnap)for(var u=[[t.latlng.lng,i],[n,t.latlng.lat],[t.latlng.lng,o],[e,t.latlng.lat]],c=0;c<4;c++){var p={lng:u[c][0],lat:u[c][1]};this._getP2PDistance(new s(p.lng,p.lat),new s(t.latlng.lng,t.latlng.lat))<this.options._tolerance&&(null!=a?this._getP2PDistance(new s(p.lng,p.lat),new s(t.latlng.lng,t.latlng.lat))<a&&(a=this._getP2PDistance(new s(p.lng,p.lat),new s(t.latlng.lng,t.latlng.lat)),this._reGeo.geometry=p):(a=this._getP2PDistance(new s(p.lng,p.lat),new s(t.latlng.lng,t.latlng.lat)),this._reGeo.geometry=p),this._reGeo.snapGridOption=this.options.gridlayer.getGridOption(),this._reGeo.isGridSnap=!0)}}return this._reGeo},_isPointInStation:function(t,e){return t.latlng.lng<e[2][0]&&t.latlng.lng>e[0][0]&&(t.latlng.lat<e[2][1]&&t.latlng.lat>e[0][1])},_isInArr:function(t,e){var i=void 0;for(var n in e){if(e[n]==t){i=!0;break}i=!1}return i}});e.exports.GridSnapAgent=o,e.exports.gridSnapAgent=function(t){return new o(t)}},{"../Geometry/Point":61,"./GridSnapEnum":28,"./Snap":30}],28:[function(t,e,i){"use strict";var n={eoHitGridNull:0,eoHitGridPoint:1,eoHitGridHLine:2,eoHitGridVLine:4};e.exports.GridSnapEnum=n},{}],29:[function(t,e,i){"use strict";var n=L.Evented.extend({options:{isSource:!1,lyrIds:[],psrids:[]},initialize:function(t){L.setOptions(this,t),this.lyrIds=this.options.lyrIds,this.psrids=this.options.psrids,this.isSource=this.options.isSource},lyrIds:[],psrids:[],isSource:!1,getlyrIds:function(){return this.lyrIds},getpsrids:function(){return this.psrids},getisSource:function(){return this.isSource},getType:function(){return"QueryParam"}});e.exports.QueryParam=n,e.exports.queryParam=function(t){return new n(t)}},{}],30:[function(t,e,i){"use strict";var n=t("./FeatureSnapEnum").FeatureSnapEnum,s=t("../Geometry/Geometry").Geometry,o=t("../Geometry/Point").Point,r=L.Handler.extend({options:{snapKey:"",snapMode:0,tolerance:5},initialize:function(t){L.setOptions(this,t)},snap:function(){},getLayer:function(t){return[]},snapTest:function(t,e){var i,s=-1;this.options._tolerance=this._getRealDistance(t.latlng),(this.options.snapMode&n.eoHitTerminal)==n.eoHitTerminal&&(i=this._calcTerminal(t,e),s=2,this._getSnapGeo(i,t,s)),(this.options.snapMode&n.eoHitVertex)==n.eoHitVertex&&(i=this._calcVertex(t,e),s=0,this._getSnapGeo(i,t,s)),(this.options.snapMode&n.eoHitMidPoint)==n.eoHitMidPoint&&(i=this._calcMid(t,e),s=1,this._getSnapGeo(i,t,s)),(this.options.snapMode&n.eoHitEdge)==n.eoHitEdge&&(i=this._calcEdge(t,e),s=3,this._getSnapGeo(i,t,s)),this.options.snapMode,n.eoHitNull},_getRealDistance:function(t){var e=this.options.target.latLngToLayerPoint(t),i=new L.Point(e.x+this.options.tolerance,e.y);return this.options.target.layerPointToLatLng(i).lng-t.lng},_getSnapGeo:function(t,e,i){if(0==this._distmp&&t.distance||this._distmp>=t.distance)if(3==this._reGeo.geotype&&i<3&&this._setReGeo(t,i),this._reGeo.geotype<3&&3==i){var n=this._getP2PDistance(new o(e.latlng.lng,e.latlng.lat),new o(this._reGeo.geometry.lng,this._reGeo.geometry.lat));n>this.options.tolerance&&this._setReGeo(t,i)}else(2!=this._reGeo.geotype||0!=i&&1!=i)&&(0==this._reGeo.geotype&&1==i||this._setReGeo(t,i))},_setReGeo:function(t,e){var i=t.graphic.getGeometry().getType();this._reGeo.devGeoType=i,this._distmp=t.distance,this._reGeo=t,this._reGeo.Terminal=t.Terminal,this._reGeo.isSnap=!0,this._reGeo.geotype=e,this._reGeo.pointsIndex=t.pointsIndex},_calcVertex:function(t,e){var i=e.getGeometry().getType(),n=0,r={};switch(i){case s.POINT:n=this._getP2PDistance(new o(t.latlng.lng,t.latlng.lat),new o(e.getGeometry().toLatLng().lng,e.getGeometry().toLatLng().lat)),n<this.options._tolerance&&(r.geometry=e.getGeometry().toLatLng(),r.distance=n);break;case s.POLYLINE:var a=0,l=e.getGeometry().getPaths()[0];if(l&&l.length>0)for(var h=0;h<l.length;h++){var u=new L.LatLng(l[h].y,l[h].x),c=this._getP2PDistance(new o(u.lng,u.lat),new o(t.latlng.lng,t.latlng.lat));c<this.options._tolerance&&(0==a||a>c)&&(a=c,r.geometry=u,r.distance=a,0==h?r.pointsIndex=[-1,1]:h==l.length-1?r.pointsIndex=[l.length-2,-1]:r.pointsIndex=[h-1,h+1])}break;case s.POLYGON:var p=0,l=e.getGeometry().getRing(0);if(l&&l.length>0)for(var h=0;h<l.length-1;h++){var u=new L.LatLng(l[h].y,l[h].x),c=this._getP2PDistance(new o(u.lng,u.lat),new o(t.latlng.lng,t.latlng.lat));c<this.options._tolerance&&(0==p||p>c)&&(p=c,r.geometry=u,r.distance=c,0==h?r.pointsIndex=[-1,1]:h==l.length-1?r.pointsIndex=[l.length-2,-1]:r.pointsIndex=[h-1,h+1])}}return e&&(r.graphic=e),r},_calcMid:function(t,e){var i=e.getGeometry().getType(),n=0,r={};switch(i){case s.POINT:n=this._getP2PDistance(new o(t.latlng.lng,t.latlng.lat),new o(e.getGeometry().toLatLng().lng,e.getGeometry().toLatLng().lat)),n<this.options._tolerance&&(r.geometry=e.getGeometry().toLatLng(),r.distance=n);break;case s.POLYLINE:var a=0,l=e.getGeometry().getPaths()[0];if(l&&l.length>0)for(var h=0,u=h+1;u<=l.length-1;h++,u++){
var c=new L.LatLng(l[h].y,l[h].x),p=new L.LatLng(l[u].y,l[u].x),d=(c.lng+p.lng)/2,y=(c.lat+p.lat)/2,f=new L.latLng(y,d),_=this._getP2PDistance(new o(f.lng,f.lat),new o(t.latlng.lng,t.latlng.lat));_<this.options._tolerance&&(0==a||a>_)&&(a=_,r.geometry=f,r.distance=_,r.pointsIndex=[h,u])}break;case s.POLYGON:var a=0,l=e.getGeometry().getRing(0);if(l&&l.length>0)for(var h=0,u=h+1;u<=l.length-2;h++,u++){var c=new L.LatLng(l[h].y,l[h].x),p=new L.LatLng(l[u].y,l[u].x),d=(c.lng+p.lng)/2,y=(c.lat+p.lat)/2,f=new L.latLng(y,d),_=this._getP2PDistance(new o(f.lng,f.lat),new o(t.latlng.lng,t.latlng.lat));_<this.options._tolerance&&(0==a||a>_)&&(a=_,r.geometry=f,r.distance=_,r.pointsIndex=[h,u])}}return e&&(r.graphic=e),r},_calcEdge:function(t,e){var i=e.getGeometry().getType(),n=0,r={};switch(i){case s.POINT:n=this._getP2PDistance(new o(t.latlng.lng,t.latlng.lat),new o(e.getGeometry().toLatLng().lng,e.getGeometry().toLatLng().lat)),n<this.options._tolerance&&(r.geometry=e.getGeometry().toLatLng(),r.distance=n);break;case s.POLYLINE:var a=0,l=e.getGeometry().getPaths()[0];if(l&&l.length>0)for(var h=0,u=h+1;u<=l.length-1;h++,u++){var c=l[h],p=l[u],d=this._getP2LDistance(c,p,{x:t.latlng.lng,y:t.latlng.lat});if(d.distance<this.options._tolerance&&(0==a||a>d.distance)){a=d.distance;var y=new L.LatLng(d.point.y,d.point.x);r.geometry=y,r.distance=d.distance,r.pointsIndex=[h,u]}}break;case s.POLYGON:var a=0,l=e.getGeometry().getRing(0);if(l&&l.length>0)for(var h=0,u=h+1;u<=l.length-2;h++,u++){var c=l[h],p=l[u],d=this._getP2LDistance(c,p,{x:t.latlng.lng,y:t.latlng.lat});if(d.distance<this.options._tolerance&&(0==a||a>d.distance)){a=d.distance;var y=new L.LatLng(d.point.y,d.point.x);r.geometry=y,r.distance=d.distance,r.pointsIndex=[h,u]}}}return e&&(r.graphic=e),r},_calcTerminal:function(t,e){var i=e.getGeometry().getType(),n=e.getAttribute().geotype,r=0,a={};switch(i){case s.POINT:if(2==n||5==n||6==n)for(var l=0,h={},u=0,c=this._getTreminal(e),p=0;p<c.length;p++){var d=c[p].dzcoords;l=this._getP2PDistance(new o(t.latlng.lng,t.latlng.lat),new o(d.lng,d.lat)),l<this.options._tolerance&&(0==u||u>l)&&(h.geometry=d,h.Terminal=c[p].TerminalInfo,h.distance=l,u=l,a=h)}else(r=this._getP2PDistance(new o(t.latlng.lng,t.latlng.lat),new o(e.getGeometry().toLatLng().lng,e.getGeometry().toLatLng().lat)))<this.options._tolerance&&(a.geometry=e.getGeometry().toLatLng(),a.distance=r);break;case s.POLYLINE:var y=0,f=e.getGeometry().getPaths()[0];if(f&&f.length>0)for(var _=0,m=_;m<f.length;_++,m=_*(f.length-1)){var g=f[m],v=this._getP2PDistance(g,new o(t.latlng.lng,t.latlng.lat));if(v<this.options._tolerance&&(0==y||y>v)){y=v;var b=new L.LatLng(g.y,g.x);a.geometry=b,a.distance=y,0==m?a.pointsIndex=[-1,1]:m==f.length-1&&(a.pointsIndex=[f.length-2,-1])}}}return e&&(a.graphic=e),a},_segmentsIntr:function(t,e,i,n){var s=(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x),o=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);if(s*o>=0)return!1;var r=(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x);if(r*(r+s-o)>=0)return!1;var a=r/(o-s),l=a*(e.x-t.x),h=a*(e.y-t.y);return[t.x+l,t.y+h]},_getTreminal:function(t){var e=t.getAttribute().treminalints,i=t.getAttribute().calcTerminalsCoords,n=[];if(1==e)n.push({dzcoords:new L.latLng(i[0][0][1],i[0][0][0]),TerminalInfo:{dzindex:1,type:"unclip"}});else if(2==e)n.push({dzcoords:new L.latLng(i[0][0][1],i[0][0][0]),TerminalInfo:{dzindex:1,type:"unclip"}}),n.push({dzcoords:new L.latLng(i[0][2][1],i[0][2][0]),TerminalInfo:{dzindex:2,type:"unclip"}});else if(3==e)for(var s=0;s<i.length;s++){var o={x:i[s][0][0],y:i[s][0][1]};n.push({dzcoords:new L.latLng(o.y,o.x),TerminalInfo:{dzindex:s,type:"unclip"}})}else console.log(geo.geotype);return n},_getTreminaloldver1:function(t){var e=t.getAttribute().geotype,i=t.getAttribute().treminalints,n=t.getAttribute().calcTerminalsCoords,s=[];if(1==i)s.push({dzcoords:new L.latLng(n[0][0][1],n[0][0][0]),TerminalInfo:{dzindex:1,type:"unclip"}});else{if(5==e){for(var s=[],o=0;o<n.length;o++){var r={x:n[o][0][0],y:n[o][0][1]};s.push({dzcoords:new L.latLng(r.y,r.x),TerminalInfo:{dzindex:o,type:"unclip"}})}return s}if(6==e){var s=[];if(n)if(n.length>2)for(var a=0;a<n.length;a++){var r={x:n[a][0][0],y:n[a][0][1]};s.push({dzcoords:new L.latLng(r.y,r.x),TerminalInfo:{dzindex:a,type:"unclip"}})}else s.push({dzcoords:new L.latLng(n[0][0][1],n[0][0][0]),TerminalInfo:{dzindex:1,type:"unclip"}}),n[0].length>2?s.push({dzcoords:new L.latLng(n[0][2][1],n[0][2][0]),TerminalInfo:{dzindex:2,type:"unclip"}}):s.push({dzcoords:new L.latLng(n[0][1][1],n[0][1][0]),TerminalInfo:{dzindex:2,type:"unclip"}});return s}8==e&&console.log(geo.geotype)}return s},_getTreminalOldVersion:function(t){var e=t.getAttribute().geotype,i=t.getAttribute().calcTerminalsCoords;t.getSymbol().options.symbolId;if(2==e||6==e){var n=[];return n.push({dzcoords:new L.latLng(i[0][0][1],i[0][0][0]),TerminalInfo:{dzindex:1,type:"unclip"}}),i[0].length>2?n.push({dzcoords:new L.latLng(i[0][2][1],i[0][2][0]),TerminalInfo:{dzindex:2,type:"unclip"}}):n.push({dzcoords:new L.latLng(i[0][1][1],i[0][1][0]),TerminalInfo:{dzindex:2,type:"unclip"}}),n}if(5==e){for(var n=[],s=0;s<i.length;s++){var o={x:i[s][0][0],y:i[s][0][1]};n.push({dzcoords:new L.latLng(o.y,o.x),TerminalInfo:{dzindex:s,type:"unclip"}})}return n}8==e&&console.log(geo.geotype)},_getP2PDistance:function(t,e){return this.options.target.getDistance(t,e)},_getP2LDistance:function(t,e,i){var n=t,s=e,o=i;return this._point2line(n,s,o)},_point2line:function(t,e,i){var n=(e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y);if(n<=0)return{distance:Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y)),point:{x:t.x,y:t.y}};var s=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);if(n>=s)return{distance:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)),point:{x:e.x,y:e.y}};var o=n/s,r=t.x+(e.x-t.x)*o,a=t.y+(e.y-t.y)*o;return{distance:Math.sqrt((i.x-r)*(i.x-r)+(i.y-a)*(i.y-a)),point:{x:r,y:a}}}});e.exports.Snap=r,e.exports.snap=function(t){return new r(t)}},{"../Geometry/Geometry":57,"../Geometry/Point":61,"./FeatureSnapEnum":25}],31:[function(t,e,i){"use strict";var n=t("./QueryParam").QueryParam,s=n.extend({options:{geometry:void 0,isElesearch:!0},lyrIds:[],psrids:[],isSource:!1,geometry:void 0,initialize:function(t){L.setOptions(this,t),this.geometry=this.options.geometry,this._isElesearch=this.options.isElesearch,n.prototype.initialize.call(this,null,this.options)},getGeometry:function(){return this.geometry},getisElesearch:function(){return this._isElesearch},getType:function(){return"SpatialParam"}});e.exports.SpatialParam=s,e.exports.spatialParam=function(t){return new s(t)}},{"./QueryParam":29}],32:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/get-iterator"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../Geometry/Geometry").Geometry,r=t("../Geometry/Polygon").Polygon,a=t("../Features/Graphic").Graphic,l=(t("../Layers/GraphicsLayer").GraphicsLayer,L.Evented.extend({statics:{SpatialRelTouches:0,SpatialRelCrosses:1,SpatialRelOverlaps:2,SpatialRelWithin:3,SpatialRelIntersects:4},options:{isSource:!1,lyrIds:[]},initialize:function(t,e){this._map=t,L.Util.setOptions(this,e)},setIsSource:function(t){this.options.isSource=t},seachFeaturesbyArr:function(t,e){for(var i=this._map.getFeatureCache(),n=[],o=0;o<e.length;o++){var r=i.get(e[o]);if(r){var a=!0,l=!1,h=void 0;try{for(var u,c=(0,s.default)(r);!(a=(u=c.next()).done);a=!0)for(var p=u.value,d=0;d<t.length;d++)p[0]&&p[1].getAttribute().psrid&&p[1].getAttribute().psrid==t[d]&&n.push(this.getExactlyResult(p[1],this.options.isSource))}catch(t){l=!0,h=t}finally{try{!a&&c.return&&c.return()}finally{if(l)throw h}}}}return n},searchFeaturesByGeometry:function(t,e){if(t&&(t.getType()==o.POLYGON||t.getType()==o.EXTENT)){var i=t.getExtent(),n=this._map.quadtree;if(null==n||null==n.treeNodes||0==n.treeNodes.length)return[];var s=this._map.getFeatureCache(),a=n.getNodes(i);s=n.getLyrCache(e,s,this._map);var l=[],h=t;if(t.getType()==o.EXTENT){var u=[[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]]];h=new egis.geometry.Polygon(u)}for(var c=0;c<a.length;c++){var p=a[c],d=s.get(p);if(d){var y=d.getGeometry();switch(y.getType()){case o.POLYGON:if(!this.intersectsPolygonAndPolygon(y.getRing(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.POLYLINE:if(!this.intersetsPolylineAndPolygon(y.getPath(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.MULTIPOINT:var f=this._map.layerPointToLatLng(d._pxBounds.min),_=this._map.layerPointToLatLng(d._pxBounds.max),m=new r([[[f.lng,f.lat],[f.lng,_.lat],[_.lng,_.lat],[_.lng,f.lat],[f.lng,f.lat]]]);if(!this.intersectsPolygonAndPolygon(m.getRing(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.POINT:if(!this.containsPointByLinearRing(y,h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource))}}}return l}},searchEleFeatures:function(t,e){if(t&&(t.getType()==o.POLYGON||t.getType()==o.EXTENT)){var i=t.getExtent(),n=this._map.quadtree;if(null==n||null==n.treeNodes||0==n.treeNodes.length)return[];var s=this._map.getFeatureCache(),a=n.getNodes(i);s=n.getLyrCache(e,s,this._map);var l=[],h=t;if(t.getType()==o.EXTENT){var u=[[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]]];h=new egis.geometry.Polygon(u)}for(var c=0;c<a.length;c++){var p=a[c],d=s.get(p);if(d){var y=d.getGeometry(),f=void 0;switch(y.getType()){case o.POLYGON:if(!(f=this.intersectsPolygonAndPolygon(y.getRing(0),h.getRing(0)))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.POLYLINE:if(t.getType()==o.EXTENT)f=this.intersetsPolylineAndRectangle(y,h);else if(y._paths&&y._paths.length>1)for(var _=0;_<y._paths.length&&!(f=this.intersetsPolylineAndPolygon(y.getPath(_),h.getRing(0)));_++);else f=!(!y._paths||1!=y._paths.length)&&this.intersetsPolylineAndPolygon(y.getPath(0),h.getRing(0));if(!f){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.MULTIPOINT:var m=this._map.layerPointToLatLng(d._pxBounds.min),g=this._map.layerPointToLatLng(d._pxBounds.max),v=new r([[[m.lng,m.lat],[m.lng,g.lat],[g.lng,g.lat],[g.lng,m.lat],[m.lng,m.lat]]]);if(!(f=this.intersectsPolygonAndPolygon(v.getRing(0),h.getRing(0)))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.CIRCLE:case o.POINT:var b={};if(d._pxBounds){b=d._pxBounds;var x={};x.min=this._map.layerPointToLatLng(b.min),x.max=this._map.layerPointToLatLng(b.max);var u=[[[x.min.lng,x.min.lat],[x.max.lng,x.min.lat],[x.max.lng,x.max.lat],[x.min.lng,x.max.lat],[x.min.lng,x.min.lat]]],L=new r(u);f=this.intersectsPolygonAndPolygon(L.getRing(0),h.getRing(0))}else f=this.containsPointByLinearRing(y,h.getRing(0));if(!f){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource))}}}return l}},searchEleFeatures1:function(t,e){if(t&&(t.getType()==o.POLYGON||t.getType()==o.EXTENT)){var i=t.getExtent(),n=this._map.quadtree;if(null==n||null==n.treeNodes||0==n.treeNodes.length)return[];var s=this._map.getFeatureCache(),a=n.getNodes(i);s=n.getLyrCache(e,s,this._map);var l=[],h=t;if(t.getType()==o.EXTENT){var u=[[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]]];h=new r(u)}for(var c=0;c<a.length;c++){var p=a[c],d=s.get(p);if(d){var y=void 0;y=d.labels?d.geometry:d.getGeometry();var f=void 0;switch(y.getType()){case o.POLYGON:if(!(f=this.intersectsPolygonAndPolygon(y.getRing(0),h.getRing(0)))){a.splice(c,1),c--;break}if(d.labels)for(var _=0;_<d.labels.length;_++)l.push(this.getExactlyResult(d.labels[_],this.options.isSource));else l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.POLYLINE:if(!(f=this.intersetsPolylineAndPolygon(y.getPath(0),h.getRing(0)))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.MULTIPOINT:var m=this._map.layerPointToLatLng(d._pxBounds.min),g=this._map.layerPointToLatLng(d._pxBounds.max),v=new r([[[m.lng,m.lat],[m.lng,g.lat],[g.lng,g.lat],[g.lng,m.lat],[m.lng,m.lat]]]);if(!(f=this.intersectsPolygonAndPolygon(v.getRing(0),h.getRing(0)))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource));break;case o.POINT:var b={};if(d._pxBounds){b=d._pxBounds;var x={};x.min=this._map.layerPointToLatLng(b.min),x.max=this._map.layerPointToLatLng(b.max);var u=[[[x.min.lng,x.min.lat],[x.max.lng,x.min.lat],[x.max.lng,x.max.lat],[x.min.lng,x.max.lat],[x.min.lng,x.min.lat]]],L=new r(u);f=this.intersectsPolygonAndPolygon(L.getRing(0),h.getRing(0))}else f=this.containsPointByLinearRing(y,h.getRing(0));if(!f){a.splice(c,1),c--;break}l.push(this.getExactlyResult(s.get(p),this.options.isSource))}}}return l}},getExactlyResult:function(t,e){if(e)return t;var i={};for(var n in t.getAttribute())i[n]=t.getAttribute()[n];return new a(t.getGeometry().clone(),t.getSymbol().clonenew(),i)},intersectsPolygonAndPolygon:function(t,e){function i(t,e){function i(t,e){var i=0;return e>0&&(i=parseFloat(t.toPrecision(e))),i}for(var n,s,o,r,a,l,h,u=i(t.x,14),c=i(t.y,14),p=e.length-1,d=0,y=0;y<p;++y)if(n=e[y],o=i(n.x,14),r=i(n.y,14),s=e[y+1],a=i(s.x,14),l=i(s.y,14),r!=l){if((h=i(function(t,e,i,n,s){return(n-e)/(s-i)*(t-s)+n}(c,o,r,a,l),14))==u&&(r<l&&c>=r&&c<=l||r>l&&c<=r&&c>=l)){d=-1;break}h<=u||o!=a&&(h<Math.min(o,a)||h>Math.max(o,a))||(r<l&&c>=r&&c<l||r>l&&c<r&&c>=l)&&++d}else if(c==r&&(o<=a&&u>=o&&u<=a||o>=a&&u<=o&&u>=a)){d=-1;break}return d==-1?1:!!(1&d)}function n(t,e){var i,n,r,a,l,h,u,c,p=!1,d=s(t),y=s(e);t:for(var f=0,_=d.length;f<_;++f){i=d[f],n=i.x1,r=i.x2,a=i.y1,l=i.y2;for(var m=0,g=y.length;m<g&&(h=y[m],!(h.x1>r));++m)if(!(h.x2<n)&&(u=h.y1,c=h.y2,!(Math.min(u,c)>Math.max(a,l))&&!(Math.max(u,c)<Math.min(a,l))&&o(i,h))){p=!0;break t}}return p}function s(t){function e(t,e){return t.x1-e.x1}for(var i,n,s=t.length-1,o=new Array(s),r=0;r<s;++r)i=t[r],n=t[r+1],i.x<n.x?o[r]={x1:i.x,y1:i.y,x2:n.x,y2:n.y}:o[r]={x1:n.x,y1:n.y,x2:i.x,y2:i.y};return o.sort(e)}function o(t,e,i){var n=i&&i.point,s=i&&i.tolerance,o=!1,a=t.x1-e.x1,l=t.y1-e.y1,h=t.x2-t.x1,u=t.y2-t.y1,c=e.y2-e.y1,p=e.x2-e.x1,d=c*h-p*u,y=p*l-c*a,f=h*l-u*a;if(0==d)0==y&&0==f&&(o=!0);else{var _=y/d,m=f/d;if(_>=0&&_<=1&&m>=0&&m<=1)if(n){var g=t.x1+_*h,v=t.y1+_*u;o={x:g,y:v}}else o=!0}if(s){if(o){if(n){var b,g,v,x=[t,e];t:for(var L=0;L<2;++L){b=x[L];for(var w=1;w<3;++w)if(g=b["x"+w],v=b["y"+w],Math.sqrt(Math.pow(g-o.x,2)+Math.pow(v-o.y,2))<s){o.x=g,o.y=v;break t}}}}else{var S,P,g,v,T,C,x=[t,e];t:for(var L=0;L<2;++L){S=x[L],P=x[(L+1)%2];for(var w=1;w<3;++w)if(T={x:S["x"+w],y:S["y"+w]},C=r(T,P),C.distance<s){o=!n||{x:T.x,y:T.y};break t}}}}return o}function r(t,e){var i=a(t,e);return i.distance=Math.sqrt(i.distance),i}function a(t,e){var i,n,s=t.x,o=t.y,r=e.x1,a=e.y1,l=e.x2,h=e.y2,u=l-r,c=h-a,p=(u*(s-r)+c*(o-a))/(Math.pow(u,2)+Math.pow(c,2));return p<=0?(i=r,n=a):p>=1?(i=l,n=h):(i=r+p*u,n=a+p*c),{distance:Math.pow(i-s,2)+Math.pow(n-o,2),x:i,y:n,along:p}}return function(t,e){var s=!1;if(!(s=n(t,e)))for(var o=0,r=t.length;o<r;++o){var a=t[o];if(s=i(a,e))break}if(!s)for(var l=0,h=e.length;l<h;++l){var u=e[l];if(s=i(u,t))break}return s}(t,e)},containsPointByLinearRing:function(t,e){for(var i=t.x,n=t.y,s=!1,o=0,r=e.length,a=r-1;o<r;a=o,o++){var l=e[o].x,h=e[o].y,u=e[a].x,c=e[a].y;if(l===i&&h===n||u===i&&c===n)return"on";if(h<n&&c>=n||h>=n&&c<n){var p=l+(n-h)*(u-l)/(c-h);if(p===i)return"on";p>i&&(s=!s)}}return s},intersetsPolylineAndRectangle:function(t,e){function i(t,e,i,n){var s=(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x),o=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);if(s*o>=0)return!1;var r=(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x);if(r*(r+s-o)>=0)return!1;var a=r/(o-s),l=a*(e.x-t.x),h=a*(e.y-t.y);return[t.x+l,t.y+h]}return!!function(t,e){for(var n=e.getExtent(),s=Math.min(n.xmin,n.xmax),o=Math.max(n.xmin,n.xmax),r=Math.min(n.ymin,n.ymax),a=Math.max(n.ymin,n.ymax),l={x:s,y:r},h={x:s,y:a},u={x:o,y:a},c={x:o,y:r},p=0;p<t.getPaths().length;p++)for(var d=0;d<t.getPath(p).length;d++){var y=t.getPath(p)[d];if(y.x>s&&y.x<o&&y.y>r&&y.y<a)return!0}for(var p=0;p<t.getPaths().length;p++)for(var f=0;f<t.getPath(p).length-1;f++){var y=t.getPath(p)[f],_=t.getPath(p)[f+1];if(i(y,_,l,h)||i(y,_,h,u)||i(y,_,u,c)||i(y,_,c,l))return!0}return!1}(t,e)||function(t,e){var i=t.getExtent(),n=Math.min(i.xmin,i.xmax),s=Math.max(i.xmin,i.xmax),o=Math.min(i.ymin,i.ymax),r=Math.max(i.ymin,i.ymax),a=e.getExtent(),l=Math.min(a.xmin,a.xmax),h=Math.max(a.xmin,a.xmax),u=Math.min(a.ymin,a.ymax),c=Math.max(a.ymin,a.ymax);return n>l&&s<h&&o>u&&r<c}(t,e)},intersetsPolylineAndPolygon:function(t,e){function i(t,e,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)}function n(t,e,i,n,s,o){var r=(o-n)*(i-t)+(e-n)*(s-i);return o>n?e>=n&&e<o&&r>=0:e>=o&&e<n&&r<0}function s(t,e,i){for(var s=t.length,o=0,r=0;r<s;r++)r==s-1?n(e,i,t[0].x,t[0].y,t[r].x,t[r].y)&&o++:n(e,i,t[r].x,t[r].y,t[r+1].x,t[r+1].y)&&o++;return 0!=o&&0!=(1&o)}function o(t,e,n,s){var o,r,a,l,h,u,c,p,d,y;return t.x>e.x?(a=e.x,h=t.x):(a=t.x,h=e.x),t.y>e.y?(l=e.y,u=t.y):(l=t.y,u=e.y),n.x>s.x?(c=s.x,d=n.x):(c=n.x,d=s.x),n.y>s.y?(p=s.y,y=n.y):(p=n.y,y=s.y),!(d<=a||c>=h||y<=l||p>=u)&&(o=i(t,n,s),r=i(e,n,s),0!=o&&0!=r&&(!(o>0&&r>0||o<0&&r<0)&&(o=i(n,t,e),r=i(s,t,e),0!=o&&0!=r&&!(o>0&&r>0||o<0&&r<0))))}function r(t,e){for(var i,n,s,r,a=t.length,l=e.length,h=0;h<a&&h!=a-1;h++){i=t[h],n=t[h+1];for(var u=0;u<l;u++)if(s=e[u],r=u==l-1?e[0]:e[u+1],o(i,n,s,r))return!0}return!1}function a(t,e){for(var i,n,s=t.length,o=(e.length,0);o<s-1;o++)if(i=t[o],n=t[o+1],!l(i,n,e))return!1;return!0}function l(t,e,i){if(!s(i,t.x,t.y)||!s(i,e.x,e.y))return!1;for(var n,r,a=i.length,l=0;l<a;l++)if(n=i[l],r=l==a-1?i[0]:i[l+1],o(t,e,n,r))return!1;return!0}return!!r(t,e)||a(t,e)}}));e.exports.SpatialQuery=l,e.exports.spatialQuery=function(t){return new l(t)}},{"../Features/Graphic":36,"../Geometry/Geometry":57,"../Geometry/Polygon":62,"../Layers/GraphicsLayer":103,"babel-runtime/core-js/get-iterator":162}],33:[function(t,e,i){"use strict";var n=function(t){this.name="DeveloperError",this.message=t;var e="";try{throw new Error}catch(t){e=t.stack}this.stack=e};n.prototype.toString=function(){var t=this.name+": "+this.message;return t+="\n"+this.stack.toString()},n.throwInstantiationError=function(){throw new n("This function defines an interface and should not be called directly.")},e.exports=n,e.exports.DeveloperError=n},{}],34:[function(t,e,i){"use strict";e.exports=L.DomEvent},{}],35:[function(t,e,i){"use strict";e.exports=L.Evented},{}],36:[function(t,e,i){"use strict";function n(t,e){switch(t){case s.POINT:return new o(e);case s.MULTIPOINT:return new p(e);case s.CIRCLE:return new h(e);case s.ELLIPSE:return new c(e);case s.EXTENT:return new l(e);case s.POLYGON:return new r(e);case s.POLYLINE:return new a(e);case s.SECTOR:return new u(e);case s.STRAIGHTARROW:return new d(e);case s.SQUADCOMBAT:return new y(e);case s.TAILEDSQUADCOMBAT:return new f(e);case s.DOUBLEARROW:return new _(e);case s.GATHERINGPLACE:return new m(e)}}var s=t("../Geometry/Geometry").Geometry,o=t("./Graphic/Point"),r=t("./Graphic/Polygon"),a=t("./Graphic/Polyline"),l=t("./Graphic/Extent"),h=t("./Graphic/Circle"),u=t("./Graphic/Sector"),c=t("./Graphic/Ellipse"),p=t("./Graphic/MultiPoint"),d=t("./Graphic/StraightArrow"),y=t("./Graphic/SquadCombat"),f=t("./Graphic/TailedSquadCombat"),_=t("./Graphic/DoubleArrow"),m=t("./Graphic/GatheringPlace"),g=function(t){if(!t)return void(this.options={});this.options={},arguments.length>1?(this.options=arguments[3]||{},this.options.geometry=arguments[0],this.options.symbol=arguments[1],this.options.attribute=arguments[2]):this.options=t,this.options.geometry&&this.setGeometry(this.options.geometry),this.options.symbol&&this.options.symbol.on("redraw",this.redraw,this)};g.prototype.setGeometry=function(t){if(this._geometry&&this._geometry.off("redraw",this.redraw,this),this.getGeometry&&this.getGeometry().getType()===t.getType())return this._geometry=t,this.redraw(),t.on("redraw",this.redraw,this),this;this.options.geometry=t;var e=n(t.getType(),this.options);for(var i in e)"setGeometry"!==i&&"clone"!==i&&(this[i]=e[i]);this.redraw(),t.on("redraw",this.redraw,this)},g.prototype.setSymbol=function(t){var e=this;return this.options.symbol&&this.options.symbol.off(),this.options.symbol=t,t.on("redraw",function(){e.redraw()},this),this},g.prototype.getSymbol=function(){return this.options.symbol},g.prototype.clone=function(){return new g({geometry:this._geometry.clone(),symbol:this._symbol.clone(),attribute:L.Util.extend({},this._attribute)})},e.exports.Graphic=g,e.exports.graphic=function(t){return new g(t)}},{"../Geometry/Geometry":57,"./Graphic/Circle":37,"./Graphic/DoubleArrow":38,"./Graphic/Ellipse":39,"./Graphic/Extent":40,"./Graphic/GatheringPlace":41,"./Graphic/MultiPoint":43,"./Graphic/Point":44,"./Graphic/Polygon":45,"./Graphic/Polyline":46,"./Graphic/Sector":47,"./Graphic/SquadCombat":48,"./Graphic/StraightArrow":49,"./Graphic/TailedSquadCombat":50}],37:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=this._geometry,e=t.center.toLatLng(),i=e.lng,s=e.lat,o=this._map,r=o.options.crs;if(r.distance===L.CRS.Earth.distance){var a=Math.PI/180,l=t.radius/L.CRS.Earth.R/a,h=o.project([s+l,i]),u=o.project([s-l,i]),c=h.add(u).divideBy(2),p=o.unproject(c).lat,d=Math.acos((Math.cos(l*a)-Math.sin(s*a)*Math.sin(p*a))/(Math.cos(s*a)*Math.cos(p*a)))/a;(isNaN(d)||0===d)&&(d=l/Math.cos(Math.PI/180*s)),this._point=c.subtract(o.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(c.x-o.project([p,i-d]).x),1),this._radiusY=Math.max(Math.round(c.y-h.y),1)}else{var y=r.unproject(r.project(e).subtract([t.radius,0]));this._point=o.latLngToLayerPoint(e),this._radius=this._point.x-o.latLngToLayerPoint(y).x}this._updateBounds(),this._projectGeometry.type=n.Geometry.CIRCLE,this._projectGeometry.geometry={center:this._point,radius:this._radius,radiusY:this._radiusY}},destroy:function(){},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new L.Bounds(this._point.subtract(n),this._point.add(n))},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){var e=this._map,i=this._geometry,n=i.radius,s=i.center.toLatLng(),o=e.layerPointToLatLng(t);return e.distance(s,o)<=n}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],38:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPoints();this._proPoints=[],this._projectPoints(e,this._proPoints,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._proPoints,t=null,e=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)}catch(t){console.warn(t)}},_updateBounds:function(){},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],39:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("../../Util"),o=t("./Graphic"),r=o.extend({_project:function(){var t=this._geometry,e=new egis.geometry.MapPoint(t.center.x,t.center.y).toLatLng(),i=e.lng,o=e.lat,r=this._map,a=r.options.crs;if(a.distance===L.CRS.Earth.distance){var l=Math.PI/180,h=t.width/L.CRS.Earth.R/l,u=t.height/L.CRS.Earth.R/l,c=r.project([o+u,i]),p=r.project([o-u,i]),d=c.add(p).divideBy(2),y=r.unproject(d).lat,f=Math.acos((Math.cos(h*l)-Math.sin(o*l)*Math.sin(y*l))/(Math.cos(o*l)*Math.cos(y*l)))/l;(isNaN(f)||0===f)&&(f=h/Math.cos(Math.PI/180*o));var _=d.subtract(r.getPixelOrigin()),m=isNaN(f)?0:Math.max(Math.round(d.x-r.project([y,i-f]).x),1),g=Math.max(Math.round(d.y-c.y),1)}else var v=a.unproject(a.project(e).subtract([t.width,0])),b=a.unproject(a.project(e).subtract([0,t.height])),_=r.latLngToLayerPoint(e),m=this._point.x-r.latLngToLayerPoint(v).x,g=this._point.y-mp.latLngToLayerPoint(b).y;var x=this._clickTolerance(),w=(new egis.geometry.MapPoint(t.x,t.y).toLatLng(),{});w.center=_,w.width=m,w.height=g;var S=w.width+x,P=w.height+x,T=s.coorTransByAngle(_,[_.subtract([S,-P]),_.subtract([-S,-P]),_.subtract([-S,P]),_.subtract([S,P])],0);this._projectGeometry.type=n.Geometry.ELLIPSE,this._projectGeometry.geometry=w,this._pxBounds=s._getPxBoundByPoints(T),this._pxPaths=T},_empty:function(){return this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){var e=this._geometry;return s.isPointInEllipse(e.center,t,e.width,e.height,e.angle)}});e.exports=r},{"../../Geometry/Geometry":57,"../../Util":154,"./Graphic":42}],40:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Polygon"),o=s.extend({_project:function(){var t=this._clickTolerance(),e=new L.Bounds,i=this._geometry,s=[],o=[],r=new egis.geometry.MapPoint(i.xmin,i.ymin),a=this._map.latLngToLayerPoint(r.toLatLng());e.extend(a),o.push(a);var l=new egis.geometry.MapPoint(i.xmin,i.ymax),h=this._map.latLngToLayerPoint(l.toLatLng());e.extend(h),o.push(h);var u=new egis.geometry.MapPoint(i.xmax,i.ymax),c=this._map.latLngToLayerPoint(u.toLatLng());e.extend(c),o.push(c);var p=new egis.geometry.MapPoint(i.xmax,i.ymin),d=this._map.latLngToLayerPoint(p.toLatLng());e.extend(d),o.push(d),s.push(o);var y=[t,t];this._pxBounds=e,this._pxBounds.extend(e.min.subtract(y)),this._pxBounds.extend(e.max.add(y)),this._projectGeometry.type=n.Geometry.EXTENT,this._projectGeometry.geometry=s,this._rings=s.slice(0)},_containsPoint:function(t){return this._pxBounds.contains(t)}});e.exports=o},{"../../Geometry/Geometry":57,"./Polygon":45}],41:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPoints();this._proPoints=[],this._projectPoints(e,this._proPoints,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._proPoints,t=null,e=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)}catch(t){console.warn(t)}},_updateBounds:function(){},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],42:[function(t,e,i){"use strict";var n=t("../../Util"),s=t("../../Overlay/Popup").Popup,o=t("../../Symbol/EleMarkerSymbol"),r=t("../../Symbol/EleLineSymbol"),a=t("../../Symbol/EleFillSymbol"),l=L.Path.extend({options:{geometry:null,symbol:null,attribute:null,interactive:!0,draggable:!0,opacity:1,nonBubblingEvents:[],noClip:!1,maxZoom:void 0,minZoom:void 0,visible:!0,popupTemplate:""},initialize:function(t){t=t||{},L.setOptions(this,t);var e=t.geometry,i=t.symbol,n=t.attribute;if(this._projectGeometry={},this._visible=this.options.visible,this._dontshow=!this._visible,this._graphicLayer={},this._symbol=i,this._geometry=e,this._attribute=n||{},this._hasCleared=!1,i&&i.options.stroke&&i.options.outline&&"SimpleLineSymbol"!=this.options.symbol.getType()&&(this.options.outline=i.options.outline,i.options.outline.width&&(this.options.outline.width=i.options.outline.width),i.options.outline.width&&this.options.outline.width>i.options.width&&(this.options.outline.width=i.options.width)),this.id=this._id=L.stamp(this),this.options.popupTemplate){var o=L.Util.template(this.options.popupTemplate,this._attribute||{});this.popup=new s,this.popup.setContent(o),this.bindPopup(this.popup),o=null}e=null,i=null,n=null,t=null},onAdd:function(t){var e=this;["EleMarkerSymbol","EleFillSymbol","EleLineSymbol"].indexOf(this._symbol.getType())!==-1?(t.loadEleSymbol(function(){e._renderer._drawing=!1}),this._renderer._drawing=!1,L.Path.prototype.onAdd.call(this,t)):L.Path.prototype.onAdd.call(this,t),t=null},setPopupTemplate:function(t){this.options.popupTemplate=t;var e=L.Util.template(this.options.popupTemplate,this._attribute||{});this.popup||(this.popup=new s,this.bindPopup(this.popup)),this.popup.setContent(e)},getPopupTemplate:function(){return this.options.popupTemplate},getInteractive:function(){return this.options.interactive},setInteractive:function(t){return this.options.interactive=t,this},getVisible:function(){return this._visible},setVisible:function(t){return this._visible=t,this._dontshow=!t,this._hasCleared=!1,this.redraw(),this},getId:function(){return L.stamp(this)},setGeometry:function(t){return this._geometry=t,this},getGeometry:function(){return this._geometry},setAttribute:function(t){for(var e in t)this._attribute[e]=t[e];return this},getAttribute:function(){return this._attribute},setSymbol:function(t){return this._symbol&&this._symbol.off("redraw",this.redraw,this),this._symbol=t,t.on("redraw",this.redraw,this),this.redraw(),this},getSymbol:function(){return this._symbol},getProjectedGeometry:function(){return this._project(),this._projectGeometry.geometry},setMinZoom:function(t){return this.options.minZoom=t,this.redraw(),this},getMinZoom:function(){return this.options.minZoom},setMaxZoom:function(t){return this.options.maxZoom=t,this.redraw(),this},getMaxZoom:function(){return this.options.maxZoom},_clickTolerance:function(){return"EleLineSymbol"!=this.getSymbol().getType()&&"EleFillSymbol"!=this.getSymbol().getType()||!this._symbol.options.isChangeByScale?(this._symbol.options.stroke?(this._symbol.options.outline.width||1)/2*(this._symbol.options.scale||1):0)+(L.Browser.touch?10:0):this._clickToleranceBig()},_clickToleranceBig:function(){return 1e4*this._symbol.options.scale/this._map.getScale()},_clickToleranceBigMarker:function(){return 1e4*this._symbol.options.scale/this._map.getScale()},toJSON:function(){return{geometry:this._geometry.toJSON(),symbol:this._symbol.toJSON(),attribute:this._attribute}},clone:function(){},fromJSON:function(t){},refresh:function(){return this.redraw(),this._renderer._redraw(),this},hasEventListener:function(t){var e=this._events&&this._events[t];return!(!e||!e.count)},_openPopup:function(t){t.layer||t.target;this._popup&&this._map&&(L.DomEvent.stop(t),this.openPopup(t.layer||t.target,t.latlng))},_project:function(){},_empty:function(){return null==this._geometry},_update:function(){this._map&&!this._dontshow&&this._updatePath()},openPopup:function(t,e){return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},_updatePath:function(){if(this._symbol){if(this._map){var t=this._map.getZoom();if(this._dontshow=!1,this.options.maxZoom&&this.options.maxZoom<t)return void(this._dontshow=!0);if(this.options.minZoom&&this.options.minZoom>t)return void(this._dontshow=!0)}this._visible&&(n._drawnLayers[this._leaflet_id]=this,this._symbol.draw(this))}},removedrawnlayers:function(){n._drawnLayers[this._leaflet_id]&&delete n._drawnLayers[this._leaflet_id]}});e.exports=l,t("../../Map").Map.include({loadEleSymbol:function(t){var e=this;if("done"===this._elesymbolStatus)return void t.call();if("loading"===this._elesymbolStatus)return void this._elesymbolLoadCbs.push(t);this._elesymbolLoadCbs=[t]
;var i=egis.libPath.symbolData||egis.baseUrl+"assets/symbols/allSymbol.json",n="";i instanceof Object&&(n="json");var s={},l=function(){var t=L.EleSymbol&&L.EleSymbol.loadEleSymbol?L.EleSymbol.loadEleSymbol:"function"==typeof EleSymbol.loadEleSymbol?new EleSymbol.loadEleSymbol:EleSymbol.loadEleSymbol;e._elesymbolStatus="loading",t.load(i,void 0,n).then(function(i){i?(L.EleSymbol=EleSymbol,L.EleSymbol.loadEleSymbol=t,e._elesymbolStatus="done",null==L.EleSymbol.loadEleSymbol.getEleSymbol&&(L.EleSymbol.loadEleSymbol.getEleSymbol=function(t,e){switch(null==e&&(e={}),e.symbolId=t,L.EleSymbol.loadEleSymbol.getSymbolType(t)){case 1:return new o.EleMarkerSymbol(e);case 2:return new r.EleLineSymbol(e);case 3:return new a.EleFillSymbol(e)}},L.EleSymbol.loadEleSymbol.getEleSymbolType=function(t){switch(L.EleSymbol.loadEleSymbol.getSymbolType(t)){case 1:return"EleMarkerSymbol";case 2:return"EleLineSymbol";case 3:return"EleFillSymbol"}}),e._elesymbolLoadCbs.forEach(function(t){t.call()})):(e._elesymbolStatus="failed",s.code="error",s.message="电气符号文件未加载！",s.data=null,e._elesymbolLoadCbs.forEach(function(t){t.call(null,s)}))})};if(window.EleSymbol)return void l();var h=L.DomUtil.create("script");h.src=egis.libPath.symbolLib||egis.baseUrl+"assets/plugins/elesymbol2.0.0/elesymbol.js",h.onload=l,this._elesymbolStatus="loading",h.onerror=function(){s.code="error",s.message="电气符号类文件未加载！",s.data=null,t(s)},document.head.appendChild(h)}})},{"../../Map":116,"../../Overlay/Popup":127,"../../Symbol/EleFillSymbol":135,"../../Symbol/EleLineSymbol":136,"../../Symbol/EleMarkerSymbol":137,"../../Util":154}],43:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("../../Util"),o=t("./Graphic"),r=o.extend({_project:function(){var t,e,i=new L.Bounds,s=this._clickTolerance(),o=this._geometry,r=this.getSymbol(),a=o.getPoints(),l=a.length;for(this._rings=[],t=0;t<l;t++){e=a[t];var h=this._map.latLngToLayerPoint(e.toLatLng());i.extend(h),this._rings.push(h)}var e=[s,s];this._pxBounds=i,this._pxBounds.extend(i.min.subtract(e)),this._pxBounds.extend(i.max.add(e)),this._projectGeometry.type=n.Geometry.MULTIPOINT,this._projectGeometry.geometry=this._rings,this._updateBounds(h,r),i=null,a=null,l=null,o=null,t=null,null,null,e=null,e=null},destroy:function(){this._parts=null,this._rings=null,this._pxBounds=null,this._projectGeometry=null,this._geometry=null,this._renderer=null,this.options=null,this._map=null,this._radius=null,this._radiusY=null,this._pxPaths=null},_clickTolerance:function(){return 10},_updateBounds:function(t,e){var i=this._clickTolerance(),n=e.options.offset?e.options.offset:[0,0];switch(e.getType()){case"TextSymbol":for(var o=0;o<this._projectGeometry.geometry.length;o++){var r,a,l=this._projectGeometry.geometry[o].add(n),h=e.options.angle?e.options._angle[o]:0,u=h*Math.PI/180,c=e.options,p=this._renderer._ctx,d=p.font;p.font=c.font,e._width=e._width||0,e._width=Math.max(p.measureText(c._text[o]).width,e._width),e._height=parseFloat(p.font.split("px")[0]);var y=e.getRealScale(this._map),f=e._width/2*y,_=e._height/2*y;switch(p.font=d,e.options.textAlign){case"left":r=-1;break;case"right":r=1;break;case"center":r=0;break;default:r=0}switch(e.options.textBaseline){case"bottom":a=1;break;case"top":a=-1;break;case"middle":a=0;break;default:a=0}var m=l.add([f*r+i,_*a+i]),g=l.add([f*r+i,-(_*a+i)]),v=l.add([-(f*r+i),-(_*a+i)]),b=l.add([-(f*r+i),_*a+i]),x=s.coorTransByAngle(l,[m,g,v,b],u),L=s._getPxBoundByPoints(x);this._pxBounds?(this._pxBounds.min.x>L.min.x&&(this._pxBounds.min.x=L.min.x),this._pxBounds.min.y>L.min.y&&(this._pxBounds.min.y=L.min.y),this._pxBounds.max.x<L.max.x&&(this._pxBounds.max.x=L.max.x),this._pxBounds.max.y<L.max.y&&(this._pxBounds.max.y=L.max.y)):this._pxBounds=L,this._pxPaths=this._pxBounds}}},_containsPoint:function(t){return this._pxBounds.contains(t)}});e.exports=r},{"../../Geometry/Geometry":57,"../../Util":154,"./Graphic":42}],44:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("../../Util"),o=t("../../Symbol/SimpleMarkerSymbol"),r=t("./Graphic"),a=r.extend({_project:function(){var t=this._clickTolerance(),e=this.getSymbol(),i=this._geometry,s=i.toLatLng(),o=this._map.latLngToLayerPoint(s),r=[t,t];this._pxBounds=new L.Bounds(o.subtract(r),o.add(r)),this._projectGeometry.type=n.Geometry.POINT,this._projectGeometry.geometry=o,this._updateBounds(o,e),t=null,e=null,i=null,s=null,o=null,r=null},destroy:function(){this._parts=null,this._rings=null,this._pxBounds=null,this._projectGeometry=null,this._geometry=null,this._renderer=null,this.options=null,this._map=null,this._radius=null,this._pxcellBounds=null,this._pxPaths=null},_updateBounds:function(t,e){var i=this._clickTolerance(),n=e.options.offset?e.options.offset:[0,0],r=(e.options.angle||0)*Math.PI/180,a=e.options.scale?e.options.scale:1,l=this._projectGeometry.geometry.add(n);switch(e.getType()){case"SimpleMarkerSymbol":switch(e.getSymbolStyle()){case o.SimpleMarkerSymbol.STYLE_CIRCLE:var h=e.options.radius||10,u=2*(h*a+i),c=u/2;e._width=u,e._height=u,this._pxBounds=new L.Bounds(l.subtract([c,c]),l.add([c,c])),this._pxPaths=[l];break;case o.SimpleMarkerSymbol.STYLE_CROSS:var p=2*e.options.radius,d=p*a/2+i,u=2*d,y=s.coorTransByAngle(l,[l.subtract([d,-d]),l.subtract([-d,-d]),l.subtract([-d,d]),l.subtract([d,d])],r);e._width=u,e._height=u,this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y;break;case o.SimpleMarkerSymbol.STYLE_RECTANGLE:var u=(e.options.width||15)*a+2*i,f=(e.options.height||15)*a+2*i,_=u/2,m=f/2,y=s.coorTransByAngle(l,[l.subtract([_,-m]),l.subtract([-_,-m]),l.subtract([-_,m]),l.subtract([_,m])],r);e._width=u,e._height=f,this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y;break;case o.SimpleMarkerSymbol.STYLE_SQUARE:var p=2*e.options.radius,u=p*a+2*i,d=u/2,y=s.coorTransByAngle(l,[l.subtract([d,-d]),l.subtract([-d,-d]),l.subtract([-d,d]),l.subtract([d,d])],r);e._width=u,e._height=u,this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y;break;case o.SimpleMarkerSymbol.STYLE_TRIANGLE:var u=2*e.options.radius*a+4*i,f=u*Math.sin(Math.PI/3),_=u/2,g=f/3*2+i,y=s.coorTransByAngle(l,[l.subtract([0,g]),l.subtract([_,-f/3]),l.subtract([-_,-f/3])],r);e._width=u,e._height=2*g,this._pxBounds=new L.Bounds(l.subtract([g,g]),l.add([g,g])),this._pxPaths=y}break;case"TextSymbol":var v,b,x=e.options.angle?e.options.angle:0,r=x*Math.PI/180,w=e.options,S=this._renderer._ctx,P=S.font;S.font=w.font,e._width=S.measureText(w.text).width,e._height=2*S.measureText("M").width;var T=e.getRealScale(this._map),_=e._width/2*T,m=e._height/2*T;switch(S.font=P,e.options.textAlign){case"left":v=-1;break;case"right":v=1;break;case"center":v=0;break;default:v=0}switch(e.options.textBaseline){case"bottom":b=1;break;case"top":b=-1;break;case"middle":b=0;break;default:b=0}var y=s.coorTransByAngle(l,[l.subtract([_*(1+v)+i,m*(b-1)-i]),l.subtract([_*(v-1)-i,m*(b-1)-i]),l.subtract([_*(v-1)-2,m*(b+1)+i]),l.subtract([_*(1+v)+i,m*(b+1)+i])],r);this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y;break;case"EleMarkerSymbol":if(L.EleSymbol&&L.EleSymbol.loadEleSymbol&&L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId()))var C=L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId()).cellsBound;if(null==C)return;var M=.15;L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[1]&&L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[1]._width?M=L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[1]._width:L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[0]&&L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[0]._width&&(M=L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId())._pointCells[0]._width),M/=2;var T=e.getRealScale(this._map);T/=Math.max(C._right-C._left,C._top-C._bottom);var k=(Math.max(C._right-C._left,C._top-C._bottom),s.mmToPixel(C._bottom-M)*T),E=s.mmToPixel(C._left-M)*T,D=s.mmToPixel(C._right+M)*T,I=s.mmToPixel(C._top+M)*T,r=(360-e.options.rotate||360)*Math.PI/180,B=[E,-I],A=[E,-k],G=[D,-k],O=[D,-I],R=s.coorTransByAngle(l,[l.add(B),l.add(A),l.add(G),l.add(O)],r),U=s.mmToPixel(.02)*T*1.42/2,u=U>1?U:1,z=L.point(u,u);this._pxBounds=s._getPxBoundByPoints(R,z),this._pxcellBounds=s._getPxBoundByPoints(R),this._pxPaths=R,z=null,T=null,k=null,E=null,D=null,I=null,r=null,B=null,A=null,G=null,O=null,R=null,U=null,u=null;break;case"PictureMarkerSymbol":var u=e.options.width*a,f=e.options.height*a,r=x*Math.PI/180,_=u/2+i,m=f/2+i,y=s.coorTransByAngle(l,[l.subtract([_,-m]),l.subtract([-_,-m]),l.subtract([-_,m]),l.subtract([_,m])],r);e.options._width=u,e.options._height=f,this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y;break;case"SvgMarkerSymbol":var j=(e._dom.firstChild,e._rat),F=Math.max(this._map._zoom,1),_=s.mmToPixelByLevel(5*e.options.size,F,this._map.getScale())/2,m=_*j,y=s.coorTransByAngle(l,[l.subtract([_,-m]),l.subtract([-_,-m]),l.subtract([-_,m]),l.subtract([_,m])],0);e._width=2*_,e._height=2*m,this._pxBounds=s._getPxBoundByPoints(y),this._pxPaths=y}i=null,n=null,r=null,a=null,l=null},_empty:function(){return null==this._geometry},_containsPoint:function(t){if(!this._map&&!this._mapToAdd)return!1;var e=this.getSymbol(),i=this._clickTolerance(),n=e.options.offset?e.options.offset:[0,0],r=(e.options.angle||0)*Math.PI/180,a=e.options.scale?e.options.scale:1,l=this._projectGeometry.geometry.add(n);switch(e.getType()){case"EleMarkerSymbol":var i=this._clickTolerance();this._projectGeometry.geometry;if(!L.EleSymbol)return!1;var h=L.EleSymbol.loadEleSymbol.getSymbol(e.getSymbolId());if(!h)return!1;var u=h.cellsBound,c=e.getRealScale(this._map);c/=Math.max(u._right-u._left,u._top-u._bottom);var p=s.mmToPixel(u._bottom)*c,d=s.mmToPixel(u._left)*c,y=s.mmToPixel(u._right)*c,f=s.mmToPixel(u._top)*c,r=(360-e.options.rotate||360)*Math.PI/180,_=[d,-f],m=[d,-p],g=[y,-p],v=[y,-f],b=s.coorTransByAngle(l,[l.add(_),l.add(m),l.add(g),l.add(v)],r),x=s.mmToPixel(.02)*c*1.42/2,w=x,S=L.point(w,w);return s._getPxBoundByPoints(b,S).contains(t);case"SimpleMarkerSymbol":if(e.getSymbolStyle()==o.SimpleMarkerSymbol.STYLE_CIRCLE){var P=e.options.radius||10,a=e.options.scale,i=this._clickTolerance();return t.distanceTo(this._pxPaths[0])<=P*a+i}return this._isPointAreaContain(this._pxPaths,t);case"TextSymbol":return this._isPointAreaContain(this._pxPaths,t);case"PictureMarkerSymbol":return this._isPointAreaContain(this._pxPaths,t)}},_isPointAreaContain:function(t,e,i){for(var n=!1,s=0,o=t.length,r=o-1;s<o;r=s++){var a=t[s],l=t[r];a.y>e.y!=l.y>e.y&&e.x<(l.x-a.x)*(e.y-a.y)/(l.y-a.y)+a.x&&(n=!n)}if(!n)for(s=0,o=t.length,r=o-1;s<o;r=s++)if(L.LineUtil.pointToSegmentDistance(e,t[r],t[s])<=i)return!0;return n},onRemove:function(){return this._symbol&&this._symbol._remove&&this._symbol._remove(this),this._renderer._removePath(this),this}});e.exports=a},{"../../Geometry/Geometry":57,"../../Symbol/SimpleMarkerSymbol":147,"../../Util":154,"./Graphic":42}],45:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=t("./Polyline"),r=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getRings();this._rings=[],this._projectPoints(e,this._rings,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._rings,t=null,e=null},destroy:function(){this._parts=null,this._rings=null,this._pxBounds=null,this._projectGeometry=null,this._geometry=null,this._renderer=null,this.options=null,this._map=null,this._radius=null,this._radiusY=null,this._point=null},_projectPoints:function(t,e,i){var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=L.LineUtil.simplify(t[i],e);t&&t.length>0&&(this._projectGeometry.geometry=t),t=null,e=null},_clipPolygonPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new L.Point(e,e);if(t=new L.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,s=0,o=this._rings.length;s<o;s++)n=L.PolyUtil.clipPolygon(this._rings[s],t,!0),n.length&&this._parts.push(n),n=null;t=null,e=null,i=null}},_update:function(){this._map&&(this._clipPolygonPoints(),this._simplifyPoints(),this._updatePath())},_containsPoint:function(t){var e,i,n,s,r,a,l,h,u=!1;if(this._pxBounds&&this._pxBounds.contains(t)){for(s=0,l=this._parts.length;s<l;s++)for(e=this._parts[s],r=0,h=e.length,a=h-1;r<h;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||o.prototype._containsPoint.call(this,t,!0)}}});e.exports=r},{"../../Geometry/Geometry":57,"./Graphic":42,"./Polyline":46}],46:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPaths();this._rings=[],this._projectPoints(e,this._rings,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYLINE,this._projectGeometry.geometry=this._rings,t=null,e=null},destroy:function(){this._parts=null,this._rings=null,this._pxBounds=null,this._projectGeometry=null,this._geometry=null,this._renderer=null,this.options=null,this._map=null,this._radius=null,this._radiusY=null,this._point=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)t[s]?(o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s])):console.warn("error polyline data");e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i);r=null,a=null,s=null,o=null,i=null}catch(t){console.warn(t)}},_empty:function(){return null==this._geometry||0===this._geometry.getPaths().length},_clipPolylinePoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,s,o,r,a,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(a=this._rings[e],i=0,o=a.length;i<o-1;i++)(r=L.LineUtil.clipSegment(a[i],a[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(r[0]),r[1]===a[i+1]&&i!==o-2||(l[n].push(r[1]),n++));e=null,i=null,n=null,s=null,o=null,r=null,a=null,l=null}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=L.LineUtil.simplify(t[i],e);t&&t.length>0&&(this._projectGeometry.geometry=t)},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new L.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&(this._clipPolylinePoints(),this._updatePath())},_containsPoint:function(t){var e,i,n,s,o,r,a=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(e=0,s=this._parts.length;e<s;e++)for(r=this._parts[e],i=0,o=r.length,n=o-1;i<o;n=i++)if((closed||0!==i)&&L.LineUtil.pointToSegmentDistance(t,r[n],r[i])<=a)return!0;return e=null,i=null,s=null,o=null,r=null,a=null,!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],47:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=(t("../../Util"),s.extend({_project:function(){var t=this._geometry,e=new egis.geometry.Point(t.center.x,t.center.y).toLatLng(),i=e.lng,s=e.lat,o=this._map,r=o.options.crs;if(r.distance===L.CRS.Earth.distance){var a=Math.PI/180,l=t.radius/L.CRS.Earth.R/a,h=o.project([s+l,i]),u=o.project([s-l,i]),c=h.add(u).divideBy(2),p=o.unproject(c).lat,d=Math.acos((Math.cos(l*a)-Math.sin(s*a)*Math.sin(p*a))/(Math.cos(s*a)*Math.cos(p*a)))/a;(isNaN(d)||0===d)&&(d=l/Math.cos(Math.PI/180*s)),this._point=c.subtract(o.getPixelOrigin()),this._radius=isNaN(d)?0:Math.max(Math.round(c.x-o.project([p,i-d]).x),1),this._radiusY=Math.max(Math.round(c.y-h.y),1)}else{var y=r.unproject(r.project(e).subtract([t.radius,0]));this._point=o.latLngToLayerPoint(e),this._radius=this._point.x-o.latLngToLayerPoint(y).x}this._projectGeometry.type=n.Geometry.SECTOR,this._projectGeometry.geometry={center:this._point,x:this._point.x,y:this._point.y,radius:this._radius,radiusY:this._radiusY,beginAngle:t.beginAngle,endAngle:t.endAngle},this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new L.Bounds(this._point.subtract(n),this._point.add(n))},_empty:function(){return this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){if(this._pxBounds.contains(t)){var e=t.distanceTo(this._projectGeometry.geometry.center),i=t.x-this._projectGeometry.geometry.x,n=t.y-this._projectGeometry.geometry.y,s=this._projectGeometry.geometry.beginAngle,o=this._projectGeometry.geometry.endAngle,r=function(t,s){return i>0&&n>=0?!(t>90)&&(s=s>90?90:s,n/e>=Math.sin(t/180*Math.PI)&&n/e<=Math.sin(s/180*Math.PI)):i<=0&&n>0?!(t>180)&&(t=t<90?90:t,s=s>180?180:s,n/e<=Math.sin(t/180*Math.PI)&&n/e>=Math.sin(s/180*Math.PI)):i<0&&n<=0?!(t>270)&&(t=t<180?180:t,s=s>270?270:s,n/e<=Math.sin(t/180*Math.PI)&&n/e>=Math.sin(s/180*Math.PI)):i>=0&&n<0?!(s<270)&&(t=t<270?270:t,n/e>=Math.sin(t/180*Math.PI)&&n/e<=Math.sin(s/180*Math.PI)):void 0};return e<=this._projectGeometry.geometry.radius+this._clickTolerance()&&(0==i&&0==n||(s>o?r(s,359)||r(0,o):r(s,o)))}return!1}}));e.exports=o},{"../../Geometry/Geometry":57,"../../Util":154,"./Graphic":42}],48:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPoints();this._proPoints=[],this._projectPoints(e,this._proPoints,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._proPoints,t=null,e=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)}catch(t){console.warn(t)}},_updateBounds:function(){},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],49:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPoints();this._proPoints=[],this._projectPoints(e,this._proPoints,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._proPoints,t=null,e=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)}catch(t){console.warn(t)}},_updateBounds:function(){},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],50:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry"),s=t("./Graphic"),o=s.extend({_project:function(){var t=new L.Bounds,e=this._geometry.getPoints();this._proPoints=[],this._projectPoints(e,this._proPoints,t);var i=this._clickTolerance(),s=[i,i];t.isValid()&&(this._pxBounds=t,this._pxBounds.extend(t.min.subtract(s)),this._pxBounds.extend(t.max.add(s))),this._projectGeometry.type=n.Geometry.POLYGON,this._projectGeometry.geometry=this._proPoints,t=null,e=null},_projectPoints:function(t,e,i){if(t&&t.length>0)try{var s,o,r=t[0]instanceof n.Geometry,a=t.length;if(r){for(o=[],s=0;s<a;s++)o[s]=this._map.latLngToLayerPoint(t[s].toLatLng()),i.extend(o[s]);e.push(o)}else for(s=0;s<a;s++)this._projectPoints(t[s],e,i)}catch(t){console.warn(t)}},_updateBounds:function(){},_empty:function(){return this._geometry.radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return!1}});e.exports=o},{"../../Geometry/Geometry":57,"./Graphic":42}],51:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./Extent").Extent,o=t("./GeometryUtil").GeometryUtil,r=t("./GeoJsonUtil").GeoJsonUtil,a=t("./../Util").Util,l=function(t){if(!t.type||!t.coordinates)return null;if("Polygon"!==t.type||!L.Util.isArray(t.coordinates))return null;var e=r.centroid(t),i=e.coordinates;return new h(i,r.pointDistance({coordinates:i.slice(0)},{coordinates:t.coordinates[0][1].slice(0)}))},h=n.Geometry.extend({initialize:function(t,e){this.center=o.translateArrToPoint(t),this.radius=e,n.Geometry.prototype.initialize.call()},type:n.Geometry.CIRCLE,getType:function(){return n.Geometry.CIRCLE},setRadius:function(t){return this.radius=t,this.fire("redraw"),this},getRadius:function(){return this.radius},setCenter:function(t){return this.center=o.translateArrToPoint(t),this.fire("redraw"),this},getCenter:function(){return this.center},toJSON:function(){var t=(this.radius,{type:"Point",coordinates:[this.center.x,this.center.y]});return r.drawCircle(this.radius,t,60)},clone:function(){return new h(this.center,this.radius)},fromJSON:l,toLatLng:function(){return L.LatLng(this.center.y,this.center.x)},contains:function(t){var e=this.radius;return a.distanceMeasure(this.center,t)<=e},getExtent:function(){var t={},e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,r=this.center;return t.radius=a.convertMetersToDegrees(this.radius),e=r.x-t.radius,i=r.y-t.radius,n=r.x+t.radius,o=r.y+t.radius,new s(e,i,n,o)}});h.fromJSON=l,e.exports.Circle=h,e.exports.circle=function(t,e){return new h(t,e)}},{"./../Util":154,"./Extent":54,"./GeoJsonUtil":56,"./Geometry":57,"./GeometryUtil":58}],52:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./PlotUtils").PlotUtils,o=t("./GeometryUtil").GeometryUtil,r=n.Geometry.extend({options:{headHeightFactor:.25,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,connPoint:null,tempPoint4:null,fixPointCount:4,points:[]},initialize:function(t){if(t&&L.Util.setOptions(this,t),this.options.points&&this.options.points.length>0){var e=this.createPolygonPoints(this.options.points);this.pList=this._convertPoints(e)}else this.pList=[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?o.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},setPoints:function(t){return this.options.points=t,this.pList=this.createPolygonPoints(t),this.pList=this._convertPoints(this.pList),this.fire("redraw"),this},createPolygonPoints:function(t){var e=t[0],i=t[1],n=t[2],o=t.length;this.options.tempPoint4=3==o?this.getTempPoint4(e,i,n):t[3],this.options.connPoint=3==o||4==o?s.mid(e,i):t[4];var r,a;s.isClockWise(e,i,n)?(r=this.getArrowPoints(e,this.options.connPoint,this.options.tempPoint4,!1),a=this.getArrowPoints(this.options.connPoint,i,n,!0)):(r=this.getArrowPoints(i,this.options.connPoint,n,!1),a=this.getArrowPoints(this.options.connPoint,e,this.options.tempPoint4,!0));var l=r.length,h=(l-5)/2,u=r.slice(0,h),c=r.slice(h,h+5),p=r.slice(h+5,l),d=a.slice(0,h),y=a.slice(h,h+5),f=a.slice(h+5,l);d=s.getBezierPoints(d);var _=s.getBezierPoints(f.concat(u.slice(1)));return p=s.getBezierPoints(p),[d.concat(y,_,c,p)]},getTempPoint4:function(t,e,i){var n,o,r,a,l=s.mid(t,e),h=s.distance(l,i),u=s.getAngleOfThreePoints(t,l,i);return u<s.Constants.HALF_PI?(o=h*Math.sin(u),r=h*Math.cos(u),a=s.getThirdPoint(t,l,s.Constants.HALF_PI,o,!1),n=s.getThirdPoint(l,a,s.Constants.HALF_PI,r,!0)):u>=s.Constants.HALF_PI&&u<Math.PI?(o=h*Math.sin(Math.PI-u),r=h*Math.cos(Math.PI-u),a=s.getThirdPoint(t,l,s.Constants.HALF_PI,o,!1),n=s.getThirdPoint(l,a,s.Constants.HALF_PI,r,!1)):u>=Math.PI&&u<1.5*Math.PI?(o=h*Math.sin(u-Math.PI),r=h*Math.cos(u-Math.PI),a=s.getThirdPoint(t,l,s.Constants.HALF_PI,o,!0),n=s.getThirdPoint(l,a,s.Constants.HALF_PI,r,!0)):(o=h*Math.sin(2*Math.PI-u),r=h*Math.cos(2*Math.PI-u),a=s.getThirdPoint(t,l,s.Constants.HALF_PI,o,!0),n=s.getThirdPoint(l,a,s.Constants.HALF_PI,r,!1)),n},getArrowPoints:function(t,e,i,n){var o=s.mid(t,e),r=s.distance(o,i),a=s.getThirdPoint(i,o,0,.3*r,!0),l=s.getThirdPoint(i,o,0,.5*r,!0);a=s.getThirdPoint(o,a,s.Constants.HALF_PI,r/5,n),l=s.getThirdPoint(o,l,s.Constants.HALF_PI,r/4,n);var h=[o,a,l,i],u=this.getArrowHeadPoints(h,this.options.headHeightFactor,this.options.headWidthFactor,this.options.neckHeightFactor,this.options.neckWidthFactor),c=u[0],p=u[4],d=s.distance(t,e)/s.getBaseLength(h)/2,y=this.getArrowBodyPoints(h,c,p,d),f=y.length,_=y.slice(0,f/2),m=y.slice(f/2,f);return _.push(c),m.push(p),_=_.reverse(),_.push(e),m=m.reverse(),m.push(t),_.reverse().concat(u,m)},getArrowBodyPoints:function(t,e,i,n){for(var o=s.wholeDistance(t),r=s.getBaseLength(t),a=r*n,l=s.distance(e,i),h=(a-l)/2,u=0,c=[],p=[],d=1;d<t.length-1;d++){var y=s.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2;u+=s.distance(t[d-1],t[d]);var f=(a/2-u/o*h)/Math.sin(y),_=s.getThirdPoint(t[d-1],t[d],Math.PI-y,f,!0),m=s.getThirdPoint(t[d-1],t[d],y,f,!1);c.push(_),p.push(m)}return c.concat(p)},getTailPoints:function(t){var e=s.getBaseLength(t),i=e*this.options.tailWidthFactor;return[s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!1),s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!0)]},getArrowHeadPoints:function(t,e,i){var n=s.getBaseLength(t),o=n*this.options.headHeightFactor,r=t[t.length-1],a=(s.distance(e,i),o*this.options.headWidthFactor),l=o*this.options.neckWidthFactor,h=o*this.options.neckHeightFactor,u=s.getThirdPoint(t[t.length-2],r,0,o,!0),c=s.getThirdPoint(t[t.length-2],r,0,h,!0),p=s.getThirdPoint(r,u,s.Constants.HALF_PI,a,!1),d=s.getThirdPoint(r,u,s.Constants.HALF_PI,a,!0);return[s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!1),p,r,d,s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!0)]},getPoints:function(){return[this.pList]},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"doublearrow"},clone:function(){return"请使用子类实现!"}});e.exports.DoubleArrow=r,e.exports.doubleArrow=function(t){return new r(t)}},{"./Geometry":57,"./GeometryUtil":58,"./PlotUtils":60}],53:[function(t,e,i){"use strict";var n=t("./GeoJsonUtil").GeoJsonUtil,s=t("./Extent").Extent,o=t("./Geometry"),r=t("./GeometryUtil").GeometryUtil,a=function(t){if(!t.type||!t.coordinates)return null;if("Polygon"!==t.type)return null;for(var e=n.centroid(t),i=e.coordinates,s=0,o=0,r=0,a=0,h=t.coordinates[0].length;a<h;a++)r=n.pointDistance({coordinates:i},{coordinates:t.coordinates[0][a]}),0==a&&(s=o=r),s=Math.max(s,r),o=Math.min(o,r);return new l(i[0],i[1],s,o)},l=o.Geometry.extend({initialize:function(t,e,i,n){this.center=r.translateArrToPoint(t),this.width=e,this.height=i,this.angle=n?n:0,o.Geometry.prototype.initialize.call()},getType:function(){return o.Geometry.ELLIPSE},setCenter:function(t){return this.center=r.translateArrToPoint(t),this.fire("redraw"),this},getCenter:function(){return this.center},setX:function(t){return this.center.x=t,this.fire("redraw"),this},getX:function(){return this.center.x},setY:function(t){return this.center.y=t,this.fire("redraw"),this},getY:function(){return this.center.y},setWidth:function(t){return this.width=parseInt(t),this.fire("redraw"),this},getWidth:function(){return this.width},setHeight:function(t){return this.height=parseInt(t),this.fire("redraw"),this},getHeight:function(){return this.height},getExtent:function(){var t=new s,e={};return e.width=egis.tool.Util.convertMetersToDegrees(this.width),e.height=egis.tool.Util.convertMetersToDegrees(this.height),t.xmax=this.x+e.width,t.xmin=this.x-e.width,t.ymax=this.y+e.height,t.ymin=this.y-e.height,new s(t.xmin,t.ymin,t.xmax,t.ymax)},clone:function(){return new l(this.center,this.width,this.height)},fromJSON:a,toJSON:function(){var t=this.getHeight(),e=this.getWidth();return n.drawEllipse(e,t,[this.center.x,this.center.y],60)}});l.fromJSON=a,e.exports.Ellipse=l,e.exports.ellipse=function(t,e,i,n,s){return new l(t,e,i,n,s)}},{"./Extent":54,"./GeoJsonUtil":56,"./Geometry":57,"./GeometryUtil":58}],54:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./GeometryUtil").GeometryUtil,o=function(t){if(!t.type||!t.coordinates)return null;if("Polygon"!==t.type||!L.Util.isArray(t.coordinates))return null;var e=t.coordinates,i=e[0][0],n=i[0],s=i[1],o=void 0,a=void 0,l=1,h=e[0];for(h.length;l<e[0].length;l++){var u=h[l];if(u[0]!==n&&u[1]!==s){o=u[0],a=u[1];break}}return new r(n,a,o,s)},r=n.Geometry.extend({initialize:function(t,e,i,s){n.Geometry.prototype.initialize.call(this),this.xmin=t||0,this.ymin=e||0,this.xmax=i||0,this.ymax=s||0},setExtent:function(t,e,i,n){this.xmin=t,this.ymin=e,this.xmax=i,this.ymax=n,void 0!=t&&void 0!=e&&void 0!=i&&void 0!=n&&this.fire("redraw")},getExtent:function(){return new r(this.xmin,this.ymin,this.xmax,this.ymax)},setXmin:function(t){return this.xmin=t,this.fire("redraw"),this},getXmin:function(){return this.xmin},setXmax:function(t){return this.xmax=t,this.fire("redraw"),this},getXmax:function(){return this.xmax},setYmin:function(t){return this.ymin=t,this.fire("redraw"),this},getYmin:function(){return this.ymin},setYmax:function(t){return this.ymax=t,this.fire("redraw"),this},getYmax:function(){return this.ymax},offset:function(t,e){return new r(this.xmin+t,this.ymin+e,this.xmax+t,this.ymax+e)},intersection:function(t){if(0!=this.intersectsAndDoesNotTouch(t)){var e=Math.max(this.xmin,t.xmin),i=Math.min(this.xmax,t.xmax);return new r(e,Math.max(this.ymin,t.ymin),i,Math.min(this.ymax,t.ymax))}},intersectsAndDoesNotTouch:function(t){return!(t.xmax<=this.xmin)&&(!(t.xmin>=this.xmax)&&(!(t.ymin>=this.ymax)&&!(t.ymax<=this.ymin)))},clone:function(){return new r(this.xmin,this.ymin,this.xmax,this.ymax)},unionPoint:function(t){return t=s.translateArrToPoint(t),this._unionXY(t.x,t.y),this},_unionXY:function(t,e){return this.setXmin(this.xmin?Math.min(t,this.xmin):t),this.setXmax(this.xmax?Math.max(t,this.xmax):t),this.setYmax(this.ymax?Math.max(e,this.ymax):e),this.setYmin(this.ymin?Math.min(e,this.ymin):e),this},getType:function(){return n.Geometry.EXTENT},type:n.Geometry.EXTENT,isEmpty:function(){return this.xmin>this.xmax||this.ymin>this.ymax},toJSON:function(){var t={};t.type="Polygon";var e=[this.xmin,this.ymax],i=[this.xmin,this.ymin],n=[this.xmax,this.ymax],s=[this.xmax,this.ymin];return t.coordinates=[[e,i,s,n,e]],t},fromJSON:o});r.fromJSON=o,e.exports.Extent=r,e.exports.extent=function(t,e,i,n){return new r(t,e,i,n)}},{"./Geometry":57,"./GeometryUtil":58}],55:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./PlotUtils").PlotUtils,o=t("./GeometryUtil").GeometryUtil,r=n.Geometry.extend({options:{t:.4,fixPointCount:3,points:[]},initialize:function(t){if(t&&L.Util.setOptions(this,t),this.options.points&&this.options.points.length>0){var e=this.createPolygonPoints(this.options.points);this.pList=this._convertPoints(e)}else this.pList=[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?o.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},setPoints:function(t){return this.options.points=t,this.pList=this.createPolygonPoints(t),this.pList=this._convertPoints(this.pList),this.fire("redraw"),this},createPolygonPoints:function(t){if(2==t.length){var e=s.mid(t[0],t[1]),i=s.distance(t[0],e)/.9,n=s.getThirdPoint(t[0],e,s.Constants.HALF_PI,i,!0);t=[t[0],n,t[1]]}var e=s.mid(t[0],t[2]);t.push(e,t[0],t[1]);for(var o=[],r=0;r<t.length-2;r++){
var a=t[r],l=t[r+1],h=t[r+2],u=s.getBisectorNormals(this.options.t,a,l,h);o=o.concat(u)}var c=o.length;o=[o[c-1]].concat(o.slice(0,c-1));var p=[];for(r=0;r<t.length-2;r++){a=t[r],l=t[r+1],p.push(a);for(var d=0;d<=s.Constants.FITTING_COUNT;d++){var n=s.getCubicValue(d/s.Constants.FITTING_COUNT,a,o[2*r],o[2*r+1],l);p.push(n)}p.push(l)}return[p]},getArrowBodyPoints:function(t,e,i,n){for(var o=s.wholeDistance(t),r=s.getBaseLength(t),a=r*this.options.tailWidthFactor,l=s.distance(e,i),h=(a-l)/2,u=0,c=[],p=[],d=1;d<t.length-1;d++){var y=s.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2;u+=s.distance(t[d-1],t[d]);var f=(a/2-u/o*h)/Math.sin(y),_=s.getThirdPoint(t[d-1],t[d],Math.PI-y,f,!0),m=s.getThirdPoint(t[d-1],t[d],y,f,!1);c.push(_),p.push(m)}return c.concat(p)},getTailPoints:function(t){var e=s.getBaseLength(t),i=e*this.options.tailWidthFactor;return[s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!1),s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!0)]},getArrowHeadPoints:function(t,e,i){var n=s.getBaseLength(t),o=n*this.options.headHeightFactor,r=t[t.length-1];n=s.distance(r,t[t.length-2]);var a=s.distance(e,i);o>a*this.options.headTailFactor&&(o=a*this.options.headTailFactor);var l=o*this.options.headWidthFactor,h=o*this.options.neckWidthFactor;o=o>n?n:o;var u=o*this.options.neckHeightFactor,c=s.getThirdPoint(t[t.length-2],r,0,o,!0),p=s.getThirdPoint(t[t.length-2],r,0,u,!0),d=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!1),y=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!0);return[s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!1),d,r,y,s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!0)]},getPoints:function(){return[this.pList]},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"gatheringplace"},clone:function(){return"请使用子类实现!"}});e.exports.GatheringPlace=r,e.exports.gatheringPlace=function(t){return new r(t)}},{"./Geometry":57,"./GeometryUtil":58,"./PlotUtils":60}],56:[function(t,e,i){"use strict";function n(t){for(var e=[],i=[],n=0;n<t[0].length;n++)e.push(t[0][n][1]),i.push(t[0][n][0]);return e=e.sort(function(t,e){return t-e}),i=i.sort(function(t,e){return t-e}),[[e[0],i[0]],[e[e.length-1],i[i.length-1]]]}function s(t,e,i){for(var n=[[0,0]],s=0;s<i.length;s++){for(var o=0;o<i[s].length;o++)n.push(i[s][o]);n.push(i[s][0]),n.push([0,0])}for(var r=!1,s=0,o=n.length-1;s<n.length;o=s++)n[s][0]>e!=n[o][0]>e&&t<(n[o][1]-n[s][1])*(e-n[s][0])/(n[o][0]-n[s][0])+n[s][1]&&(r=!r);return r}var o=t("./GeometryUtil").GeometryUtil,r={};r.lineStringsIntersect=function(t,e){for(var i=[],n=0;n<=t.coordinates.length-2;++n)for(var s=0;s<=e.coordinates.length-2;++s){var o={x:t.coordinates[n][1],y:t.coordinates[n][0]},r={x:t.coordinates[n+1][1],y:t.coordinates[n+1][0]},a={x:e.coordinates[s][1],y:e.coordinates[s][0]},l={x:e.coordinates[s+1][1],y:e.coordinates[s+1][0]},h=(l.x-a.x)*(o.y-a.y)-(l.y-a.y)*(o.x-a.x),u=(r.x-o.x)*(o.y-a.y)-(r.y-o.y)*(o.x-a.x),c=(l.y-a.y)*(r.x-o.x)-(l.x-a.x)*(r.y-o.y);if(0!=c){var p=h/c,d=u/c;0<=p&&p<=1&&0<=d&&d<=1&&i.push({type:"Point",coordinates:[o.x+p*(r.x-o.x),o.y+p*(r.y-o.y)]})}}return 0==i.length&&(i=!1),i},r.pointInBoundingBox=function(t,e){return!(t.coordinates[1]<e[0][0]||t.coordinates[1]>e[1][0]||t.coordinates[0]<e[0][1]||t.coordinates[0]>e[1][1])},r.pointInPolygon=function(t,e){for(var i="Polygon"==e.type?[e.coordinates]:e.coordinates,o=!1,a=0;a<i.length;a++)r.pointInBoundingBox(t,n(i[a]))&&(o=!0);if(!o)return!1;for(var l=!1,a=0;a<i.length;a++)s(t.coordinates[1],t.coordinates[0],i[a])&&(l=!0);return l},r.pointInMultiPolygon=function(t,e){for(var i="MultiPolygon"==e.type?[e.coordinates]:e.coordinates,o=!1,a=!1,l=0;l<i.length;l++){for(var h=i[l],u=0;u<h.length;u++)o||r.pointInBoundingBox(t,n(h[u]))&&(o=!0);if(!o)return!1;for(var u=0;u<h.length;u++)a||s(t.coordinates[1],t.coordinates[0],h[u])&&(a=!0)}return a},r.numberToRadius=function(t){return t*Math.PI/180},r.numberToDegree=function(t){return 180*t/Math.PI},r.drawSector=function(t,e,i,n,s){for(var o=[e.coordinates[0],e.coordinates[1]],a=t/6378137,l=[r.numberToRadius(o[1]),r.numberToRadius(o[0])],s=s||15,h=[[o[0],o[1]]],u=Math.abs(n-i)/180*Math.PI/s,c=0;c<=s;c++){var p=(i+90)/180*Math.PI+u*c,d=Math.asin(Math.sin(l[0])*Math.cos(a)+Math.cos(l[0])*Math.sin(a)*Math.cos(p)),y=l[1]+Math.atan2(Math.sin(p)*Math.sin(a)*Math.cos(l[0]),Math.cos(a)-Math.sin(l[0])*Math.sin(d));h.push([r.numberToDegree(y),r.numberToDegree(d)])}return h.push([o[0],o[1]]),{type:"Polygon",coordinates:[h]}},r.drawCircle=function(t,e,i){for(var n=t/6378137,s=[e.coordinates[0],e.coordinates[1]],o=[r.numberToRadius(s[1]),r.numberToRadius(s[0])],i=i||15,a=[],l=0;l<i;l++){var h=2*Math.PI*l/i,u=Math.asin(Math.sin(o[0])*Math.cos(n)+Math.cos(o[0])*Math.sin(n)*Math.cos(h)),c=o[1]+Math.atan2(Math.sin(h)*Math.sin(n)*Math.cos(o[0]),Math.cos(n)-Math.sin(o[0])*Math.sin(u));a.push([r.numberToDegree(c),r.numberToDegree(u)])}return a.push(a[0]),{type:"Polygon",coordinates:[a]}},r.drawEllipse=function(t,e,i,n){for(var s=[r.numberToRadius(i[1]),r.numberToRadius(i[0])],n=n||15,o=[],a=0;a<n;a++){var l=2*Math.PI*a/n,h=e*t/Math.sqrt(Math.pow(e,2)*Math.pow(Math.sin(l),2)+Math.pow(t,2)*Math.pow(Math.cos(l),2)),u=h/6378137,c=Math.asin(Math.sin(s[0])*Math.cos(u)+Math.cos(s[0])*Math.sin(u)*Math.cos(l)),p=s[1]+Math.atan2(Math.sin(l)*Math.sin(u)*Math.cos(s[0]),Math.cos(u)-Math.sin(s[0])*Math.sin(c));o[a]=[],o[a][1]=r.numberToDegree(c),o[a][0]=r.numberToDegree(p)}return{type:"Polygon",coordinates:[o]}},r.rectangleCentroid=function(t){var e=t.coordinates[0],i=e[0][0],n=e[0][1];return{type:"Point",coordinates:[i+(e[2][0]-i)/2,n+(e[2][1]-n)/2]}},r.pointDistance=function(t,e){var i=t.coordinates[0],n=t.coordinates[1],s=e.coordinates[0],o=e.coordinates[1],a=r.numberToRadius(o-n),l=r.numberToRadius(s-i),h=Math.pow(Math.sin(a/2),2)+Math.cos(r.numberToRadius(n))*Math.cos(r.numberToRadius(o))*Math.pow(Math.sin(l/2),2);return 2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))*6378137},r.pointAngle=function(t,e){L.Util.isArray(t)&&(t=o.translateArrToPoint(t)),L.Util.isArray(e)&&(e=o.translateArrToPoint(e));var i=t.x,n=t.y,s=e.x,r=e.y,a=s-i,l=r-n,h=Math.sqrt(Math.pow(a,2)+Math.pow(l,2)),u=a/h,c=Math.acos(u),p=180/(Math.PI/c);return l<0?p=-p:0==l&&a<0&&(p=180),p},r.geometryWithinRadius=function(t,e,i){if("Point"==t.type)return r.pointDistance(t,e)<=i;if("LineString"==t.type||"Polygon"==t.type){var n,s={};n="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var o in n)if(s.coordinates=n[o],r.pointDistance(s,e)>i)return!1}return!0},r.area=function(t){for(var e,i,n=0,s=t.coordinates[0],o=s.length-1,r=0;r<s.length;o=r++){var e={x:s[r][1],y:s[r][0]},i={x:s[o][1],y:s[o][0]};n+=e.x*i.y,n-=e.y*i.x}return n/=2},r.centroid=function(t){for(var e,i,n,s=0,o=0,a=t.coordinates[0],l=a.length-1,h=0;h<a.length;l=h++){var i={x:a[h][1],y:a[h][0]},n={x:a[l][1],y:a[l][0]};e=i.x*n.y-n.x*i.y,s+=(i.x+n.x)*e,o+=(i.y+n.y)*e}return e=6*r.area(t),{type:"Point",coordinates:[o/e,s/e]}},r.simplify=function(t,e){e=e||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var i,n,s,o,r,a,l,h,u,c,p,d,y,f,_,m,g,v,b,x=Math.PI/180*.5,L=new Array,w=new Array,S=new Array;if(t.length<3)return t;for(i=t.length,c=360*e/(2*Math.PI*6378137),c*=c,s=0,w[0]=0,S[0]=i-1,n=1;n>0;)if(o=w[n-1],r=S[n-1],n--,r-o>1){for(p=t[r].lng()-t[o].lng(),d=t[r].lat()-t[o].lat(),Math.abs(p)>180&&(p=360-Math.abs(p)),p*=Math.cos(x*(t[r].lat()+t[o].lat())),y=p*p+d*d,a=o+1,l=o,u=-1;a<r;a++)f=t[a].lng()-t[o].lng(),_=t[a].lat()-t[o].lat(),Math.abs(f)>180&&(f=360-Math.abs(f)),f*=Math.cos(x*(t[a].lat()+t[o].lat())),m=f*f+_*_,g=t[a].lng()-t[r].lng(),v=t[a].lat()-t[r].lat(),Math.abs(g)>180&&(g=360-Math.abs(g)),g*=Math.cos(x*(t[a].lat()+t[r].lat())),b=g*g+v*v,(h=m>=y+b?b:b>=y+m?m:(f*d-_*p)*(f*d-_*p)/y)>u&&(l=a,u=h);u<c?(L[s]=o,s++):(n++,w[n-1]=l,S[n-1]=r,n++,w[n-1]=o,S[n-1]=l)}else L[s]=o,s++;L[s]=i-1,s++;for(var P=new Array,a=0;a<s;a++)P.push(t[L[a]]);return P.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},r.destinationPoint=function(t,e,i){i/=6371,e=r.numberToRadius(e);var n=r.numberToRadius(t.coordinates[0]),s=r.numberToRadius(t.coordinates[1]),o=Math.asin(Math.sin(s)*Math.cos(i)+Math.cos(s)*Math.sin(i)*Math.cos(e)),a=n+Math.atan2(Math.sin(e)*Math.sin(i)*Math.cos(s),Math.cos(i)-Math.sin(s)*Math.sin(o));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[r.numberToDegree(a),r.numberToDegree(o)]}},e.exports.GeoJsonUtil=r},{"./GeometryUtil":58}],57:[function(t,e,i){"use strict";var n=L.Evented.extend({statics:{MAPPOINT:"point",POINT:"point",MULTIPOINT:"multiPoint",POLYLINE:"polyline",POLYGON:"polygon",EXTENT:"extent",CIRCLE:"circle",ELLIPSE:"ellipse",SECTOR:"sector",STRAIGHTARROW:"straightarrow",SQUADCOMBAT:"squadcombat",TAILEDSQUADCOMBAT:"tailedsquadcombat",DOUBLEARROW:"doublearrow",GATHERINGPLACE:"gatheringplace"},initialize:function(){},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"type"},clone:function(){return"请使用子类实现!"},fixPathData:function(t){try{for(var e=t.length-1;e>0;e--)t[e][0]==t[e-1][0]&&t[e][1]==t[e-1][1]&&t.splice(e,1)}catch(t){}}});e.exports.Geometry=n},{}],58:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/symbol/iterator"),o=n(s),r=t("babel-runtime/core-js/symbol"),a=n(r),l="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t},h=t("./Point"),u=t("./../Error/DeveloperError"),c=t("./Geometry"),p=function(t){if("object"==(void 0===t?"undefined":l(t))){if(L.Util.isArray(t)){if(2!=t.length)throw new u.DeveloperError("the param must be an array with 2 length,参数必须为长度为2的数字数组");if(isNaN(t[0])||isNaN(t[1]))throw new u.DeveloperError("the param must be num，参数必须为数字");t=new h.Point(t[0],t[1])}else if(!t.type||t.getType()!=c.Geometry.POINT)throw new u.DeveloperError("the param must be an array with 2 length or must be Point;");return t}if("number"==typeof t)throw new u.DeveloperError("the param must be an array with 2 length or must be Point;")},d=function(t){if(!L.Util.isArray(t))throw new Error("the param must be an array ,参数必须为数组")},y=function(t,e,i){for(var n,s,o,r,a=i.x,l=i.y,h=0,u=0,c=e.length;u<c;u++)h++,h===c&&(h=0),n=e[u].x,s=e[h].x,o=e[u].y,r=e[h].y,(o<l&&r>=l||r<l&&o>=l)&&n+(l-o)/(r-o)*(s-n)<a&&(t=!t);return t},f={translateArrToPoint:p,translateSecArrToPointArr:function(t){d(t);for(var e=0,i=t.length;e<i;e++){if("number"==typeof t[e])throw new u.DeveloperError("the param must be an array of 2 numbers ,参数必须为长度为2的数组");t[e]=p(t[e])}return t},translateMultiArrToPointArr:function(t){d(t);for(var e=0,i=t.length;e<i;e++){var n=t[e];if("object"==(void 0===n?"undefined":l(n))){if(L.Util.isArray(n))for(var s=0,o=n.length;s<o;s++)n[s]=p(n[s]);else if(n.getType()!=c.Geometry.POINT)throw new Error("the param must be an point ,参数必须为point")}else d(n)}return t},contains:function(t,e){if(!t)return!1;if(t[0][0].type!==c.Geometry.POINT)return y(!1,t,e);for(var i=!1,n=0,s=t.length;n<s;n++)i=y(i,t[n],e);return i},_isPointsCoordsContainsPoint:y};e.exports.GeometryUtil=f},{"./../Error/DeveloperError":33,"./Geometry":57,"./Point":61,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],59:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./GeometryUtil"),o=t("./Extent").Extent,r=function(t){return t.type&&"MultiPoint"===t.type&&(t.coordinates||L.Util.isArray(t.coordinates))?new a(s.GeometryUtil.translateSecArrToPointArr(t.coordinates)):null},a=n.Geometry.extend({initialize:function(t){t=s.GeometryUtil.translateSecArrToPointArr(t),this._points=t||[],n.Geometry.prototype.initialize.call(this)},fromJSON:r,update:function(t){return t=s.GeometryUtil.translateSecArrToPointArr(t),this._points=[],L.Util.isArray(t)&&(this._points=t,this.fire("redraw")),this},getPoints:function(){return this._points},getType:function(){return n.Geometry.MULTIPOINT},type:n.Geometry.MULTIPOINT,getExtent:function(){if(this._points&&this._points.length>1){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=0;s<this._points.length;s++)this._points[s]instanceof egis.geometry.MapPoint&&(t=Math.min(t,this._points[s].x),e=Math.min(e,this._points[s].y),i=Math.max(i,this._points[s].x),n=Math.max(n,this._points[s].y));return new o(t,e,i,n)}return null},addPoint:function(t){return t=s.GeometryUtil.translateArrToPoint(t),void 0==this._points&&(this._points=[]),this._points.push(t),this},insertPoint:function(t,e){return t=s.GeometryUtil.translateArrToPoint(t),this._points?(isNaN(e)||this._points.splice(e,0,t),this):(this.addPoint(t),this)},removePoint:function(t){if(isNaN(t)){if((!t.type||t.getType()===n.Geometry.MAPPOINT)&&(t=s.GeometryUtil.translateArrToPoint(t),this._points&&this._points.length>0)){var e=null,i=!0,o=this._points;return o.forEach(function(n,s){n.x==t.x&&n.y==t.y&&i&&(e=o.splice(s,1),i=!1)}),e?new egis.geometry.MapPoint(e[0].x,e[0].y):void 0}}else{var r=t;if(this._points&&this._points.length>0){var e=this._points.splice(r,1);return e?new egis.geometry.MapPoint(e[0].x,e[0].y):void 0}}},getPoint:function(t){if(this._points&&this._points.length>0){return this._points[t]}},setPoint:function(t,e){if(!isNaN(t)){var i=t;return this._points&&this._points.length>0&&(this._points[i]=e),this.fire("redraw"),this}if(e=s.GeometryUtil.translateArrToPoint(e),t=s.GeometryUtil.translateArrToPoint(t),this._points&&this._points.length>0){var n=this._points,o=!0;n.forEach(function(i,n){i.x==t.x&&i.y==t.y&&o&&(i.x=e.x,i.y=e.y,o=!1)})}return this.fire("redraw"),this},clone:function(){for(var t=[],e=0;e<this._points.length;e++)t.push([this._points[e].x,this._points[e].y]);return new a(t)},toJSON:function(){var t={};t.type="MultiPoint",t.coordinates=[];for(var e=0;e<this._points.length;e++)t.coordinates.push([this._points[e].x,this._points[e].y]);return t}});a.fromJSON=r,e.exports.MultiPoint=a,e.exports.multiPoint=function(t){return new a(t)}},{"./Extent":54,"./Geometry":57,"./GeometryUtil":58}],60:[function(t,e,i){"use strict";var n=function(t,e,i,n,s){var o=this.getAzimuth(t,e),r=s?o+i:o-i,a=n*Math.cos(r),l=n*Math.sin(r);return[e[0]+a,e[1]+l]},s=function(t,e){var i,n=0;try{n=Math.asin(Math.abs(e[1]-t[1])/this.distance(t,e))}catch(t){console.warn(t)}return e[1]>=t[1]&&e[0]>=t[0]?i=n+Math.PI:e[1]>=t[1]&&e[0]<t[0]?i=this.Constants.TWO_PI-n:e[1]<t[1]&&e[0]<t[0]?i=n:e[1]<t[1]&&e[0]>=t[0]&&(i=Math.PI-n),i},o=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distance(t[i],t[i+1]);return e},r=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},a=function(t){return Math.pow(this.wholeDistance(t),.99)},l=function(t,e,i){var n=this.getAzimuth(e,t)-this.getAzimuth(e,i);return n<0?n+this.Constants.TWO_PI:n},h=function(t){if(t.length<=2)return t;var e=[],i=t.length-2-1;e.push(t[0]);for(var n=0;n<=i;n++)for(var s=0;s<=1;s+=.05){for(var o=y=0,r=0;r<=2;r++){var a=this.getQuadricBSplineFactor(r,s);o+=a*t[n+r][0],y+=a*t[n+r][1]}e.push([o,y])}return e.push(t[t.length-1]),e},u=function(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0},c=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},p=function(t){if(t.length<=2)return t;for(var e=[],i=t.length-1,n=0;n<=1;n+=.01){for(var s=y=0,o=0;o<=i;o++){var r=this.getBinomialFactor(i,o),a=Math.pow(n,o),l=Math.pow(1-n,i-o);s+=r*a*l*t[o][0],y+=r*a*l*t[o][1]}e.push([s,y])}return e.push(t[i]),e},d=function(t,e){return this.getFactorial(t)/(this.getFactorial(e)*this.getFactorial(t-e))},f=function(t){if(t<=1)return 1;if(2==t)return 2;if(3==t)return 6;if(4==t)return 24;if(5==t)return 120;for(var e=1,i=1;i<=t;i++)e*=i;return e},_=function(t,e,i){return(i[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(i[0]-t[0])},m=function(t,e,i){var n=t[0]-e[0],s=t[1]-e[1],o=Math.sqrt(n*n+s*s);n/=o,s/=o;var r=i[0]-e[0],a=i[1]-e[1],l=Math.sqrt(r*r+a*a);return r/=l,a/=l,[n+r,s+a]},g=function(t,e,i,n){var s=this.getNormal(e,i,n),o=Math.sqrt(s[0]*s[0]+s[1]*s[1]),r=s[0]/o,a=s[1]/o,l=this.distance(e,i),h=this.distance(i,n);if(o>this.Constants.ZERO_TOLERANCE)if(this.isClockWise(e,i,n)){var u=t*l,c=i[0]-u*a,p=i[1]+u*r,d=[c,p];u=t*h,c=i[0]+u*a,p=i[1]-u*r;var y=[c,p]}else u=t*l,c=i[0]+u*a,p=i[1]-u*r,d=[c,p],u=t*h,c=i[0]-u*a,p=i[1]+u*r,y=[c,p];else c=i[0]+t*(e[0]-i[0]),p=i[1]+t*(e[1]-i[1]),d=[c,p],c=i[0]+t*(n[0]-i[0]),p=i[1]+t*(n[1]-i[1]),y=[c,p];return[d,y]},v=function(t,e,i,n,s){t=Math.max(Math.min(t,1),0);var o=1-t,r=t*t,a=r*t,l=o*o,h=l*o;return[h*e[0]+3*l*t*i[0]+3*o*r*n[0]+a*s[0],h*e[1]+3*l*t*i[1]+3*o*r*n[1]+a*s[1]]},b={Constants:{TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},getBaseLength:a,getAzimuth:s,getThirdPoint:n,wholeDistance:o,distance:r,getAngleOfThreePoints:l,getQBSplinePoints:h,getQuadricBSplineFactor:u,mid:c,getBezierPoints:p,getBinomialFactor:d,getFactorial:f,isClockWise:_,getBisectorNormals:g,getNormal:m,getCubicValue:v};e.exports.PlotUtils=b},{}],61:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/symbol/iterator"),o=n(s),r=t("babel-runtime/core-js/symbol"),a=n(r),l="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t},h=t("./Geometry"),u=t("./GeometryUtil"),c=t("./Extent").Extent,p=function(t){if(!t.type&&t.type!==h.Geometry.POINT&&!t.coordinates)return null;var e=t.coordinates;return!L.Util.isArray(e)||e.length<2||isNaN(e[0])||isNaN(e[1])?null:new y(e[0],e[1])},d=function(t,e){var i=e.x-t.x,n=e.y-t.y;return i=Math.abs(i),n=Math.abs(n),Math.sqrt(i*i+n*n)},y=h.Geometry.extend({initialize:function(t,e){L.Util.isArray(t)?(e=t[1],t=t[0]):"object"===(void 0===t?"undefined":l(t))&&(e=t.y,t=t.x),this.x=t,this.y=e,h.Geometry.prototype.initialize.call(this)},getType:function(){return h.Geometry.POINT},type:h.Geometry.POINT,getX:function(){return this.x},getY:function(){return this.y},setX:function(t){return this.x=t,this.fire("redraw"),this},setY:function(t){return this.y=t,this.fire("redraw"),this},getExtent:function(){return new c(this.x,this.y,this.x,this.y)},fromJSON:p,setXY:function(t,e){return this.x=t,this.y=e,this.fire("redraw"),this},clone:function(){return new y(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this.fire("redraw"),this},toJSON:function(){var t={};return t.type=h.Geometry.POINT,t.coordinates=[this.x,this.y],t},add:function(t){return L.Util.isArray(t)&&(t=u.GeometryUtil.translateArrToPoint(t)),this.clone()._add(t)},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return L.Util.isArray(t)&&(t=u.GeometryUtil.translateArrToPoint(t)),this.clone()._subtract(t)},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},toLatLng:function(){return L.latLng(this.y,this.x)},equals:function(t){return t.x===this.x&&t.y===this.y},distance:function(t){return t=u.GeometryUtil.translateArrToPoint(t),d(this,t)}});y.distance=function(t,e){return t=u.GeometryUtil.translateArrToPoint(t),e=u.GeometryUtil.translateArrToPoint(e),d(t,e)},y.fromJSON=p,e.exports.MapPoint=y,e.exports.Point=y,e.exports.point=function(t,e){return new y(t,e)}},{"./Extent":54,"./Geometry":57,"./GeometryUtil":58,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],62:[function(t,e,i){"use strict";var n=(t("./../Util"),t("./Geometry")),s=(t("./Point"),t("./GeometryUtil").GeometryUtil),o=t("./Extent").Extent,r=function(t){if(!t.type||!t.coordinates)return null;if("Polygon"!==t.type)return null;var e=t.coordinates;return e?new a(s.translateMultiArrToPointArr(e)):null},a=n.Geometry.extend({initialize:function(t){if(t?(this.fixPathData(t),t=this._convertPoints(t)):t=[],this._rings=[],Object.prototype.toString.call(t)){this._rings=[];for(var e=0;e<t.length&&Object.prototype.toString.call(t[e]);e++)this._rings.push(t[e]);n.Geometry.prototype.initialize.call(this)}},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,o=t.length;n<o;n++)e[n]=i?s.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},update:function(t){t=s.translateMultiArrToPointArr(t),this._rings=[];for(var e=0;e<t.length&&t[e]instanceof Array;e++)this._rings.push(t[e]);return this.fire("redraw"),this},getRings:function(){return this._rings},getRing:function(t){return this._rings.length>t?this._rings[t]:[]},getType:function(){return n.Geometry.POLYGON},contains:function(t){t=s.translateArrToPoint(t);return s.contains(this._rings,t)},getExtent:function(){var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY;if(this._rings[0][0]instanceof Array==0)for(var s=0;s<this._rings.length;s++)for(var r=0;r<this._rings[s].length;r++)t=Math.min(t,this._rings[s][r].x),e=Math.min(e,this._rings[s][r].y),i=Math.max(i,this._rings[s][r].x),n=Math.max(n,this._rings[s][r].y);else if(this._rings[0][0][0]instanceof Array==0)for(var s=0;s<this._rings.length;s++)for(var r=0;r<this._rings[s].length;r++)for(var a=0;a<this._rings[s][r].length;a++)t=Math.min(t,this._rings[s][r][a].x),e=Math.min(e,this._rings[s][r][a].y),i=Math.max(i,this._rings[s][r][a].x),n=Math.max(n,this._rings[s][r][a].y);return new o(t,e,i,n)},addRing:function(t){return t=s.translateSecArrToPointArr(t),this._rings||(this._rings=[]),t instanceof Array&&this._rings.push(t),this},removeRing:function(t){return this._rings&&this._rings.length>0?(this._rings.splice(t,1),this._rings):null},getPoint:function(t,e){if(void 0!=this._rings){var i,n=this._rings[t];return n&&(i=n[e]),i}},insertPoint:function(t,e,i){return i=s.translateArrToPoint(i),void 0!=this._rings&&this._rings[t]&&(this._rings[t].splice(e,0,i),this.fire("redraw")),this},setPoint:function(t,e,i){return i=s.translateArrToPoint(i),void 0!=this._rings&&this._rings[t]&&this._rings[t][e]&&(this._rings[t][e].x=i.x,this._rings[t][e].y=i.y,this.fire("redraw")),this},removePoint:function(t,e){return void 0==this._rings?null:this._rings[t]&&!this._rings[t].length<2?(this._rings[t].splice(e,1),this._rings):null},clone:function(){for(var t=[],e=0;e<this._rings.length;e++){for(var i=[],n=0;n<this._rings[e].length;n++)i.push([this._rings[e][n].x,this._rings[e][n].y]);t.push(i)}return new a(t)},toJSON:function(){var t={},e=this._rings;if(t.coordinates=[],e[0][0]instanceof Array==0){t.type="Polygon";for(var i=0;i<e.length;i++){var n=e[0],s=n.length;n[0].x!==n[s-1].x&&n[0].x!==n[s-1].x&&n.push(new egis.geometry.Point(n[0].x,n[0].y)),t.coordinates.push(this.ringToJSON(n))}}else if(e[0][0][0]instanceof Array==0){t.type="MultiPolygon";for(var o=0;o<e.length;o++)for(var r=e[0],a=0;a<r.length;a++){var l=r[a],h=l.length;l[0].x!==l[h-1].x&&l[0].x!==l[h-1].x&&l.push(new egis.geometry.Point(l[0].x,l[0].y)),t.coordinates.push(this.ringToJSON(l))}}return t},fromJSON:r,ringToJSON:function(t){t=s.translateSecArrToPointArr(t);for(var e=[],i=0;i<t.length;i++)e.push([t[i].x,t[i].y]);return e}});a.fromJSON=r,e.exports.Polygon=a,e.exports.polygon=function(t){return new a(t)}},{"./../Util":154,"./Extent":54,"./Geometry":57,"./GeometryUtil":58,"./Point":61}],63:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./../Util"),o=t("./../Error/DeveloperError"),r=t("./Extent").Extent,a=t("./GeometryUtil").GeometryUtil,l=function(t){return t.type||"LineString"===t.type&&"MultiLineString"===t.type||t.coordinates?("LineString"==t.type&&(t.coordinates=[t.coordinates]),new u(t.coordinates)):null},h=function(t){t=a.translateSecArrToPointArr(t);for(var e=[],i=0;i<t.length;i++)e.push([t[i].x,t[i].y]);return e},u=n.Geometry.extend({initialize:function(t){this.fixPathData(t),this._paths=t?this._convertPoints(t):[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?a.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},update:function(t){t=a.translateMultiArrToPointArr(t),this._paths=[],len=t.length;for(var e=0;e<len;e++)this._paths.push(t[e]);return this.fire("redraw"),this},fromJSON:l,getPaths:function(){return this._paths},getType:function(){return n.Geometry.POLYLINE},getExtent:function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,s=0;s<this._paths.length;s++)for(var o=0;o<this._paths[s].length;o++)t=Math.min(t,this._paths[s][o].x),e=Math.min(e,this._paths[s][o].y),i=Math.max(i,this._paths[s][o].x),n=Math.max(n,this._paths[s][o].y);return new r(t,e,i,n)},addPath:function(t){if(t=a.translateSecArrToPointArr(t),this._paths||(this._paths=[]),!s.objectHandle.isArray(t))throw new o.DeveloperError("the points is not a array,the path param must be [obj,obj,...]");return this._paths.push(t),this.fire("redraw"),this},getPath:function(t){return this._paths.length>t?this._paths[t]:[]},removePath:function(t){if(!s.objectHandle.isNumber(t))throw new o.DeveloperError("the param must be Number");if(this._paths&&this._paths.length>0)return this._paths.splice(t,1),this._paths},getPoint:function(t,e){if(void 0!=this._paths){var i,n=this._paths[t];return n&&(i=n[e]),i}},insertPoint:function(t,e,i){return i=a.translateArrToPoint(i),void 0!=this._paths&&this._paths[t]&&(this._paths[t].splice(e,0,i),this.fire("redraw")),this},setPoint:function(t,e,i){i=a.translateArrToPoint(i),void 0!=this._paths&&this._paths[t]&&(this._paths[t][e]=i,this.fire("redraw"))},removePoint:function(t,e){return void 0==this._paths?null:this._paths[t].length<2?null:this._paths[t]?(this._paths[t].splice(e,1),this._paths):void 0},clone:function(){for(var t=[],e=0;e<this._paths.length;e++){for(var i=[],n=0;n<this._paths[e].length;n++)i.push([this._paths[e][n].x,this._paths[e][n].y]);t.push(i)}return new u(t)},toJSON:function(){var t={};if(t.type="LineString",this._paths.length>1&&(t.type="MultiLineString"),t.coordinates=[],this._paths.length>1)for(var e=0;e<this._paths.length;e++)t.coordinates.push(this.pathToJSON(this._paths[e]));else t.coordinates=this.pathToJSON(this._paths[0]);return t},_pathToJSON:function(t){t=a.translateSecArrToPointArr(t);for(var e=[],i=0;i<t.length;i++)e.push([t[i].x,t[i].y]);return e},pathToJSON:h});u.pathToJSON=h,u.fromJSON=l,e.exports.Polyline=u,e.exports.polyline=function(t){return new u(t)}},{"./../Error/DeveloperError":33,"./../Util":154,"./Extent":54,"./Geometry":57,"./GeometryUtil":58}],64:[function(t,e,i){"use strict";function n(t){function e(t,e){t[0]=t[0]/180*Math.PI,t[1]=t[1]/180*Math.PI,e[0]=e[0]/180*Math.PI,e[1]=e[1]/180*Math.PI;var i=t[0]-e[0],n=Math.sin(i)*Math.cos(e[1]),s=Math.cos(t[1])*Math.sin(e[1])-Math.sin(t[1])*Math.cos(e[1])*Math.cos(i);return 180*-Math.atan2(n,s)/Math.PI+270}if(!t.type||!t.coordinates)return null;if("Polygon"!==t.type||!L.Util.isArray(t.coordinates))return null;var i=t.coordinates[0];if(i.length<4)return null;var n=i[0].slice(0),s=e(i[0].slice(0),i[1].slice(0)),r=e(i[0].slice(0),i[i.length-2].slice(0)),a=o.pointDistance({coordinates:n.slice(0)},{coordinates:i[1].slice(0)});return new l(n[0],n[1],a,s,r)}var s=t("./Geometry"),o=t("./GeoJsonUtil").GeoJsonUtil,r=t("./Extent").Extent,a=t("./GeometryUtil").GeometryUtil,l=s.Geometry.extend({initialize:function(t,e,i,n){this.center=a.translateArrToPoint(t),this.radius=e,i%=360,n%=360,this.beginAngle=i,this.endAngle=n,s.Geometry.prototype.initialize.call()},getType:function(){return s.Geometry.SECTOR},type:s.Geometry.SECTOR,setRadius:function(t){return this.radius=t,this.fire("redraw"),this},getRadius:function(){return this.radius},setCenter:function(t){return this.center=a.translateArrToPoint(t),this.fire("redraw"),this},getCenter:function(){return this.center},setX:function(t){return this.center.x=t,this.fire("redraw"),this},getX:function(){return this.center.x},setY:function(t){return this.center.y=t,this.fire("redraw"),this},getY:function(){return this.center.y},setBeginAngle:function(t){return this.beginAngle=t,this.fire("redraw"),this},getBeginAngle:function(){return this.beginAngle},setEndAngle:function(t){return this.endAngle=t,this.fire("redraw"),this},getEndAngle:function(){return this.endAngle},clone:function(t){return new l(this.center,this.radius,this.beginAngle,this.angle)},toJSON:function(){var t=this.radius,e={type:"Point",coordinates:[this.x,this.y]},i=this.beginAngle,n=this.endAngle;return i>n?(geojson1=o.drawSector(t,e,i,359),geojson2=o.drawSector(t,e,0,n),{type:"Polygon",coordinates:[geojson1.coordinates[0].slice(0,-1).concat(geojson2.coordinates[0].slice(1))]}):o.drawSector(t,e,i,n,60)},fromJSON:n,getExtent:function(){var t={};return t.radius=egis.tool.Util.convertMetersToDegrees(this.radius),{xmin:this.x-t.radius,ymin:this.y-t.radius,xmax:this.x+t.radius,ymax:this.y+t.radius},new r(this.x-t.radius,this.y-t.radius,this.x+t.radius,this.y+t.radius)}});l.fromJSON=n,e.exports.Sector=l,e.exports.sector=function(t,e,i,n,s){return new l(t,e,i,n,s)}},{"./Extent":54,"./GeoJsonUtil":56,"./Geometry":57,"./GeometryUtil":58}],65:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./PlotUtils").PlotUtils,o=t("./GeometryUtil").GeometryUtil,r=n.Geometry.extend({options:{headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,points:[]},initialize:function(t){if(t&&L.Util.setOptions(this,t),this.options.points&&this.options.points.length>0){var e=this.createPolygonPoints(this.options.points);this.pList=this._convertPoints(e)}else this.pList=[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?o.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},setPoints:function(t){return this.options.points=t,this.pList=this.createPolygonPoints(t),this.pList=this._convertPoints(this.pList),this.fire("redraw"),this},createPolygonPoints:function(t){var e=this.getTailPoints(t),i=this.getArrowHeadPoints(t,e[0],e[1]),n=i[0],o=i[4],r=this.getArrowBodyPoints(t,n,o,this.tailWidthFactor),a=r.length,l=[e[0]].concat(r.slice(0,a/2));l.push(n);var h=[e[1]].concat(r.slice(a/2,a));return h.push(o),l=s.getQBSplinePoints(l),h=s.getQBSplinePoints(h),[l.concat(i,h.reverse())]},getArrowBodyPoints:function(t,e,i,n){for(var o=s.wholeDistance(t),r=s.getBaseLength(t),a=r*this.options.tailWidthFactor,l=s.distance(e,i),h=(a-l)/2,u=0,c=[],p=[],d=1;d<t.length-1;d++){var y=s.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2;u+=s.distance(t[d-1],t[d]);var f=(a/2-u/o*h)/Math.sin(y),_=s.getThirdPoint(t[d-1],t[d],Math.PI-y,f,!0),m=s.getThirdPoint(t[d-1],t[d],y,f,!1);c.push(_),p.push(m)}return c.concat(p)},getTailPoints:function(t){var e=s.getBaseLength(t),i=e*this.options.tailWidthFactor;return[s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!1),s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!0)]},getArrowHeadPoints:function(t,e,i){var n=s.getBaseLength(t),o=n*this.options.headHeightFactor,r=t[t.length-1];n=s.distance(r,t[t.length-2]);var a=s.distance(e,i);o>a*this.options.headTailFactor&&(o=a*this.options.headTailFactor);var l=o*this.options.headWidthFactor,h=o*this.options.neckWidthFactor;o=o>n?n:o;var u=o*this.options.neckHeightFactor,c=s.getThirdPoint(t[t.length-2],r,0,o,!0),p=s.getThirdPoint(t[t.length-2],r,0,u,!0),d=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!1),y=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!0);return[s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!1),d,r,y,s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!0)]},getPoints:function(){return[this.pList]},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"squadcombat"},clone:function(){return"请使用子类实现!"}});e.exports.SquadCombat=r,e.exports.squadCombat=function(t){return new r(t)}},{"./Geometry":57,"./GeometryUtil":58,"./PlotUtils":60}],66:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./PlotUtils").PlotUtils,o=t("./GeometryUtil").GeometryUtil,r=n.Geometry.extend({options:{tailWidthFactor:.15,neckWidthFactor:.2,headWidthFactor:.25,headAngle:Math.PI/8.5,neckAngle:Math.PI/13,points:[]},initialize:function(t){if(t&&L.Util.setOptions(this,t),this.options.points&&this.options.points.length>0){var e=this.createPolygonPoints(this.options.points)
;this.pList=this._convertPoints(e)}else this.pList=[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?o.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},setPoints:function(t){return this.options.points=t,this.pList=this.createPolygonPoints(t),this.pList=this._convertPoints(this.pList),this.fire("redraw"),this},createPolygonPoints:function(t){var e=t[0],i=t[1],n=s.getBaseLength(t),o=n*this.options.tailWidthFactor,r=n*this.options.neckWidthFactor,a=n*this.options.headWidthFactor,l=s.getThirdPoint(i,e,s.Constants.HALF_PI,o,!0),h=s.getThirdPoint(i,e,s.Constants.HALF_PI,o,!1),u=s.getThirdPoint(e,i,this.options.headAngle,a,!1),c=s.getThirdPoint(e,i,this.options.headAngle,a,!0);return[l,s.getThirdPoint(e,i,this.options.neckAngle,r,!1),u,i,c,s.getThirdPoint(e,i,this.options.neckAngle,r,!0),h]},getPoints:function(){return[this.pList]},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"straightarrow"},clone:function(){return"请使用子类实现!"}});e.exports.StraightArrow=r,e.exports.straightArrow=function(t){return new r(t)}},{"./Geometry":57,"./GeometryUtil":58,"./PlotUtils":60}],67:[function(t,e,i){"use strict";var n=t("./Geometry"),s=t("./PlotUtils").PlotUtils,o=t("./GeometryUtil").GeometryUtil,r=n.Geometry.extend({options:{headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,swallowTailFactor:1,swallowTailPnt:null,points:[]},initialize:function(t){if(t&&L.Util.setOptions(this,t),this.options.points&&this.options.points.length>0){var e=this.createPolygonPoints(this.options.points);this.pList=this._convertPoints(e)}else this.pList=[]},_convertPoints:function(t){for(var e=[],i=L.Polyline._flat(t),n=0,s=t.length;n<s;n++)e[n]=i?o.translateArrToPoint(t[n]):this._convertPoints(t[n]);return e},setPoints:function(t){return this.options.points=t,this.pList=this.createPolygonPoints(t),this.pList=this._convertPoints(this.pList),this.fire("redraw"),this},createPolygonPoints:function(t){var e=this.getTailPoints(t),i=this.getArrowHeadPoints(t,e[0],e[2]),n=i[0],o=i[4],r=this.getArrowBodyPoints(t,n,o,this.options.tailWidthFactor),a=r.length,l=[e[0]].concat(r.slice(0,a/2));l.push(n);var h=[e[2]].concat(r.slice(a/2,a));return h.push(o),l=s.getQBSplinePoints(l),h=s.getQBSplinePoints(h),[l.concat(i,h.reverse(),[e[1],l[0]])]},getArrowBodyPoints:function(t,e,i,n){for(var o=s.wholeDistance(t),r=s.getBaseLength(t),a=r*this.options.tailWidthFactor,l=s.distance(e,i),h=(a-l)/2,u=0,c=[],p=[],d=1;d<t.length-1;d++){var y=s.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2;u+=s.distance(t[d-1],t[d]);var f=(a/2-u/o*h)/Math.sin(y),_=s.getThirdPoint(t[d-1],t[d],Math.PI-y,f,!0),m=s.getThirdPoint(t[d-1],t[d],y,f,!1);c.push(_),p.push(m)}return c.concat(p)},getTailPoints:function(t){var e=s.getBaseLength(t),i=e*this.options.tailWidthFactor,n=s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!1),o=s.getThirdPoint(t[1],t[0],s.Constants.HALF_PI,i,!0),r=i*this.options.swallowTailFactor;return[n,s.getThirdPoint(t[1],t[0],0,r,!0),o]},getArrowHeadPoints:function(t,e,i){var n=s.getBaseLength(t),o=n*this.options.headHeightFactor,r=t[t.length-1];n=s.distance(r,t[t.length-2]);var a=s.distance(e,i);o>a*this.options.headTailFactor&&(o=a*this.options.headTailFactor);var l=o*this.options.headWidthFactor,h=o*this.options.neckWidthFactor;o=o>n?n:o;var u=o*this.options.neckHeightFactor,c=s.getThirdPoint(t[t.length-2],r,0,o,!0),p=s.getThirdPoint(t[t.length-2],r,0,u,!0),d=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!1),y=s.getThirdPoint(r,c,s.Constants.HALF_PI,l,!0);return[s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!1),d,r,y,s.getThirdPoint(r,p,s.Constants.HALF_PI,h,!0)]},getPoints:function(){return[this.pList]},toJSON:function(){return null},fromJSON:function(t){return null},getType:function(){return"squadcombat"},clone:function(){return"请使用子类实现!"}});e.exports.TailedSquadCombat=r,e.exports.tailedSquadCombat=function(t){return new r(t)}},{"./Geometry":57,"./GeometryUtil":58,"./PlotUtils":60}],68:[function(t,e,i){"use strict";var n={};n.init=function(){window.hack="hack",function(){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))}()},e.exports=n,e.exports.Hack=n},{}],69:[function(t,e,i){"use strict";var n=L.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._zoomType="in"},addHooks:function(){L.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){L.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},setZoomType:function(t){this._zoomType="in"==t?"in":"out"},_onMouseDown:function(t){if(1!==t.which&&1!==t.button)return!1;this._map.dragging.disable(),this._container.style.cursor="crosshair",this._resetState(),L.DomUtil.disableTextSelection(),L.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),L.DomEvent.on(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=L.DomUtil.create("div","egis-zoom-box",this._container),L.DomUtil.addClass(this._container,"egis-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new L.Bounds(this._point,this._startPoint),i=e.getSize();L.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(L.DomUtil.remove(this._box),L.DomUtil.removeClass(this._container,"egis-crosshair")),L.DomUtil.enableTextSelection(),L.DomUtil.enableImageDrag(),L.DomEvent.off(document,{contextmenu:L.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp},this)},_onMouseUp:function(t){if(this._map.dragging.enable(),this._container.style.cursor="",(1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(L.bind(this._resetState,this),0);var e=new L.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));if("in"==this._zoomType)this._map.fitBounds(e).fire("boxzoominoroutend",{boxZoomBounds:e});else{var i=this._getBoundsWidth(e),n=this._map.getBounds(),s=this._getBoundsWidth(n),o=i,r=Math.abs((o-s)/2),a=n.getSouthWest(),l=n.getNorthEast(),h=new L.LatLng(a.lat-r,a.lng-r),u=new L.LatLng(l.lat+r,l.lng+r),c=new L.LatLngBounds(h,u);this._map.getZoom()>this._map.getMinZoom()&&this._map.fitBounds(c).fire("boxzoominoroutend",{boxZoomBounds:c})}}},_getBoundsWidth:function(t){var e=t.getSouthWest(),i=t.getNorthEast();return Math.abs(e.lng-i.lng)},_onKeyDown:function(t){null===t.keyCode&&this._finish()}});L.Map.addInitHook("addHandler","boxZoomInOrOut",n),e.exports.BoxZoomInOrOut=n,e.exports.boxZoomInOrOut=function(t){return new n(t)}},{}],70:[function(t,e,i){"use strict";var n=t("./DrawCircle"),s=t("./DrawPoint"),o=t("./DrawPolyline"),r=t("./DrawRectangle"),a=t("./DrawPolygon"),l=t("./DrawDoubleArrow"),h=t("./DrawSquadCombat"),u=t("./DrawGatheringPlace"),c=t("./DrawTailedSquadCombat"),p=t("./DrawHandPolygon"),d=t("./DrawHandPolyline"),y=L.Handler.extend({includes:L.Mixin.Events,options:{repeatMode:!0,graphicsLayer:void 0,symbol:void 0,target:void 0,type:""},initialize:function(t){switch(L.setOptions(this,t),this._map=this.options.target,this._type=this.options.type,this._type){case"circle":this._drawTool=n.drawCircle(this._map,t);break;case"point":this._drawTool=s.drawPoint(this._map,t);break;case"rectangle":this._drawTool=r.drawRectangle(this._map,t);break;case"polyline":this._drawTool=o.drawPolyline(this._map,t);break;case"polygon":this._drawTool=a.drawPolygon(this._map,t);break;case"tailedsquadcombat":this._drawTool=c.drawTailedSquadCombat(this._map,t);break;case"squadcombat":this._drawTool=h.drawSquadCombat(this._map,t);break;case"doublearrow":this._drawTool=l.drawDoubleArrow(this._map,t);break;case"gatheringplace":this._drawTool=u.drawGatheringPlace(this._map,t);break;case"handpolygon":this._drawTool=p.drawHandPolygon(this._map,t);break;case"handpolyline":this._drawTool=d.drawHandPolyline(this._map,t)}},addHooks:function(){this._drawTool.enabled()||(this._drawTool.enable(),this._drawTool.on("drawstart",this._fireDrawStartEvent,this),this._drawTool.on("draw",this._fireDrawUpdateEvent,this),this._drawTool.on("drawend",this._fireDrawEndEvent,this),this._drawTool.on("drawcanceled",this._fireCancelEvent,this),this._drawTool.on("drawend",this._drawFactoryDisable,this))},removeHooks:function(){this._drawTool.enabled()&&(this._drawTool.off(),this._drawTool.disable())},_drawFactoryDisable:function(){},_fireDrawStartEvent:function(t){this.fire("drawstart",{type:t.type,graphic:t.graphic})},_fireDrawEndEvent:function(t){this.fire("drawend",{type:t.type,graphic:t.graphic})},_fireDrawUpdateEvent:function(t){this.fire("draw",{type:t.type,graphic:t.graphic})},_fireCreatedEvent:function(t){this.fire("drawcreate",{type:t.type,graphic:t.graphic})},_fireCancelEvent:function(t){this.fire("drawcancled",{type:t.type,graphic:t.graphic})}});e.exports.Draw=y,e.exports.draw=function(t){return new y(t)}},{"./DrawCircle":71,"./DrawDoubleArrow":72,"./DrawGatheringPlace":73,"./DrawHandPolygon":74,"./DrawHandPolyline":75,"./DrawPoint":76,"./DrawPolygon":77,"./DrawPolyline":78,"./DrawRectangle":79,"./DrawSquadCombat":81,"./DrawTailedSquadCombat":82}],71:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawCircle"},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},_onMouseDown:function(t){0==t.originalEvent.button&&(this._isDrawing=!0,this._startLatLng=t.latlng)},_onMouseUp:function(t){0==t.originalEvent.button&&(this._shape&&this._fireCreatedEvent(this._shape),this.disable(),this.options.repeatMode&&this.enable())},_drawShape:function(t){var e=this._map.distance(this._startLatLng,t),i=[this._startLatLng.lng,this._startLatLng.lat];this._shape?(this._shape.getGeometry().setRadius(e),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.circle(i,e),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseMove:function(t){if(0==t.originalEvent.button&&!this._zooming){var e=t.latlng;this._isDrawing&&this._drawShape(e)}},_cancelDrawing:function(t){27===t.keyCode&&(this._graphicLayer.removeGraphic(this._shape),this._shape=null,this._map.fire("drawcanceled",{type:this.type,graphic:this._shape}),this.disable(),this.options.repeatMode&&this.enable())}});L.Map.addInitHook("addHandler","drawCircle",s),e.exports.DrawCircle=s,e.exports.drawCircle=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],72:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawDoubleArrow"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(t){this._shape?t.length>1&&(this._shape.getGeometry().setPoints(t),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.doubleArrow(),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_drawEditShape:function(t){if(this._editShape)this._editShape.setGeometry(egis.geometry.polyline([[t]]));else{var e=L.extend({},this.options.shapeOptions.outline);this._originalLatlng=this._startLatLng,this._editShape=egis.graphic({geometry:egis.geometry.polyline([t]),symbol:egis.symbol.simpleLineSymbol(e),interactive:!1}),this._graphicLayer.addGraphic(this._editShape)}},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._points||(this._points=[]),this._points.push([t.latlng.lng,t.latlng.lat])))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&(1==this._points.length?this._drawEditShape(this._points.concat([[t.latlng.lng,t.latlng.lat]])):this._points.length>1&&this._drawShape(this._points.concat([[t.latlng.lng,t.latlng.lat]]))))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._points=[],this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","drawDoubleArrow",s),e.exports.DrawDoubleArrow=s,e.exports.drawDoubleArrow=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],73:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawGatheringPlace"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(t){this._shape?t.length>1&&(this._shape.getGeometry().setPoints(t),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.gatheringPlace(),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._points||(this._points=[]),this._points.push([t.latlng.lng,t.latlng.lat])))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&this._drawShape(this._points.concat([[t.latlng.lng,t.latlng.lat]])))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._points=[],this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","drawGatheringPlace",s),e.exports.DrawGatheringPlace=s,e.exports.drawGatheringPlace=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],74:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"handpolygon"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){if(this._shape){this._shape.getGeometry().getRing(0).length<3&&(this._graphicLayer.removeGraphic(this._shape),this._shape=null)}this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),n.DrawSimpleShape.prototype.removeHooks.call(this)},_drawShape:function(){this._shape?this._startLatLng&&(this._shape.getGeometry().insertPoint(0,this._shape.getGeometry().getRing(0).length,[this._startLatLng.lng,this._startLatLng.lat]),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.polygon([]),symbol:this._symbol}),this._shape.getGeometry().addRing([[this._startLatLng.lng,this._startLatLng.lat]]),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||(this._startLatLng=t.latlng,this._isDrawing&&this._drawShape()))},_onDBClick:function(t){0==t.originalEvent.button&&(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this.completeShape())},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable(),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable()}});L.Map.addInitHook("addHandler","DrawHandPolygon",s),e.exports.DrawHandPolygon=s,e.exports.drawHandPolygon=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],75:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawHandPolyline"},options:{shapeOptions:{opacity:1,width:4,color:"#3388ff"}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.LineSymbol?this.options.symbol:egis.symbol.simpleLineSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(){this._shape?this._startLatLng&&(this._shape.getGeometry().insertPoint(0,this._shape.getGeometry().getPath(0).length,[this._startLatLng.lng,this._startLatLng.lat]),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.polyline([[[this._startLatLng.lng,this._startLatLng.lat]]]),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||(this._startLatLng=t.latlng,this._isDrawing&&this._drawShape()))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","DrawHandPolyline",s),e.exports.DrawHandPolyline=s,e.exports.drawHandPolyline=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],76:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"point"},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.MarkerSymbol?this.options.symbol:egis.symbol.simpleMarkerSymbol()},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null)},_onMouseMove:function(t){if(0==t.originalEvent.button&&!this._zooming){var e=t.latlng;this._editShape?this._editShape.getGeometry().setXY(e.lng,e.lat):(this._editShape=egis.graphic({geometry:egis.geometry.point(t.latlng.lng,t.latlng.lat),symbol:this._symbol,interactive:!1}),this._fireDrawStartEvent())}},_onMouseDown:function(t){0==t.originalEvent.button&&(this._isDrawing=!0,this._startLatLng=t.latlng,this._editShape&&(this._shape=egis.graphic({geometry:egis.geometry.point(t.latlng.lng,t.latlng.lat),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape)),this.disable(),this.options.repeatMode&&this.enable())}});L.Map.addInitHook("addHandler","drawPoint",s),e.exports.DrawPoint=s,e.exports.drawPoint=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],77:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"polygon"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){if(this._shape){this._shape.getGeometry().getRing(0).length<3&&(this._graphicLayer.removeGraphic(this._shape),this._shape=null)}this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),n.DrawSimpleShape.prototype.removeHooks.call(this)},_drawShape:function(){this._shape?this._startLatLng&&(this._shape.getGeometry().insertPoint(0,this._shape.getGeometry().getRing(0).length,[this._startLatLng.lng,this._startLatLng.lat]),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.polygon([]),symbol:this._symbol}),this._shape.getGeometry().addRing([[this._startLatLng.lng,this._startLatLng.lat]]),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_drawEditShape:function(t){if(this._editShape){if(this._startLatLng&&t){var e=egis.geometry.point(this._startLatLng.lng,this._startLatLng.lat),i=egis.geometry.point(t.lng,t.lat),n=egis.geometry.point(this._originalLatlng.lng,this._originalLatlng.lat);this._editShape.setGeometry(egis.geometry.polyline([[e,i],[n,i]]))}}else{var s=L.extend({},this.options.shapeOptions.outline,{style:"style_dash"});this._originalLatlng=this._startLatLng,this._editShape=egis.graphic({geometry:egis.geometry.polyline([[[this._startLatLng.lng,this._startLatLng.lat]]]),symbol:egis.symbol.simpleLineSymbol(s),interactive:!1}),this._graphicLayer.addGraphic(this._editShape)}},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._drawEditShape(),this._drawShape()))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&this._drawEditShape(t.latlng))},_onDBClick:function(t){0==t.originalEvent.button&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null,this.completeShape())},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable(),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable()}});L.Map.addInitHook("addHandler","drawPolygon",s),e.exports.DrawPolygon=s,e.exports.drawPolygon=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],78:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawPolyline"},options:{shapeOptions:{opacity:1,width:4,color:"#3388ff"}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.LineSymbol?this.options.symbol:egis.symbol.simpleLineSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(){this._shape?this._startLatLng&&(this._shape.getGeometry().insertPoint(0,this._shape.getGeometry().getPath(0).length,[this._startLatLng.lng,this._startLatLng.lat]),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.polyline([[[this._startLatLng.lng,this._startLatLng.lat]]]),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_drawEditShape:function(t){if(this._editShape){if(this._startLatLng&&t){var e=egis.geometry.point(this._startLatLng.lng,this._startLatLng.lat),i=egis.geometry.point(t.lng,t.lat);this._editShape.setGeometry(egis.geometry.polyline([[e,i]]))}}else this._editShape=egis.graphic({geometry:egis.geometry.polyline([[[this._startLatLng.lng,this._startLatLng.lat]]]),symbol:this._symbol,interactive:!1}),this._graphicLayer.addGraphic(this._editShape)},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._drawEditShape(),this._drawShape()))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&this._drawEditShape(t.latlng))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null,this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","drawPolyline",s),e.exports.DrawPolyline=s,e.exports.drawPolyline=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],79:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawRectangle"},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},_onMouseDown:function(t){0==t.originalEvent.button&&(this._isDrawing=!0,this._startLatLng=t.latlng,this._drawShape())},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(this._shape),this.disable(),this.options.repeatMode&&this.enable()},_drawShape:function(t){this._startLatLng.lng,this._startLatLng.lat;if(this._shape){if(this._startLatLng&&t){var e,i,n,s;this._startLatLng.lng<=t.lng?(e=this._startLatLng.lng,i=t.lng):(e=t.lng,i=this._startLatLng.lng),this._startLatLng.lat<=t.lat?(n=this._startLatLng.lat,s=t.lat):(n=t.lat,s=this._startLatLng.lat),this._shape.getGeometry().setExtent(e,n,i,s),this._fireDrawUpdateEvent()}}else this._shape=egis.graphic({geometry:egis.geometry.extent(),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent()},_onMouseMove:function(t){if(0==t.originalEvent.button&&!this._zooming){var e=t.latlng;this._isDrawing&&this._drawShape(e)}}});L.Map.addInitHook("addHandler","drawRectangle",s),e.exports.DrawRectangle=s,e.exports.drawRectangle=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],80:[function(t,e,i){"use strict";var n=L.Handler.extend({includes:L.Mixin.Events,options:{repeatMode:!0,graphicsLayer:"",symbol:""},initialize:function(t,e){L.setOptions(this,e),this._map=t,this._container=t._container,this._graphicLayer=this.options.graphicsLayer instanceof egis.layer.GraphicsLayer?this.options.graphicsLayer:new egis.layer.GraphicsLayer,this._map.hasLayer(this._graphicLayer)||this._map.addLayer(this._graphicLayer)},addHooks:function(){this._map&&(this._disableOtherDrawTool(),this._map.dragging.enabled()&&this._map.dragging.disable(),this._map.getContainer().focus(),this._container.style.cursor="crosshair",this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("mouseup",this._onMouseUp,this),this._map.on("zoomstart",this._zoomStart,this),this._map.on("zoomend",this._zoomEnd,this),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(this._map.dragging.enabled()||this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("mouseup",this._onMouseUp,this),this._map.off("zoomstart",this._zoomStart,this),this._map.off("zoomend",this._zoomEnd,this),L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this),this._shape&&(this._fireDrawEndEvent(),this._shape=null)),this._isDrawing=!1},_onDBClick:function(t){},_onMouseDown:function(t){this._isDrawing=!0},_onMouseMove:function(t){},_onMouseUp:function(){},setOptions:function(t){L.setOptions(this,t)},_cancelDrawing:function(t){27===t.keyCode&&(this._map.fire("drawcanceled",{type:this.type,graphic:this._shape}),this.disable(),this.options.repeatMode&&this.enable())},_fireDrawStartEvent:function(){this.fire("drawstart",{type:this.type,graphic:this._shape}),this._map.fire("drawstart",{type:this.type,graphic:this._shape})},_fireDrawEndEvent:function(){this.fire("drawend",{type:this.type,graphic:this._shape}),this._map.fire("drawend",{type:this.type,graphic:this._shape})},_fireDrawUpdateEvent:function(){this.fire("draw",{type:this.type,graphic:this._shape}),this._map.fire("draw",{type:this.type,graphic:this._shape})},_fireCreatedEvent:function(){this.fire("drawcreate",{type:this.type,graphic:this._shape}),this._map.fire("drawcreate",{type:this.type,graphic:this._shape})},_disableOtherDrawTool:function(){this._map.drawPolyline.enabled()&&this._map.drawPolyline.disable(),this._map.drawCircle.enabled()&&this._map.drawCircle.disable(),this._map.drawPoint.enabled()&&this._map.drawPoint.disable(),this._map.drawPolygon.enabled()&&this._map.drawPolygon.disable(),this._map.drawRectangle.enabled()&&this._map.drawRectangle.disable(),this._enabled=!0},_zoomStart:function(){this._zooming=!0},_zoomEnd:function(){this._zooming=!1}});e.exports.DrawSimpleShape=n},{}],81:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawSquadCombat"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(t){this._shape?t.length>1&&(this._shape.getGeometry().setPoints(t),
this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.squadCombat(),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._points||(this._points=[]),this._points.push([t.latlng.lng,t.latlng.lat])))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&this._drawShape(this._points.concat([[t.latlng.lng,t.latlng.lat]])))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._points=[],this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","drawSquadCombat",s),e.exports.DrawSquadCombat=s,e.exports.drawSquadCombat=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],82:[function(t,e,i){"use strict";var n=t("./DrawSimpleShape"),s=n.DrawSimpleShape.extend({statics:{TYPE:"drawTailedSquadCombat"},options:{shapeOptions:{color:"#3388ff",stroke:!0,opacity:.2,outline:{color:"#3388ff",width:3,opacity:.8}}},initialize:function(t,e){this.type=s.TYPE,n.DrawSimpleShape.prototype.initialize.call(this,t,e),this._symbol=this.options.symbol instanceof egis.symbol.FillSymbol?this.options.symbol:egis.symbol.simpleFillSymbol()},addHooks:function(){n.DrawSimpleShape.prototype.addHooks.call(this),this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map&&this._map.on("dblclick",this._onDBClick,this)},removeHooks:function(){n.DrawSimpleShape.prototype.removeHooks.call(this),this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._map.off("dblclick",this._onDBClick,this)},_drawShape:function(t){this._shape?t.length>1&&(this._shape.getGeometry().setPoints(t),this._fireDrawUpdateEvent()):(this._shape=egis.graphic({geometry:egis.geometry.tailedSquadCombat(),symbol:this._symbol}),this._graphicLayer.addGraphic(this._shape),this._fireDrawStartEvent())},_onMouseDown:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime<300||(this._clickTime=new Date,this._isDrawing=!0,this._startLatLng=t.latlng,this._points||(this._points=[]),this._points.push([t.latlng.lng,t.latlng.lat])))},_onMouseMove:function(t){0==t.originalEvent.button&&(this._zooming||this._isDrawing&&this._drawShape(this._points.concat([[t.latlng.lng,t.latlng.lat]])))},_onDBClick:function(t){0==t.originalEvent.button&&(this._clickTime&&new Date-this._clickTime>=300||(this._editShape&&(this._graphicLayer.removeGraphic(this._editShape),this._editShape=null),this._points=[],this.completeShape()))},completeShape:function(){this.disable(),this.options.repeatMode&&this.enable()}});L.Map.addInitHook("addHandler","drawTailedSquadCombat",s),e.exports.DrawTailedSquadCombat=s,e.exports.drawTailedSquadCombat=function(t,e){return new s(t,e)}},{"./DrawSimpleShape":80}],83:[function(t,e,i){"use strict";var n=L.Handler.extend({includes:L.Mixin.Events,options:{graphicsLayer:"",target:""},initialize:function(t){L.setOptions(this,t),!this.options.graphicsLayer instanceof egis.layer.GraphicsLayer||(this._map=this.options.target,this._graphicLayer=this.options.graphicsLayer)},addHooks:function(){if(this._map&&this._graphicLayer&&this._map.hasLayer(this._graphicLayer)){var t=this._graphicLayer.getGraphics();for(var e in t)t[e].editing&&!t[e].editing.enabled()&&t[e].editing.enable();this._map.on("editstart",this._fireEditStartEvent,this),this._map.on("edit",this._fireEditingEvent,this),this._map.on("editend",this._fireEditEndEvent,this)}},removeHooks:function(){if(this._graphicLayer){var t=this._graphicLayer.getGraphics();for(var e in t)t[e].editing&&t[e].editing.enabled()&&t[e].editing.disable()}this._map.off("editstart",this._fireEditStartEvent,this),this._map.off("edit",this._fireEditingEvent,this),this._map.off("editend",this._fireEditEndEvent,this)},_addGraphicEditHandler:function(t){var e=t.graphic;e.editing&&!e.editing.enabled()&&e.editing.enable()},_fireEditStartEvent:function(t){this.fire("editstart",{graphic:t.graphic})},_fireEditingEvent:function(t){this.fire("edit",{graphic:t.graphic})},_fireEditEndEvent:function(t){this.fire("editend",{graphic:t.graphic})}});e.exports.Edit=n,e.exports.edit=function(t){return new n(t)}},{}],84:[function(t,e,i){"use strict";var n=t("./EditSimpleShape"),s=t("../Features/Graphic/Circle"),o=n.EditSimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getGeometry().getCenter();this._moveMarker=this._createMarker({lng:t.x,lat:t.y},this.options.moveIcon)},_createResizeMarker:function(){var t=this._shape.getGeometry().getCenter(),e={lng:t.x,lat:t.y},i=this._getResizeMarkerPoint(e);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(i,this.options.resizeIcon))},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.getGeometry().setCenter([t.lng,t.lat])},_getResizeMarkerPoint:function(t){var e=this._shape._radius,i=this._map.project(t);return this._map.unproject([i.x+e,i.y])},_resize:function(t){var e=this._moveMarker.getLatLng(),i=this._map.distance(e,t);this._shape.getGeometry().setRadius(i)}});s.addInitHook(function(){this.on("add",function(){o&&(this.editing=new o(this),this.options.editable&&this.editing.enable())}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),e.exports.EditCircle=o,e.exports.editCircle=function(t,e){return new o(t,e)}},{"../Features/Graphic/Circle":37,"./EditSimpleShape":89}],85:[function(t,e,i){"use strict";var n=t("./EditSimpleShape"),s=t("../Features/Graphic/Point"),o=n.EditSimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getGeometry().toLatLng();this._moveMarker=this._createMarker(t,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(t){if(this._resizeMarkers.length){var e=this._getResizeMarkerPoint(t);this._resizeMarkers[0].setLatLng(e)}this._shape.getGeometry().setXY(t.lng,t.lat)}});s.addInitHook(function(){this.on("add",function(){o&&(this.editing=new o(this),this.options.editable&&this.editing.enable())}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.disable()})}),e.exports.EditPoint=o,e.exports.editPoint=function(t,e){return new o(t,e)}},{"../Features/Graphic/Point":44,"./EditSimpleShape":89}],86:[function(t,e,i){"use strict";var n=t("./EditSimpleShape"),s=t("../Features/Graphic/Polygon"),o=t("../Geometry/Geometry"),r=n.EditSimpleShape.extend({initialize:function(t,e){this._shape=t,L.setOptions(this,e)},addHooks:function(){var t=this._shape;if(t._map){this._map=t._map,this._latlngs=[];for(var e=this._shape.getGeometry().getRings(),i=0;i<e.length;i++){for(var n=[],s=0;s<e[i].length;s++)n.push(e[i][s].toLatLng());this._latlngs.push(n)}this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)}},removeHooks:function(){var t=this._shape;t._map&&(this._map=t._map,this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,s=this._defaultShape();for(t=0,i=s.length;t<i;t++)n=this._createMarker(s[t],t),n.on("click",this._onMarkerClick,this),this._markers.push(n);var o,r;for(t=0,e=i-1;t<i;e=t++)o=this._markers[e],r=this._markers[t],this._createMiddleMarker(o,r),this._updatePrevNext(o,r)},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:this.options.resizeIcon});return i._origLatLng=t,i._index=e,this._bindMarker(i),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._fireEditStartEvent()},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._shapeUpdate(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._shapeUpdate(),this._fireEditingEvent()},_shapeUpdate:function(){for(var t=[],e=0;e<this._latlngs.length;e++){for(var i=[],n=0;n<this._latlngs[e].length;n++)i.push([this._latlngs[e][n].lng,this._latlngs[e][n].lat]);t.push(i)}this._shape.getGeometry().update(t)},_onMarkerClick:function(t){marker=t.target,this._defaultShape().length<4||(this._removeMarker(marker),this._updatePrevNext(marker._prev,marker._next),marker._middleLeft&&this._markerGroup.removeLayer(marker._middleLeft),marker._middleRight&&this._markerGroup.removeLayer(marker._middleRight),marker._prev&&marker._next?this._createMiddleMarker(marker._prev,marker._next):marker._prev?marker._next||(marker._prev._middleRight=null):marker._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,s,o=this._getMiddleLatLng(t,e),r=this._createMarker(o);r.setOpacity(.6),t._middleRight=e._middleLeft=r,n=function(){var n=e._index;r._index=n,r.off("click",i,this).on("click",this._onMarkerClick,this),o.lat=r.getLatLng().lat,o.lng=r.getLatLng().lng,this._spliceLatLngs(n,0,o),this._markers.splice(n,0,r),r.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e)},s=function(){r.off("dragstart",n,this),r.off("dragend",s,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},i=function(){n.call(this),s.call(this),this._fireEdit()},r.on("click",i,this).on("dragstart",n,this).on("dragend",s,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._shape._map,n=i.project(t.getLatLng()),s=i.project(e.getLatLng());return i.unproject(n._add(s)._divideBy(2))}});s.addInitHook(function(){this.on("add",function(){r&&this.getGeometry().getType()!=o.Geometry.EXTENT&&(this.editing=new r(this),this.options.editable&&this.editing.enable())}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.disable()})}),e.exports.EditPolygon=r,e.exports.editPolygon=function(t,e){return new r(t,e)}},{"../Features/Graphic/Polygon":45,"../Geometry/Geometry":57,"./EditSimpleShape":89}],87:[function(t,e,i){"use strict";var n=t("./EditSimpleShape"),s=t("../Features/Graphic/Polyline"),o=n.EditSimpleShape.extend({initialize:function(t,e){this._shape=t,L.setOptions(this,e)},addHooks:function(){var t=this._shape;if(t._map){this._map=t._map,this._map.doubleClickZoom.enabled()&&this._map.doubleClickZoom.disable(),this._latlngs=[];for(var e=this._shape.getGeometry().getPaths(),i=0;i<e.length;i++){for(var n=[],s=0;s<e[i].length;s++)n.push(e[i][s].toLatLng());this._latlngs.push(n)}this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)}},removeHooks:function(){var t=this._shape;t._map&&(this._map=t._map,this._map.doubleClickZoom.enabled()||this._map.doubleClickZoom.enable(),t._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},_defaultShape:function(){return L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var t,e,i,n,s=this._defaultShape();for(t=0,i=s.length;t<i;t++)n=this._createMarker(s[t],t),n.on("click",this._onMarkerClick,this),this._markers.push(n);var o,r;for(t=0,e=i-1;t<i;e=t++)0!==t&&(o=this._markers[e],r=this._markers[t],this._createMiddleMarker(o,r),this._updatePrevNext(o,r))},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:this.options.resizeIcon});return i._origLatLng=t,i._index=e,this._bindMarker(i),this._markerGroup.addLayer(i),i},_onMarkerDragStart:function(){this._fireEditStartEvent()},_spliceLatLngs:function(){var t=this._defaultShape(),e=[].splice.apply(t,arguments);return this._shapeUpdate(),e},_removeMarker:function(t){var e=t._index;this._markerGroup.removeLayer(t),this._markers.splice(e,1),this._spliceLatLngs(e,1),this._updateIndexes(e,-1),t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("click",this._onMarkerClick,this)},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(t){var e=t.target;L.extend(e._origLatLng,e._latlng),e._middleLeft&&e._middleLeft.setLatLng(this._getMiddleLatLng(e._prev,e)),e._middleRight&&e._middleRight.setLatLng(this._getMiddleLatLng(e,e._next)),this._shapeUpdate(),this._fireEditingEvent()},_shapeUpdate:function(){for(var t=[],e=0;e<this._latlngs.length;e++){for(var i=[],n=0;n<this._latlngs[e].length;n++)i.push([this._latlngs[e][n].lng,this._latlngs[e][n].lat]);t.push(i)}this._shape.getGeometry().update(t)},_onMarkerClick:function(t){marker=t.target,this._defaultShape().length<3||(this._removeMarker(marker),this._updatePrevNext(marker._prev,marker._next),marker._middleLeft&&this._markerGroup.removeLayer(marker._middleLeft),marker._middleRight&&this._markerGroup.removeLayer(marker._middleRight),marker._prev&&marker._next?this._createMiddleMarker(marker._prev,marker._next):marker._prev?marker._next||(marker._prev._middleRight=null):marker._next._middleLeft=null,this._fireEdit())},_updateIndexes:function(t,e){this._markerGroup.eachLayer(function(i){i._index>t&&(i._index+=e)})},_createMiddleMarker:function(t,e){var i,n,s,o=this._getMiddleLatLng(t,e),r=this._createMarker(o);r.setOpacity(.6),t._middleRight=e._middleLeft=r,n=function(){var n=e._index;r._index=n,r.off("click",i,this).on("click",this._onMarkerClick,this),o.lat=r.getLatLng().lat,o.lng=r.getLatLng().lng,this._spliceLatLngs(n,0,o),this._markers.splice(n,0,r),r.setOpacity(1),this._updateIndexes(n,1),e._index++,this._updatePrevNext(t,r),this._updatePrevNext(r,e)},s=function(){r.off("dragstart",n,this),r.off("dragend",s,this),this._createMiddleMarker(t,r),this._createMiddleMarker(r,e)},i=function(){n.call(this),s.call(this),this._fireEdit()},r.on("click",i,this).on("dragstart",n,this).on("dragend",s,this),this._markerGroup.addLayer(r)},_updatePrevNext:function(t,e){t&&(t._next=e),e&&(e._prev=t)},_getMiddleLatLng:function(t,e){var i=this._shape._map,n=i.project(t.getLatLng()),s=i.project(e.getLatLng());return i.unproject(n._add(s)._divideBy(2))}});s.addInitHook(function(){this.on("add",function(){o&&(this.editing=new o(this),this.options.editable&&this.editing.enable())}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.disable()})}),e.exports.EditPolyline=o,e.exports.editPolyline=function(t,e){return new o(t,e)}},{"../Features/Graphic/Polyline":46,"./EditSimpleShape":89}],88:[function(t,e,i){"use strict";var n=t("./EditSimpleShape"),s=t("../Features/Graphic/Extent"),o=n.EditSimpleShape.extend({_createMoveMarker:function(){var t=this._shape.getGeometry(),e=this._ExtentCenter(t);this._moveMarker=this._createMarker(e,this.options.moveIcon)},_ExtentCenter:function(t){return{lng:(t.xmax+t.xmin)/2,lat:(t.ymax+t.ymin)/2}},_createResizeMarker:function(){var t=this._getCorners();this._resizeMarkers=[];for(var e=0,i=t.length;e<i;e++)this._resizeMarkers.push(this._createMarker(t[e],this.options.resizeIcon)),this._resizeMarkers[e]._cornerIndex=e},_onMarkerDragStart:function(t){n.EditSimpleShape.prototype._onMarkerDragStart.call(this,t);var e=this._getCorners(),i=t.target,s=i._cornerIndex;this._oppositeCorner=e[(s+2)%4],this._toggleCornerMarkers(0,s)},_onMarkerDragEnd:function(t){var e,i,s=t.target;s===this._moveMarker&&(e=this._shape.getGeometry(),i=this._ExtentCenter(e),s.setLatLng(i)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),n.EditSimpleShape.prototype._onMarkerDragEnd.call(this,t)},_move:function(t){var e,i=this._shape.getGeometry(),n=this._ExtentCenter(i);e=[t.lng-n.lng,t.lat-n.lat],this._shape.getGeometry().setExtent(i.getXmin()+e[0],i.getYmin()+e[1],i.getXmax()+e[0],i.getYmax()+e[1]),this._repositionCornerMarkers()},_resize:function(t){this._shape.getGeometry().setExtent(t.lng,t.lat,this._oppositeCorner.lng,this._oppositeCorner.lat);var e=this._shape.getGeometry(),i=this._ExtentCenter(e);this._moveMarker.setLatLng(i)},_getCorners:function(){var t=this._shape.getGeometry();return[{lat:t.getYmax(),lng:t.getXmin()},{lat:t.getYmax(),lng:t.getXmax()},{lat:t.getYmin(),lng:t.getXmax()},{lat:t.getYmin(),lng:t.getXmin()}]},_toggleCornerMarkers:function(t){for(var e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setOpacity(t)},_repositionCornerMarkers:function(){for(var t=this._getCorners(),e=0,i=this._resizeMarkers.length;e<i;e++)this._resizeMarkers[e].setLatLng(t[e])}});s.addInitHook(function(){this.on("add",function(){o&&(this.editing=new o(this),this.options.editable&&this.editing.enable())}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.disable()})}),e.exports.EditRectangle=o,e.exports.editRectangle=function(t,e){return new o(t,e)}},{"../Features/Graphic/Extent":40,"./EditSimpleShape":89}],89:[function(t,e,i){"use strict";var n=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(16,16),className:"egis-div-icon egis-editing-icon egis-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(16,16),className:"egis-div-icon egis-editing-icon egis-edit-resize"})},initialize:function(t,e){this._shape=t,L.Util.setOptions(this,e)},addHooks:function(){var t=this._shape;t._map&&(this._map=t._map,t._map&&(this._map=t._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){if(this._shape._map){this._unbindMarker(this._moveMarker);for(var t=0,e=this._resizeMarkers.length;t<e;t++)this._unbindMarker(this._resizeMarkers[t]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:e,zIndexOffset:10});return this._bindMarker(i),this._markerGroup.addLayer(i),i},_bindMarker:function(t){t.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this)},_unbindMarker:function(t){t.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this)},_onMarkerDragStart:function(t){t.target.setOpacity(0),this._fireEditStartEvent()},_onMarkerDrag:function(t){var e=t.target,i=e.getLatLng();e===this._moveMarker?this._move(i):this._resize(i),this._fireEditingEvent()},_onMarkerDragEnd:function(t){t.target.setOpacity(1),this._fireEditEndEvent()},_move:function(){},_resize:function(){},_fireEditStartEvent:function(){this._shape.fire("editstart"),this._map.fire("editstart",{graphic:this._shape})},_fireEditingEvent:function(){this._shape.fire("edit"),this._map.fire("edit",{graphic:this._shape})},_fireEditEndEvent:function(){this._shape.edited=!0,this._shape.fire("editend"),this._map.fire("editend",{graphic:this._shape})}});e.exports.EditSimpleShape=n},{}],90:[function(t,e,i){"use strict";var n=t("../Geometry/Geometry").Geometry,s=t("../Geometry/Extent").Extent,o=t("../Layers/GraphicsLayer").GraphicsLayer,r=(t("../Layers/FeaturesLayer").FeaturesLayer,t("../Symbol/SimpleFillSymbol").SimpleFillSymbol),a=t("../Symbol/SimpleMarkerSymbol").SimpleMarkerSymbol,l=(t("../Util").Util,L.Handler.extend({includes:L.Mixin.Events,options:{target:"",lyrIds:[],isSource:!1,type:"rectangle",pointTolerance:20,selectedcolor:"#00FF00",repeatMode:!0,isAutoClearSelection:!0},initialize:function(t){var e=this;L.setOptions(this,t),this._map=this.options.target,"attr"!=this.options.type&&(this.options.symbol||("point"==this.options.type?this.options.symbol=new a({style:"style_solid",color:"#ff9d0f",outline:{color:"#86ff0b",width:0},size:0}):this.options.symbol=new r({style:"style_solid",color:"#ff9d0f",opacity:.2,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:1}})),this._graphicLayer=new o,this._drawTool=new egis.handler.Draw({target:this._map,symbol:this.options.symbol,type:this.options.type,repeatMode:this.options.repeatMode,graphicsLayer:this._graphicLayer}),this._drawTool.on("drawend",function(t){var i=e._map.getSelectionSet();e._isClearSelection=e.options.isAutoClearSelection,window.event.ctrlKey&&(e._isClearSelection=!e.options.isAutoClearSelection),e._isClearSelection&&i.clearSelection();var o=t.graphic.getGeometry();if(o.getType()==n.POINT){var r=e.options.pointTolerance/2,a=L.latLng(o.y,o.x),l=e._map.latLngToLayerPoint(a);l.x+=r,l.y+=r;var h=e._map.layerPointToLatLng(l),u=Math.abs(h.lng-a.lng),c=Math.abs(h.lat-a.lat);o=new s(o.x-u,o.y-c,o.x+u,o.y+c)}var p=e._map.queryRenderedFeatures(o,e.options);i.setColor(e.options.selectedcolor),i.addGraphics(p),i.refresh(),e._graphicLayer.clearGraphics(),e.fire("graphicsSelected",{graphics:p})}))},queryByAttrPSRID:function(t,e){this.options.target||(L.setOptions(this,e),this._map=this.options.target);var i=this._map.queryRenderedFeaturesbyAttr(t,this.options),n=this._map.getSelectionSet();n.clearSelection(),n.setColor(this.options.selectedcolor),n.addGraphics(i)},setSpatialQueryOptions:function(t){var e=this;L.setOptions(this,t),this._map=this.options.target,"attr"!=this.options.type&&(this.options.symbol||("point"==this.options.type?this.options.symbol=new a({style:"style_solid",color:"#ff9d0f",outline:{color:"#86ff0b",width:1},size:this.options.pointTolerance}):this.options.symbol=new r({style:"style_solid",color:"#ff9d0f",opacity:.2,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:1}})),this._graphicLayer=new o,this._drawTool=new egis.handler.Draw({target:this._map,symbol:this.options.symbol,type:this.options.type,repeatMode:this.options.repeatMode,graphicsLayer:this._graphicLayer}),this._drawTool.on("drawend",function(t){var i=e._map.getSelectionSet();i.clearSelection();var o=t.graphic.getGeometry();if(o.getType()==n.POINT){var r=e.options.pointTolerance/2,a=L.latLng(o.y,o.x),l=e._map.latLngToLayerPoint(a);l.x+=r,l.y+=r;var h=e._map.layerPointToLatLng(l),u=Math.abs(h.lng-a.lng),c=Math.abs(h.lat-a.lat);o=new s(o.x-u,o.y-c,o.x+u,o.y+c)}var p=e._map.queryRenderedFeatures(o,e.options);i.setColor(e.options.selectedcolor),i.addGraphics(p),e._graphicLayer.clearGraphics(),e.fire("graphicsSelected",{graphics:p})}))},setLyrIds:function(t){this.options.lyrIds=t},setIsSource:function(t){this.options.isSource=t},addHooks:function(){this._drawTool.enable()},removeHooks:function(){this._drawTool.disable()},_selectFun:function(t){return this._fireSelectEvent(),this._graphic},deleteSelect:function(){return!(!this._graphicLayer||!this._graphic)&&(this._graphicLayer.removeGraphic(this._graphic),this._fireGraphicDeleteEvent(this._graphic),this._graphic=null,!0)},_fireSelectEvent:function(){this.fire("selectgraphic",{graphic:this._graphic})},_fireGraphicDeleteEvent:function(t){this.fire("deletegraphic",{graphic:t})}}));e.exports.Select=l,e.exports.select=function(t){return new l(t)}},{"../Geometry/Extent":54,"../Geometry/Geometry":57,"../Layers/FeaturesLayer":100,"../Layers/GraphicsLayer":103,"../Symbol/SimpleFillSymbol":145,"../Symbol/SimpleMarkerSymbol":147,"../Util":154}],91:[function(t,e,i){"use strict";var n=t("../Geometry/Geometry").Geometry,s=t("../Geometry/Extent").Extent,o=t("../Layers/GraphicsLayer").GraphicsLayer,r=t("../Symbol/SimpleFillSymbol").SimpleFillSymbol,a=t("../Symbol/SimpleMarkerSymbol").SimpleMarkerSymbol,l=(t("../Util").Util,L.Handler.extend({includes:L.Mixin.Events,options:{target:"",lyrIds:[],isSource:!1,type:"rectangle",pointTolerance:20,selectedcolor:"#00FF00",repeatMode:!0,isAutoClearSelection:!0},initialize:function(t){var e=this;L.setOptions(this,t),this._map=this.options.target,"attr"!=this.options.type&&(this.options.symbol||("point"==this.options.type?this.options.symbol=new a({style:"style_solid",color:"#ff9d0f",outline:{color:"#86ff0b",width:0},size:0}):this.options.symbol=new r({style:"style_solid",color:"#ff9d0f",opacity:.2,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:1}})),this._graphicLayer=new o,this._drawTool=new egis.handler.Draw({target:this._map,symbol:this.options.symbol,type:this.options.type,repeatMode:this.options.repeatMode,graphicsLayer:this._graphicLayer}),this._drawTool.on("drawend",function(t){var i=e._map.getSelectionSet();e._isClearSelection=e.options.isAutoClearSelection,window.event.ctrlKey&&(e._isClearSelection=!e.options.isAutoClearSelection),e._isClearSelection&&i.clearSelection();var o=t.graphic.getGeometry();if(o.getType()==n.POINT){var r=e.options.pointTolerance/2,a=L.latLng(o.y,o.x),l=e._map.latLngToLayerPoint(a);l.x+=r,l.y+=r;var h=e._map.layerPointToLatLng(l),u=Math.abs(h.lng-a.lng),c=Math.abs(h.lat-a.lat);o=new s(o.x-u,o.y-c,o.x+u,o.y+c)}var p=e._map.queryRenderedFeatures(o,e.options);i.setColor(e.options.selectedcolor),i.addGraphics(p),e._graphicLayer.clearGraphics(),e.fire("graphicsSelected",{graphics:p})}))},queryByAttrPSRID:function(t,e){this.options.target||(L.setOptions(this,e),this._map=this.options.target);var i=this._map.queryRenderedFeaturesbyAttr(t,this.options),n=this._map.getSelectionSet();n.clearSelection(),n.setColor(this.options.selectedcolor),n.addGraphics(i)},setSpatialQueryOptions:function(t){var e=this;L.setOptions(this,t),this._map=this.options.target,"attr"!=this.options.type&&(this.options.symbol||("point"==this.options.type?this.options.symbol=new a({style:"style_solid",color:"#ff9d0f",outline:{color:"#86ff0b",width:1},size:this.options.pointTolerance}):this.options.symbol=new r({style:"style_solid",color:"#ff9d0f",opacity:.2,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:1}})),this._graphicLayer=new o,this._drawTool=new egis.handler.Draw({target:this._map,symbol:this.options.symbol,type:this.options.type,repeatMode:this.options.repeatMode,graphicsLayer:this._graphicLayer}),this._drawTool.on("drawend",function(t){var i=e._map.getSelectionSet();i.clearSelection();var o=t.graphic.getGeometry();if(o.getType()==n.POINT){var r=e.options.pointTolerance/2,a=L.latLng(o.y,o.x),l=e._map.latLngToLayerPoint(a);l.x+=r,l.y+=r;var h=e._map.layerPointToLatLng(l),u=Math.abs(h.lng-a.lng),c=Math.abs(h.lat-a.lat);o=new s(o.x-u,o.y-c,o.x+u,o.y+c)}var p=e._map.queryRenderedFeatures(o,e.options);i.setColor(e.options.selectedcolor),i.addGraphics(p),e._graphicLayer.clearGraphics(),e.fire("graphicsSelected",{graphics:p})}))},setLyrIds:function(t){this.options.lyrIds=t},setIsSource:function(t){this.options.isSource=t},addHooks:function(){this._drawTool.enable()},removeHooks:function(){this._drawTool.disable()},_selectFun:function(t){return this._fireSelectEvent(),this._graphic},deleteSelect:function(){return!(!this._graphicLayer||!this._graphic)&&(this._graphicLayer.removeGraphic(this._graphic),this._fireGraphicDeleteEvent(this._graphic),this._graphic=null,!0)},_fireSelectEvent:function(){this.fire("selectgraphic",{graphic:this._graphic})},_fireGraphicDeleteEvent:function(t){this.fire("deletegraphic",{graphic:t})}}));e.exports.SelectRenderedFeature=l,e.exports.selectRenderedFeature=function(t){return new l(t)}},{"../Geometry/Extent":54,"../Geometry/Geometry":57,"../Layers/GraphicsLayer":103,"../Symbol/SimpleFillSymbol":145,"../Symbol/SimpleMarkerSymbol":147,"../Util":154}],92:[function(t,e,i){"use strict";var n=t("./Layer"),s=t("./../Error/DeveloperError"),o=n.Layer.extend({options:{visible:!0,autoStart:!1,isLoop:!0,updateRate:30,maxZoom:void 0,minZoom:void 0,name:n.Layer.ANIMATELAYER+""+L.stamp(this)},initialize:function(t,e){if(this._graphics=[],this._animating=!1,t)for(var i=0;i<t.length;i++)this._graphics.push(t[i]);e.visible&&(this._visible=e.visible),L.setOptions(this,e)},setUpdateRate:function(t){return this.options.updateRate=t,this.redraw(),this},setGraphics:function(t){return this._graphics=t,this},reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._canvas.width!==e.x&&(this._canvas.width=e.x),this._canvas.height!==e.y&&(this._canvas.height=e.y)},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","egis-animate-layer egis-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var i=this._map.getSize();t.width=i.x,t.height=i.y;var n=this._map.options.zoomAnimation&&L.Browser.any3d;return L.DomUtil.addClass(t,"egis-zoom-"+(n?"animated":"hide")),this._ctx=this._canvas.getContext("2d"),this},clearTemp:function(){return this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this},getGraphics:function(){return this._graphics},updateGraphic:function(t){return this},addGraphic:function(t){return this},removeGrahpic:function(t){return this},clearGraphic:function(){return this},getCanvasContext:function(){if(!this._canvas)throw new s.DeveloperError("please add the layer to map, use addTo(map)");return this._canvas.getContext("2d")},addTo:function(t){return t.addLayer(this),this},getCanvas:function(){if(!this._canvas)throw"please add the layer to map, use addTo(map)";return this._canvas},onAdd:function(t){return this._map=t,this._canvas||this._initCanvas(),this.options.pane?this.getPane().appendChild(this._canvas):t._panes.overlayPane.appendChild(this._canvas),this},moveToTop:function(){var t=this._getMaxOrMinZindex("max");return t&&(this._canvas.style["z-index"]=t+1),this},moveToBottom:function(){var t=this._getMaxOrMinZindex("min");return t&&(this._canvas.style["z-index"]=t-1),this},_getMaxOrMinZindex:function(t){var e=this._canvas;if(e){for(var i,n=e.parentNode.querySelectorAll("canvas"),s=0,o=n.length;s<o;s++){var r,a=window.getComputedStyle?window.getComputedStyle(n[s],null):n[s].currentStyle;a&&(r=parseInt(a["z-index"]))&&(i=i?Math[t](i,r):r)}return i}},onRemove:function(t){return this._frame&&clearTimeout(this._frame),this.options.pane?this.getPane().removeChild(this._canvas):t.getPanes().overlayPane.removeChild(this._canvas),this},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+e+")"},setVisible:function(t){this.options.visible=t},getVisible:function(t){return this.options.visible},getName:function(){return this.options.name},setName:function(t){return this.options.name=t,this},setStyle:function(t){return this},startAnimate:function(){return this._animating||(this._animating=!0),this},pauseAnimate:function(){
return this._animating&&(this._animating=!1),this},stopAnimate:function(){return this._animating&&(this._animating=!1),this},requestAnimateFrame:function(){return this},setOptions:function(t){return L.setOptions(this,t),this.redraw()},redraw:function(){return this},getType:function(){return n.Layer.ANIMATELAYER}});e.exports.AnimateLayer=o,e.exports.animateLayer=function(t,e){return new o(t,e)}},{"./../Error/DeveloperError":33,"./Layer":107}],93:[function(t,e,i){"use strict";var n=(t("leaflet.markercluster"),L.MarkerClusterGroup.extend({options:{showCoverageOnHover:!1,spiderfyOnMaxZoom:!1,zoomToBoundsOnClick:!0,iconCreateFunction:null,minClusterCount:2},initialize:function(t){L.MarkerClusterGroup.prototype.initialize.call(this,t)},addMarker:function(t){return this.addLayer(t)},removeMarker:function(t){return this.removeLayer(t)},addMarkers:function(t){return this.addLayers(t)},removeMarkers:function(t){return this.removeLayers(t)},clearMarkers:function(){return this.clearLayers()},_tmpMap:null,setVisible:function(t){var e=this._tmpMap||this._map;t?e.hasLayer(this)||e.addLayer(this):(this._tmpMap=this._map,this._map.removeLayer(this))},hasMarker:function(t){return this.hasLayer(t)},zoomToShowMarker:function(t,e){return this.zoomToShowLayer(t,e)}}));e.exports.ClusterLayer=n,e.exports.clusterLayer=function(t,e){return new n(t,e)}},{"leaflet.markercluster":301}],94:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/json/stringify"),o=n(s),r=t("babel-runtime/core-js/promise"),a=n(r),l=t("../Support"),h=t("../MicroService/MSManager").MSManager,u=L.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,L.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===L.CRS.EPSG3857||this._map.options.crs===L.CRS.EPSG4326?L.ImageOverlay.prototype._reset.call(this):this._map.options.crs&&this._map.options.crs.code==-1?L.ImageOverlay.prototype._reset.call(this):L.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),c=t("./Layer"),p=t("../Util"),d=t("../Geometry/Extent").Extent,y=c.Layer.extend({options:{updateInterval:150,opacity:1,visible:!0,position:"front",crossOrigin:l.cors,attribute:null,interactive:!1,alt:"",name:c.Layer.DYNAMICLAYER+L.stamp(this),showRenderTime:!1,params:{},maxZoom:void 0,minZoom:void 0,iscustom:!1,customconfig:{method:"POST",isrequestbody:!1,head:[]}},initialize:function(t,e){if(!t)throw"url must be given";this._url=p.cleanUrl(t),e.params&&(e.params=L.extend({},this.options.params,e.params)),e.customconfig&&(e.customconfig=L.extend({},this.options.customconfig,e.customconfig)),L.Util.setOptions(this,e)},getName:function(){return this.options.name},getShowRenderTime:function(){return this.options.showRenderTime},setShowRenderTime:function(t){this.options.showRenderTime=t},_handleRenderImgTime:function(){console&&console.log(this.getName()?this.getName():"","load Img total use ",(new Date).getTime()-localStorage.getItem("dynamicLayerLoadImgBegin"),"ms")},setName:function(t){return this.options.name=t,this},onAdd:function(t){this._update=L.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?(this._currentImage._type="eGISimage",t.addLayer(this._currentImage)):this._currentImage&&(this._map._removeLayer2(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this))},onRemove:function(t){this._currentImage&&this._map._removeLayer2(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},setVisible:function(t){this.options.visible=t,t?(this.setOpacity(1),this._update()):this.setOpacity(0)},getVisible:function(){return this.options.visible},refresh:function(){return 0!=this.options.opacity&&(this._update(),!0)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=L.popup(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getAttribute:function(){return this.options.attribute},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},_renderImage:function(t,e){var i=this;if(this._map){this.options.showRenderTime&&localStorage&&localStorage.setItem("dynamicLayerLoadImgBegin",(new Date).getTime());var n=new u(t,e,{opacity:0,crossOrigin:this.options.crossOrigin,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive});n.once("load",function(t){if(i.options.showRenderTime&&localStorage&&i._handleRenderImgTime(),this._map){var n=t.target,s=this._currentImage;n._bounds.equals(e)&&n._bounds.equals(this._map.getBounds())?(this._currentImage=n,"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map._removeLayer2(this._currentImage),s&&this._map&&this._map._removeLayer2(s),s&&s._map&&s._map._removeLayer2(s)):this._map._removeLayer2(n)}this.fire("load",{bounds:e})},this),n.on("error",function(){this.fire("error",{bounds:e})}),n.addTo(this._map),this.fire("loading",{bounds:e})}},_update:function(){if(this._map){var t=this._map.getZoom();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))return!isNaN(this.options.maxZoom)&&t>this.options.maxZoom||!isNaN(this.options.minZoom)&&t<this.options.minZoom?void(this._currentImage&&this._map._removeLayer2(this._currentImage)):void(this.options.visible&&this.fetchImage())}},_renderPopup:function(t,e,i,n){if(t=L.latLng(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var s=this._popupFunction(e,i,n);s&&this._popup.setLatLng(t).setContent(s).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},getType:function(){return c.Layer.DYNAMICLAYER},_currentImgUrl:null,_getImgDataByPost:function(t,e,i,n){var s=this;return new a.default(function(r,a){var l=new XMLHttpRequest;if(l.withCredentials=egis.MicroService.serviceInfo.xhrWithCredentials,l.responseType="blob",l.open(n,t,!0),h.active){l.setRequestHeader("Content-Type","application/json;charset=utf-8");var u={};e=decodeURIComponent(decodeURI(e));e.split("&").forEach(function(t){var e=t.split("="),i="",n="";1==e.length||(2==e.length?(i=e[0],n=e[1]):(i=e.shift(),n=e.join("="))),u[i]=n}),e=(0,o.default)(u);for(var c in i)l.setRequestHeader(c,i[c])}else l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");l.onreadystatechange=function(t){if(4==l.readyState)if(l.status>=200&&l.status<300||304==l.status){var e=URL.createObjectURL(l.response);s._currentImgUrl=e,r(e)}else a()},l.ontimeout=function(t){},l.onerror=function(t){},l.upload.onprogress=function(t){},l.send(e)})},fetchImage:function(){var t=this,e=this._map.getBounds(),i=this._map.getSize(),n=this._map.options.crs.project(e.getNorthEast()),s=this._map.options.crs.project(e.getSouthWest()),o=this._map.latLngToLayerPoint(e._northEast),r=this._map.latLngToLayerPoint(e._southWest);if((o.y>0||r.y<i.y)&&(i.y=r.y-o.y),1==h.active&&h.config.mapService.rasterMap.active){var a={};a.headers=h.getRequestHeaders(),a.method=h.config.mapService.rasterMap.method||"post";var l="",u="";"POST"==a.method.toUpperCase()?(l=this.getUrl(),u=this.joinUrlVariables(this._prepareQuery(this.options.params,new d(s.x,s.y,n.x,n.y),i.x,i.y)).substr(1),u+="&_ts="+(new Date).getTime()):(l=this.getImageUrl(new d(s.x,s.y,n.x,n.y),i.x,i.y,this._map.getScale()),l+="&_ts="+(new Date).getTime()),this._getImgDataByPost(l,u,a.headers,a.method).then(function(i){t._renderImage(i,e)},function(t){console.warn("load raster image data failed")}).catch(function(t){})}else if("POST"==String(this.options.method).toUpperCase()){var c=this.getUrl(),p=this.joinUrlVariables(this._prepareQuery(this.options.params,new d(s.x,s.y,n.x,n.y),i.x,i.y)).substr(1);p+="&_ts="+(new Date).getTime(),this._getImgDataByPost(c,p,{},"POST").then(function(i){t._renderImage(i,e)},function(t){console.warn("load raster image data failed")}).catch(function(t){})}else{var y=this.getImageUrl(new d(s.x,s.y,n.x,n.y),i.x,i.y,this._map.getScale());this._currentImgUrl=y,this._renderImage(y,e)}},getImageUrl:function(t,e,i,n){return this.getUrl()+this.joinUrlVariables(this._prepareQuery(this.options.params,t,e,i))},getUrl:function(){return this._url},_prepareQuery:function(t,e,i,n){return t.bbox=[e.getXmin(),e.getYmin(),e.getXmax(),e.getYmax()].join(","),t.mapScale=this._map.getScale(),t.width=i,t.height=n,t},joinUrlVariables:function(t){return L.Util.getParamString(t)},exportCurrentImg:function(){return this._currentImgUrl}});e.exports.DynamicLayer=y,e.exports.dynamicLayer=function(t,e){return new y(t,e)}},{"../Geometry/Extent":54,"../MicroService/MSManager":118,"../Support":134,"../Util":154,"./Layer":107,"babel-runtime/core-js/json/stringify":164,"babel-runtime/core-js/promise":172}],95:[function(t,e,i){"use strict";var n=L.Layer.extend({_echartsContainer:null,_map:null,_ec:null,_option:null,_geoCoord:[],_mapOffset:[0,0],_delta:0,_startTime:null,_lastMousePos:null,initialize:function(t){this._echarts=t},onAdd:function(t){this._map=t,this._initContainer()},_initContainer:function(){var t=this._map.getSize(),e=this._echartsContainer=L.DomUtil.create("div","egis-layer");e.style.height=t.y+"px",e.style.width=t.x+"px",e.onselectstart=L.Util.falseFn,e.onmousemove=L.Util.falseFn,this.getPane().appendChild(e)},getEchartsContainer:function(){return this._echartsContainer},geoCoord2Pixel:function(t){var e=new L.latLng(t[1],t[0]),i=this._map.latLngToContainerPoint(e);return[i.x,i.y]},pixel2GeoCoord:function(t){var e=this._map.containerPointToLatLng(L.point(t[0],t[1]));return[e.lng,e.lat]},initECharts:function(){return this._ec=this._echarts.init.call(this,this.getEchartsContainer()),this._addMarkWrap(),this._ec.getZrender().on("mousewheel",L.bind(function(t){this._lastMousePos=this._map.mouseEventToContainerPoint(t.event);var e=L.DomEvent.getWheelDelta(t.event),i=this._map,n=i.getZoom();if(e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=i._limitZoom(n+e)-n,this._delta=0,this._startTime=null,!e)return this._ec;this._ec.clear(),"center"===i.options.scrollWheelZoom?i.setZoom(n+e):i.setZoomAround(this._lastMousePos,n+e)},this)),this._ec},_addMarkWrap:function(){function t(t,e,i){var n;if("markPoint"==i){var n=e.data;if(n&&n.length)for(var s=0,o=n.length;s<o;s++)n[s].name&&this._geoCoord.hasOwnProperty(n[s].name)||(n[s].name=s+"markp",this._geoCoord[n[s].name]=n[s].geoCoord),this._AddPos(n[s])}else if((n=e.data)&&n.length)for(var s=0,o=n.length;s<o;s++)n[s][0].name&&this._geoCoord.hasOwnProperty(n[s][0].name)||(n[s][0].name=s+"startp",this._geoCoord[n[s][0].name]=n[s][0].geoCoord),n[s][1].name&&this._geoCoord.hasOwnProperty(n[s][1].name)||(n[s][1].name=s+"endp",this._geoCoord[n[s][1].name]=n[s][1].geoCoord),this._AddPos(n[s][0]),this._AddPos(n[s][1]);this._ec._addMarkOri(t,e,i)}this._ec._addMarkOri=this._ec._addMark,this._ec._addMark=t},getECharts:function(){return this._ec},setOption:function(t,e){this._option=t;for(var i,n=t.series||{},s=0;i=n[s++];){var o=i.geoCoord;if(o)for(var r in o)this._geoCoord[r]=o[r]}for(var i,s=0;i=n[s++];){var a=i.markPoint||{},l=i.markLine||{},h=a.data;if(h&&h.length)for(var r=0,u=h.length;r<u;r++)h[r].name&&this._geoCoord.hasOwnProperty(h[r].name)||(h[r].name=r+"markp",this._geoCoord[h[r].name]=h[r].geoCoord),this._AddPos(h[r]);if((h=l.data)&&h.length)for(var r=0,u=h.length;r<u;r++)h[r][0].name&&this._geoCoord.hasOwnProperty(h[r][0].name)||(h[r][0].name=r+"startp",this._geoCoord[h[r][0].name]=h[r][0].geoCoord),h[r][1].name&&this._geoCoord.hasOwnProperty(h[r][1].name)||(h[r][1].name=r+"endp",this._geoCoord[h[r][1].name]=h[r][1].geoCoord),this._AddPos(h[r][0]),this._AddPos(h[r][1])}this._ec.setOption(t,e)},_AddPos:function(t){var e=this._geoCoord[t.name],i=this.geoCoord2Pixel(e);t.x=i[0],t.y=i[1]},getEvents:function(){return{viewreset:this._resetView,resize:this._resetView,movestart:this._moveHandler("moving"),moveend:this._moveHandler("moveend")}},_zoomChangeHandler:function(){this.setOption(this._option)},_moveHandler:function(t){return function(){var e=this._map._getMapPanePos();this._mapOffset=[-parseInt(e.x)||0,-parseInt(e.y)||0],this._echartsContainer.style.left=this._mapOffset[0]+"px",this._echartsContainer.style.top=this._mapOffset[1]+"px","moving"==t&&this._ec.clear(),"moveend"==t&&this.setOption(this._option)}},_resetView:function(t){var e=t.newSize||map.getSize();this._echartsContainer.style.height=e.y+"px",this._echartsContainer.style.width=e.x+"px";var i=this._map._getMapPanePos();this._mapOffset=[-parseInt(i.x)||0,-parseInt(i.y)||0],this._echartsContainer.style.left=this._mapOffset[0]+"px",this._echartsContainer.style.top=this._mapOffset[1]+"px",this._ec.dispose(),this.initECharts()},_dragZrenderHandler:function(t){return function(){var e=t?"disable":"enable";t?self._ec.clear():self.setOption(self._option),self._map.dragging[e]()}}});e.exports.EChartThemeLayer=n,e.exports.eChartThemeLayer=function(t){return new n(t)}},{}],96:[function(t,e,i){"use strict";var n=t("../Layers/DynamicLayer").DynamicLayer,s=t("../Task/MetaService").MetaService,o=t("../Geometry/Extent").Extent,r=t("../Task/GISService"),a=n.extend({options:{params:{mapId:110,format:"png",layers:"-1",layerDefs:"",displaySchemaId:""}},initialize:function(t){t=t||{},this._service=new s,t.params&&(t.params=L.extend({},this.options.params,t.params)),L.Util.setOptions(this,t)},getImageUrl:function(t,e,i){return this._service.exportURL(L.extend({},{bbox:[t.getXmin(),t.getYmin(),t.getXmax(),t.getYmax()].join(","),size:[e,i].join(","),mapScale:this._map.getScale()},this.options.params))},fetchImage:function(){var t=this,e=this._map.getBounds(),i=this._map.getSize(),n=this._map.options.crs.project(e.getNorthEast()),s=this._map.options.crs.project(e.getSouthWest()),a=this._map.latLngToLayerPoint(e._northEast),l=this._map.latLngToLayerPoint(e._southWest);(a.y>0||l.y<i.y)&&(i.y=l.y-a.y);var h=this.getImageUrl(new o(s.x,s.y,n.x,n.y),i.x,i.y,this._map.getScale());r.gisService()._ajax({url:h,method:"get"}).then(function(i){h="data:image/gif;base64,"+i.resultValue,t._renderImage(h,e)}).catch(function(t){throw new Error(t)})}});e.exports.EGISDynamicLayer=a,e.exports.egisDynamicLayer=function(t,e){return new a(t,e)}},{"../Geometry/Extent":54,"../Layers/DynamicLayer":94,"../Task/GISService":151,"../Task/MetaService":152}],97:[function(t,e,i){"use strict";var n=(t("./../CRS/CRSCustom"),t("./Layer")),s=t("./TileLayer").TileLayer,o=t("../Task/MetaService").MetaService,r=t("../Task/TokenTask").getInstance(),a=s.extend({options:{name:n.Layer.EGISTILELAYER},initialize:function(t,e){this._service=new o,L.Util.setOptions(this,e),this._fetchTileInfo(t,function(t){if(!t)throw"failed to load tile information";L.Util.setOptions(this,{minZoom:t.maxZoom,maxZoom:t.minZoom,resolution:t.resolution,tileSize:t.tileSize,epsgCode:t.epsgCode,origin:t.origin}),s.prototype.initialize.call(this,t.url,this.options),this._optionsLoaded=!0,this.fire("lodmap")},this)},createTile:function(t,e){var i=document.createElement("img");return this._visible?(E.DomEvent.on(i,"load",E.bind(this._tileOnLoad,this,e,i)),E.DomEvent.on(i,"error",E.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._optionsLoaded&&(i.src=this.getTileUrl(t)+"&Authorization="+r.getAccessToken()),i):i},onAdd:function(t){this._map||(this._map=t),this._optionsLoaded?(this._map.options.crs=this._crs,this._map._pixelOrigin=this._map._getNewPixelOrigin(this._map.getCenter())):this.once("lodmap",resetCrs),s.prototype.onAdd.call(this,t)},_fetchTileInfo:function(t,e,i){this._service.getTile(t).then(function(t){e.call(i,t)}).catch(function(){e.call(i,!1)})},getType:function(){return this.options.name}});L.Map.addInitHook(function(){this._zoomAnimated=L.DomUtil.TRANSITION&&L.Browser.any3d&&!L.Browser.mobileOpera&&this.options.zoomAnimation;for(var t=0;this.options.baseLayers&&t<this.options.baseLayers.length;t++)this.addLayer(new a(this.options.baseLayers[t]))}),e.exports.EGISTileLayer=a,e.exports.egisTileLayer=function(t,e){return new a(t,e)}},{"../Task/MetaService":152,"../Task/TokenTask":153,"./../CRS/CRSCustom":2,"./Layer":107,"./TileLayer":114}],98:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/map"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./FeaturesLayer").FeaturesLayer,r=o.extend({options:{filter:void 0},initialize:function(t,e){e.filter&&(this._filter=e.filter),o.prototype.initialize.call(this,t,e)},_filterFun:function(t){var e=new s.default,i=new s.default;if(this._filter){for(var n=0;n<this._filter.length;n++)if(t.get(this._filter[n].layerid)){for(var o=[],r=0;r<t.get(this._filter[n].layerid).length;r++){for(var a=t.get(this._filter[n].layerid)[r].psrid,l=t.get(this._filter[n].layerid)[r].sbid,h=!1,u=0;u<this._filter[n].children.length;u++)a==this._filter[n].children[u]&&(h=!0);if(t.get(131404))for(var u=0;u<t.get(131404).length;u++)if(t.get(131404)[u].sbid==l)if(i.get(this._filter[n].layerid))i.get(this._filter[n].layerid).set(t.get(131404)[u].sbid,t.get(131404)[u].sbid);else{var c=new s.default;c.set(t.get(131404)[u].sbid,t.get(131404)[u].sbid),i.set(this._filter[n].layerid,c)}h&&o.push(t.get(this._filter[n].layerid)[r])}e.get(this._filter[n].layerid)?e.get(this._filter[n].layerid).push(o):e.set(this._filter[n].layerid,o)}if(t.get(131404))for(var p=0;p<t.get(131404).length;p++)i.get(t.get(131404)[p].layerid)&&i.get(t.get(131404)[p].layerid).get(t.get(131404)[p].sbid)&&(e.get(131404)?e.get(131404).push(t.get(131404)[p]):e.set(131404,[t.get(131404)[p]]))}return e}});e.exports.FeatureFilterLayer=r,e.exports.featureFilterLayer=function(t,e){return new r(t,e)}},{"./FeaturesLayer":100,"babel-runtime/core-js/map":165}],99:[function(t,e,i){"use strict";var n=t("../Render/GISCanvas"),s=(t("../Overlay/Popup").Popup,L.LayerGroup.extend({options:{source:void 0,renderer:null,fields:[],objectIdField:"",geometryType:"",fullExtent:null,maxZoom:void 0,minZoom:void 0,popupEnable:!1,popupTemplate:"",visible:!0,legendEnable:!1,title:""},initialize:function(t){var e=this;L.Util.setOptions(this,t),L.LayerGroup.prototype.initialize.call(this),this.options.renderer&&(L.LayerGroup.prototype.initialize.call(this),this.options.source&&this.options.renderer&&(this._canvasRenderObj=new n.GISCanvas,this._addGraphics(this.options.source.filter(function(t){return t.getGeometry().getType()===e.options.geometryType}))))},_addGraphics:function(t){if(L.Util.isArray(t)){var e,i,n;for(e=0,i=t.length;e<i;e++)n=t[e],this.hasLayer(n)||((this.options.maxScale||this.options.minScale)&&(n.options.maxZoom=this.options.maxZoom,n.options.minZoom=this.options.minZoom),this._setSymbol(n),this._canvasRenderObj&&(n.options.renderer=this._canvasRenderObj),n.addEventParent(this),this.options.popupEnable&&this.options.popupTemplate&&n.setPopupTemplate(this.options.popupTemplate),L.LayerGroup.prototype.addLayer.call(this,n),n.setVisible(this.options.visible));this.fire("graphicsadd",{Graphic:n})}return this},_setSymbol:function(t){t.setSymbol(this.options.renderer._getRampSymbol(t.getAttribute()))},getRenderer:function(t){return this.options.renderer},getGeometryType:function(){return this.options.geometryType},getVisible:function(){return this.options.visible},setVisible:function(t){return this.options.visible=t,this._canvasRenderObj._container.style.display=t?"block":"none",this.fire("visiblechanged",{visible:t}),this}}));e.exports.FeatureLayer=s,e.exports.featureLayer=function(t){return new s(t)}},{"../Overlay/Popup":127,"../Render/GISCanvas":128}],100:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/get-iterator"),o=n(s),r=t("babel-runtime/core-js/map"),a=n(r),l=L.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,L.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===L.CRS.EPSG3857||this._map.options.crs===L.CRS.EPSG4326?L.ImageOverlay.prototype._reset.call(this):this._map.options.crs&&this._map.options.crs.code==-1?L.ImageOverlay.prototype._reset.call(this):L.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))},setZIndex:function(t){return this.options.zIndex=t,this._image&&(this._image.style.zIndex=t),this}}),h=t("./Layer"),u=t("../Util"),c=(t("../Geometry/MultiPoint").MultiPoint,t("../Task/MetaService").MetaService),p=t("./../Render/GISCanvas"),d=t("../Features/Graphic").Graphic,y=t("../Geometry/Polyline").Polyline,f=t("../Geometry/Extent").Extent,_=t("../Symbol/SimpleFillSymbol").SimpleFillSymbol,m=t("../Symbol/TextSymbol").TextSymbol,g=t("../Symbol/EleMarkerSymbol").EleMarkerSymbol,v=t("../Symbol/EleLineSymbol").EleLineSymbol,b=t("../Symbol/EleFillSymbol").EleFillSymbol,x=t("../Task/GISService"),w=t("../workers/VectorWorker"),S=t("../workers/QuadTree").QuadTreeNode,P=t("../Editor/FeatureCache").FeatureCache,T=L.LayerGroup.extend({options:{opacity:1,visible:!0,attribute:null,name:h.Layer.FEATURESLAYER+L.stamp(this),params:{},interactive:!1,updateInterval:64,filter:void 0,lyrId:"",refreshindex:!1},dataSource:void 0,initialize:function(t){t=t||{},L.Util.setOptions(this,t),this.options.dataSource&&this.setDataSource(this.options.dataSource),this._layers={},this._canvasRenderObj=new p.GISCanvas,this.options.interactive?this._interactive=!0:this._interactive=!1,this.refreshindex=this.options.refreshindex,this._service=new c,this.byteNodeEnm={GEO_TYPE_LAYERS:13,GEO_TYPE_LAYER:1314,GEO_TYPE_POINT:131401,GEO_TYPE_LINE:131402,GEO_TYPE_POLYGON:131403,GEO_TYPE_LABEL:131404,GEO_TYPE_ANNO:131405,GEO_TYPE_OTHER:131406,GEO_TYPE_IMAGE:131407,LABEL_TYPE_POINT:131441,LABEL_TYPE_LINE:131442},this.options.params=this.options.params||"getvectormap",this.options.params.request&&"getvectormap"==this.options.params.request.toLowerCase()&&(this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,this.DECODE_TABLE=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,62,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]),L.LayerGroup.prototype.initialize.call(this)},add:function(t){this._canvasRenderObj&&(t.options&&(t.options.renderer=this._canvasRenderObj),t._renderer=this._canvasRenderObj),t._graphicLayer=this,t.addEventParent(this);var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},getLayerId:function(t){return L.stamp(t)},getLyrId:function(){return this.options.lyrId},setLyrId:function(t){return this.options.lyrId=t,this},addGraphic:function(t){this.add(t)},addLocalGraphic:function(t){this.add(t),this._setspatialindex(t)},clearGraphics:function(){for(var t in this._layers)this._layers[t].off("click"),this.removeGraphic(this._layers[t]);return this},refresh:function(){},removeAll:function(){return this.clearGraphics()},removeGraphic:function(t){t.removeEventParent(this);var e=t in this._layers?t:this.getLayerId(t);this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),this._layers[e].removedrawnlayers(),this._layers[e].destroy(),delete this._layers[e],"function"==typeof t._symbol._remove&&t.symbol._remove(),e=null},addGraphics:function(t){if(L.Util.isArray(t))for(var e,i=0,n=t.length;i<n;i++)e=t[i],this.addGraphic(e);return this},getName:function(){return this.options.name},setName:function(t){return this.options.name=t,this},onAdd:function(t){this._canvasRenderObj||(this._canvasRenderObj=new p.GISCanvas),this._update=L.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?(this._currentImage._type="eGISimage",t.addLayer(this._currentImage)):this._currentImage&&(this._map._removeLayer2(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this))},onRemove:function(t){this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),t.off("moveend",this._update,this),t._layersData&&t._layersData.clear(),this.removeAll(),this._currentImage&&(t._removeLayer2(this._currentImage),this._currentImage=null),this._canvasRenderObj&&this._canvasRenderObj._container&&(this._canvasRenderObj.onRemove(),this._canvasRenderObj=null)},setFormat:function(t){this.options.params.request=t,this._map._layersData&&this._map._layersData.clear(),this.removeAll(),this._currentImage&&(this._map._removeLayer2(this._currentImage),this._currentImage=null),this._update()},setDataSource:function(t){this.dataSource=t,t.setLayer(this),this._map&&!this.dataSource._query&&this.dataSource.setMap(this._map)},setIsCache:function(t){this._iscache=t},_twoPointDegInEgis:function(t,e){var i=e[0]-t[0],n=e[1]-t[1],s=void 0;return 0==i&&(0==n&&(s=0),n>0&&(s=Math.PI/2),n<0&&(s=-Math.PI/2)),i>0&&(s=0==n?0:Math.atan(n/i)),i<0&&(0==n&&(s=Math.PI),n>0&&(s=Math.PI+Math.atan(n/i)),n<0&&(s=-Math.PI+Math.atan(n/i))),s},_filterFun:function(t){return t},updateCacheData:function(t){this._getData(t)},updateUserCacheData:function(){for(var t=this.dataSource.userCache.get(this.dataSource.USER_CACHE_KEY),e=0;e<t.length;e++){var i=this.getGraphic(t[e]);this.add(i),this._setspatialindex(i)}},updateLocalCacheData:function(){var t=this.dataSource.localFeature;switch(this.dataSource.localFeatureState){case 0:var e=this.getGraphic(t);this.add(e),this._setspatialindex(e);break;case 1:break;case 0:}},createLabel:function(t,e,i,n){var s=t.attribute,o=s.labelcolor,r=0!=s.zoom,l=r?96/25.4*parseFloat(s.labelsize)*1e3/this._map.getScale():96/25.4*parseFloat(s.labelsize);l=l<1?1:l;var h=Math.round(l)+"px "+s.font,u=!!s.fillcolor&&s.fillcolor!=-1,c=u?s.fillcolor:null,p=!!s.outlinewidth&&s.outlinewidth!=-1,y=(s.outlinewidth,p?s.outlinecolor:null),f={text:s.texts,fill:!1,font:h,textBaseline:"bottom",isCache:!1,scale:this._map.getScale(),isChangeByScale:r,angle:s.angles,color:o};u&&(f.fill=!0,f.backgroundColor=c),p&&(f.outline={color:y,linewidth:.5});var _=new m(f),g=t.geometry;if("multiPoint"==t.geometry.getType()&&t.geometry._points.length<1)return null;var v=s.issvr?"svr":"tmp",b=new d({geometry:g,symbol:_,interactive:this._interactive,draggable:!1});b.setAttribute(s),n.add(b);var x=n._map.layerPointToLatLng(b._pxBounds.min),L=n._map.layerPointToLatLng(b._pxBounds.max);t={},t.MBR={xmin:x.lng,ymin:x.lat,xmax:L.lng,ymax:L.lat},t.geotype=0;var w=s.layerid+"|"+s.sbid+"_label",S=s.issvr?w+v:s.id;if(t.psrid=S,e.push(t),this._map._layersData.has(i))this._map._layersData.get(i).has(S)||this._map._layersData.get(i).set(S,b);else{var P=new a.default;P.set(S,b),this._map._layersData.set(i,P)}},_setspatialindex:function(t){var e=t.getSymbol().getType(),i={};switch(e){case"TextSymbol":var n=t.getAttribute(),s=this._map.layerPointToLatLng(t._pxBounds.min),o=this._map.layerPointToLatLng(t._pxBounds.max),r={};r.MBR={xmin:s.lng,ymin:o.lat,xmax:o.lng,ymax:s.lat},r.geotype=0;var l=n.layerid+"|"+n.sbid+"_label",h=n.issvr?l+"svr":n.id;if(r.psrid=h,i=r,this._map._layersData.has(n.layerid))this._map._layersData.get(n.layerid).has(h)||this._map._layersData.get(n.layerid).set(h,t);else{var u=new a.default;u.set(h,t),this._map._layersData.set(n.layerid,u)}break;case"EleMarkerSymbol":var c=t.getAttribute();this._map.layerRelationship.has(c.subtype)||this._map.layerRelationship.set(c.subtype,c.layerid);var p={},d=c.issvr?c.psrid+"svr":c.id,y=t._pxcellBounds;if(y)try{y.min=this._map.layerPointToLatLng(y.min),y.max=this._map.layerPointToLatLng(y.max);var f=Math.min(y.min.lng,y.max.lng),_=Math.max(y.min.lng,y.max.lng),m=Math.min(y.min.lat,y.max.lat),g=Math.max(y.min.lat,y.max.lat);p.MBR={xmin:f,ymin:m,xmax:_,ymax:g},p.geotype=0,p.psrid=c.layerid+"|"+d}catch(t){console.warn(t)}else{y=t._pxBounds;var v={};v.min=this._map.layerPointToLatLng(y.min),v.max=this._map.layerPointToLatLng(y.max),p.MBR={xmin:v.min.lng,ymin:v.min.lat,xmax:v.max.lng,ymax:v.max.lat},p.psrid=c.layerid+"|"+d}if(i=p,this._map._layersData.has(c.layerid))this._map._layersData.get(c.layerid).has(c.layerid+"|"+d)||this._map._layersData.get(c.layerid).set(c.layerid+"|"+d,t);else{var u=new a.default;u.set(c.layerid+"|"+d,t),this._map._layersData.set(c.layerid,u)}break;case"EleLineSymbol":var c=t.getAttribute(),b={},x=c.issvr?c.psrid+"svr":c.id;if(b.MBR=t.getGeometry().getExtent(),b.geotype=1,b.psrid=c.layerid+"|"+x,i=b,this._map.layerRelationship.has(c.subtype)||this._map.layerRelationship.set(c.subtype,c.layerid),this._map._layersData.has(c.layerid))this._map._layersData.get(c.layerid).has(c.layerid+"|"+x)||this._map._layersData.get(c.layerid).set(c.layerid+"|"+x,t);else{var u=new a.default;u.set(c.layerid+"|"+x,t),this._map._layersData.set(c.layerid,u)}break;case"EleFillSymbol":var c=t.getAttribute(),L={},w=c.issvr?"svr":"tmp",P=c.issvr?c.psrid+w:c.id;if(L.MBR=t.getGeometry().getExtent(),L.geotype=2,L.psrid=c.layerid+"|"+P,i=L,this._map.layerRelationship.has(c.subtype)||this._map.layerRelationship.set(c.subtype,c.layerid),this._map._layersData.has(c.layerid))this._map._layersData.get(c.layerid).has(P)||this._map._layersData.get(c.layerid).set(c.layerid+"|"+P,t);else{var u=new a.default;u.set(c.layerid+"|"+P,t),this._map._layersData.set(c.layerid,u)}}if(this._map.quadtree)this._map.quadtree.insertSingleNode(i);else{var y=this._map.getExtent(),T=[i];delete this._map.quadtree,this._map.quadtree=new S({rootExtent:y,maxlevel:5,geos:T,target:this._map})}},refreshSpatialindex:function(t){var e=t.getSymbol().getType(),i={};switch(e){case"TextSymbol":var n=t.getAttribute(),s=this._map.layerPointToLatLng(t._pxBounds.min),o=this._map.layerPointToLatLng(t._pxBounds.max),r={};r.MBR={xmin:s.lng,ymin:o.lat,xmax:o.lng,ymax:s.lat},r.geotype=0;var a=n.layerid+"|"+n.sbid+"_label",l=n.issvr?a+"svr":n.id;r.psrid=l,i=r;break;case"EleMarkerSymbol":var h=t.getAttribute();this._map.layerRelationship.has(h.subtype)||this._map.layerRelationship.set(h.subtype,h.layerid);var u={},c=h.issvr?h.psrid+"svr":h.id,p=t._pxcellBounds;if(p)try{p.min=this._map.layerPointToLatLng(p.min),p.max=this._map.layerPointToLatLng(p.max);var d=Math.min(p.min.lng,p.max.lng),y=Math.max(p.min.lng,p.max.lng),f=Math.min(p.min.lat,p.max.lat),_=Math.max(p.min.lat,p.max.lat);u.MBR={xmin:d,ymin:f,xmax:y,ymax:_},u.geotype=0,u.psrid=h.layerid+"|"+c}catch(t){}else{p=t._pxBounds;var m={};m.min=this._map.layerPointToLatLng(p.min),m.max=this._map.layerPointToLatLng(p.max),u.MBR={xmin:m.min.lng,ymin:m.min.lat,xmax:m.max.lng,ymax:m.max.lat},u.psrid=h.layerid+"|"+c}i=u;break;case"EleLineSymbol":var h=t.getAttribute(),g={},v=h.issvr?h.psrid+"svr":h.id;g.MBR=t.getGeometry().getExtent(),g.geotype=1,g.psrid=h.layerid+"|"+v,i=g;break;case"EleFillSymbol":
var h=t.getAttribute(),b={},x=h.issvr?"svr":"tmp",L=h.issvr?h.psrid+x:h.id;b.MBR=t.getGeometry().getExtent(),b.geotype=2,b.psrid=h.layerid+"|"+L,i=b}this._map.quadtree&&this._map.quadtree.refreshSingleNode(i)},getGraphic:function(t){var e,i=t.attribute;switch(i.byteNodetype){case this.byteNodeEnm.GEO_TYPE_POINT:if(i.layerid==this.byteNodeEnm.GEO_TYPE_LABEL){var n=t.attribute,s=n.labelcolor,o=0!=n.zoom,r=o?96/25.4*parseFloat(n.labelsize)*1e3/this._map.getScale():96/25.4*parseFloat(n.labelsize);r=r<1?1:r;var a=Math.round(r)+"px "+n.font,l=!!n.fillcolor&&n.fillcolor!=-1,h=l?n.fillcolor:null,u=!!n.outlinewidth&&n.outlinewidth!=-1,c=u?n.outlinecolor:null,p={text:n.texts,fill:!1,font:a,textBaseline:"bottom",isCache:!1,scale:this._map.getScale(),isChangeByScale:o,angle:n.angles,color:s};l&&(p.fill=!0,p.backgroundColor=h),u&&(p.outline={color:c,linewidth:.5});var y=new m(p),f=t.geometry;"multiPoint"==t.geometry.getType()&&t.geometry._points.length;var _=new d({geometry:f,symbol:y,interactive:this._interactive,draggable:!1});_.setAttribute(n),e=_}else{var x=t.geometry,L=i.zoom,w=i.symbolid,S=0==i.symbolsize?1:i.symbolsize,P=i.symbolangle,T=new g({isChangeByScale:L,symbolId:w,rotate:P,color:i.symbolcolor,scale:S}),C=i.issvr?"svr":"tmp";i.calcTerminalsCoords=i.coords,i.geotype=i.geometrytype,i.subtype=i.sbzlx,i.srctype=C,i.id=t.id;var M=new d({geometry:x,symbol:T,interactive:this._interactive,draggable:!1});M.setAttribute(i),e=M}break;case this.byteNodeEnm.GEO_TYPE_LINE:var k=t.geometry,E=i.symbolid,D=0==i.symbolsize?1:i.symbolsize,I=0!=i.zoom,B=void 0;try{B=new v({symbolId:E,scale:D,isChangeByScale:I,color:i.symbolcolor})}catch(t){}var A=i.issvr?"svr":"tmp";i.srctype=A,i.id=t.id,i.subtype=i.sbzlx;var G=new d({geometry:k,symbol:B,interactive:this._interactive,draggable:!1});G.setAttribute(i),e=G;break;case this.byteNodeEnm.GEO_TYPE_POLYGON:var O=t.geometry,R=0!=i.zoom,U=new b({symbolId:i.symbolid,scale:1,color:-1,isChangeByScale:R,outline:{color:i.symbolcolor,linewidth:i.symbolsize}}),z=i.issvr?"svr":"tmp";i.srctype=z,i.id=t.id,i.subtype=i.sbzlx;var j=new d({geometry:O,symbol:U,interactive:this._interactive,draggable:!1});j.setAttribute(i),e=j}return e},_renderGeometry:function(t){var e=this,i=[],n=u.eleTreminals();if(this._map._layersData&&this._map._layersData.size>0&&(this._map._layersData.clear(),this.removeAll(),delete this._map._layersData,this._map._layersData=null),this._map.layerRelationship&&(delete this._map.layerRelationship,this._map.layerRelationship=null),this._map.layerRelationship=new a.default,this._map._layersData=new a.default,this._map&&t){var s=!0,r=!1,l=void 0;try{for(var h,c=(0,o.default)(t);!(s=(h=c.next()).done);s=!0){var p=h.value;if(p[0]==this.byteNodeEnm.GEO_TYPE_LABEL){var x=p[1],L=!0,w=!1,S=void 0;try{for(var P,T=(0,o.default)(x);!(L=(P=T.next()).done);L=!0){var C=P.value;try{var M=C.attribute,k=M.labelcolor,E=0!=M.zoom,D=1;D=(M.labelsize,1);var I=E?96/25.4*parseFloat(M.labelsize*D)*1e3/this._map.getScale():96/25.4*parseFloat(M.labelsize);I=I<1?1:I;var B=Math.round(I)+"px "+(M.font||"微软雅黑"),A=!!M.fillcolor&&M.fillcolor!=-1,G=A?M.fillcolor:null,O=!!M.outlinewidth&&M.outlinewidth!=-1,R=(M.outlinewidth,O?M.outlinecolor:null),U={text:M.texts,fill:!1,font:B,fontName:M.font,textBaseline:"bottom",isCache:!1,scale:this._map.getScale(),isChangeByScale:E,angle:M.symbolangle,color:k,size:M.labelsize,angles:M.angles,sizes:M.sizes,colors:M.colors,fonts:M.fonts};A&&(U.fill=!0,U.backgroundColor=G),O&&(U.outline={color:R,linewidth:.5});var z=new m(U),j=C.geometry;if("multiPoint"==C.geometry.getType()&&C.geometry._points.length<1||M.texts&&M.texts.length<1)continue;var F=M.issvr?"svr":"tmp",N=new d({geometry:j,symbol:z,interactive:this._interactive,draggable:!1});N.setAttribute(M),this.add(N);var H=this._map.layerPointToLatLng(N._pxBounds.min),Z=this._map.layerPointToLatLng(N._pxBounds.max),C={};C.MBR={xmin:H.lng,ymin:Z.lat,xmax:Z.lng,ymax:H.lat},C.geotype=0;var q=M.layerid+"|"+M.sbid+"_label",V=M.issvr?q+F:M.id;if(C.psrid=V,i.push(C),this._map._layersData.has(p[0]))this._map._layersData.get(p[0]).has(V)||this._map._layersData.get(p[0]).set(V,N);else{var W=new a.default;W.set(V,N),this._map._layersData.set(p[0],W)}}catch(t){}}}catch(t){w=!0,S=t}finally{try{!L&&T.return&&T.return()}finally{if(w)throw S}}}else{var Y=p[1];this._map.layerRelationship.has(p[0])||this._map.layerRelationship.set(p[0],p[0]);for(var X=0;X<Y.length;X++)try{var J=Y[X].attribute,K=this.dataSource.getVecModifiedKeys()[this.dataSource.getMarkerKey(J)];if(1==K);else if(2==K)continue;switch(J.byteNodetype){case this.byteNodeEnm.GEO_TYPE_POINT:var Q=Y[X].geometry,$=J.zoom,tt=J.symbolid,et=J.symbolsize,it=J.symbolangle;if(J.coords[0]&&3==J.coords[0].length){var nt=J.coords[0],st=nt[0][0]-nt[2][0],ot=nt[0][1]-nt[2][1],rt=Math.atan2(ot,st);it=180/(Math.acos(-1)/rt)+360}var at=new g({isChangeByScale:$,symbolId:tt,rotate:it,color:J.symbolcolor,scale:et}),lt=J.issvr?"svr":"tmp",ht=n.get(tt+"-"+J.sbzlx),ut=this._map.getScale(),ct=Q,pt=it,dt=u.calcEleTerminals(ct,ht,pt,ut,et/2),yt=[];if(dt&&dt.length&&(1==dt.length&&(yt=[[dt[0],[Q.x,Q.y]]],J.treminalints=1),2==dt.length&&(yt=[[dt[0],[Q.x,Q.y],dt[1]]],J.treminalints=2),dt.length>2)){J.treminalints=3;for(var ft=0;ft<dt.length;ft++)yt.push([dt[ft],[Q.x,Q.y]])}J.calcTerminalsCoords=yt,J.geotype=J.geometrytype,J.subtype=J.sbzlx,J.srctype=lt,J.id=Y[X].id;var _t=new d({geometry:Q,symbol:at,interactive:this._interactive,draggable:!1});_t.setAttribute(J),this._map.layerRelationship.has(J.subtype)||this._map.layerRelationship.set(J.subtype,p[0]),_t.on("click",function(t){e.fire("devClick",t.target)});var mt={};this.add(_t);var gt=J.issvr?J.psrid+lt:J.id;if(2==J.geotype||6==J.geotype){var vt=_t._pxcellBounds;if(vt)try{vt.min=this._map.layerPointToLatLng(vt.min),vt.max=this._map.layerPointToLatLng(vt.max);var bt=Math.min(vt.min.lng,vt.max.lng),xt=Math.max(vt.min.lng,vt.max.lng),Lt=Math.min(vt.min.lat,vt.max.lat),wt=Math.max(vt.min.lat,vt.max.lat);mt.MBR={xmin:bt,ymin:Lt,xmax:xt,ymax:wt},mt.geotype=0,mt.psrid=p[0]+"|"+gt,i.push(mt),bt=null,xt=null,Lt=null,wt=null}catch(t){console.warn(t)}else{vt=_t._pxBounds;try{var St={};St.min=this._map.layerPointToLatLng(vt.min),St.max=this._map.layerPointToLatLng(vt.max),mt.MBR={xmin:St.min.lng,ymin:St.min.lat,xmax:St.max.lng,ymax:St.max.lat},mt.psrid=p[0]+"|"+gt,i.push(mt),St=null}catch(t){console.warn(t)}}for(var Pt=[],Tt=[],Ct=[],Mt=0;Mt<_t._pxPaths.length;Mt++){var kt=_t._pxPaths[Mt];kt=this._map.layerPointToLatLng(kt),Tt.push([kt.lng,kt.lat]),Pt.push({x:kt.lng,y:kt.lat}),kt=null}var Et=_t._pxPaths[0];Et=this._map.layerPointToLatLng(Et),Tt.push([Et.lng,Et.lat]),Pt.push({x:Et.lng,y:Et.lat}),Ct.push(Tt);for(var Dt=Math.min(J.coords[0].length,J.calcTerminalsCoords[0].length),It=0;It<Dt;It++){var Bt=new v({symbolId:4260010,scale:u.eLineWidth(),color:J.symbolcolor}),At=[[J.coords[0][It],J.calcTerminalsCoords[0][It]]],Gt=new y(At),Ot=new d({geometry:Gt,symbol:Bt,interactive:!1,draggable:!1});this.add(Ot),At=null,Gt=null,Ot=null}vt=null,Pt=null,Tt=null,Ct=null,Et=null}else if(8==J.geotype){var vt=_t._pxcellBounds;try{var bt=Math.min(vt.min.lng,vt.max.lng),xt=Math.max(vt.min.lng,vt.max.lng),Lt=Math.min(vt.min.lat,vt.max.lat),wt=Math.max(vt.min.lat,vt.max.lat);mt.MBR={xmin:bt,ymin:Lt,xmax:xt,ymax:wt},mt.geotype=0,mt.psrid=p[0]+"|"+gt,i.push(mt);var Rt=new f(vt.min.lng,vt.min.lat,vt.max.lng,vt.max.lat),Ut=new _({color:"#0000ff",stroke:!0,outline:{color:"#f00"}}),zt=new d({geometry:Rt,symbol:Ut});this.add(zt),bt=null,xt=null,Lt=null,wt=null,zt=null,Ut=null,vt=null}catch(t){console.warn(t)}}else if(5==J.geotype){var vt=_t._pxcellBounds;if(vt)try{if(vt.min){vt.min=this._map.layerPointToLatLng(vt.min),vt.max=this._map.layerPointToLatLng(vt.max);var bt=Math.min(vt.min.lng,vt.max.lng),xt=Math.max(vt.min.lng,vt.max.lng),Lt=Math.min(vt.min.lat,vt.max.lat),wt=Math.max(vt.min.lat,vt.max.lat);mt.MBR={xmin:bt,ymin:Lt,xmax:xt,ymax:wt},mt.geotype=0,mt.psrid=p[0]+"|"+gt,i.push(mt),bt=null,xt=null,Lt=null,wt=null}else{vt=_t._pxBounds;var Rt={};Rt.min=this._map.layerPointToLatLng(vt.min),Rt.max=this._map.layerPointToLatLng(vt.max),mt.MBR={xmin:Rt.min.lng,ymin:Rt.min.lat,xmax:Rt.max.lng,ymax:Rt.max.lat},mt.psrid=p[0]+"|"+gt,i.push(mt),Rt=null}}catch(t){console.warn(t)}else{vt=_t._pxBounds;try{var Rt={};Rt.min=this._map.layerPointToLatLng(vt.min),Rt.max=this._map.layerPointToLatLng(vt.max),mt.MBR={xmin:Rt.min.lng,ymin:Rt.min.lat,xmax:Rt.max.lng,ymax:Rt.max.lat},mt.geotype=0,mt.psrid=p[0]+"|"+gt,i.push(mt),Rt=null}catch(t){console.warn(t)}}for(var Pt=[],Tt=[],Ct=[],Mt=0;Mt<_t._pxPaths.length;Mt++){var kt=_t._pxPaths[Mt];kt=this._map.layerPointToLatLng(kt),Tt.push([kt.lng,kt.lat]),Pt.push({x:kt.lng,y:kt.lat}),kt=null}var Et=_t._pxPaths[0];Et=this._map.layerPointToLatLng(Et),Tt.push([Et.lng,Et.lat]),Pt.push({x:Et.lng,y:Et.lat}),Ct.push(Tt);for(var jt=Math.min(J.coords.length,J.calcTerminalsCoords.length),Ft=0;Ft<jt;Ft++){var Nt=new v({symbolId:4260010,scale:u.eLineWidth(),color:J.symbolcolor}),Ht=[[J.coords[Ft][0],J.calcTerminalsCoords[Ft][0]]],Zt=new y(Ht),qt=new d({geometry:Zt,symbol:Nt,interactive:!1,draggable:!1});this.add(qt),Ht=null,Zt=null,qt=null,Nt=null}vt=null,Pt=null,Tt=null,Ct=null,Et=null,dzp1=null,dzp2=null}else{var vt=_t._pxcellBounds;if(vt)try{vt.min=this._map.layerPointToLatLng(vt.min),vt.max=this._map.layerPointToLatLng(vt.max),mt.MBR={xmin:vt.min.lng,ymin:vt.min.lat,xmax:vt.max.lng,ymax:vt.max.lat},mt.psrid=p[0]+"|"+gt,i.push(mt),vt=null}catch(t){console.warn(t)}else{vt=_t._pxBounds;try{var Rt={};Rt.min=this._map.layerPointToLatLng(vt.min),Rt.max=this._map.layerPointToLatLng(vt.max),mt.MBR={xmin:Rt.min.lng,ymin:Rt.min.lat,xmax:Rt.max.lng,ymax:Rt.max.lat},mt.geotype=0,mt.psrid=p[0]+"|"+gt,i.push(mt),vt=null,Rt=null}catch(t){console.warn(t)}}}if(this._map._layersData.has(p[0]))this._map._layersData.get(p[0]).has(p[0]+"|"+gt)||this._map._layersData.get(p[0]).set(p[0]+"|"+gt,_t);else{var W=new a.default;W.set(p[0]+"|"+gt,_t),this._map._layersData.set(p[0],W),W=null}Q=null,$=null,tt=null,et=null,it=null,at=null,lt=null,_t=null,mt=null,gt=null;break;case this.byteNodeEnm.GEO_TYPE_LINE:var Vt=(J.coords,Y[X].geometry),Wt=J.symbolcolor,Yt=J.symbolid,Xt=0==J.symbolsize?1:J.symbolsize,Jt=0!=J.zoom,Kt=void 0;try{Kt=new v({symbolId:Yt,scale:Xt,isChangeByScale:Jt,color:Wt,opacity:1})}catch(t){console.warn(t)}var Qt={},$t=J.issvr?"svr":"tmp",te=J.issvr?J.psrid+$t:Y[X].id;Vt.getPaths();Qt.MBR=Vt.getExtent(),Qt.geotype=1,Qt.psrid=p[0]+"|"+te,i.push(Qt),J.srctype=$t,J.id=Y[X].id,J.subtype=J.sbzlx;var ee=new d({geometry:Vt,symbol:Kt,interactive:this._interactive,draggable:!1});if(ee.on("click",function(t){e.fire("devClick",t.target)}),ee.setAttribute(J),this._map.layerRelationship.has(J.subtype)||this._map.layerRelationship.set(J.subtype,p[0]),this.add(ee),this._map._layersData.has(p[0]))this._map._layersData.get(p[0]).has(p[0]+"|"+te)||this._map._layersData.get(p[0]).set(p[0]+"|"+te,ee);else{var W=new a.default;W.set(p[0]+"|"+te,ee),this._map._layersData.set(p[0],W),W=null}Kt=null,ee=null,null,Vt=null,Wt=null,Yt=null,Jt=null,Qt=null,$t=null,te=null;break;case this.byteNodeEnm.GEO_TYPE_POLYGON:var ie=Y[X].geometry,ne=(p[0],J.sbid,0!=J.zoom),se=new b({symbolId:J.symbolid,scale:1,color:J.symbolcolor,isChangeByScale:ne,outline:{color:J.symbolcolor,linewidth:J.symbolsize}}),oe={},re=J.issvr?"svr":"tmp",ae=J.issvr?J.psrid+re:Y[X].id;oe.MBR=ie.getExtent(),oe.geotype=2,oe.psrid=p[0]+"|"+ae,i.push(oe),J.srctype=re,J.id=Y[X].id,J.subtype=J.sbzlx;var le=new d({geometry:ie,symbol:se,interactive:this._interactive,draggable:!1});if(le.on("click",function(t){e.fire("devClick",t.target)}),le.setAttribute(J),this._map.layerRelationship.has(J.subtype)||this._map.layerRelationship.set(J.subtype,p[0]),this.add(le),this._map._layersData.has(p[0]))this._map._layersData.get(p[0]).has(ae)||this._map._layersData.get(p[0]).set(p[0]+"|"+ae,le);else{var W=new a.default;W.set(p[0]+"|"+ae,le),this._map._layersData.set(p[0],W),W=null}ie=null,null,ne=null,gonsize=null,se=null,oe=null,re=null,ae=null,le=null;break;case this.byteNodeEnm.GEO_TYPE_LABEL:try{var he=Y[X],ue=he.attribute,ce=ue.labelcolor,pe=0!=ue.zoom,de=pe?96/25.4*parseFloat(ue.labelsize)*1e3/this._map.getScale():96/25.4*parseFloat(ue.labelsize);de=de<1?1:de;var ye=Math.round(de)+"px "+(ue.font||"微软雅黑"),fe=!!ue.fillcolor&&ue.fillcolor!=-1,_e=fe?ue.fillcolor:null,me=!!ue.outlinewidth&&ue.outlinewidth!=-1,ge=(ue.outlinewidth,me?ue.outlinecolor:null),ve={text:ue.texts,fill:!1,font:ye,textBaseline:"bottom",isCache:!1,scale:this._map.getScale(),isChangeByScale:pe,angle:ue.angles,color:ce};fe&&(ve.fill=!0,ve.backgroundColor=_e),me&&(ve.outline={color:ge,linewidth:.5});var be=new m(ve),xe=he.geometry;if("multiPoint"==he.geometry.getType()&&he.geometry._points.length<1||ue.texts&&ue.texts.length<1)continue;var Le=ue.issvr?"svr":"tmp",we=new d({geometry:xe,symbol:be,interactive:this._interactive,draggable:!1});we.setAttribute(ue),this.add(we);var Se=this._map.layerPointToLatLng(we._pxBounds.min),Pe=this._map.layerPointToLatLng(we._pxBounds.max),Te={};Te.MBR={xmin:Se.lng,ymin:Pe.lat,xmax:Pe.lng,ymax:Se.lat},Te.geotype=0;var q=ue.layerid+"|"+ue.sbid+"_label",V=ue.issvr?q+Le:ue.id;if(Te.psrid=V,i.push(Te),this._map._layersData.has(p[0]))this._map._layersData.get(p[0]).has(V)||this._map._layersData.get(p[0]).set(V,we);else{var W=new a.default;W.set(V,we),this._map._layersData.set(p[0],W)}}catch(t){}break;case this.byteNodeEnm.GEO_TYPE_OTHER:continue;var W}J=null}catch(t){}Y=null}}}catch(t){r=!0,l=t}finally{try{!s&&c.return&&c.return()}finally{if(r)throw l}}}if(t=null,this.dataSource.editCache&&this.dataSource.editCache.size>0){for(var Ce=this.dataSource.editCache.get(this.dataSource.stateid)?this.dataSource.editCache.get(this.dataSource.stateid).get("add"):[],Me=0;Me<Ce.length;Me++)this.add(Ce[Me]);for(var ke=this.dataSource.editCache.get(this.dataSource.stateid)?this.dataSource.editCache.get(this.dataSource.stateid).get("edit"):[],Ee=0;Ee<ke.length;Ee++)this.add(ke[Ee])}this.createspatialindex(i),i=null,this.redrawSelection(),this.fire("FeatureRenderedComplete")},_extendRedrawBounds:function(t,e){return e=e||new L.Bounds,e.extend(t._pxBounds.min),e.extend(t._pxBounds.max),e},createspatialindex:function(t){var e=this._map.getExtent();delete this._map.quadtree,this._map.quadtree=new S({rootExtent:e,maxlevel:5,geos:t,target:this._map})},redrawSelection:function(){if(this._map._selection){for(var t=[],e=0;e<this._map._selection.data.length;e++){var i=this._map._selection.data[e].getAttribute(),n=i.layerid,s=i.srctype,o=n+"|"+i.psrid+s,r=i.id,a=!1;if(!o&&i.sbid&&"TextSymbol"==this._map._selection.data[e].getSymbol().getType()&&(a=!0),a&&(o=n+"|"+i.sbid+"_label"+s),"tmp"==s&&(o=r+s),this._map._layersData.has(n))if(this._map._layersData.get(n).has(o)){var l={},h=this._map._layersData.get(n).get(o);for(var u in h.getAttribute())l[u]=h.getAttribute()[u];var c=new d(h.getGeometry().clone(),h.getSymbol().clonenew(),l);t.push(c)}else if(a){var p=this._map._layersData.get(this.byteNodeEnm.GEO_TYPE_LABEL).get(o);if(p&&p.labels)for(var y=0;y<p.labels.length;y++){var l={};for(var u in p.labels[y].getAttribute())l[u]=p.labels[y].getAttribute()[u];var f=new d(p.labels[y].getGeometry().clone(),p.labels[y].getSymbol().clonenew(),l);t.push(f)}}else t.push(this._map._selection.data[e]);else t.push(this._map._selection.data[e])}this._map._selection.clearSelection(),this._map._selection.addGraphics(t)}},_segmentsIntr:function(t,e,i,n){var s=(t.x-i.x)*(e.y-i.y)-(t.y-i.y)*(e.x-i.x),o=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);if(s*o>=0)return!1;var r=(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x);if(r*(r+s-o)>=0)return!1;var a=r/(o-s),l=a*(e.x-t.x),h=a*(e.y-t.y);return[t.x+l,t.y+h]},_renderImage:function(t,e){var i=this;if(this._map){this.options.showRenderTime&&localStorage&&localStorage.setItem("dynamicLayerLoadImgBegin",(new Date).getTime());var n=new l(t,e,{opacity:0,crossOrigin:this.options.crossOrigin,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:!1});n.once("load",function(t){if(i.options.showRenderTime&&localStorage&&i._handleRenderImgTime(),this._map){var n=t.target,s=this._currentImage;n._bounds.equals(e)&&n._bounds.equals(this._map.getBounds())?(this._currentImage=n,this._currentImage.setZIndex(400),"front"===this.options.position?this.bringToFront():this.bringToBack(),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map._removeLayer2(this._currentImage),s&&this._map&&this._map._removeLayer2(s),s&&s._map&&s._map._removeLayer2(s)):this._map._removeLayer2(n)}this.fire("load",{bounds:e})},this),n.on("error",function(){this.fire("error",{bounds:e})}),n.addTo(this._map),this.fire("loading",{bounds:e})}},_update:function(){if(this._map){if(this.refreshindex&&this._map.quadtree){var t=this._map.getExtent();this._map.quadtree.refreshindex(t)}if(!this._iscache){var e=this._map.getZoom();if(!this._map._animatingZoom&&!(this._map._panTransition&&this._map._panTransition._inProgress||this._map._moving))return!isNaN(this.options.maxZoom)&&e>this.options.maxZoom||!isNaN(this.options.minZoom)&&e<this.options.minZoom?void(this._currentImage&&this._map._removeLayer2(this._currentImage)):void(this.options.visible&&this._getData())}}},_getData:function(t){var e=this,i=null,n=null;if(t&&t.customExtent&&t.customSize)i=t.customExtent,n=t.customSize;else{var s=this._map.getBounds();n=this._map.getSize();var o=s.getNorthEast(),r=s.getSouthWest(),a=this._map.latLngToLayerPoint(s._northEast),l=this._map.latLngToLayerPoint(s._southWest);(a.y>0||l.y<n.y)&&(n.y=l.y-a.y),i=new f(r.lng,r.lat,o.lng,o.lat)}this.dataSource&&(this._map&&!this.dataSource._query&&this.dataSource.setMap(this._map),this.dataSource.on("cacheloaded",function(t){var i=e.dataSource.fusionMapData(e.dataSource.userCache,t.data);e.fire("beforeFeaturesRender",{featureDatas:i}),e._renderGeometry(i),e.fire("afterFeaturesRender"),e.dataSource.off("cacheloaded")}),this.dataSource.getData(i,n))},_renderPopup:function(t,e,i,n){if(t=L.latLng(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var s=this._popupFunction(e,i,n);s&&this._popup.setLatLng(t).setContent(s).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},containsPointByLinearRing:function(t,e){for(var i=t.x,n=t.y,s=!1,o=0,r=e.length,a=r-1;o<r;a=o,o++){var l=e[o].x,h=e[o].y,u=e[a].x,c=e[a].y;if(l===i&&h===n||u===i&&c===n)return"on";if(h<n&&c>=n||h>=n&&c<n){var p=l+(n-h)*(u-l)/(c-h);if(p===i)return"on";p>i&&(s=!s)}}return s},getType:function(){return h.Layer.FEATURESLAYER},fetchVecs:function(){var t=this,e=this._map.getBounds(),i=this._map.getSize(),n=e.getNorthEast(),s=e.getSouthWest(),o=this._map.latLngToLayerPoint(e._northEast),r=this._map.latLngToLayerPoint(e._southWest);(o.y>0||r.y<i.y)&&(i.y=r.y-o.y);var a=this.getVecsUrl(new f(s.lng,s.lat,n.lng,n.lat),i.x,i.y,this._map.getScale());a&&(a+="&test="+(new Date).getTime(),this.postmp=0,this.bytelen=0,this.intlen=4,this.dblen=8,this.end=0,this.charlen=1,this.bufferstep=0,this.byteNodetype=0,null==this.options.params.request||void 0==this.options.params.request?(this._layers&&this.removeAll(),this._renderImage(a,e),a=null):(this._gisServer||(this._gisServer=x.gisService()),this._gisServer._vecajax({url:a,method:"post"}).then(function(e){var i=null;try{i=JSON.parse(e),t.fire("FeatureRenderedError",{type:"error.FeatureRenderedError",errorcent:e})}catch(t){i=e,e=null}i.resultValue&&(i=i.resultValue),t.options.params.request&&"getvectormap"==t.options.params.request.toLowerCase()&&(t.vecworker&&(t.vecworker.clear(),delete t.vecworker),t.vecworker=w.vectorWorker(),t.vecworker.sendMessge(i),t.vecworker.on("workerMsg",function(e){var i=e.data,n=t._map.getEditor(),s=n.getFeatureCache();s?s._featuresLayer||(s._featuresLayer=t):(s=new P({featuresLayer:t}),n._featureCache=s),s.clearCache(),s.addServerCachesData(i),t.options.filter&&s._setFilter(t.options.filter),i=s.getVisableCache(),t._renderGeometry(i),i=null,e.data=null,t.vecworker.off("workerMsg"),t.vecworker&&(t.vecworker.clear(),t.vecworker=null,delete t.vecworker)})),i=null,t._gisServer=null,e=null}).catch(function(t){""==t||this.removeAll()}))),a=null,e=null,i=null,n=null,s=null,o=null,o=null},getVecsUrl:function(t,e,i,n){if(t.getXmin()<0||t.getYmax()<0||t.getXmax()<0||t.getYmin()<0)return null;var s=this.exportURL(L.extend({},{bbox:[t.getXmin(),t.getYmin(),t.getXmax(),t.getYmax()].join(","),height:i,width:e},this.options.params));return MSManager.active&&(s=s.split("request="+this.options.params.request).join(""),s=s.split("&&").join("&")),s},exportURL:function(t){return this.getUrl()+L.Util.getParamString(t)},getUrl:function(){return this._url},_prepareQuery:function(t,e,i,n){return t.bbox=[e.getXmin(),e.getYmin(),e.getXmax(),e.getYmax()].join(","),t.size=[i,n].join(","),t.mapScale=this._map.getScale(),t},joinUrlVariables:function(t){return L.Util.getParamString(t)},getVisible:function(){return this.options.visible},setVisible:function(t){if(this.options.visible!=t)return this.options.visible=t,this._canvasRenderObj._container.style.display=t?"block":"none",t&&this._update(),this}});e.exports.FeaturesLayer=T,e.exports.featuresLayer=function(t,e){return new T(t,e)};var C=t("../Editor/Editor").Editor,M=t("./SupportClass/SelectionSet").SelectionSet,k=t("./SupportClass/RenderedHighLight").RenderedHighLight,E=t("./SupportClass/SpatialQuery").SpatialQuery,D=t("./SupportClass/AttrQuery").AttrQuery;t("../Map").Map.include({getEditor:function(){return this._editor||(this._editor=new C({target:this})),this._editor},initRenderedSelection:function(){this._selection=new M(this),this.selectSet=this._selection},initRenderedFlashing:function(t){this._highlight||(this._highlight=new k(this,t))},addFlashingGraphics:function(t,e){this._highlight||(this._highlight=new k(this,e)),e&&(this._highlight=new k(this,e)),this._highlight.addGraphics(t)},addFlashingGraphic:function(t,e){this._highlight||(this._highlight=new k(this,e)),e&&(this._highlight=new k(this,e)),this._highlight.add(t)},clearFlashing:function(){this._highlight&&this._highlight.clearHighlight()},removeFlashing:function(t){this._highlight&&this._highlight.remove(t)},getFlashing:function(){if(this._highlight)return this._highlight.getGraphics()},queryRenderedFeatures:function(t,e){return this._query||(this._query=new E(this,e)),e&&(this._query=new E(this,e)),this._query.queryRenderedFeatures(t)},queryRenderedFeaturesbyAttr:function(t,e){return this._attrquery||(this._attrquery=new D(this,e)),this._attrquery.queryRenderedFeatures(t)},queryRenderedeleSymbolFeatures:function(t,e){var i=e.lyrIds;return this._query||(e.lyrIds=[],this._query=new E(this,e)),e&&(e.lyrIds=[],this._query=new E(this,e)),this._query.queryRenderedeleSymbolFeatures(t,i)}})},{"../Editor/Editor":22,"../Editor/FeatureCache":24,"../Features/Graphic":36,"../Geometry/Extent":54,"../Geometry/MultiPoint":59,"../Geometry/Polyline":63,"../Map":116,"../Symbol/EleFillSymbol":135,"../Symbol/EleLineSymbol":136,"../Symbol/EleMarkerSymbol":137,"../Symbol/SimpleFillSymbol":145,"../Symbol/TextSymbol":150,"../Task/GISService":151,"../Task/MetaService":152,"../Util":154,"../workers/QuadTree":157,"../workers/VectorWorker":159,"./../Render/GISCanvas":128,"./Layer":107,"./SupportClass/AttrQuery":110,"./SupportClass/RenderedHighLight":111,"./SupportClass/SelectionSet":112,"./SupportClass/SpatialQuery":113,"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/map":165}],101:[function(t,e,i){"use strict";var n=t("./Layer"),s=t("./GraphicsLayer"),o=t("./../Util"),r=s.GraphicsLayer.extend({options:{flickering:!0,updateRate:1e3,interactive:!0,opacity:.5,name:n.Layer.FLICKERANIMATELAYER+L.stamp(this)},initialize:function(t,e){s.GraphicsLayer.prototype.initialize.call(this,t,e),this._isShowCanvas=!1},getOpacity:function(){return this.options.opacity},setOpacity:function(t){if(o.objectHandle.isNumber(t))return this.options.opacity=t,this;throw"the param opacity must be number"},onRemove:function(t){this._frame&&clearTimeout(this._frame),s.GraphicsLayer.prototype.onRemove.call(this,t)},_stopFlick:function(){this._frame&&(clearTimeout(this._frame),this._frame=null)},redraw:function(){return!this._frame&&this._map&&this.options.flickering&&(this._frame=setTimeout(L.bind(this._redraw,this),this.options.updateRate)),this},_reset:function(){this.options.flickering=!1,this._isShowCanvas=!0,this._canvasRenderObj._container&&(this.options.opacity&&this.options.opacity-0!=0?this._canvasRenderObj._container.style.opacity=1:this._canvasRenderObj._container.style.display="inline")},_redraw:function(){this._map&&this._canvasRenderObj._container&&(this._isShowCanvas?this.options.opacity&&this.options.opacity-0!=0?this._canvasRenderObj._container.style.opacity=1:this._canvasRenderObj._container.style.display="inline":this.options.opacity&&this.options.opacity-0!=0?this._canvasRenderObj._container.style.opacity=this.options.opacity:this._canvasRenderObj._container.style.display="none",this._isShowCanvas=!this._isShowCanvas,this.options.flickering&&(this._frame=setTimeout(L.bind(this._redraw,this),this.options.updateRate)))},onAdd:function(t){s.GraphicsLayer.prototype.onAdd.call(this,t),this.options.flickering&&this.redraw()},isFlickering:function(){return this.options.flickering},getType:function(){return n.Layer.FLICKERANIMATELAYER},setFlickering:function(t){return this.options.flickering=t,this._stopFlick(),t?this._redraw():this._reset(),this},getUpdateRate:function(){return this.options.updateRate},setUpdateRate:function(t){if(o.objectHandle.isNumber(t))return this.options.updateRate=t,this;throw"the param updateRate must be number"},isInteractive:function(){return this.options.interactive},setInteractive:function(t){if(o.objectHandle.isBoolean(t)){this.options.interactive=t;for(var e in this._layers)this._layers[e].setInteractive(t);return this}throw"the param interactive must be boolean"}});e.exports.FlickerAnimateLayer=r,e.exports.flickerAnimateLayer=function(t,e){return new r(t,e)}},{"./../Util":154,"./GraphicsLayer":103,"./Layer":107}],102:[function(t,e,i){"use strict";var n=t("./Layer"),s=t("./AnimateLayer"),o=t("../Geometry/Geometry").Geometry,r=s.AnimateLayer.extend({options:{colors:["#ffff00","#ff0000"],lineWidth:5,streakLength:60,direction:1,visible:!0,step:4,updateRate:30,name:n.Layer.FLOWANIMATELAYER+L.stamp(this),mix:null,minZoom:1,maxZoom:50},initialize:function(t,e){if(e=e||{},s.AnimateLayer.prototype.initialize.call(this,t,e),e=L.setOptions(this,e),e.direction==this.static.DIRECTION_OUT_ORDER)for(var i=0,n=t.length;i<n;i++)t[i].getPaths()[0]=t[i].getPaths()[0].reverse();this._lineSymbol=new egis.symbol.SimpleLineSymbol({color:this.options.colors[0],width:this.options.lineWidth,style:egis.symbol.SimpleLineSymbol.STYLE_SOLID})},setColors:function(t){return this.options.colors=t,this._lineSymbol.setColor(t[0]),this},setStreakLength:function(t){return this.options.streakLength=t,this},getColors:function(){return this.options.colors},setLineWidth:function(t){return this.options.lineWidth=t,this._lineSymbol.setWidth(t),this},getPolylines:function(){return this._graphics},getLineWidth:function(){return this.options.lineWidth},setDirection:function(t){var e=!1;if(this.options.direction!==t&&(e=!0),this.options.direction=t,e){for(var i=this._graphics,n=0,s=i.length;n<s;n++)i[n].getPaths()[0]=i[n].getPaths()[0].reverse();this.reset()}return this},getDirection:function(){return this.options.direction},isVisible:function(){return this.options.visible},setVisible:function(t){return this.options.visible=t,this.options.visible?(this.reset(),void this.redraw()):(clearTimeout(this._frame),this._frame=null,this.clearTemp(),this)},getName:function(){return this.options.name},static:{DIRECTION_IN_ORDER:1,DIRECTION_OUT_ORDER:0},setName:function(t){return this.options.name=t,this},setGraphics:function(t){return this.setPolylines(t)},addPolylines:function(t){if(this._graphics=[],t&&t.length>0)for(var e=0;e<t.length;e++)t[e].getType()===o.POLYLINE&&this._graphics.push(t[e]);else this._graphics=[];return this.redraw()},addGraphic:function(t){return this.addPolyline(t)},addPolyline:function(t){if(t.getType()===o.POLYLINE)return this.options.direction==this.static.DIRECTION_OUT_ORDER&&(t.getPaths()[0]=t.getPaths()[0].reverse()),this._graphics.push(t),this.reset()},removePolyline:function(t){for(var e=0;e<this._graphics.length;e++)if(this._graphics[e]===t)return this._graphics.splice(e,1),this.reset();return this},clearGraphic:function(){return this.clearPolylines()},clearPolylines:function(){return this.pauseAnimate(),this._graphics=[],this.reset()},drawLine:function(t,e,i){var n=this._ctx;i&&(n=this._cachectx);var s,o,r,a,l=t.length;if(l){for(n.beginPath(),s=0;s<l;s++)for(o=0,r=t[s].length;o<r;o++)a=t[s][o],n[o?"lineTo":"moveTo"](a.x,a.y);return this._fillStrokeForSymbol(n,e,t),this}},_fillStrokeForSymbol:function(t,e,i){if(e.fill){t.globalAlpha=e.fillOpacity;switch(e.fillStyle){case"style_solid":t.fillStyle=e.fillColor;break;case"style_vertical":var n=new Image;this._detectIconPath(),n.src=this._symbolImagePath+"symbol/vertical.png",t.fillStyle=t.createPattern(n,"repeat");break;case"style_horizontal":var n=new Image;this._detectIconPath(),n.src=this._symbolImagePath+"symbol/horizontal.png",t.fillStyle=t.createPattern(n,"repeat");break;case"style_cross":var n=new Image;this._detectIconPath(),n.src=this._symbolImagePath+"symbol/cross.png",t.fillStyle=t.createPattern(n,"repeat");break;case"style_forward":var n=new Image;this._detectIconPath(),n.src=this._symbolImagePath+"symbol/forwarddiagonal.png",t.fillStyle=t.createPattern(n,"repeat");break;case"style_backward":var n=new Image;this._detectIconPath(),n.src=this._symbolImagePath+"symbol/backwarddiagonal.png",t.fillStyle=t.createPattern(n,"repeat")}t.fill(e.fillRule||"evenodd")}if(e.stroke&&0!==e.width){switch(t.globalAlpha=e.opacity,t.lineWidth=e.width?e.width:5,e.strokeStyle){case"style_solid":t.setLineDash&&t.setLineDash([]);break;case"style_dash":t.setLineDash&&t.setLineDash([10,5]);break;case"style_dash_da1":t.setLineDash&&t.setLineDash([7,7]);break;case"style_dash_da2":t.setLineDash&&t.setLineDash([5,.1,10]);break;case"style_dash_da3":t.setLineDash&&t.setLineDash([10,.1,5]);break;case"style_dot":t.setLineDash&&t.setLineDash([5,5]);break;case"style_dash_dot":t.setLineDash&&t.setLineDash([5,5,1,5]);break;default:t.setLineDash&&t.setLineDash([])}if(t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,this.options.shadow){var s=this.options.shadow;t.shadowColor=s.color,t.shadowOffsetX=s.offsetx,t.shadowOffsetY=s.offsety,t.shadowBlur=s.Blur}t.stroke()}},redraw:function(){return!this._frame&&this._map&&!this._map._animating&&this.options.visible&&(this._frame=setTimeout(L.bind(this.requestAnimateFrame,this),this.options.updateRate)),this},onAdd:function(t){return this._map=t,s.AnimateLayer.prototype.onAdd.call(this,t),this._canvas||(this._step=1,this._delta=0),t.on("moveend",this.reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),t.on("zoom",L.bind(function(t){this._map&&(this._withinZoomRange(t.target._zoom)?this.setVisible(!0):this.setVisible(!1))},this)),this.reset()},_withinZoomRange:function(t){return!!this.options.visible&&(this.options.minZoom&&this.options.maxZoom?t>=this.options.minZoom&&t<=this.options.maxZoom:this.options.minZoom?t>=this.options.minZoom:!this.options.maxZoom||t<=this.options.maxZoom)},stopAnimate:function(){return this._stopAnimate(),this},pauseAnimate:function(){return this._frame&&(clearTimeout(this._frame),this._frame=null),this},startAnimate:function(){return this.redraw()},_stopAnimate:function(){this.pauseAnimate(),this.clearTemp()},onRemove:function(t){s.AnimateLayer.prototype.onRemove.call(this,t),
t.off("moveend",this.reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this),t.off("movestart",this._stopAnimate,this)},reset:function(){if(this._withinZoomRange(this._map.getZoom())){s.AnimateLayer.prototype.reset.call(this),this._stopAnimate();var t=this._map.getExtent(),e=0,i=this._map.getSize(),n=this._map.latLngToContainerPoint(L.latLng(t.ymax,t.xmin));this._bounds=new L.Bounds(n,n.add(i.multiplyBy(1+2*e)).round());for(var o=0;o<this._graphics.length;o++){var r=this._graphics[o],a=r.getExtent();if(t.intersectsAndDoesNotTouch(a)){for(var l=r.getPaths(),h=[],a=new L.Bounds,u=[],c=0;c<l.length;c++){for(var p=0;p<l[c].length;p++)e=this._map.latLngToContainerPoint(l[c][p].toLatLng()),u.push(e),a.extend(e);h.push(u)}0!=h.length?(h=this._clipPolylinePoints(this._bounds,a,h),h=this._simplifyPoints(h),r.projpath=h):r.projpath=null}else r.projpath=null}return!this._frame&&this._map&&!this._map._animating&&this.options.visible&&(this._frame=setTimeout(L.bind(this.requestAnimateFrame,this),this.options.updateRate)),this}},_clipPolylinePoints:function(t,e,i){var n=t,s=e;if(!s||!s.intersects(n))return[];var o,r,a,l,h,u,c,p=[];for(o=0,a=0,l=i.length;o<l;o++)for(c=i[o],r=0,h=c.length;r<h-1;r++)(u=L.LineUtil.clipSegment(c[r],c[r+1],n,r,!0))&&(p[a]=p[a]||[],p[a].push(u[0]),u[1]===c[r+1]&&r!==h-2||(p[a].push(u[1]),a++));return p},_simplifyPoints:function(t){for(var e=t,i=0,n=e.length;i<n;i++)e[i]=L.LineUtil.simplify(e[i],1);return e&&e.length>0?e:[]},requestAnimateFrame:function(){if(this._map&&this._graphics){this.clearTemp();var t=this.options.streakLength,e=this.options.mix;this._delta<t?this._delta+=this.options.step:this._delta=0;for(var i=0;i<this._graphics.length;i++){var n=this._graphics[i];if(null!=n.projpath&&0!=n.projpath.length)for(var s=this.splitPolyline(n.projpath,this._delta,t,e),o=0;o<s.length;o++)"1"==s[o].color?(this._lineSymbol.setColor(this.options.colors[0]),this.drawLine(s[o].path,this._lineSymbol.options.outline,!1)):(this._lineSymbol.setColor(this.options.colors[1]),this.drawLine(s[o].path,this._lineSymbol.options.outline,!1))}return this.options.visible&&(this._frame=setTimeout(L.bind(this.requestAnimateFrame,this),this.options.updateRate)),this}},getSegments:function(t){for(var e=[],i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var s=t[i][n],o=n+1;if(o<t[i].length){var r=t[i][o],a=Math.sqrt(Math.pow(r.x-s.x,2)+Math.pow(r.y-s.y,2)),l=(s.x-r.x)/a,h=(s.y-r.y)/a;e.push({startPoint:r,endPoint:s,length:a,deltax:l,deltay:h})}}return e},getDrawSegments:function(t,e,i,n){for(var s=[],o=0;o<t.length;o++){var r=t[o];if(r.length>=n){var a=r.startPoint.x+i*r.deltax*e,l=r.startPoint.y+i*r.deltay*e;if(i<r.length){i>n/2?(s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:a+r.deltax*e*(n/2)*-1,y:l+r.deltay*e*(n/2)*-1}]],color:"1"}),s.push({path:[[{x:a+r.deltax*e*(n/2)*-1,y:l+r.deltay*e*(n/2)*-1},{x:a,y:l}]],color:"2"})):s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:a,y:l}]],color:"2"});for(var h,u=function(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}(a,l,r.endPoint.x,r.endPoint.y)/(n/2),c=Math.floor(u),p=0;p<c;p++)p%2==0?(s.push({path:[[{x:a+r.deltax*e*(n/2)*p,y:l+r.deltay*e*(n/2)*p},{x:a+r.deltax*e*(n/2)*(p+1),y:l+r.deltay*e*(n/2)*(p+1)}]],color:"1"}),h="1"):(s.push({path:[[{x:a+r.deltax*e*(n/2)*p,y:l+r.deltay*e*(n/2)*p},{x:a+r.deltax*e*(n/2)*(p+1),y:l+r.deltay*e*(n/2)*(p+1)}]],color:"2"}),h="2");var d="2"==h?"1":"2";s.push({path:[[{x:a+r.deltax*e*(n/2)*c,y:l+r.deltay*e*(n/2)*c},{x:r.endPoint.x,y:r.endPoint.y}]],color:d})}}else if(r.length>n/2&&r.length<n){var a=r.startPoint.x+i*r.deltax*e,l=r.startPoint.y+i*r.deltay*e;if(i<r.length)if(i>n/2){var y=i-n/2,f=r.startPoint.x+y*r.deltax*e,_=r.startPoint.y+y*r.deltay*e;s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:f,y:_}]],color:"1"}),s.push({path:[[{x:f,y:_},{x:a,y:l}]],color:"2"}),s.push({path:[[{x:a,y:l},{x:r.endPoint.x,y:r.endPoint.y}]],color:"1"})}else if(s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:a,y:l}]],color:"1"}),r.length-i>n/2){var y=i+n/2,m=r.startPoint.x+y*r.deltax*e,g=r.startPoint.y+y*r.deltay*e;s.push({path:[[{x:a,y:l},{x:m,y:g}]],color:"2"}),s.push({path:[[{x:m,y:g},{x:r.endPoint.x,y:r.endPoint.y}]],color:"1"})}else s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:r.endPoint.x,y:r.endPoint.y}]],color:"2"})}else if(i<=n/2){var a=r.startPoint.x+i*r.deltax*e,l=r.startPoint.y+i*r.deltay*e;i<r.length?(s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:a,y:l}]],color:"2"}),s.push({path:[[{x:a,y:l},{x:r.endPoint.x,y:r.endPoint.y}]],color:"1"})):s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:r.endPoint.x,y:r.endPoint.y}]],color:"2"})}else{var y=i-n/2,a=r.startPoint.x+y*r.deltax*e,l=r.startPoint.y+y*r.deltay*e;i<r.length?(s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:a,y:l}]],color:"1"}),s.push({path:[[{x:a,y:l},{x:r.endPoint.x,y:r.endPoint.y}]],color:"2"})):s.push({path:[[{x:r.startPoint.x,y:r.startPoint.y},{x:r.endPoint.x,y:r.endPoint.y}]],color:"1"})}}return s},getType:function(){return n.Layer.FLOWANIMATELAYER},splitPolyline:function(t,e,i,n){function s(t,e,i,n,s,r,a){var l=[],h={geometrys:l,restlength:100,color:"1"},u=o(t,e,i,n),c=t+(i-t)*s/u,p=c-(i-t)*a*r[0]/u,d=p-(i-t)*a*r[1]/u,y=e+(n-e)*s/u,f=y-(n-e)*a*r[0]/u,_=f-(n-e)*a*r[1]/u,m=0==Math.abs(c-p)?Math.abs(y-f):Math.abs(c-p),g=0==Math.abs(c-t)?Math.abs(y-e):Math.abs(c-t),v=0==Math.abs(i-t)?Math.abs(n-e):Math.abs(i-t),b=0==Math.abs(p-d)?Math.abs(f-_):Math.abs(p-d),x=0==Math.abs(p-t)?Math.abs(f-e):Math.abs(p-t),L=0;if(v<g)L=s-u,m>=g?l.push({path:[[{x:t,y:e},{x:i,y:n}]],color:"1"}):m<g&&(x>=v?x>b?(l.push({path:[[{x:t,y:e},{x:d,y:_}]],color:"1"}),l.push({path:[[{x:d,y:_},{x:i,y:n}]],color:"2"})):x<=b&&l.push({path:[[{x:t,y:e},{x:i,y:n}]],color:"2"}):x>b?(l.push({path:[[{x:t,y:e},{x:d,y:_}]],color:"1"}),l.push({path:[[{x:d,y:_},{x:p,y:f}]],color:"2"}),l.push({path:[[{x:p,y:f},{x:i,y:n}]],color:"1"})):x<=b&&(l.push({path:[[{x:t,y:e},{x:p,y:f}]],color:"2"}),l.push({path:[[{x:p,y:f},{x:i,y:n}]],color:"1"})));else{m>=g?l.push({path:[[{x:t,y:e},{x:c,y:y}]],color:"1"}):m<g&&(x>b?(l.push({path:[[{x:t,y:e},{x:d,y:_}]],color:"1"}),l.push({path:[[{x:d,y:_},{x:p,y:f}]],color:"2"}),l.push({path:[[{x:p,y:f},{x:c,y:y}]],color:"1"})):x<=b&&(l.push({path:[[{x:t,y:e},{x:p,y:f}]],color:"2"}),l.push({path:[[{x:p,y:f},{x:c,y:y}]],color:"1"})));for(var w=Math.floor((u-s)/a),S=0;S<w;S++){var P=c+(i-t)*a*S/u,T=y+(n-e)*a*S/u,C=c+(i-t)*a*(r[1]+S)/u,M=y+(n-e)*a*(r[1]+S)/u,k=c+(i-t)*a*(1+S)/u,E=y+(n-e)*a*(1+S)/u;l.push({path:[[{x:P,y:T},{x:C,y:M}]],color:"2"}),l.push({path:[[{x:C,y:M},{x:k,y:E}]],color:"1"})}var D=c+(i-t)*a*w/u,I=y+(n-e)*a*w/u,B=c+(i-t)*a*(r[1]+w)/u,A=y+(n-e)*a*(r[1]+w)/u;u-s-w*a>=a*r[1]?(l.push({path:[[{x:D,y:I},{x:B,y:A}]],color:"2"}),l.push({path:[[{x:B,y:A},{x:i,y:n}]],color:"1"})):l.push({path:[[{x:D,y:I},{x:i,y:n}]],color:"2"}),L=a-(u-s-w*a)}return h.geometrys=l,h.restlength=L,h}function o(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}for(var r=[],a=0;a<t.length;a++){n&&(i*n[0],i*n[1]);for(var l=t[a][0].x,h=t[a][0].y,u=t[a].length,c={},p=1;p<u;p++){var d=t[a][p].x,y=t[a][p].y;c=1==p?s(l,h,d,y,e,n,i):s(l,h,d,y,c.restlength,n,i),r=r.concat(c.geometrys),l=d,h=y}}return r},splitPolyline1:function(t,e,i,n){function s(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}for(var o=[],r=0;r<t.length;r++){for(var a=(function(t){for(var e=0,i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var o=t[i][n],r=n+1;if(r<t[i].length){var a=t[i][r];e+=s(a.x,a.y,o.x,o.y)}}e}([t[r]]),t[r].length),l=i/2,h=[],u=0,c=0,p=0,d=e,y=t[r][0].x,f=t[r][0].y,_="2",m=!0,g=[],v=1;v<a;v++)for(var b=t[r][v].x,x=t[r][v].y;;){if(!((u=s(y,f,b,x))>=d)){m?g.push({startPoint:{x:y,y:f},endPoint:{x:b,y:x},length:u}):h.push({path:[[{x:y,y:f},{x:b,y:x}]],color:_}),y=b,f=x,d-=u;break}c=(b-y)*d/u+y,p=(x-f)*d/u+f,m?(g.push({startPoint:{x:y,y:f},endPoint:{x:c,y:p},length:u}),_="1",m=!1):h.push({path:[[{x:y,y:f},{x:c,y:p}]],color:_}),"2"==_?(_="1",n&&(l=n[0]*i)):(_="2",n&&(l=n[1]*i)),y=c,f=p,d=l}for(var L=[],w=0,v=0;v<g.length;v++){var S=g[v];L.push({x:S.startPoint.x,y:S.startPoint.y}),w+=S.length,v==g.length-1&&L.push({x:S.endPoint.x,y:S.endPoint.y})}L.reverse(),o=0==h.length&&w<e?l-(e-w)>0?o.concat(this.splitLastPolyline([L],e,i,l-e+w)):o.concat(this.splitLastPolyline2([L],e,i,l-(e-w-l))):o.concat(this.splitLastPolyline([L],e,i,0)),o=o.concat(h)}return o},splitLastPolyline:function(t,e,i,n){function s(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}var o=(function(t){for(var e=0,i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var o=t[i][n],r=n+1;if(r<t[i].length){var a=t[i][r];e+=s(a.x,a.y,o.x,o.y)}}e}(t),t[0].length),r=i/2,a=[],l=0,h=0,u=0,c=r;n>0&&(c=n);for(var p=t[0][0].x,d=t[0][0].y,y="2",f=!0,_=1;_<o;_++)for(var m=t[0][_].x,g=t[0][_].y;;){if(!((l=s(p,d,m,g))>=c)){f?(a.push({path:[[{x:p,y:d},{x:m,y:g}]],color:"1"}),y="2"):a.push({path:[[{x:p,y:d},{x:m,y:g}]],color:y}),p=m,d=g,c-=l;break}h=(m-p)*c/l+p,u=(g-d)*c/l+d,f?(a.push({path:[[{x:p,y:d},{x:h,y:u}]],color:"1"}),y="1",f=!1):a.push({path:[[{x:p,y:d},{x:h,y:u}]],color:y}),y="2"==y?"1":"2",p=h,d=u,c=r}return a.reverse(),a},splitLastPolyline2:function(t,e,i,n){function s(t,e,i,n){return Math.sqrt(Math.pow(t-i,2)+Math.pow(e-n,2))}var o=(function(t){for(var e=0,i=0;i<t.length;i++)for(var n=0;n<t[i].length;n++){var o=t[i][n],r=n+1;if(r<t[i].length){var a=t[i][r];e+=s(a.x,a.y,o.x,o.y)}}e}(t),t[0].length),r=i/2,a=[],l=0,h=0,u=0,c=r;n>0&&(c=n);for(var p=t[0][0].x,d=t[0][0].y,y="2",f=!0,_=1;_<o;_++)for(var m=t[0][_].x,g=t[0][_].y;;){if(!((l=s(p,d,m,g))>=c)){f?(a.push({path:[[{x:p,y:d},{x:m,y:g}]],color:"2"}),y="2"):a.push({path:[[{x:p,y:d},{x:m,y:g}]],color:y}),p=m,d=g,c-=l;break}h=(m-p)*c/l+p,u=(g-d)*c/l+d,f?(a.push({path:[[{x:p,y:d},{x:h,y:u}]],color:"2"}),y="2",f=!1):a.push({path:[[{x:p,y:d},{x:h,y:u}]],color:y}),y="2"==y?"1":"2",p=h,d=u,c=r}return a.reverse(),a}});e.exports.FlowAnimateLayer=r,e.exports.flowAnimateLayer=function(t,e){return new r(t,e)}},{"../Geometry/Geometry":57,"./AnimateLayer":92,"./Layer":107}],103:[function(t,e,i){"use strict";var n=t("./Layer"),s=t("./../Render/GISCanvas"),o=t("../Features/Graphic").Graphic,r=L.LayerGroup.extend({options:{maxZoom:void 0,minZoom:void 0,visible:!0,interactive:!0,name:n.Layer.GRAPHICSLAYER+L.stamp(this),lyrId:""},initialize:function(t,e){e=E.Util.setOptions(this,e),this._canvasRenderObj=new s.GISCanvas,this.setVisible(!!this.options.visible),e.interactive&&(this._interactive=e.interactive),L.LayerGroup.prototype.initialize.call(this),this.addGraphics(t)},getLyrId:function(){return this.options.lyrId},setLyrId:function(t){return this.options.lyrId=t,this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e]);t.on("move",this.refresh,this)},getName:function(){return this.options.name},setName:function(t){return this.options.name=t,this},getInteractive:function(){return this._interactive},setInteractive:function(t){return this._interactive=t,this.invoke("setInteractive",t),this},getVisible:function(){return this._visible},setVisible:function(t){return this._visible=t,this._canvasRenderObj._container&&(this._canvasRenderObj._container.style.display=t?"block":"none"),this},addGraphics:function(t){if(L.Util.isArray(t)){var e,i,n;for(e=0,i=t.length;e<i;e++)n=t[e],this.hasGraphic(n)||(this.options.maxZoom&&(n.options.maxZoom=this.options.maxZoom),this.options.minZoom&&(n.options.minZoom=this.options.minZoom),this._canvasRenderObj&&(n.options.renderer=this._canvasRenderObj),n.addEventParent(this),L.LayerGroup.prototype.addLayer.call(this,n));this.fire("graphicsadd",{Graphic:n})}return this},addMany:function(t){return this.addGraphics(t)},addGraphic:function(t){return this._addGraphic(t),this},_addGraphic:function(t){this.hasGraphic(t)||t instanceof o&&(this.options.maxZoom&&(t.options.maxZoom=this.options.maxZoom),this.options.minZoom&&(t.options.minZoom=this.options.minZoom),this._canvasRenderObj&&(t.options.renderer=this._canvasRenderObj),t._graphicLayer=this,t.addEventParent(this),L.LayerGroup.prototype.addLayer.call(this,t),this.fire("graphicadd",{graphic:t}))},add:function(t){return this.addGraphic(t)},setMaxZoom:function(t){this.options.maxZoom=t;for(var e in this._layers)this._layers[e].setMaxZoom(t);return this},getMaxZoom:function(){return this.options.maxZoom},setMinZoom:function(t){this.options.minZoom=t;for(var e in this._layers)this._layers[e].setMinZoom(t);return this},getMinZoom:function(){return this.options.minZoom},removeGraphics:function(t){if(0==arguments.length)return this.clearGraphics(),this;for(var e=0,i=t.length;e<i;e++)return this.hasGraphic(t[e])?this._removeGraphicHandle(t[e]):this},removeMany:function(t){if(!t||0==t.length)return this;for(var e=0,i=t.length;e<i;e++){if(!this.hasGraphic(t[e]))return this;this._removeGraphicHandle(t[e])}},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),this._layers[e]&&this._layers[e].removedrawnlayers&&this._layers[e].removedrawnlayers(),delete this._layers[e],e=null,this},_removeGraphicHandle:function(t){t.removeEventParent(this),this.removeLayer(t),"function"==typeof t._symbol._remove&&t.symbol._remove(),this.fire("graphicremove",{graphic:t})},removeGraphic:function(t){return this._removeGraphicHandle(t)},hasGraphic:function(t){return this.hasLayer(t)},moveToTop:function(){var t=this._getMaxOrMinZindex("max");return t&&(this._canvasRenderObj._container.style["z-index"]=t+1),this},moveToBottom:function(){var t=this._getMaxOrMinZindex("min");return t&&(this._canvasRenderObj._container.style["z-index"]=t-1),this},_getMaxOrMinZindex:function(t){var e=this._canvasRenderObj._container;if(e){for(var i,n=e.parentNode.querySelectorAll("canvas"),s=0,o=n.length;s<o;s++){var r,a=window.getComputedStyle?window.getComputedStyle(n[s],null):n[s].currentStyle;a&&(r=parseInt(a["z-index"]))&&(i=i?Math[t](i,r):r)}return i}},getGraphic:function(t){return L.LayerGroup.prototype.getLayer.call(this,t),this._layers[t]},getGraphics:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},getGraphicId:function(t){return L.stamp(t)},clearGraphics:function(){for(var t in this._layers)this._removeGraphicHandle(this._layers[t]);return this._canvasRenderObj._map&&this._canvasRenderObj._update(),this},_canvasUpdate:function(){this._canvasRenderObj._map&&this._canvasRenderObj._update()},removeAll:function(){return this.clearGraphics()},refresh:function(){if(this._layers&&0!=this._layers.length&&void 0!=this._layers.length){for(var t in this._layers)this._layers[t].refresh();return this}},refreshmutlipoint:function(){this._canvasRenderObj._updatePaths()},onRemove:function(t){for(var e in this._layers){var i=this._layers[e];try{"function"==typeof i._symbol._remove&&i.symbol._remove()}catch(t){}t.removeLayer(this._layers[e]),this._layers[e]=void 0}this._canvasRenderObj._container&&this._canvasRenderObj.onRemove()},getType:function(){return n.Layer.GRAPHICSLAYER}});e.exports.GraphicsLayer=r,e.exports.graphicsLayer=function(t,e){return new r(t,e)}},{"../Features/Graphic":36,"./../Render/GISCanvas":128,"./Layer":107}],104:[function(t,e,i){"use strict";var n=L.LayerGroup.extend({options:{name:"GroupLayer"+L.stamp(this),layers:void 0,interactive:!0,maxLevel:void 0,minLevel:void 0,visible:!0},_orderList:{overlayPane:[],tilePane:[]},initialize:function(t){L.setOptions(this,t),this._layers={};var e=this.options.layers;this.addMany(e)},add:function(t){return this.addLayer(t),this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e]);this.fire("layeradd",{layers:this._layers})},addMany:function(t){if("[object Array]"===Object.prototype.toString.call(t))for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e]);return this},findLayerById:function(t){return this._layer[t]},findAll:function(){return this.getLayers()},remove:function(t){return this.removeLayer(t),this},removeAll:function(){return this.clearLayers(),this},removeMany:function(t){return this.invoke("removeLayer"),this},moveToTop:function(t,e){return this.invoke("bringToFront"),this},moveToBottom:function(t,e){return this.invoke("bringToBack"),this},setVisible:function(t){return this.options.visible=t,this.invoke("setVisible",t),this},setInteractive:function(t){return this.options.interactive=t,this.invoke("setInteractive",t),this},setMaxLevel:function(t){return this.options.MaxLevel=t,this.invoke("setMaxLevel",t),this},setMinLevel:function(t){return this.options.MinLevel=t,this.invoke("setMinLevel",t),this},getVisible:function(){return this.options.visible},getInteractive:function(){return this.options.interactive},getMaxLevel:function(){return this.options.MaxLevel},getMinLevel:function(){return this.options.MinLevel},refresh:function(){return this.invoke("refresh"),this},getName:function(){return this.options.name},reorder:function(t,e){if(this._isInGroup(t)){var e=e;if(!t.getPane)return!1;var i,n=t.getPane(),s=n.children,o=t._canvasRenderObj._container,r=[];for(var a in this._layers){var l=this._inArray(s,this._layers[a]._canvasRenderObj._container);l>-1&&r.push(l)}return r.sort(),i=r.length,e=e>i-1?i-1:e,e=e<0?0:e,e===i-1?n.appendChild(o):n.insertBefore(o,s[r[e]]),this}},_inArray:function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},_isInGroup:function(t){var e=this.getLayerId(t);return!!this._layers[e]}});e.exports.GroupLayer=n,e.exports.groupLayer=function(t){return new n(t)}},{}],105:[function(t,e,i){"use strict";var n=t("egis-heatmap"),s=n.extend({});e.exports.HeatLayer=s,e.exports.heatLayer=function(t,e){return new s(t,e)}},{"egis-heatmap":300}],106:[function(t,e,i){"use strict";var n=L.ImageOverlay.extend({initialize:function(t,e,i){var n;n=L.Util.isArray(e)?[[e[0][1],e[0][0]],[e[1][1],e[1][0]]]:[[e.getYmax(),e.getXmax()],[e.getYmin(),e.getXmin()]],this._url=t,L.ImageOverlay.prototype.initialize.call(this,t,n,i)},onAdd:function(t){this._topLeft=t.getPixelBounds().min,L.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===L.CRS.EPSG3857||this._map.options.crs===L.CRS.EPSG4326?L.ImageOverlay.prototype._reset.call(this):this._map.options.crs&&this._map.options.crs.code==-1?L.ImageOverlay.prototype._reset.call(this):L.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))},setZIndex:function(t){return this.options.zIndex=t,this._image&&(this._image.style.zIndex=t),this},getUrl:function(){return this._url}});e.exports.ImageryLayer=n,e.exports.imageryLayer=function(t,e,i){return new n(t,e,i)}},{}],107:[function(t,e,i){"use strict";var n=L.Layer.extend({statics:{CARELANDTILELAYER:"carelandTileLayer",COLLISIONGRAPHICSLAYER:"collisionGraphicsLayer",DYNAMICLAYER:"dynamicLayer",ECHARTTHEMELAYER:"eChartThemeLayer",ARCGISTILELAYER:"arcgisTileLayer",EGISDYNAMICLAYER:"epgisDynamicLayer",EGISRRLAYER:"epgisRRLayer",EGISTILELAYER:"epgisTileLayer",FEATURESLAYER:"featuresLayer",GRAPHICSLAYER:"graphicsLayer",RASTERLAYER:"rasterLayer",GEOSERVERWMSLAYER:"geoServerWMSLayer",EGISTILEDMAPSERVICELAYER:"epgisTiledMapServiceLayer",HEATLAYER:"heatLayer",VECTORTILELAYER:"VectorTileLayer",FLOWANIMATELAYER:"flowAnimateLayer",FLICKERANIMATELAYER:"flickerAnimateLayer",ANIMATELAYER:"animateLayer",SGLayer:"sgLayer",HYPSOMETRICLAYER:"hypsometricLayer",HYPSOMETRICPOINTLAYER:"hypsometricPointLayer",HYPSOMETRICPOLYGONLAYER:"hypsometricPolygonLayer",ARCGISDYNAMICLAYER:"arcgisDynamicLayer"},options:{name:"layer"+L.stamp(this),lyrId:""},getName:function(){return this.options.name},setName:function(t){return this.options.name=t,this},getLyrId:function(){return this.options.lyrId},setLyrId:function(t){return this.options.lyrId=t,this},onAdd:function(t){return this},onRemove:function(t){return this},getAttribution:function(){return""},beforeAdd:function(t){return this},getType:function(){return"Layer"}});e.exports.Layer=n},{}],108:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,i){function n(s,o){try{var a=e[s](o),l=a.value}catch(t){return void i(t)}if(!a.done)return r.default.resolve(l).then(function(t){n("next",t)},function(t){n("throw",t)});t(l)}return n("next")})}}var o=t("babel-runtime/core-js/promise"),r=n(o),a=t("babel-runtime/core-js/object/keys"),l=n(a),h=t("babel-runtime/regenerator"),u=n(h),c=t("babel-runtime/core-js/map"),p=n(c),d=t("babel-runtime/core-js/get-iterator"),y=n(d),f=t("./Layer"),_=f.Layer.extend({options:{jsurl:"https://map.epgis.com.cn/api/epgis-js-1.1.5.15.min.js",cssurl:"https://map.epgis.com.cn/api/epgis-1.1.5.15.css",key:"0d6576705126366ca50dc9addf85ebf8",sn:"839929593a3d3a3a95c5627936d3a875",style:"aegis://styles/aegis/Streets",name:f.Layer.SGMapLayer+""+L.stamp(this),updateInterval:32,isSatellite:!1},addTo:function(t){return t.addLayer(this),this},initialize:function(t){t.isSatellite?this._addlayer=!0:this._addlayer=!1,E.setOptions(this,t);this._throttledUpdate=function(t,e,i){var n,s,o,r;return r=function(){n=!1,s&&(o.apply(i,s),s=!1)},o=function(){n?s=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}(E.Util.bind(this._update,this),this.options.updateInterval)},onAdd:function(t){var e=this;this.issuccess=!0,this.dynamicLoadCss(this.options.cssurl),this.dynamicLoadJs(this.options.jsurl,function(){e._init(t)})},_init:function(t){var e=this;!function(){var i=s(u.default.mark(function i(){var n,s,o,r,a,l;return u.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,epgis.tokenTask.login(e.options.key,e.options.sn);case 2:if(i.prev=2,!epgis.tokenTask._accessToken){i.next=27;break}if(e.sgMapInit(e,t),!window.lyrs){i.next=25;break}for(n=!0,s=!1,o=void 0,i.prev=9,r=(0,y.default)(window.lyrs);!(n=(a=r.next()).done);n=!0)l=a.value,e.sgMapInit(l[1],l[0]);i.next=17;break;case 13:i.prev=13,i.t0=i.catch(9),s=!0,o=i.t0;case 17:i.prev=17,i.prev=18,!n&&r.return&&r.return();case 20:if(i.prev=20,!s){i.next=23;break}throw o;case 23:return i.finish(20);case 24:return i.finish(17);case 25:i.next=29;break;case 27:window.lyrs||(window.lyrs=new p.default),window.lyrs.set(t,e);case 29:i.next=35;break;case 31:i.prev=31,i.t1=i.catch(2),console.log("test"),e.issuccess=!1;case 35:case"end":return i.stop()}},i,this,[[2,31],[9,13,17,25],[18,,20,24]])}));return function(){return i.apply(this,arguments)}}()()},sgMapInit:function(t,e){t._glContainer||t._initContainer(),t.getPane().appendChild(t._glContainer),t._initGL(),t._offset=t._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&E.DomEvent.on(e._proxy,E.DomUtil.TRANSITION_END,t._transitionEnd,t)},onRemove:function(t){this._map._proxy&&this._map.options.zoomAnimation&&E.DomEvent.off(this._map._proxy,E.DomUtil.TRANSITION_END,this._transitionEnd,this),this.getPane().removeChild(this._glContainer),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd}},_initContainer:function(){var t=this._glContainer=E.DomUtil.create("div","egis-gl-layer"),e=this._map.getSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.style.zIndex=0},_initGL:function(){var t=this,e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat);e=L.latLng(i.y,i.x);var n=E.extend({},this.options,{container:this._glContainer,interactive:!1,center:[e.lng,e.lat],zoom:this._map.getZoom()-1,maxZoom:this._map.options.maxZoom,attributionControl:!1});this._glMap=new epgis.Map(n),this._glMap.transform.latRange=null,this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas,E.DomUtil.addClass(this._glMap._actualCanvas,"egis-image-layer"),E.DomUtil.addClass(this._glMap._actualCanvas,"egis-zoom-animated"),this._glMap.on("load",function(e){t.addLayer();var i=t._map.containerPointToLayerPoint([0,0]);E.DomUtil.setPosition(t._glContainer,i),i=null,t.fire("mapLoaded",t._glMap)}),e=null,i=null,e=null,n=null},setStyle:function(t){this._glMap.setStyle(t)},setTileType:function(t){var e=this;(new epgis.ServiceTask).ajax({url:epgis.tokenTask.getStyleUrl(t),method:"GET"}).then(function(t){var i=t.layers;i&&i.forEach(function(t){t.layout&&(0,l.default)(t.layout).forEach(function(i){e._glMap.setLayoutProperty(t.id.toString(),i.toString(),t.layout[i])}),t.paint&&(0,l.default)(t.paint).forEach(function(i){e._glMap.setPaintProperty(t.id.toString(),i.toString(),t.paint[i])})})})},setisSatellite:function(t){t&&!this._glMap.getLayer("simple-tiles6")?(this._glMap.addLayer({id:"simple-tiles6",source:{type:"raster",url:"aegis://aegis.Satellite512.json",tileSize:512},type:"raster",minzoom:0,maxzoom:20}),this._glMap.moveLayer("simple-tiles6","Water/5")):!t&&this._glMap.getLayer("simple-tiles6")&&(this._glMap.removeLayer("simple-tiles6"),this._glMap.removeSource("simple-tiles6"))},addLayer:function(t){this._addlayer&&!this._glMap.getLayer("simple-tiles6")?(this._glMap.addLayer({id:"simple-tiles6",source:{type:"raster",url:"aegis://aegis.Satellite512.json",tileSize:512},type:"raster",minzoom:0,maxzoom:20}),this._glMap.moveLayer("simple-tiles6","Water/5")):!this._addlayer&&this._glMap.getLayer("simple-tiles6")&&(this._glMap.removeLayer("simple-tiles6"),this._glMap.removeSource("simple-tiles6"))},resize:function(){this._glMap&&this._glMap.resize()},_update:function(t){if(this.issuccess&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var e=this._map.getSize(),i=this._glContainer,n=this._glMap,s=this._map.containerPointToLayerPoint([0,0]);if(n){i&&E.DomUtil.setPosition(i,s);var o=this._map.getCenter(),r=egis.tool.Util.projectWebMercatorToLngLat(o.lng,o.lat);o=L.latLng(r.y,r.x);var a=n.transform;a.center=epgis.LngLat.convert([o.lng,o.lat]),a.zoom=this._map.getZoom()-1,n.transform.width!==e.x||n.transform.height!==e.y?(i.style.width=e.x+"px",i.style.height=e.y+"px",null!==n._resize&&void 0!==n._resize?n._resize():n.resize()):null!==n._update&&void 0!==n._update?n._update():n.update()}}},_pinchZoom:function(t){if(this.issuccess){var e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat),e=L.latLng(i.y,i.x);this._glMap&&this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:e})}},_animateZoom:function(t){if(this.issuccess){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),t.zoom,t.center);this._glMap&&E.DomUtil.setTransform(this._glMap._actualCanvas,i.subtract(this._offset),e)}},_zoomStart:function(t){this.issuccess&&(this._zooming=!0)},_zoomEnd:function(){if(this.issuccess){var t=this._map.getZoomScale(this._map.getZoom()),e=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),this._map.getZoom(),this._map.getCenter());this._glMap&&E.DomUtil.setTransform(this._glMap._actualCanvas,e.subtract(this._offset),t),this._zooming=!1;var i=this._map.containerPointToLayerPoint([0,0]);this._glContainer&&E.DomUtil.setPosition(this._glContainer,i)}},_transitionEnd:function(t){E.Util.requestAnimFrame(function(){var t=this._map.getZoom(),e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat),e=L.latLng(i.y,i.x),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._glMap&&(E.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",E.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:e,zoom:t-1}))},this)},getType:function(){return f.Layer.SGMapLayer},dynamicLoadCss:function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.appendChild(i)},dynamicLoadJs:function(t,e){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=t,"function"==typeof e&&(n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(),n.onload=n.onreadystatechange=null)}),i.appendChild(n)}});e.exports.SGLayer=_,e.exports.sgLayer=function(t){return new _(t)}},{"./Layer":107,"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/map":165,"babel-runtime/core-js/object/keys":170,"babel-runtime/core-js/promise":172,"babel-runtime/regenerator":175}],109:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,i){function n(s,o){try{var a=e[s](o),l=a.value}catch(t){return void i(t)}if(!a.done)return r.default.resolve(l).then(function(t){n("next",t)},function(t){n("throw",t)});t(l)}return n("next")})}}var o=t("babel-runtime/core-js/promise"),r=n(o),a=t("babel-runtime/core-js/object/keys"),l=n(a),h=t("babel-runtime/regenerator"),u=n(h),c=t("babel-runtime/core-js/map"),p=n(c),d=t("babel-runtime/core-js/get-iterator"),y=n(d),f=t("./Layer"),_=f.Layer.extend({options:{jsurl:"https://map.epgis.com.cn/api/epgis-js-1.1.5.15.min.js",cssurl:"https://map.epgis.com.cn/api/epgis-1.1.5.15.css",key:"0d6576705126366ca50dc9addf85ebf8",sn:"839929593a3d3a3a95c5627936d3a875",style:"aegis://styles/aegis/Streets",name:f.Layer.SGMapLayer+""+L.stamp(this),updateInterval:32,isSatellite:!1},addTo:function(t){return t.addLayer(this),this},initialize:function(t){t.isSatellite?this._addlayer=!0:this._addlayer=!1,E.setOptions(this,t);this._throttledUpdate=function(t,e,i){var n,s,o,r;return r=function(){n=!1,s&&(o.apply(i,s),s=!1)},o=function(){n?s=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}}(E.Util.bind(this._update,this),this.options.updateInterval)},onAdd:function(t){var e=this;this.issuccess=!0,this.dynamicLoadCss(this.options.cssurl),this.dynamicLoadJs(this.options.jsurl,function(){e._init(t)})},_init:function(t){var e=this;!function(){var i=s(u.default.mark(function i(){var n,s,o,r,a,l;return u.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,SGMap.tokenTask.login(e.options.key,e.options.sn);case 2:if(i.prev=2,!SGMap.tokenTask._accessToken){i.next=27;break}if(e.sgMapInit(e,t),!window.lyrs){i.next=25;break}for(n=!0,s=!1,o=void 0,i.prev=9,r=(0,y.default)(window.lyrs);!(n=(a=r.next()).done);n=!0)l=a.value,e.sgMapInit(l[1],l[0]);i.next=17;break;case 13:i.prev=13,i.t0=i.catch(9),s=!0,o=i.t0;case 17:i.prev=17,i.prev=18,!n&&r.return&&r.return();case 20:if(i.prev=20,!s){i.next=23;break}throw o;case 23:return i.finish(20);case 24:return i.finish(17);case 25:i.next=29;break;case 27:window.lyrs||(window.lyrs=new p.default),window.lyrs.set(t,e);case 29:i.next=35;break;case 31:i.prev=31,i.t1=i.catch(2),console.log("test"),e.issuccess=!1;case 35:case"end":return i.stop()}},i,this,[[2,31],[9,13,17,25],[18,,20,24]])}));return function(){return i.apply(this,arguments)}}()()},sgMapInit:function(t,e){t._glContainer||t._initContainer(),t.getPane().appendChild(t._glContainer),t._initGL(),t._offset=t._map.containerPointToLayerPoint([0,0]),e.options.zoomAnimation&&E.DomEvent.on(e._proxy,E.DomUtil.TRANSITION_END,t._transitionEnd,t)},onRemove:function(t){this._map._proxy&&this._map.options.zoomAnimation&&E.DomEvent.off(this._map._proxy,E.DomUtil.TRANSITION_END,this._transitionEnd,this),this.getPane().removeChild(this._glContainer),this._glMap.remove(),this._glMap=null},getEvents:function(){return{move:this._throttledUpdate,zoomanim:this._animateZoom,zoom:this._pinchZoom,zoomstart:this._zoomStart,zoomend:this._zoomEnd}},_initContainer:function(){var t=this._glContainer=E.DomUtil.create("div","egis-gl-layer"),e=this._map.getSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.style.zIndex=0},_initGL:function(){var t=this,e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat);e=L.latLng(i.y,i.x);var n=E.extend({},this.options,{container:this._glContainer,interactive:!1,center:[e.lng,e.lat],zoom:this._map.getZoom()-1,maxZoom:this._map.options.maxZoom,attributionControl:!1});this._glMap=new SGMap.Map(n),this._glMap.transform.latRange=null,
this._glMap._canvas.canvas?this._glMap._actualCanvas=this._glMap._canvas.canvas:this._glMap._actualCanvas=this._glMap._canvas,E.DomUtil.addClass(this._glMap._actualCanvas,"egis-image-layer"),E.DomUtil.addClass(this._glMap._actualCanvas,"egis-zoom-animated"),this._glMap.on("load",function(e){t.addLayer();var i=t._map.containerPointToLayerPoint([0,0]);E.DomUtil.setPosition(t._glContainer,i),i=null,t.fire("mapLoaded",t._glMap)}),e=null,i=null,e=null,n=null},setStyle:function(t){this._glMap.setStyle(t)},setTileType:function(t){var e=this;(new SGMap.ServiceTask).ajax({url:SGMap.tokenTask.getStyleUrl(t),method:"GET"}).then(function(t){var i=t.layers;i&&i.forEach(function(t){t.layout&&(0,l.default)(t.layout).forEach(function(i){e._glMap.setLayoutProperty(t.id.toString(),i.toString(),t.layout[i])}),t.paint&&(0,l.default)(t.paint).forEach(function(i){e._glMap.setPaintProperty(t.id.toString(),i.toString(),t.paint[i])})})})},setisSatellite:function(t){t&&!this._glMap.getLayer("simple-tiles6")?(this._glMap.addLayer({id:"simple-tiles6",source:{type:"raster",url:"aegis://aegis.Satellite512.json",tileSize:512},type:"raster",minzoom:0,maxzoom:20}),this._glMap.moveLayer("simple-tiles6","Water/5")):!t&&this._glMap.getLayer("simple-tiles6")&&(this._glMap.removeLayer("simple-tiles6"),this._glMap.removeSource("simple-tiles6"))},addLayer:function(t){this._addlayer&&!this._glMap.getLayer("simple-tiles6")?(this._glMap.addLayer({id:"simple-tiles6",source:{type:"raster",url:"aegis://aegis.Satellite512.json",tileSize:512},type:"raster",minzoom:0,maxzoom:20}),this._glMap.moveLayer("simple-tiles6","Water/5")):!this._addlayer&&this._glMap.getLayer("simple-tiles6")&&(this._glMap.removeLayer("simple-tiles6"),this._glMap.removeSource("simple-tiles6"))},resize:function(){this._glMap&&this._glMap.resize()},_update:function(t){if(this.issuccess&&(this._offset=this._map.containerPointToLayerPoint([0,0]),!this._zooming)){var e=this._map.getSize(),i=this._glContainer,n=this._glMap,s=this._map.containerPointToLayerPoint([0,0]);if(n){i&&E.DomUtil.setPosition(i,s);var o=this._map.getCenter(),r=egis.tool.Util.projectWebMercatorToLngLat(o.lng,o.lat);o=L.latLng(r.y,r.x);var a=n.transform;a.center=SGMap.LngLat.convert([o.lng,o.lat]),a.zoom=this._map.getZoom()-1,n.transform.width!==e.x||n.transform.height!==e.y?(i.style.width=e.x+"px",i.style.height=e.y+"px",null!==n._resize&&void 0!==n._resize?n._resize():n.resize()):null!==n._update&&void 0!==n._update?n._update():n.update()}}},_pinchZoom:function(t){if(this.issuccess){var e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat),e=L.latLng(i.y,i.x);this._glMap&&this._glMap.jumpTo({zoom:this._map.getZoom()-1,center:e})}},_animateZoom:function(t){if(this.issuccess){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),t.zoom,t.center);this._glMap&&E.DomUtil.setTransform(this._glMap._actualCanvas,i.subtract(this._offset),e)}},_zoomStart:function(t){this.issuccess&&(this._zooming=!0)},_zoomEnd:function(){if(this.issuccess){var t=this._map.getZoomScale(this._map.getZoom()),e=this._map._latLngToNewLayerPoint(this._map.getBounds().getNorthWest(),this._map.getZoom(),this._map.getCenter());this._glMap&&E.DomUtil.setTransform(this._glMap._actualCanvas,e.subtract(this._offset),t),this._zooming=!1;var i=this._map.containerPointToLayerPoint([0,0]);this._glContainer&&E.DomUtil.setPosition(this._glContainer,i)}},_transitionEnd:function(t){E.Util.requestAnimFrame(function(){var t=this._map.getZoom(),e=this._map.getCenter(),i=egis.tool.Util.projectWebMercatorToLngLat(e.lng,e.lat),e=L.latLng(i.y,i.x),n=this._map.latLngToContainerPoint(this._map.getBounds().getNorthWest());this._glMap&&(E.DomUtil.setTransform(this._glMap._actualCanvas,n,1),this._glMap.once("moveend",E.Util.bind(function(){this._zoomEnd()},this)),this._glMap.jumpTo({center:e,zoom:t-1}))},this)},getType:function(){return f.Layer.SGMapLayer},dynamicLoadCss:function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=t,e.appendChild(i)},dynamicLoadJs:function(t,e){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=t,"function"==typeof e&&(n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e(),n.onload=n.onreadystatechange=null)}),i.appendChild(n)}});e.exports.SGLayer=_,e.exports.sgLayer=function(t){return new _(t)}},{"./Layer":107,"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/map":165,"babel-runtime/core-js/object/keys":170,"babel-runtime/core-js/promise":172,"babel-runtime/regenerator":175}],110:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/get-iterator"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("../../Features/Graphic").Graphic,r=L.Evented.extend({options:{isSource:!1,lyrIds:[]},initialize:function(t,e){this._map=t,L.Util.setOptions(this,e)},queryRenderedFeatures:function(t){var e=this._map.getFeatureCache(),i=[],n=!0,o=!1,r=void 0;try{for(var a,l=(0,s.default)(e);!(n=(a=l.next()).done);n=!0){var h=a.value,u=h[1];if(u){var c=!0,p=!1,d=void 0;try{for(var y,f=(0,s.default)(u);!(c=(y=f.next()).done);c=!0)for(var _=y.value,m=0;m<t.length;m++)_[0]&&_[1].getAttribute().psrid&&_[1].getAttribute().psrid==t[m]&&i.push(this.getExactlyResult(_[1],this.options.isSource))}catch(t){p=!0,d=t}finally{try{!c&&f.return&&f.return()}finally{if(p)throw d}}}}}catch(t){o=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(o)throw r}}return i},getExactlyResult:function(t,e){if(e)return t;var i={};for(var n in t.getAttribute())i[n]=t.getAttribute()[n];return new o(t.getGeometry().clone(),t.getSymbol().clone(),i)}});e.exports.AttrQuery=r,e.exports.attrQuery=function(t){return new r(t)}},{"../../Features/Graphic":36,"babel-runtime/core-js/get-iterator":162}],111:[function(t,e,i){"use strict";var n=t("../FlickerAnimateLayer").FlickerAnimateLayer,s=t("../../Features/Graphic").Graphic,o=(t("../../Util").Util,L.Evented.extend({initialize:function(t,e){this._map=t,this._data=[],this._color="#ff99ff",this._updaterate=1e3,e&&(this._color=e.color||this._color,this._scale=e.scale,this._updaterate=e.updaterate||this._updaterate),this._graphicsLayer=null,this._graphicsLayer||(this._updaterate?this._graphicsLayer=new n({},{updateRate:this._updaterate}):this._graphicsLayer=new n),t.hasLayer(this._graphicsLayer)||t.addLayer(this._graphicsLayer)},setUpdateRate:function(t){this._graphicsLayer.setUpdateRate(t)},getColor:function(){return this._color},setColor:function(t){this._color=t},clearHighlight:function(){this._data=[],this._graphicsLayer.clearGraphics(),this._graphicsLayer.refresh(),this._map.removeLayer(this._graphicsLayer)},add:function(t){t instanceof s||(t=this.queryRenderedFeatures([t])[0]);var e=t.getSymbol();e.setColor(this._color),e.setOutLineColor&&e.setOutLineColor(this._color),this._data&&this._data.indexOf(t)==-1&&this._data.push(t),this._graphicsLayer.addGraphic(t)},addGraphics:function(t){t[0]instanceof s||(t=this.queryRenderedFeatures(t));for(var e=t.length,i=0;i<e;i++){var n,o=t[i],r=o.getSymbol();n=(r.setOutLineColor,this._color),"EleLineSymbol"==r.getType()&&this._scale&&r.setScale(this._scale),r.setColor(n),r.setOutLineColor&&r.setOutLineColor(this._color),"EleFillSymbol"==r.getType()&&r.setColor("rgba(255,0,255,0.5)"),o.setSymbol(r)}this._data=this._concat(this._data,t),this._graphicsLayer.addGraphics(t)},queryRenderedFeatures:function(t){for(var e=this._map.getFeatureCache(),i=[],n=0;n<t.length;n++){var s,o=t[n][0],r=t[n][1],a=e.get(o);s=a?a.get(o+"|"+r+"svr"):void 0,s&&i.push(this.getExactlyResult(s,!1))}return i},getExactlyResult:function(t,e){if(e)return t;var i={};for(var n in t.getAttribute())i[n]=t.getAttribute()[n];return new s(t.getGeometry().clone(),t.getSymbol().clone(),i)},remove:function(t){if(!(t<-1||t>=this._data.length)){var e=this._data[t];this._data.splice(t,1),this._graphicsLayer.removeGraphic(e)}},indexOf:function(t){return this._data.indexOf(t)},getCount:function(){return this._data.length},getGraphic:function(t){return this._data[t]},getGraphics:function(){return this._data},setSelectionColor:function(t){this._color=t;for(var e=this._graphicsLayer.getGraphics(),i=e.length,n=0;n<i;n++){var s=e[n],o=s.getSymbol();o.setColor(this._color),o.setOutLineColor(this._color),s.setSymbol(o)}},getSelctionColor:function(){return this._color},_concat:function(t,e){for(var i=t.concat(),n=0;n<e.length;n++)i.indexOf(e[n])===-1&&i.push(e[n]);return i}}));e.exports=o,e.exports.RenderedHighLight=o},{"../../Features/Graphic":36,"../../Util":154,"../FlickerAnimateLayer":101}],112:[function(t,e,i){"use strict";var n=t("../GraphicsLayer").GraphicsLayer,s=(t("../../Util").Util,L.Evented.extend({data:[],initialize:function(t){this.data=[],this._color="#ff99ff",this._graphicsLayer=null,this._graphicsLayer||(this._graphicsLayer=new n),t.hasLayer(this._graphicsLayer)||t.addLayer(this._graphicsLayer)},getColor:function(){return this._color},setColor:function(t){this._color=t},clearSelection:function(){this.data=[],this._graphicsLayer.clearGraphics(),this.isMultiupdate&&this._graphicsLayer.refreshmutlipoint(),this._graphicsLayer.refresh()},refresh:function(){this._graphicsLayer._canvasUpdate()},add:function(t){var e,i=t.getSymbol();e=(i.setOutLineColor,this._color),i.setColor(e),i.setOutLineColor&&i.setOutLineColor(this._color),this.data&&this.data.indexOf(t)==-1&&this.data.push(t),"multiPoint"==t.getGeometry().getType()&&(this.isMultiupdate=!0),this._graphicsLayer.addGraphic(t),this.isMultiupdate&&this._graphicsLayer.refreshmutlipoint()},addGraphics:function(t){for(var e=t.length,i=0;i<e;i++){var n=t[i];n.options?n.options.interactive=!1:n.options={interactive:!1};var s,o=n.getSymbol();s=(o.setOutLineColor,this._color),o.setColor(s),o.setOutLineColor&&(o.setOutLineColor(this._color),"EleFillSymbol"==o.getType()&&o.setColor("rgba(255,0,255,0.5)")),n.setSymbol(o),"multiPoint"==n.getGeometry().getType()&&(this.isMultiupdate=!0)}this.data=this._concat(this.data,t),this._graphicsLayer.addGraphics(t),this.isMultiupdate&&this._graphicsLayer.refreshmutlipoint()},remove:function(t){if(!(t<-1||t>=this.data.length)){var e=this.data[t];this.data.splice(t,1),this._graphicsLayer.removeGraphic(e)}},getSelectData:function(){return this.data},indexOf:function(t){return this.data.indexOf(t)},getCount:function(){return this.data.length},getGraphic:function(t){return this.data[t]},setSelectionColor:function(t){this._color=t;for(var e=this._graphicsLayer.getGraphics(),i=e.length,n=0;n<i;n++){var s,o=e[n],r=o.getSymbol();s=(r.setOutLineColor,this._color),r.setColor(s),r.setOutLineColor&&r.setOutLineColor(this._color),o.setSymbol(r)}},getSelectionColor:function(){return this._color},_concat:function(t,e){for(var i=t.concat(),n=0;n<e.length;n++)i.indexOf(e[n])===-1&&i.push(e[n]);return i}}));e.exports=s,e.exports.SelectionSet=s},{"../../Util":154,"../GraphicsLayer":103}],113:[function(t,e,i){"use strict";var n=t("../../Geometry/Geometry").Geometry,s=t("../../Geometry/Polygon").Polygon,o=t("../../Features/Graphic").Graphic,r=(t("../../workers/QuadTree").QuadTreeNode,L.Evented.extend({statics:{SpatialRelTouches:0,SpatialRelCrosses:1,SpatialRelOverlaps:2,SpatialRelWithin:3,SpatialRelIntersects:4},options:{isSource:!1,lyrIds:[]},initialize:function(t,e){this._map=t,L.Util.setOptions(this,e)},queryFeatures:function(t,e){switch(e){case r.SpatialRelIntersects:this._map.getFeatureCache();switch(t.getType()){case geometryObj.Geometry.POINT:break;case geometryObj.Geometry.POLYLINE:break;case geometryObj.Geometry.POLYGON:}}},queryRenderedFeatures:function(t){if(t&&(t.getType()==n.POLYGON||t.getType()==n.EXTENT)){var e=t.getExtent(),i=this._map.quadtree;if(null==i||null==i.treeNodes||0==i.treeNodes.length)return[];var o=this.options.lyrIds,r=this._map.getFeatureCache(),a=i.getNodes(e);r=i.getLyrCache(o,r,this._map);var l=[],h=t;if(t.getType()==n.EXTENT){var u=[[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]]];h=new egis.geometry.Polygon(u)}for(var c=0;c<a.length;c++){var p=a[c],d=r.get(p);if(d){var y=d.getGeometry();switch(y.getType()){case n.POLYGON:if(!this.intersectsPolygonAndPolygon(y.getRing(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource));break;case n.POLYLINE:if(!this.intersetsPolylineAndPolygon(y.getPath(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource));break;case n.MULTIPOINT:var f=this._map.layerPointToLatLng(d._pxBounds.min),_=this._map.layerPointToLatLng(d._pxBounds.max),m=new s([[[f.lng,f.lat],[f.lng,_.lat],[_.lng,_.lat],[_.lng,f.lat],[f.lng,f.lat]]]);if(!this.intersectsPolygonAndPolygon(m.getRing(0),h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource));break;case n.POINT:if(!this.containsPointByLinearRing(y,h.getRing(0))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource))}}}return l}},queryRenderedeleSymbolFeatures:function(t,e){if(t&&(t.getType()==n.POLYGON||t.getType()==n.EXTENT)){var i=t.getExtent(),o=this._map.quadtree;if(null==o||null==o.treeNodes||0==o.treeNodes.length)return[];var r=this._map.getFeatureCache(),a=o.getNodes(i);r=o.getLyrCache(e,r,this._map);var l=[],h=t;if(t.getType()==n.EXTENT){var u=[[[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin]]];h=new s(u)}for(var c=0;c<a.length;c++){var p=a[c],d=r.get(p);if(d){var y=void 0;y=d.labels?d.geometry:d.getGeometry();var f=void 0;switch(y.getType()){case n.POLYGON:if(!(f=this.intersectsPolygonAndPolygon(y.getRing(0),h.getRing(0)))){a.splice(c,1),c--;break}if(d.labels)for(var _=0;_<d.labels.length;_++)l.push(this.getExactlyResult(d.labels[_],this.options.isSource));else l.push(this.getExactlyResult(r.get(p),this.options.isSource));break;case n.POLYLINE:if(!(f=this.intersetsPolylineAndPolygon(y.getPath(0)[0],h.getRing(0)))){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource));break;case n.CIRCLE:case n.POINT:var m={};if(d._pxBounds){m=d._pxBounds;var g={};g.min=this._map.layerPointToLatLng(m.min),g.max=this._map.layerPointToLatLng(m.max);var u=[[[g.min.lng,g.min.lat],[g.max.lng,g.min.lat],[g.max.lng,g.max.lat],[g.min.lng,g.max.lat],[g.min.lng,g.min.lat]]],v=new s(u);f=this.intersectsPolygonAndPolygon(v.getRing(0),h.getRing(0))}else f=this.containsPointByLinearRing(y,h.getRing(0));if(!f){a.splice(c,1),c--;break}l.push(this.getExactlyResult(r.get(p),this.options.isSource))}}}return l}},getExactlyResult:function(t,e){if(e)return t;var i={};for(var n in t.getAttribute())i[n]=t.getAttribute()[n];return new o(t.getGeometry().clone(),t.getSymbol().clonenew(),i)},intersectsPolygonAndPolygon:function(t,e){function i(t,e){function i(t,e){var i=0;return e>0&&(i=parseFloat(t.toPrecision(e))),i}for(var n,s,o,r,a,l,h,u=i(t.x,14),c=i(t.y,14),p=e.length-1,d=0,y=0;y<p;++y)if(n=e[y],o=i(n.x,14),r=i(n.y,14),s=e[y+1],a=i(s.x,14),l=i(s.y,14),r!=l){if((h=i(function(t,e,i,n,s){return(n-e)/(s-i)*(t-s)+n}(c,o,r,a,l),14))==u&&(r<l&&c>=r&&c<=l||r>l&&c<=r&&c>=l)){d=-1;break}h<=u||o!=a&&(h<Math.min(o,a)||h>Math.max(o,a))||(r<l&&c>=r&&c<l||r>l&&c<r&&c>=l)&&++d}else if(c==r&&(o<=a&&u>=o&&u<=a||o>=a&&u<=o&&u>=a)){d=-1;break}return d==-1?1:!!(1&d)}function n(t,e){var i,n,r,a,l,h,u,c,p=!1,d=s(t),y=s(e);t:for(var f=0,_=d.length;f<_;++f){i=d[f],n=i.x1,r=i.x2,a=i.y1,l=i.y2;for(var m=0,g=y.length;m<g&&(h=y[m],!(h.x1>r));++m)if(!(h.x2<n)&&(u=h.y1,c=h.y2,!(Math.min(u,c)>Math.max(a,l))&&!(Math.max(u,c)<Math.min(a,l))&&o(i,h))){p=!0;break t}}return p}function s(t){function e(t,e){return t.x1-e.x1}for(var i,n,s=t.length-1,o=new Array(s),r=0;r<s;++r)i=t[r],n=t[r+1],i.x<n.x?o[r]={x1:i.x,y1:i.y,x2:n.x,y2:n.y}:o[r]={x1:n.x,y1:n.y,x2:i.x,y2:i.y};return o.sort(e)}function o(t,e,i){var n=i&&i.point,s=i&&i.tolerance,o=!1,a=t.x1-e.x1,l=t.y1-e.y1,h=t.x2-t.x1,u=t.y2-t.y1,c=e.y2-e.y1,p=e.x2-e.x1,d=c*h-p*u,y=p*l-c*a,f=h*l-u*a;if(0==d)0==y&&0==f&&(o=!0);else{var _=y/d,m=f/d;if(_>=0&&_<=1&&m>=0&&m<=1)if(n){var g=t.x1+_*h,v=t.y1+_*u;o={x:g,y:v}}else o=!0}if(s){if(o){if(n){var b,g,v,x=[t,e];t:for(var L=0;L<2;++L){b=x[L];for(var w=1;w<3;++w)if(g=b["x"+w],v=b["y"+w],Math.sqrt(Math.pow(g-o.x,2)+Math.pow(v-o.y,2))<s){o.x=g,o.y=v;break t}}}}else{var S,P,g,v,T,C,x=[t,e];t:for(var L=0;L<2;++L){S=x[L],P=x[(L+1)%2];for(var w=1;w<3;++w)if(T={x:S["x"+w],y:S["y"+w]},C=r(T,P),C.distance<s){o=!n||{x:T.x,y:T.y};break t}}}}return o}function r(t,e){var i=a(t,e);return i.distance=Math.sqrt(i.distance),i}function a(t,e){var i,n,s=t.x,o=t.y,r=e.x1,a=e.y1,l=e.x2,h=e.y2,u=l-r,c=h-a,p=(u*(s-r)+c*(o-a))/(Math.pow(u,2)+Math.pow(c,2));return p<=0?(i=r,n=a):p>=1?(i=l,n=h):(i=r+p*u,n=a+p*c),{distance:Math.pow(i-s,2)+Math.pow(n-o,2),x:i,y:n,along:p}}return function(t,e){var s=!1;if(!(s=n(t,e)))for(var o=0,r=t.length;o<r;++o){var a=t[o];if(s=i(a,e))break}if(!s)for(var l=0,h=e.length;l<h;++l){var u=e[l];if(s=i(u,t))break}return s}(t,e)},containsPointByLinearRing:function(t,e){for(var i=t.x,n=t.y,s=!1,o=0,r=e.length,a=r-1;o<r;a=o,o++){var l=e[o].x,h=e[o].y,u=e[a].x,c=e[a].y;if(l===i&&h===n||u===i&&c===n)return"on";if(h<n&&c>=n||h>=n&&c<n){var p=l+(n-h)*(u-l)/(c-h);if(p===i)return"on";p>i&&(s=!s)}}return s},intersetsPolylineAndPolygon:function(t,e){function i(t,e,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)}function n(t,e,i,n,s,o){var r=(o-n)*(i-t)+(e-n)*(s-i);return o>n?e>=n&&e<o&&r>=0:e>=o&&e<n&&r<0}function s(t,e,i){for(var s=t.length,o=0,r=0;r<s;r++)r==s-1?n(e,i,t[0].x,t[0].y,t[r].x,t[r].y)&&o++:n(e,i,t[r].x,t[r].y,t[r+1].x,t[r+1].y)&&o++;return 0!=o&&0!=(1&o)}function o(t,e,n,s){var o,r,a,l,h,u,c,p,d,y;return t.x>e.x?(a=e.x,h=t.x):(a=t.x,h=e.x),t.y>e.y?(l=e.y,u=t.y):(l=t.y,u=e.y),n.x>s.x?(c=s.x,d=n.x):(c=n.x,d=s.x),n.y>s.y?(p=s.y,y=n.y):(p=n.y,y=s.y),!(d<=a||c>=h||y<=l||p>=u)&&(o=i(t,n,s),r=i(e,n,s),0!=o&&0!=r&&(!(o>0&&r>0||o<0&&r<0)&&(o=i(n,t,e),r=i(s,t,e),0!=o&&0!=r&&!(o>0&&r>0||o<0&&r<0))))}function r(t,e){for(var i,n,s,r,a=t.length,l=e.length,h=0;h<a&&h!=a-1;h++){i=t[h],n=t[h+1];for(var u=0;u<l;u++)if(s=e[u],r=u==l-1?e[0]:e[u+1],o(i,n,s,r))return!0}return!1}function a(t,e){for(var i,n,s=t.length,o=(e.length,0);o<s-1;o++)if(i=t[o],n=t[o+1],!l(i,n,e))return!1;return!0}function l(t,e,i){if(!s(i,t.x,t.y)||!s(i,e.x,e.y))return!1;for(var n,r,a=i.length,l=0;l<a;l++)if(n=i[l],r=l==a-1?i[0]:i[l+1],o(t,e,n,r))return!1;return!0}return!!r(t,e)||a(t,e)}}));e.exports.SpatialQuery=r,e.exports.spatialQuery=function(t){return new r(t)}},{"../../Features/Graphic":36,"../../Geometry/Geometry":57,"../../Geometry/Polygon":62,"../../workers/QuadTree":157}],114:[function(t,e,i){"use strict";var n=t("./Layer"),s=t("./../CRS/CRSCustom"),o=E.TileLayer.extend({options:{minZoom:void 0,maxZoom:void 0,minNativeZoom:void 0,maxNativeZoom:void 0,resolution:.0779701782390466,tileSize:256,epsgCode:"4326",origin:[-400,400],errorTileUrl:"",tms:!1,visible:!0,opacity:1,subdomains:"abc",scaleFactor:2,name:n.Layer.EPGISTILELAYER+L.stamp(this)},initialize:function(t,e){if(t&&(t=t.replace("{L}","{z}").replace("{Z}","{z}").replace("{X}","{x}").replace("{Y}","{y}")),this.options.url=t,L.Util.setOptions(this,e),this.options.visible&&(this._visible=!!this.options.visible),this.tileUrl=this.options.url+"",("4490"==this.options.epsgCode||"4326"==this.options.epsgCode)&&this.options.resolution&&this.options.origin){for(var i=[],n=this.options.originX&&this.options.originY?[this.options.originX,this.options.originY]:this.options.origin,o=this.options.resolution,r=(this.options.minZoom,this.options.maxZoom),a=0;a<=r;a++)i.push(o),o/=this.options.scaleFactor;this._crs=new s.CRSCustom({resolutions:i,origin:n})}else"102100"!=this.options.epsgCode&&"3857"!=this.options.epsgCode||(this._crs=CRSMap.EPSG3857);E.TileLayer.prototype.initialize.call(this,this.tileUrl,this.options)},getTileUrl:function(t){var e={s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&this.options.tms){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return L.Util.template(this._url,L.extend(e,this.options))},onAdd:function(t){this._map||(this._map=t),this._crs&&(this._map.options.crs=this._crs,this._map._pixelOrigin=this._map._getNewPixelOrigin(this._map.getCenter())),L.TileLayer.prototype.onAdd.call(this,t)},refresh:function(){return this._update(),this},getName:function(){return this.options.name},setName:function(t){return this.options.name=t,this},getVisible:function(){return this._visible},setVisible:function(t){if(this._visible=t,this._container)return t?L.DomUtil.removeClass(this._container,"egis-layer-invisible"):L.DomUtil.addClass(this._container,"egis-layer-invisible"),this.redraw(),this},_detectIconPath:function(){var t=L.DomUtil.create("div","egis-default-icon-path",document.body),e=L.DomUtil.getStyle(t,"background-image")||L.DomUtil.getStyle(t,"backgroundImage");return document.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""},_checkURL:function(t,e){function i(){4==n.readyState&&(200!=n.Status&&e(!1),e(200==n.Status)),e(!1)}var n;window.ActiveXObject?n=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(n=new XMLHttpRequest,xmlHttp.withCredentials=egis.MicroService.serviceInfo.xhrWithCredentials),n&&(n.onreadystatechange=i,n.open("GET",t,!0),n.send())},_cleanUrl:function(t){return t=L.Util.trim(t),"/"!==t[t.length-1]&&(t+="/"),t}});e.exports.TileLayer=o,e.exports.tileLayer=function(t,e){return new o(t,e)}},{"./../CRS/CRSCustom":2,"./Layer":107}],115:[function(t,e,i){"use strict";var n=t("../Geometry/Extent").Extent,s=t("./FeaturesLayer").FeaturesLayer,o=s.extend({initialize:function(t){t=t||{},L.Util.setOptions(this,t),s.prototype.initialize.call(this,this.options)},_getData:function(){var t=this,e=this._map.getBounds(),i=this._map.getSize(),s=e.getNorthEast(),o=e.getSouthWest(),r=this._map.latLngToLayerPoint(e._northEast),a=this._map.latLngToLayerPoint(e._southWest);(r.y>0||a.y<i.y)&&(i.y=a.y-r.y);var l=new n(o.lng,o.lat,s.lng,s.lat);if(this.dataSource){this._map&&!this.dataSource._query&&this.dataSource.setMap(this._map),this._ishasOn||(this.dataSource.on("cacheloaded",function(e){t._renderGeometry(e.data)}),this._ishasOn=!this._ishasOn);var h=this._map.getZoom();h&&(h=parseInt(h.toFixed(0))),this.dataSource.getVecTileData(l,h)}}});e.exports.VectorTileLayer=o,e.exports.vectorTileLayer=function(t,e){return new o(t,e)}},{"../Geometry/Extent":54,"./FeaturesLayer":100}],116:[function(t,e,i){"use strict";!function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),s=Math.max(0,16.7-(n-t)),o=window.setTimeout(function(){e(n+s)},s);return t=n+s,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var n=t("./Util"),s=t("./Render/GISCanvas"),o=t("./Geometry/Point").Point,r=t("./Geometry/Extent").Extent,a=t("./Hack"),l=t("./Geometry/GeometryUtil").GeometryUtil,h=t("./CRS/CRSMap"),u=L.Map.extend({options:{attrControl:!0,attributionControl:!1,mapstopPropagation:!1,center:void 0,zoom:void 0,minZoom:1,maxZoom:22,panControl:!1,zoomSliderControl:!1,mousePositionControl:!1,zoomControl:!0,scaleControl:!1,shareLocationControl:!1,baseLayers:[],layers:[],maxExtent:void 0,renderer:function(){if(L.Browser.canvas)return new s.GISCanvas;throw"please change the browser that support canvas,the browser should be IE9+, IE9 included."}(),crsCode:"EGIS4490"},selectSet:null,_FIXED_PAN_FACTOR:.25,initialize:function(t,e){window.hack||a.init(),e=e||{},L.Util.setOptions(this,e);var i=L.DomUtil.get(t);this._maddivid=i,this._mapstopPropagation=this.options.mapstopPropagation,i&&(i.onselectstart=function(){return!1}),this.options.center=this.options.center?[this.options.center[1],this.options.center[0]]:this.options.center,this.options.maxExtent&&this.setMaxExtent(this.options.maxExtent),""==this.options.crsCode||this.options.crs||(this.options.crs=h[this.options.crsCode]),L.Map.prototype.initialize.call(this,t,this.options),this._detectedExtentChanged(),this.initRenderedSelection&&this.initRenderedSelection(),this.initRenderedFlashing&&this.initRenderedFlashing()},setmapstopPropagation:function(t){this._mapstopPropagation=t},getFeatureCache:function(){return this._layersData},setFeatureCache:function(t){this._layersData=t},getQuadTree:function(){return this.quadtree},getSelectionSet:function(){return this._selection},_detectedExtentChanged:function(){var t=this;this._before_extent=[],this._notChanged=!1,this._zoomindex=1,this.addEventListener("moveend",function(e){if(t._before_extent.length>=500&&t._before_extent.pop(),t._notChanged)return void(t._notChanged=!1);var i=t.getExtent();t._before_extent.push(i),t._before_extent.length-2>=0&&(t._zoomindex=t._before_extent.length-1)})},zoomToPreviousExtent:function(){if(this._notChanged=!0,!(this._before_extent.length<0||this._zoomindex<=1)){this._zoomindex>0&&(this._zoomindex=this._zoomindex-1);var t=this._before_extent[this._zoomindex];return this.fitExtent(t),this}},zoomToNextExtent:function(){if(this._notChanged=!0,0!=this._before_extent.length){this._zoomindex>=this._before_extent.length-1?this._zoomindex=this._before_extent.length-1:this._zoomindex++;var t=this._before_extent[this._zoomindex];return this.fitExtent(t),this}},panDown:function(){var t=this.getSize(),e=[0,this._FIXED_PAN_FACTOR*t.y];return this.panBy(e),this},panUp:function(){var t=this.getSize(),e=[0,-this._FIXED_PAN_FACTOR*t.y];return this.panBy(e),this},panLeft:function(){var t=this.getSize(),e=[-this._FIXED_PAN_FACTOR*t.x,0];return this.panBy(e),this},panRight:function(){var t=this.getSize(),e=[this._FIXED_PAN_FACTOR*t.x,0];return this.panBy(e),this},fitExtent:function(t,e){var i,n;L.Util.isArray(t)?(i=new L.LatLng(t[0][1],t[0][0]),n=new L.LatLng(t[1][1],t[1][0])):(i=new L.LatLng(t.getYmin(),t.getXmin()),n=new L.LatLng(t.getYmax(),t.getXmax()));var s=new L.LatLngBounds(i,n),o=function(t){var t=l.translateArrToPoint(t);return[t.y,t.x]};return e&&e.paddingTopLeft&&(e.paddingTopLeft=o(e.paddingTopLeft)),e&&e.paddingBottomRight&&(e.paddingBottomRight=o(e.paddingBottomRight)),this.fitBounds(s,e),this},getExtent:function(){var t=this.getBounds(),e=t.getNorthEast(),i=t.getSouthWest();return new r(i.lng,i.lat,e.lng,e.lat)},getMaxExtent:function(){return this.options.maxExtent},centerAt:function(t){t=l.translateArrToPoint(t);var e=L.latLng(t.y,t.x);return this.panTo(e)},flyCenter:function(t,e,i){return this.flyTo(new L.LatLng(t.y,t.x),e,i)},flyExtent:function(t,e,i){for(var n=[],s=0;s<t.length;s++)n.push([t[s][1],t[s][0]]);return this.flyToBounds(new L.latLngBounds(n),i)},setMaxExtent:function(t){var e,i;return L.Util.isArray(t)?(e=new L.LatLng(t[1],t[0]),i=new L.LatLng(t[3],t[2])):(e=new L.LatLng(t.ymin,t.xmin),i=new L.LatLng(t.ymax,t.xmax)),this.options.maxBounds=new L.LatLngBounds(e,i),this.options.maxExtent=t,this},setViewByCenter:function(t,e){return t=l.translateArrToPoint(t),L.Map.prototype.setView.call(this,[t.y,t.x],e),this},_units:"m",setUnits:function(t){return this._units=t,this},getUnits:function(){return this._units?this._units:"m"},getLayers:function(){var t=[];for(var e in this._layers){var i=this._layers[e];if(!i._drawnLayers&&!i._geometry){if("eGISimage"==i._type)continue;i.getType&&(i._type=i.getType(),t.push(i))}}return t},addLayer:function(t){var e=L.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=L.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},_removeLayer2:function(t){var e=L.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&L.stamp(t)in this._layers},getLayerById:function(t){if(!t)return{};for(var e=this.getLayers(),i=0;i<e.length;i++)if(e[i].getLyrId){var n=e[i].getLyrId();if(t==n)return e[i]}},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},addLayers:function(t){t=t?L.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},removeAll:function(){return this.eachLayer(function(t){t.remove()},this)},getScale:function(){var t=this.getExtent(),e=L.DomUtil.getStyle(this._maddivid,"width").replace("px","");return n.convertExtentToScale(t,e,this.getUnits(),96)},getMapCenter:function(){var t=this.getCenter();return new o(t.lng,t.lat)},setMinZoom:function(t){this.options.crs||(this.options.crs=h[this.options.crsCode](t,this.getMaxZoom())),L.Map.prototype.setMinZoom.call(this,t)},setMaxZoom:function(t){this.options.crs||(this.options.crs=h[this.options.crsCode](this.getMinZoom(),t)),L.Map.prototype.setMaxZoom.call(this,t)},goTo:function(t,e){t=l.translateArrToPoint(t),L.Map.prototype.panTo.call(this,[t.y,t.x],e)},jumpTo:function(t,e,i){t=l.translateArrToPoint(t),L.Map.prototype.flyTo.call(this,[t.y,t.x],e,i)},getDistance:function(t,e){return L.Util.isArray(t)&&(t=new o(t)),L.Util.isArray(e)&&(e=new o(e)),L.Map.prototype.distance.call(this,[t.getY(),t.getX()],[e.getY(),e.getX()])},getArea:function(t){var e=[];for(var i in t)i instanceof o?e.push([i.x,i.y]):e.push(i);return this.containerPointToLatLng(),this.options.crs.area(t)}});e.exports.Map=u,e.exports.map=function(t,e){return new u(t,e)}},{"./CRS/CRSMap":3,"./Geometry/Extent":54,"./Geometry/GeometryUtil":58,"./Geometry/Point":61,"./Hack":68,"./Render/GISCanvas":128,"./Util":154}],117:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/symbol/iterator"),o=n(s),r=t("babel-runtime/core-js/symbol"),a=n(r),l=t("babel-runtime/core-js/object/create"),h=n(l),u="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};!function(t,n){"object"==(void 0===i?"undefined":u(i))?e.exports=i=n():"function"==typeof define&&define.amd?define([],n):t.CryptoJS=n()}(void 0,function(){var t=t||function(t,e){var i=h.default||function(){function t(){}return function(e){var i;return t.prototype=e,i=new t,t.prototype=null,i}}(),n={},s=n.lib={},o=s.Base=function(){return{extend:function(t){var e=i(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),r=s.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes,s=t.sigBytes;if(this.clamp(),n%4)for(var o=0;s>o;o++){var r=i[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=r<<24-(n+o)%4*8}else for(var o=0;s>o;o+=4)e[n+o>>>2]=i[o>>>2];return this.sigBytes+=s,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){
var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i,n=[],s=0;e>s;s+=4){var o=function(e){var e=e,i=987654321,n=4294967295;return function(){i=36969*(65535&i)+(i>>16)&n,e=18e3*(65535&e)+(e>>16)&n;var s=(i<<16)+e&n;return s/=4294967296,(s+=.5)*(t.random()>.5?1:-1)}}(4294967296*(i||t.random()));i=987654071*o(),n.push(4294967296*o()|0)}return new r.init(n,e)}}),a=n.enc={},l=a.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],s=0;i>s;s++){var o=e[s>>>2]>>>24-s%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new r.init(i,e/2)}},u=a.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],s=0;i>s;s++){var o=e[s>>>2]>>>24-s%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new r.init(i,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},p=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new r.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,n=i.words,s=i.sigBytes,o=this.blockSize,a=4*o,l=s/a;l=e?t.ceil(l):t.max((0|l)-this._minBufferSize,0);var h=l*o,u=t.min(4*h,s);if(h){for(var c=0;h>c;c+=o)this._doProcessBlock(n,c);var p=n.splice(0,h);i.sigBytes-=u}return new r.init(p,u)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),d=(s.Hasher=p.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new d.HMAC.init(t,i).finalize(e)}}}),n.algo={});return n}(Math);return function(){function e(t,e,i){for(var n=[],o=0,r=0;e>r;r++)if(r%4){var a=i[t.charCodeAt(r-1)]<<r%4*2,l=i[t.charCodeAt(r)]>>>6-r%4*2;n[o>>>2]|=(a|l)<<24-o%4*8,o++}return s.create(n,o)}var i=t,n=i.lib,s=n.WordArray;i.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp();for(var s=[],o=0;i>o;o+=3)for(var r=e[o>>>2]>>>24-o%4*8&255,a=e[o+1>>>2]>>>24-(o+1)%4*8&255,l=e[o+2>>>2]>>>24-(o+2)%4*8&255,h=r<<16|a<<8|l,u=0;4>u&&i>o+.75*u;u++)s.push(n.charAt(h>>>6*(3-u)&63));var c=n.charAt(64);if(c)for(;s.length%4;)s.push(c);return s.join("")},parse:function(t){var i=t.length,n=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var o=0;o<n.length;o++)s[n.charCodeAt(o)]=o}var r=n.charAt(64);if(r){var a=t.indexOf(r);-1!==a&&(i=a)}return e(t,i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function i(t,e,i,n,s,o,r){var a=t+(e&i|~e&n)+s+r;return(a<<o|a>>>32-o)+e}function n(t,e,i,n,s,o,r){var a=t+(e&n|i&~n)+s+r;return(a<<o|a>>>32-o)+e}function s(t,e,i,n,s,o,r){var a=t+(e^i^n)+s+r;return(a<<o|a>>>32-o)+e}function o(t,e,i,n,s,o,r){var a=t+(i^(e|~n))+s+r;return(a<<o|a>>>32-o)+e}var r=t,a=r.lib,l=a.WordArray,h=a.Hasher,u=r.algo,c=[];!function(){for(var t=0;64>t;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0}();var p=u.MD5=h.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var r=0;16>r;r++){var a=e+r,l=t[a];t[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var h=this._hash.words,u=t[e+0],p=t[e+1],d=t[e+2],y=t[e+3],f=t[e+4],_=t[e+5],m=t[e+6],g=t[e+7],v=t[e+8],b=t[e+9],x=t[e+10],L=t[e+11],w=t[e+12],S=t[e+13],P=t[e+14],T=t[e+15],C=h[0],M=h[1],k=h[2],E=h[3];C=i(C,M,k,E,u,7,c[0]),E=i(E,C,M,k,p,12,c[1]),k=i(k,E,C,M,d,17,c[2]),M=i(M,k,E,C,y,22,c[3]),C=i(C,M,k,E,f,7,c[4]),E=i(E,C,M,k,_,12,c[5]),k=i(k,E,C,M,m,17,c[6]),M=i(M,k,E,C,g,22,c[7]),C=i(C,M,k,E,v,7,c[8]),E=i(E,C,M,k,b,12,c[9]),k=i(k,E,C,M,x,17,c[10]),M=i(M,k,E,C,L,22,c[11]),C=i(C,M,k,E,w,7,c[12]),E=i(E,C,M,k,S,12,c[13]),k=i(k,E,C,M,P,17,c[14]),M=i(M,k,E,C,T,22,c[15]),C=n(C,M,k,E,p,5,c[16]),E=n(E,C,M,k,m,9,c[17]),k=n(k,E,C,M,L,14,c[18]),M=n(M,k,E,C,u,20,c[19]),C=n(C,M,k,E,_,5,c[20]),E=n(E,C,M,k,x,9,c[21]),k=n(k,E,C,M,T,14,c[22]),M=n(M,k,E,C,f,20,c[23]),C=n(C,M,k,E,b,5,c[24]),E=n(E,C,M,k,P,9,c[25]),k=n(k,E,C,M,y,14,c[26]),M=n(M,k,E,C,v,20,c[27]),C=n(C,M,k,E,S,5,c[28]),E=n(E,C,M,k,d,9,c[29]),k=n(k,E,C,M,g,14,c[30]),M=n(M,k,E,C,w,20,c[31]),C=s(C,M,k,E,_,4,c[32]),E=s(E,C,M,k,v,11,c[33]),k=s(k,E,C,M,L,16,c[34]),M=s(M,k,E,C,P,23,c[35]),C=s(C,M,k,E,p,4,c[36]),E=s(E,C,M,k,f,11,c[37]),k=s(k,E,C,M,g,16,c[38]),M=s(M,k,E,C,x,23,c[39]),C=s(C,M,k,E,S,4,c[40]),E=s(E,C,M,k,u,11,c[41]),k=s(k,E,C,M,y,16,c[42]),M=s(M,k,E,C,m,23,c[43]),C=s(C,M,k,E,b,4,c[44]),E=s(E,C,M,k,w,11,c[45]),k=s(k,E,C,M,T,16,c[46]),M=s(M,k,E,C,d,23,c[47]),C=o(C,M,k,E,u,6,c[48]),E=o(E,C,M,k,g,10,c[49]),k=o(k,E,C,M,P,15,c[50]),M=o(M,k,E,C,_,21,c[51]),C=o(C,M,k,E,w,6,c[52]),E=o(E,C,M,k,y,10,c[53]),k=o(k,E,C,M,x,15,c[54]),M=o(M,k,E,C,p,21,c[55]),C=o(C,M,k,E,v,6,c[56]),E=o(E,C,M,k,T,10,c[57]),k=o(k,E,C,M,m,15,c[58]),M=o(M,k,E,C,S,21,c[59]),C=o(C,M,k,E,f,6,c[60]),E=o(E,C,M,k,L,10,c[61]),k=o(k,E,C,M,d,15,c[62]),M=o(M,k,E,C,b,21,c[63]),h[0]=h[0]+C|0,h[1]=h[1]+M|0,h[2]=h[2]+k|0,h[3]=h[3]+E|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;i[s>>>5]|=128<<24-s%32;var o=e.floor(n/4294967296),r=n;i[15+(s+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(s+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(i.length+1),this._process();for(var a=this._hash,l=a.words,h=0;4>h;h++){var u=l[h];l[h]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var t=h.clone.call(this);return t._hash=this._hash.clone(),t}});r.MD5=h._createHelper(p),r.HmacMD5=h._createHmacHelper(p)}(Math),function(){var e=t,i=e.lib,n=i.WordArray,s=i.Hasher,o=e.algo,r=[],a=o.SHA1=s.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],a=i[3],l=i[4],h=0;80>h;h++){if(16>h)r[h]=0|t[e+h];else{var u=r[h-3]^r[h-8]^r[h-14]^r[h-16];r[h]=u<<1|u>>>31}var c=(n<<5|n>>>27)+l+r[h];c+=20>h?1518500249+(s&o|~s&a):40>h?1859775393+(s^o^a):60>h?(s&o|s&a|o&a)-1894007588:(s^o^a)-899497514,l=a,a=o,o=s<<30|s>>>2,s=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=s._createHelper(a),e.HmacSHA1=s._createHmacHelper(a)}(),function(e){var i=t,n=i.lib,s=n.WordArray,o=n.Hasher,r=i.algo,a=[],l=[];!function(){function t(t){return 4294967296*(t-(0|t))|0}for(var i=2,n=0;64>n;)(function(t){for(var i=e.sqrt(t),n=2;i>=n;n++)if(!(t%n))return!1;return!0})(i)&&(8>n&&(a[n]=t(e.pow(i,.5))),l[n]=t(e.pow(i,1/3)),n++),i++}();var h=[],u=r.SHA256=o.extend({_doReset:function(){this._hash=new s.init(a.slice(0))},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],r=i[3],a=i[4],u=i[5],c=i[6],p=i[7],d=0;64>d;d++){if(16>d)h[d]=0|t[e+d];else{var y=h[d-15],f=(y<<25|y>>>7)^(y<<14|y>>>18)^y>>>3,_=h[d-2],m=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;h[d]=f+h[d-7]+m+h[d-16]}var g=a&u^~a&c,v=n&s^n&o^s&o,b=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),x=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),L=p+x+g+l[d]+h[d],w=b+v;p=c,c=u,u=a,a=r+L|0,r=o,o=s,s=n,n=L+w|0}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+o|0,i[3]=i[3]+r|0,i[4]=i[4]+a|0,i[5]=i[5]+u|0,i[6]=i[6]+c|0,i[7]=i[7]+p|0},_doFinalize:function(){var t=this._data,i=t.words,n=8*this._nDataBytes,s=8*t.sigBytes;return i[s>>>5]|=128<<24-s%32,i[14+(s+64>>>9<<4)]=e.floor(n/4294967296),i[15+(s+64>>>9<<4)]=n,t.sigBytes=4*i.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});i.SHA256=o._createHelper(u),i.HmacSHA256=o._createHmacHelper(u)}(Math),function(){function e(t){return t<<8&4278255360|t>>>8&16711935}var i=t,n=i.lib,s=n.WordArray,o=i.enc;o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,i=t.sigBytes,n=[],s=0;i>s;s+=2){var o=e[s>>>2]>>>16-s%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n>>>1]|=t.charCodeAt(n)<<16-n%2*16;return s.create(i,2*e)}},o.Utf16LE={stringify:function(t){for(var i=t.words,n=t.sigBytes,s=[],o=0;n>o;o+=2){var r=e(i[o>>>2]>>>16-o%4*8&65535);s.push(String.fromCharCode(r))}return s.join("")},parse:function(t){for(var i=t.length,n=[],o=0;i>o;o++)n[o>>>1]|=e(t.charCodeAt(o)<<16-o%2*16);return s.create(n,2*i)}}}(),function(){if("function"==typeof ArrayBuffer){var e=t,i=e.lib,n=i.WordArray,s=n.init;(n.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,i=[],n=0;e>n;n++)i[n>>>2]|=t[n]<<24-n%4*8;s.call(this,i,e)}else s.apply(this,arguments)}).prototype=n}}(),function(e){function i(t,e,i){return t^e^i}function n(t,e,i){return t&e|~t&i}function s(t,e,i){return(t|~e)^i}function o(t,e,i){return t&i|e&~i}function r(t,e,i){return t^(e|~i)}function a(t,e){return t<<e|t>>>32-e}var l=t,h=l.lib,u=h.WordArray,c=h.Hasher,p=l.algo,d=u.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),y=u.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=u.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),_=u.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),m=u.create([0,1518500249,1859775393,2400959708,2840853838]),g=u.create([1352829926,1548603684,1836072691,2053994217,0]),v=p.RIPEMD160=c.extend({_doReset:function(){this._hash=u.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var l=0;16>l;l++){var h=e+l,u=t[h];t[h]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c,p,v,b,x,L,w,S,P,T,C=this._hash.words,M=m.words,k=g.words,E=d.words,D=y.words,I=f.words,B=_.words;L=c=C[0],w=p=C[1],S=v=C[2],P=b=C[3],T=x=C[4];for(var A,l=0;80>l;l+=1)A=c+t[e+E[l]]|0,A+=16>l?i(p,v,b)+M[0]:32>l?n(p,v,b)+M[1]:48>l?s(p,v,b)+M[2]:64>l?o(p,v,b)+M[3]:r(p,v,b)+M[4],A|=0,A=a(A,I[l]),A=A+x|0,c=x,x=b,b=a(v,10),v=p,p=A,A=L+t[e+D[l]]|0,A+=16>l?r(w,S,P)+k[0]:32>l?o(w,S,P)+k[1]:48>l?s(w,S,P)+k[2]:64>l?n(w,S,P)+k[3]:i(w,S,P)+k[4],A|=0,A=a(A,B[l]),A=A+T|0,L=T,T=P,P=a(S,10),S=w,w=A;A=C[1]+v+P|0,C[1]=C[2]+b+T|0,C[2]=C[3]+x+L|0,C[3]=C[4]+c+w|0,C[4]=C[0]+p+S|0,C[0]=A},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(e.length+1),this._process();for(var s=this._hash,o=s.words,r=0;5>r;r++){var a=o[r];o[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return s},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});l.RIPEMD160=c._createHelper(v),l.HmacRIPEMD160=c._createHmacHelper(v)}(Math),function(){var e=t,i=e.lib,n=i.Base,s=e.enc,o=s.Utf8;e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var i=t.blockSize,n=4*i;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var s=this._oKey=e.clone(),r=this._iKey=e.clone(),a=s.words,l=r.words,h=0;i>h;h++)a[h]^=1549556828,l[h]^=909522486;s.sigBytes=r.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,i=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(i))}})}(),function(){var e=t,i=e.lib,n=i.Base,s=i.WordArray,o=e.algo,r=o.SHA1,a=o.HMAC,l=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=this.cfg,n=a.create(i.hasher,t),o=s.create(),r=s.create([1]),l=o.words,h=r.words,u=i.keySize,c=i.iterations;l.length<u;){var p=n.update(e).finalize(r);n.reset();for(var d=p.words,y=d.length,f=p,_=1;c>_;_++){f=n.finalize(f),n.reset();for(var m=f.words,g=0;y>g;g++)d[g]^=m[g]}o.concat(p),h[0]++}return o.sigBytes=4*u,o}});e.PBKDF2=function(t,e,i){return l.create(i).compute(t,e)}}(),function(){var e=t,i=e.lib,n=i.Base,s=i.WordArray,o=e.algo,r=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:r,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=this.cfg,n=i.hasher.create(),o=s.create(),r=o.words,a=i.keySize,l=i.iterations;r.length<a;){h&&n.update(h);var h=n.update(t).finalize(e);n.reset();for(var u=1;l>u;u++)h=n.finalize(h),n.reset();o.concat(h)}return o.sigBytes=4*a,o}});e.EvpKDF=function(t,e,i){return a.create(i).compute(t,e)}}(),function(){var e=t,i=e.lib,n=i.WordArray,s=e.algo,o=s.SHA256,r=s.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=o._createHelper(r),e.HmacSHA224=o._createHmacHelper(r)}(),function(e){var i=t,n=i.lib,s=n.Base,o=n.WordArray,r=i.x64={};r.Word=s.extend({init:function(t,e){this.high=t,this.low=e}}),r.WordArray=s.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,i=[],n=0;e>n;n++){var s=t[n];i.push(s.high),i.push(s.low)}return o.create(i,this.sigBytes)},clone:function(){for(var t=s.clone.call(this),e=t.words=this.words.slice(0),i=e.length,n=0;i>n;n++)e[n]=e[n].clone();return t}})}(),function(e){var i=t,n=i.lib,s=n.WordArray,o=n.Hasher,r=i.x64,a=r.Word,l=i.algo,h=[],u=[],c=[];!function(){for(var t=1,e=0,i=0;24>i;i++){h[t+5*e]=(i+1)*(i+2)/2%64;var n=e%5,s=(2*t+3*e)%5;t=n,e=s}for(var t=0;5>t;t++)for(var e=0;5>e;e++)u[t+5*e]=e+(2*t+3*e)%5*5;for(var o=1,r=0;24>r;r++){for(var l=0,p=0,d=0;7>d;d++){if(1&o){var y=(1<<d)-1;32>y?p^=1<<y:l^=1<<y-32}128&o?o=o<<1^113:o<<=1}c[r]=a.create(l,p)}}();var p=[];!function(){for(var t=0;25>t;t++)p[t]=a.create()}();var d=l.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;25>e;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var i=this._state,n=this.blockSize/2,s=0;n>s;s++){var o=t[e+2*s],r=t[e+2*s+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);var a=i[s];a.high^=r,a.low^=o}for(var l=0;24>l;l++){for(var d=0;5>d;d++){for(var y=0,f=0,_=0;5>_;_++){var a=i[d+5*_];y^=a.high,f^=a.low}var m=p[d];m.high=y,m.low=f}for(var d=0;5>d;d++)for(var g=p[(d+4)%5],v=p[(d+1)%5],b=v.high,x=v.low,y=g.high^(b<<1|x>>>31),f=g.low^(x<<1|b>>>31),_=0;5>_;_++){var a=i[d+5*_];a.high^=y,a.low^=f}for(var L=1;25>L;L++){var a=i[L],w=a.high,S=a.low,P=h[L];if(32>P)var y=w<<P|S>>>32-P,f=S<<P|w>>>32-P;else var y=S<<P-32|w>>>64-P,f=w<<P-32|S>>>64-P;var T=p[u[L]];T.high=y,T.low=f}var C=p[0],M=i[0];C.high=M.high,C.low=M.low;for(var d=0;5>d;d++)for(var _=0;5>_;_++){var L=d+5*_,a=i[L],k=p[L],E=p[(d+1)%5+5*_],D=p[(d+2)%5+5*_];a.high=k.high^~E.high&D.high,a.low=k.low^~E.low&D.low}var a=i[0],I=c[l];a.high^=I.high,a.low^=I.low}},_doFinalize:function(){var t=this._data,i=t.words,n=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;i[n>>>5]|=1<<24-n%32,i[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*i.length,this._process();for(var r=this._state,a=this.cfg.outputLength/8,l=a/8,h=[],u=0;l>u;u++){var c=r[u],p=c.high,d=c.low;p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h.push(d),h.push(p)}return new s.init(h,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),i=0;25>i;i++)e[i]=e[i].clone();return t}});i.SHA3=o._createHelper(d),i.HmacSHA3=o._createHmacHelper(d)}(Math),function(){function e(){return r.create.apply(r,arguments)}var i=t,n=i.lib,s=n.Hasher,o=i.x64,r=o.Word,a=o.WordArray,l=i.algo,h=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],u=[];!function(){for(var t=0;80>t;t++)u[t]=e()}();var c=l.SHA512=s.extend({_doReset:function(){this._hash=new a.init([new r.init(1779033703,4089235720),new r.init(3144134277,2227873595),new r.init(1013904242,4271175723),new r.init(2773480762,1595750129),new r.init(1359893119,2917565137),new r.init(2600822924,725511199),new r.init(528734635,4215389547),new r.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],s=i[1],o=i[2],r=i[3],a=i[4],l=i[5],c=i[6],p=i[7],d=n.high,y=n.low,f=s.high,_=s.low,m=o.high,g=o.low,v=r.high,b=r.low,x=a.high,L=a.low,w=l.high,S=l.low,P=c.high,T=c.low,C=p.high,M=p.low,k=d,E=y,D=f,I=_,B=m,A=g,G=v,O=b,R=x,U=L,z=w,j=S,F=P,N=T,H=C,Z=M,q=0;80>q;q++){var V=u[q];if(16>q)var W=V.high=0|t[e+2*q],Y=V.low=0|t[e+2*q+1];else{var X=u[q-15],J=X.high,K=X.low,Q=(J>>>1|K<<31)^(J>>>8|K<<24)^J>>>7,$=(K>>>1|J<<31)^(K>>>8|J<<24)^(K>>>7|J<<25),tt=u[q-2],et=tt.high,it=tt.low,nt=(et>>>19|it<<13)^(et<<3|it>>>29)^et>>>6,st=(it>>>19|et<<13)^(it<<3|et>>>29)^(it>>>6|et<<26),ot=u[q-7],rt=ot.high,at=ot.low,lt=u[q-16],ht=lt.high,ut=lt.low,Y=$+at,W=Q+rt+($>>>0>Y>>>0?1:0),Y=Y+st,W=W+nt+(st>>>0>Y>>>0?1:0),Y=Y+ut,W=W+ht+(ut>>>0>Y>>>0?1:0);V.high=W,V.low=Y}var ct=R&z^~R&F,pt=U&j^~U&N,dt=k&D^k&B^D&B,yt=E&I^E&A^I&A,ft=(k>>>28|E<<4)^(k<<30|E>>>2)^(k<<25|E>>>7),_t=(E>>>28|k<<4)^(E<<30|k>>>2)^(E<<25|k>>>7),mt=(R>>>14|U<<18)^(R>>>18|U<<14)^(R<<23|U>>>9),gt=(U>>>14|R<<18)^(U>>>18|R<<14)^(U<<23|R>>>9),vt=h[q],bt=vt.high,xt=vt.low,Lt=Z+gt,wt=H+mt+(Z>>>0>Lt>>>0?1:0),Lt=Lt+pt,wt=wt+ct+(pt>>>0>Lt>>>0?1:0),Lt=Lt+xt,wt=wt+bt+(xt>>>0>Lt>>>0?1:0),Lt=Lt+Y,wt=wt+W+(Y>>>0>Lt>>>0?1:0),St=_t+yt,Pt=ft+dt+(_t>>>0>St>>>0?1:0);H=F,Z=N,F=z,N=j,z=R,j=U,U=O+Lt|0,R=G+wt+(O>>>0>U>>>0?1:0)|0,G=B,O=A,B=D,A=I,D=k,I=E,E=Lt+St|0,k=wt+Pt+(Lt>>>0>E>>>0?1:0)|0}y=n.low=y+E,n.high=d+k+(E>>>0>y>>>0?1:0),_=s.low=_+I,s.high=f+D+(I>>>0>_>>>0?1:0),g=o.low=g+A,o.high=m+B+(A>>>0>g>>>0?1:0),b=r.low=b+O,r.high=v+G+(O>>>0>b>>>0?1:0),L=a.low=L+U,a.high=x+R+(U>>>0>L>>>0?1:0),S=l.low=S+j,l.high=w+z+(j>>>0>S>>>0?1:0),T=c.low=T+N,c.high=P+F+(N>>>0>T>>>0?1:0),M=p.low=M+Z,p.high=C+H+(Z>>>0>M>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[30+(n+128>>>10<<5)]=Math.floor(i/4294967296),e[31+(n+128>>>10<<5)]=i,t.sigBytes=4*e.length,this._process(),this._hash.toX32()},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});i.SHA512=s._createHelper(c),i.HmacSHA512=s._createHmacHelper(c)}(),function(){var e=t,i=e.x64,n=i.Word,s=i.WordArray,o=e.algo,r=o.SHA512,a=o.SHA384=r.extend({_doReset:function(){this._hash=new s.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=r._createHelper(a),e.HmacSHA384=r._createHmacHelper(a)}(),t.lib.Cipher||function(e){var i=t,n=i.lib,s=n.Base,o=n.WordArray,r=n.BufferedBlockAlgorithm,a=i.enc,l=(a.Utf8,a.Base64),h=i.algo,u=h.EvpKDF,c=n.Cipher=r.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:b}return function(e){return{encrypt:function(i,n,s){return t(n).encrypt(e,i,n,s)},decrypt:function(i,n,s){return t(n).decrypt(e,i,n,s)}}}}()}),p=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),i.mode={}),d=n.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),y=p.CBC=function(){function t(t,i,n){var s=this._iv;if(s){var o=s;this._iv=e}else var o=this._prevBlock;for(var r=0;n>r;r++)t[i+r]^=o[r]}var i=d.extend();return i.Encryptor=i.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize;t.call(this,e,i,s),n.encryptBlock(e,i),this._prevBlock=e.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(e,i){var n=this._cipher,s=n.blockSize,o=e.slice(i,i+s);n.decryptBlock(e,i),t.call(this,e,i,s),this._prevBlock=o}}),i}(),f=i.pad={},_=f.Pkcs7={pad:function(t,e){for(var i=4*e,n=i-t.sigBytes%i,s=n<<24|n<<16|n<<8|n,r=[],a=0;n>a;a+=4)r.push(s);var l=o.create(r,n);t.concat(l)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},m=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:y,padding:_}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,i=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=i.createEncryptor;else{var n=i.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==n?this._mode.init(this,e&&e.words):(this._mode=n.call(i,this,e&&e.words),this._mode.__creator=n)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),n.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),g=i.format={},v=g.OpenSSL={stringify:function(t){var e=t.ciphertext,i=t.salt;if(i)var n=o.create([1398893684,1701076831]).concat(i).concat(e);else var n=e;return n.toString(l)},parse:function(t){var e=l.parse(t),i=e.words;if(1398893684==i[0]&&1701076831==i[1]){var n=o.create(i.slice(2,4));i.splice(0,4),e.sigBytes-=16}return m.create({ciphertext:e,salt:n})}},b=n.SerializableCipher=s.extend({cfg:s.extend({format:v}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var s=t.createEncryptor(i,n),o=s.finalize(e),r=s.cfg;return m.create({ciphertext:o,key:i,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),x=i.kdf={},L=x.OpenSSL={execute:function(t,e,i,n){n||(n=o.random(8));var s=u.create({keySize:e+i}).compute(t,n),r=o.create(s.words.slice(e),4*i);return s.sigBytes=4*e,m.create({key:s,iv:r,salt:n})}},w=n.PasswordBasedCipher=b.extend({cfg:b.cfg.extend({kdf:L}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var s=n.kdf.execute(i,t.keySize,t.ivSize);n.iv=s.iv;var o=b.encrypt.call(this,t,e,s.key,n);return o.mixIn(s),o},decrypt:function(t,e,i,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var s=n.kdf.execute(i,t.keySize,t.ivSize,e.salt);return n.iv=s.iv,b.decrypt.call(this,t,e,s.key,n)}})}(),t.mode.CFB=function(){function e(t,e,i,n){var s=this._iv;if(s){var o=s.slice(0);this._iv=void 0}else var o=this._prevBlock;n.encryptBlock(o,0);for(var r=0;i>r;r++)t[e+r]^=o[r]}var i=t.lib.BlockCipherMode.extend();return i.Encryptor=i.extend({processBlock:function(t,i){var n=this._cipher,s=n.blockSize;e.call(this,t,i,s,n),this._prevBlock=t.slice(i,i+s)}}),i.Decryptor=i.extend({processBlock:function(t,i){var n=this._cipher,s=n.blockSize,o=t.slice(i,i+s);e.call(this,t,i,s,n),this._prevBlock=o}}),i}(),t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.pad.AnsiX923={pad:function(t,e){var i=t.sigBytes,n=4*e,s=n-i%n,o=i+s-1;t.clamp(),t.words[o>>>2]|=s<<24-o%4*8,t.sigBytes+=s},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126={pad:function(e,i){var n=4*i,s=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(s-1)).concat(t.lib.WordArray.create([s<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso97971={pad:function(e,i){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,i)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),i=e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,s=this._iv,o=this._keystream;s&&(o=this._keystream=s.slice(0),this._iv=void 0),i.encryptBlock(o,0);for(var r=0;n>r;r++)t[e+r]^=o[r]}});return e.Decryptor=i,e}(),t.pad.NoPadding={pad:function(){},unpad:function(){}},function(e){var i=t,n=i.lib,s=n.CipherParams,o=i.enc,r=o.Hex;i.format.Hex={stringify:function(t){return t.ciphertext.toString(r)},parse:function(t){var e=r.parse(t);return s.create({ciphertext:e})}}}(),function(){var e=t,i=e.lib,n=i.BlockCipher,s=e.algo,o=[],r=[],a=[],l=[],h=[],u=[],c=[],p=[],d=[],y=[];!function(){for(var t=[],e=0;256>e;e++)t[e]=128>e?e<<1:e<<1^283;for(var i=0,n=0,e=0;256>e;e++){var s=n^n<<1^n<<2^n<<3^n<<4;s=s>>>8^255&s^99,o[i]=s,r[s]=i;var f=t[i],_=t[f],m=t[_],g=257*t[s]^16843008*s;a[i]=g<<24|g>>>8,l[i]=g<<16|g>>>16,h[i]=g<<8|g>>>24,u[i]=g;var g=16843009*m^65537*_^257*f^16843008*i;c[s]=g<<24|g>>>8,p[s]=g<<16|g>>>16,d[s]=g<<8|g>>>24,y[s]=g,i?(i=f^t[t[t[m^f]]],n^=t[t[n]]):i=n=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],_=s.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,i=t.sigBytes/4,n=this._nRounds=i+6,s=4*(n+1),r=this._keySchedule=[],a=0;s>a;a++)if(i>a)r[a]=e[a];else{var l=r[a-1];a%i?i>6&&a%i==4&&(l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l]):(l=l<<8|l>>>24,l=o[l>>>24]<<24|o[l>>>16&255]<<16|o[l>>>8&255]<<8|o[255&l],l^=f[a/i|0]<<24),r[a]=r[a-i]^l}for(var h=this._invKeySchedule=[],u=0;s>u;u++){var a=s-u;if(u%4)var l=r[a];else var l=r[a-4];h[u]=4>u||4>=a?l:c[o[l>>>24]]^p[o[l>>>16&255]]^d[o[l>>>8&255]]^y[o[255&l]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,l,h,u,o)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,c,p,d,y,r);var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,s,o,r,a){for(var l=this._nRounds,h=t[e]^i[0],u=t[e+1]^i[1],c=t[e+2]^i[2],p=t[e+3]^i[3],d=4,y=1;l>y;y++){var f=n[h>>>24]^s[u>>>16&255]^o[c>>>8&255]^r[255&p]^i[d++],_=n[u>>>24]^s[c>>>16&255]^o[p>>>8&255]^r[255&h]^i[d++],m=n[c>>>24]^s[p>>>16&255]^o[h>>>8&255]^r[255&u]^i[d++],g=n[p>>>24]^s[h>>>16&255]^o[u>>>8&255]^r[255&c]^i[d++];h=f,u=_,c=m,p=g}var f=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&p])^i[d++],_=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[p>>>8&255]<<8|a[255&h])^i[d++],m=(a[c>>>24]<<24|a[p>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^i[d++],g=(a[p>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^i[d++];t[e]=f,t[e+1]=_,t[e+2]=m,t[e+3]=g},keySize:8});e.AES=n._createHelper(_)}(),function(){function e(t,e){var i=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=i,this._lBlock^=i<<t}function i(t,e){var i=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=i,this._rBlock^=i<<t}var n=t,s=n.lib,o=s.WordArray,r=s.BlockCipher,a=n.algo,l=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],c=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,
3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],p=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=a.DES=r.extend({_doReset:function(){for(var t=this._key,e=t.words,i=[],n=0;56>n;n++){var s=l[n]-1;i[n]=e[s>>>5]>>>31-s%32&1}for(var o=this._subKeys=[],r=0;16>r;r++){for(var a=o[r]=[],c=u[r],n=0;24>n;n++)a[n/6|0]|=i[(h[n]-1+c)%28]<<31-n%6,a[4+(n/6|0)]|=i[28+(h[n+24]-1+c)%28]<<31-n%6;a[0]=a[0]<<1|a[0]>>>31;for(var n=1;7>n;n++)a[n]=a[n]>>>4*(n-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var p=this._invSubKeys=[],n=0;16>n;n++)p[n]=o[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,n,s){this._lBlock=t[n],this._rBlock=t[n+1],e.call(this,4,252645135),e.call(this,16,65535),i.call(this,2,858993459),i.call(this,8,16711935),e.call(this,1,1431655765);for(var o=0;16>o;o++){for(var r=s[o],a=this._lBlock,l=this._rBlock,h=0,u=0;8>u;u++)h|=c[u][((l^r[u])&p[u])>>>0];this._lBlock=l,this._rBlock=a^h}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,e.call(this,1,1431655765),i.call(this,8,16711935),i.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[n]=this._lBlock,t[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=r._createHelper(d);var y=a.TripleDES=r.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=d.createEncryptor(o.create(e.slice(0,2))),this._des2=d.createEncryptor(o.create(e.slice(2,4))),this._des3=d.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=r._createHelper(y)}(),function(){function e(){for(var t=this._S,e=this._i,i=this._j,n=0,s=0;4>s;s++){e=(e+1)%256,i=(i+t[e])%256;var o=t[e];t[e]=t[i],t[i]=o,n|=t[(t[e]+t[i])%256]<<24-8*s}return this._i=e,this._j=i,n}var i=t,n=i.lib,s=n.StreamCipher,o=i.algo,r=o.RC4=s.extend({_doReset:function(){for(var t=this._key,e=t.words,i=t.sigBytes,n=this._S=[],s=0;256>s;s++)n[s]=s;for(var s=0,o=0;256>s;s++){var r=s%i,a=e[r>>>2]>>>24-r%4*8&255;o=(o+n[s]+a)%256;var l=n[s];n[s]=n[o],n[o]=l}this._i=this._j=0},_doProcessBlock:function(t,i){t[i]^=e.call(this)},keySize:8,ivSize:0});i.RC4=s._createHelper(r);var a=o.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});i.RC4Drop=s._createHelper(a)}(),t.mode.CTRGladman=function(){function e(t){if(255==(t>>24&255)){var e=t>>16&255,i=t>>8&255,n=255&t;255===e?(e=0,255===i?(i=0,255===n?n=0:++n):++i):++e,t=0,t+=e<<16,t+=i<<8,t+=n}else t+=1<<24;return t}function i(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var n=t.lib.BlockCipherMode.extend(),s=n.Encryptor=n.extend({processBlock:function(t,e){var n=this._cipher,s=n.blockSize,o=this._iv,r=this._counter;o&&(r=this._counter=o.slice(0),this._iv=void 0),i(r);var a=r.slice(0);n.encryptBlock(a,0);for(var l=0;s>l;l++)t[e+l]^=a[l]}});return n.Decryptor=s,n}(),function(){function e(){for(var t=this._X,e=this._C,i=0;8>i;i++)a[i]=e[i];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var i=0;8>i;i++){var n=t[i]+e[i],s=65535&n,o=n>>>16,r=((s*s>>>17)+s*o>>>15)+o*o,h=((4294901760&n)*n|0)+((65535&n)*n|0);l[i]=r^h}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var i=t,n=i.lib,s=n.StreamCipher,o=i.algo,r=[],a=[],l=[],h=o.Rabbit=s.extend({_doReset:function(){for(var t=this._key.words,i=this.cfg.iv,n=0;4>n;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var s=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var n=0;4>n;n++)e.call(this);for(var n=0;8>n;n++)o[n]^=s[n+4&7];if(i){var r=i.words,a=r[0],l=r[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=h>>>16|4294901760&u,p=u<<16|65535&h;o[0]^=h,o[1]^=c,o[2]^=u,o[3]^=p,o[4]^=h,o[5]^=c,o[6]^=u,o[7]^=p;for(var n=0;4>n;n++)e.call(this)}},_doProcessBlock:function(t,i){var n=this._X;e.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var s=0;4>s;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),t[i+s]^=r[s]},blockSize:4,ivSize:2});i.Rabbit=s._createHelper(h)}(),t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),i=e.Encryptor=e.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,s=this._iv,o=this._counter;s&&(o=this._counter=s.slice(0),this._iv=void 0);var r=o.slice(0);i.encryptBlock(r,0),o[n-1]=o[n-1]+1|0;for(var a=0;n>a;a++)t[e+a]^=r[a]}});return e.Decryptor=i,e}(),function(){function e(){for(var t=this._X,e=this._C,i=0;8>i;i++)a[i]=e[i];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var i=0;8>i;i++){var n=t[i]+e[i],s=65535&n,o=n>>>16,r=((s*s>>>17)+s*o>>>15)+o*o,h=((4294901760&n)*n|0)+((65535&n)*n|0);l[i]=r^h}t[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,t[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,t[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,t[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,t[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,t[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,t[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,t[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}var i=t,n=i.lib,s=n.StreamCipher,o=i.algo,r=[],a=[],l=[],h=o.RabbitLegacy=s.extend({_doReset:function(){var t=this._key.words,i=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],s=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var o=0;4>o;o++)e.call(this);for(var o=0;8>o;o++)s[o]^=n[o+4&7];if(i){var r=i.words,a=r[0],l=r[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),c=h>>>16|4294901760&u,p=u<<16|65535&h;s[0]^=h,s[1]^=c,s[2]^=u,s[3]^=p,s[4]^=h,s[5]^=c,s[6]^=u,s[7]^=p;for(var o=0;4>o;o++)e.call(this)}},_doProcessBlock:function(t,i){var n=this._X;e.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var s=0;4>s;s++)r[s]=16711935&(r[s]<<8|r[s]>>>24)|4278255360&(r[s]<<24|r[s]>>>8),t[i+s]^=r[s]},blockSize:4,ivSize:2});i.RabbitLegacy=s._createHelper(h)}(),t.pad.ZeroPadding={pad:function(t,e){var i=4*e;t.clamp(),t.sigBytes+=i-(t.sigBytes%i||i)},unpad:function(t){for(var e=t.words,i=t.sigBytes-1;!(e[i>>>2]>>>24-i%4*8&255);)i--;t.sigBytes=i+1}},t})},{"babel-runtime/core-js/object/create":167,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],118:[function(require,module,exports){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function getUUID(){for(var s=[],hexDigits="0123456789abcdef",i=0;i<36;i++)s[i]=hexDigits.substr(Math.floor(16*eval(window.atob("TWF0aC5yYW5kb20oKQ=="))),1);s[14]="4",s[19]=hexDigits.substr(3&s[19]|8,1),s[8]=s[13]=s[18]=s[23]="-";var uuid=s.join("");return uuid}function getSign(t,e){var i=(MSManager.serviceInfo.token?"token="+MSManager.serviceInfo.token+"&":"")+"timestamp="+t+"&random="+e+"&secretkey="+MSManager.serviceInfo.secretKey,n="";switch(MSManager.serviceInfo.encryptType.toUpperCase()){case"MD5":n=MD5.hex_md5(i).toUpperCase();break;case"SM3":n=sm3(i).toUpperCase()}return n}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=function(t){return t&&t.__esModule?t:{default:t}}(_stringify),MD5=require("./md5"),sm2=require("./sm2"),sm3=require("./sm3").sm3,encUtil=require("./sm4").EncUtil,MSManager={active:!0,action:{checkServiceInfo:function(){return!(!localStorage.getItem("ms-t")||!localStorage.getItem("ms-sk"))}},serviceInfo:{encMode:!1,sm4Type:"ECB",encryptType:"SM3",xhrWithCredentials:!1,curveLine:!1,textMinSize:0,rasterVersion:"2.0"},config:{encryptCoordinates:!1,mapService:{vectorMap:{active:!0,method:"post",name:"矢量图"},rasterMap:{active:!0,isRequestBody:!0,isAsync:!0,method:"post",name:"栅格图"}}},getRequestHeaders:function(){var t=(new Date).getTime(),e=getUUID();return{token:MSManager.serviceInfo.token,timestamp:t,random:e,sign:getSign(t,e)}},getEncData:function(t,e,i){var n="";n="CBC"==MSManager.serviceInfo.sm4Type.toUpperCase()?"~|~":"&";var s={},o="random="+e.random+n+"timestamp="+e.timestamp+n+"sign="+e.sign,r=(0,_stringify2.default)(t);r+=n+"v_trans_temp=body"+n,r+=o,"CBC"==MSManager.serviceInfo.sm4Type.toUpperCase()?s.crypto=MSManager.encctyptSM4_CBC(r):s.crypto=MSManager.encctyptSM4_EBC(r);var a=i.split("://")[1].split("/")[0],l=r+n+"HOST="+a;"CBC"==MSManager.serviceInfo.sm4Type.toUpperCase()&&(l+=n+"url=https://"+i.split("://")[1],l+=n+"cookieToken="+MSManager.serviceInfo.token),s.checksum=sm3(l),s.token=MSManager.serviceInfo.token;var h=new FormData;return h.append("superData",(0,_stringify2.default)(s)),s=h},encctyptSM4_EBC:function(t){for(var e=window.atob("ZWNiOGNjZTc=")+MSManager.serviceInfo.token.substr(MSManager.serviceInfo.token.length-8),i=encUtil.encryptSM4_ECB(t,e),n="",s=0;s<i.length;s++)n+=i.charCodeAt(s).toString(16);return n},encctyptSM4_CBC:function(t){for(var e=window.atob("ZWNiOGNjZTc=")+MSManager.serviceInfo.token.substr(MSManager.serviceInfo.token.length-8),i=encUtil.encryptSM4_CBC(t,e),n="",s=0;s<i.length;s++)n+=i.charCodeAt(s).toString(16);return n}},_token="";Object.defineProperty(MSManager.serviceInfo,"token",{set:function(t){_token=t,localStorage.setItem("ms-t",t),localStorage.setItem("ms-uts",(new Date).getTime())},get:function(){return _token||localStorage.getItem("ms-t")}});var _secretKey="";Object.defineProperty(MSManager.serviceInfo,"secretKey",{set:function(t){_secretKey=t,localStorage.setItem("ms-sk",t),localStorage.setItem("ms-uts",(new Date).getTime())},get:function(){return _secretKey||localStorage.getItem("ms-sk")}}),module.exports.MSManager=MSManager},{"./md5":120,"./sm2":121,"./sm3":122,"./sm4":123,"babel-runtime/core-js/json/stringify":164}],119:[function(t,e,i){(function(n){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}var o=t("babel-runtime/core-js/symbol/iterator"),r=s(o),a=t("babel-runtime/core-js/symbol"),l=s(a),h="function"==typeof l.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof l.default&&t.constructor===l.default&&t!==l.default.prototype?"symbol":typeof t};!function(t){if("object"===(void 0===i?"undefined":h(i))&&void 0!==e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var s;s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this,s.base64js=t()}}(function(){return function e(i,n,s){function o(a,l){if(!n[a]){if(!i[a]){var h="function"==typeof t&&t;if(!l&&h)return h(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};i[a][0].call(c.exports,function(t){var e=i[a][1][t];return o(e?e:t)},c,c.exports,e,i,n,s)}return n[a].exports}for(var r="function"==typeof t&&t,a=0;a<s.length;a++)o(s[a]);return o}({"/":[function(t,e,i){function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function s(t){return 3*t.length/4-n(t)}function o(t){var e,i,s,o,r,a=t.length;o=n(t),r=new c(3*a/4-o),i=o>0?a-4:a;var l=0;for(e=0;e<i;e+=4)s=u[t.charCodeAt(e)]<<18|u[t.charCodeAt(e+1)]<<12|u[t.charCodeAt(e+2)]<<6|u[t.charCodeAt(e+3)],r[l++]=s>>16&255,r[l++]=s>>8&255,r[l++]=255&s;return 2===o?(s=u[t.charCodeAt(e)]<<2|u[t.charCodeAt(e+1)]>>4,r[l++]=255&s):1===o&&(s=u[t.charCodeAt(e)]<<10|u[t.charCodeAt(e+1)]<<4|u[t.charCodeAt(e+2)]>>2,r[l++]=s>>8&255,r[l++]=255&s),r}function r(t){return h[t>>18&63]+h[t>>12&63]+h[t>>6&63]+h[63&t]}function a(t,e,i){for(var n,s=[],o=e;o<i;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],s.push(r(n));return s.join("")}function l(t){for(var e,i=t.length,n=i%3,s="",o=[],r=16383,l=0,u=i-n;l<u;l+=r)o.push(a(t,l,l+r>u?u:l+r));return 1===n?(e=t[i-1],s+=h[e>>2],s+=h[e<<4&63],s+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],s+=h[e>>10],s+=h[e>>4&63],s+=h[e<<2&63],s+="="),o.push(s),o.join("")}i.byteLength=s,i.toByteArray=o,i.fromByteArray=l;for(var h=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=p.length;d<y;++d)h[d]=p[d],u[p.charCodeAt(d)]=d;u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}]},{},[])("/")})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],120:[function(t,e,i){"use strict";function n(t){return d(s(p(t),t.length*f))}function s(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,n=-271733879,s=-1732584194,o=271733878,c=0;c<t.length;c+=16){var p=i,d=n,y=s,f=o;i=r(i,n,s,o,t[c+0],7,-680876936),o=r(o,i,n,s,t[c+1],12,-389564586),s=r(s,o,i,n,t[c+2],17,606105819),n=r(n,s,o,i,t[c+3],22,-1044525330),i=r(i,n,s,o,t[c+4],7,-176418897),o=r(o,i,n,s,t[c+5],12,1200080426),s=r(s,o,i,n,t[c+6],17,-1473231341),n=r(n,s,o,i,t[c+7],22,-45705983),i=r(i,n,s,o,t[c+8],7,1770035416),o=r(o,i,n,s,t[c+9],12,-1958414417),s=r(s,o,i,n,t[c+10],17,-42063),n=r(n,s,o,i,t[c+11],22,-1990404162),i=r(i,n,s,o,t[c+12],7,1804603682),o=r(o,i,n,s,t[c+13],12,-40341101),s=r(s,o,i,n,t[c+14],17,-1502002290),n=r(n,s,o,i,t[c+15],22,1236535329),i=a(i,n,s,o,t[c+1],5,-165796510),o=a(o,i,n,s,t[c+6],9,-1069501632),s=a(s,o,i,n,t[c+11],14,643717713),n=a(n,s,o,i,t[c+0],20,-373897302),i=a(i,n,s,o,t[c+5],5,-701558691),o=a(o,i,n,s,t[c+10],9,38016083),s=a(s,o,i,n,t[c+15],14,-660478335),n=a(n,s,o,i,t[c+4],20,-405537848),i=a(i,n,s,o,t[c+9],5,568446438),o=a(o,i,n,s,t[c+14],9,-1019803690),s=a(s,o,i,n,t[c+3],14,-187363961),n=a(n,s,o,i,t[c+8],20,1163531501),i=a(i,n,s,o,t[c+13],5,-1444681467),o=a(o,i,n,s,t[c+2],9,-51403784),s=a(s,o,i,n,t[c+7],14,1735328473),n=a(n,s,o,i,t[c+12],20,-1926607734),i=l(i,n,s,o,t[c+5],4,-378558),o=l(o,i,n,s,t[c+8],11,-2022574463),s=l(s,o,i,n,t[c+11],16,1839030562),n=l(n,s,o,i,t[c+14],23,-35309556),i=l(i,n,s,o,t[c+1],4,-1530992060),o=l(o,i,n,s,t[c+4],11,1272893353),s=l(s,o,i,n,t[c+7],16,-155497632),n=l(n,s,o,i,t[c+10],23,-1094730640),i=l(i,n,s,o,t[c+13],4,681279174),o=l(o,i,n,s,t[c+0],11,-358537222),s=l(s,o,i,n,t[c+3],16,-722521979),n=l(n,s,o,i,t[c+6],23,76029189),i=l(i,n,s,o,t[c+9],4,-640364487),o=l(o,i,n,s,t[c+12],11,-421815835),s=l(s,o,i,n,t[c+15],16,530742520),n=l(n,s,o,i,t[c+2],23,-995338651),i=h(i,n,s,o,t[c+0],6,-198630844),o=h(o,i,n,s,t[c+7],10,1126891415),s=h(s,o,i,n,t[c+14],15,-1416354905),n=h(n,s,o,i,t[c+5],21,-57434055),i=h(i,n,s,o,t[c+12],6,1700485571),o=h(o,i,n,s,t[c+3],10,-1894986606),s=h(s,o,i,n,t[c+10],15,-1051523),n=h(n,s,o,i,t[c+1],21,-2054922799),i=h(i,n,s,o,t[c+8],6,1873313359),o=h(o,i,n,s,t[c+15],10,-30611744),s=h(s,o,i,n,t[c+6],15,-1560198380),n=h(n,s,o,i,t[c+13],21,1309151649),i=h(i,n,s,o,t[c+4],6,-145523070),o=h(o,i,n,s,t[c+11],10,-1120210379),s=h(s,o,i,n,t[c+2],15,718787259),n=h(n,s,o,i,t[c+9],21,-343485551),i=u(i,p),n=u(n,d),s=u(s,y),o=u(o,f)}return Array(i,n,s,o)}function o(t,e,i,n,s,o){return u(c(u(u(e,t),u(n,o)),s),i)}function r(t,e,i,n,s,r,a){return o(e&i|~e&n,t,e,s,r,a)}function a(t,e,i,n,s,r,a){return o(e&n|i&~n,t,e,s,r,a)}function l(t,e,i,n,s,r,a){return o(e^i^n,t,e,s,r,a)}function h(t,e,i,n,s,r,a){return o(i^(e|~n),t,e,s,r,a)}function u(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function c(t,e){return t<<e|t>>>32-e}function p(t){for(var e=Array(),i=(1<<f)-1,n=0;n<t.length*f;n+=f)e[n>>5]|=(t.charCodeAt(n/f)&i)<<n%32;return e}function d(t){for(var e=y?"0123456789ABCDEF":"0123456789abcdef",i="",n=0;n<4*t.length;n++)i+=e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15);return i}var y=0,f=8;e.exports={hex_md5:n}},{}],121:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/symbol/iterator"),o=n(s),r=t("babel-runtime/core-js/symbol"),a=n(r),l=t("babel-runtime/core-js/object/get-prototype-of"),h=n(l),u=t("babel-runtime/core-js/object/set-prototype-of"),c=n(u),p=t("babel-runtime/core-js/object/create"),d=n(p),y=t("babel-runtime/core-js/object/define-property"),f=n(y),_="function"==typeof a.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t},m=function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||(0,f.default)(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,i){(function(){function i(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function n(){return new i(null)}function s(t,e,i,n,s,o){for(;--o>=0;){var r=e*this[t++]+i[n]+s;s=Math.floor(r/67108864),i[n++]=67108863&r}return s}function o(t,e,i,n,s,o){for(var r=32767&e,a=e>>15;--o>=0;){var l=32767&this[t],h=this[t++]>>15,u=a*l+h*r;l=r*l+((32767&u)<<15)+i[n]+(1073741823&s),s=(l>>>30)+(u>>>15)+a*h+(s>>>30),i[n++]=1073741823&l}return s}function r(t,e,i,n,s,o){for(var r=16383&e,a=e>>14;--o>=0;){var l=16383&this[t],h=this[t++]>>14,u=a*l+h*r;l=r*l+((16383&u)<<14)+i[n]+s,s=(l>>28)+(u>>14)+a*h,i[n++]=268435455&l}return s}function a(t){return de.charAt(t)}function l(t,e){var i=ye[t.charCodeAt(e)];return null==i?-1:i}function h(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function c(t){var e=n();return e.fromInt(t),e}function p(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;for(var s=t.length,o=!1,r=0;--s>=0;){var a=8==n?255&t[s]:l(t,s);a<0?"-"==t.charAt(s)&&(o=!0):(o=!1,0==r?this[this.t++]=a:r+n>this.DB?(this[this.t-1]|=(a&(1<<this.DB-r)-1)<<r,this[this.t++]=a>>this.DB-r):this[this.t-1]|=a<<r,(r+=n)>=this.DB&&(r-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r)),this.clamp(),o&&i.ZERO.subTo(this,this)}function d(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function y(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,s=!1,o="",r=this.t,l=this.DB-r*this.DB%e;if(r-- >0)for(l<this.DB&&(i=this[r]>>l)>0&&(s=!0,o=a(i));r>=0;)l<e?(i=(this[r]&(1<<l)-1)<<e-l,i|=this[--r]>>(l+=this.DB-e)):(i=this[r]>>(l-=e)&n,l<=0&&(l+=this.DB,--r)),i>0&&(s=!0),s&&(o+=a(i));return s?o:"0"}function f(){var t=n();return i.ZERO.subTo(this,t),t}function _(){return this.s<0?this.negate():this}function m(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function g(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function v(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)}function b(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function x(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function L(t,e){var i,n=t%this.DB,s=this.DB-n,o=(1<<s)-1,r=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+r+1]=this[i]>>s|a,a=(this[i]&o)<<n;for(i=r-1;i>=0;--i)e[i]=0;e[r]=a,e.t=this.t+r+1,e.s=this.s,e.clamp()}function w(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var n=t%this.DB,s=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var r=i+1;r<this.t;++r)e[r-i-1]|=(this[r]&o)<<s,e[r-i]=this[r]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<s),e.t=this.t-i,e.clamp()}function S(t,e){for(var i=0,n=0,s=Math.min(t.t,this.t);i<s;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function P(t,e){var n=this.abs(),s=t.abs(),o=n.t;for(e.t=o+s.t;--o>=0;)e[o]=0;for(o=0;o<s.t;++o)e[o+n.t]=n.am(0,s[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&i.ZERO.subTo(e,e)}function T(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function C(t,e,s){var o=t.abs();if(!(o.t<=0)){var r=this.abs();if(r.t<o.t)return null!=e&&e.fromInt(0),void(null!=s&&this.copyTo(s));null==s&&(s=n());var a=n(),l=this.s,h=t.s,u=this.DB-g(o[o.t-1]);u>0?(o.lShiftTo(u,a),r.lShiftTo(u,s)):(o.copyTo(a),r.copyTo(s));var c=a.t,p=a[c-1];if(0!=p){var d=p*(1<<this.F1)+(c>1?a[c-2]>>this.F2:0),y=this.FV/d,f=(1<<this.F1)/d,_=1<<this.F2,m=s.t,v=m-c,b=null==e?n():e;for(a.dlShiftTo(v,b),s.compareTo(b)>=0&&(s[s.t++]=1,s.subTo(b,s)),i.ONE.dlShiftTo(c,b),b.subTo(a,a);a.t<c;)a[a.t++]=0;for(;--v>=0;){var x=s[--m]==p?this.DM:Math.floor(s[m]*y+(s[m-1]+_)*f);if((s[m]+=a.am(0,x,s,v,0,c))<x)for(a.dlShiftTo(v,b),s.subTo(b,s);s[m]<--x;)s.subTo(b,s)}null!=e&&(s.drShiftTo(c,e),l!=h&&i.ZERO.subTo(e,e)),s.t=c,s.clamp(),u>0&&s.rShiftTo(u,s),l<0&&i.ZERO.subTo(s,s)}}}function M(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(i.ZERO)>0&&t.subTo(e,e),e}function k(t){this.m=t}function E(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function D(t){return t}function I(t){t.divRemTo(this.m,null,t)}function B(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function A(t,e){t.squareTo(e),this.reduce(e)}function G(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function O(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function R(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(i.ZERO)>0&&this.m.subTo(e,e),e}function U(t){var e=n();return t.copyTo(e),this.reduce(e),e}function z(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function j(t,e){t.squareTo(e),this.reduce(e)}function F(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function N(){return 0==(this.t>0?1&this[0]:this.s)}function H(t,e){if(t>4294967295||t<1)return i.ONE;var s=n(),o=n(),r=e.convert(this),a=g(t)-1;for(r.copyTo(s);--a>=0;)if(e.sqrTo(s,o),(t&1<<a)>0)e.mulTo(o,r,s);else{var l=s;s=o,o=l}return e.revert(s)}function Z(t,e){var i;return i=t<256||e.isEven()?new k(e):new O(e),this.exp(t,i)}function q(){var t=n();return this.copyTo(t),t}function V(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function W(){return 0==this.t?this.s:this[0]<<24>>24}function Y(){return 0==this.t?this.s:this[0]<<16>>16}function X(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function J(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function K(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),s=c(i),o=n(),r=n(),a="";for(this.divRemTo(s,o,r);o.signum()>0;)a=(i+r.intValue()).toString(t).substr(1)+a,o.divRemTo(s,o,r)
;return r.intValue().toString(t)+a}function Q(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),s=Math.pow(e,n),o=!1,r=0,a=0,h=0;h<t.length;++h){var u=l(t,h);u<0?"-"==t.charAt(h)&&0==this.signum()&&(o=!0):(a=e*a+u,++r>=n&&(this.dMultiply(s),this.dAddOffset(a,0),r=0,a=0))}r>0&&(this.dMultiply(Math.pow(e,r)),this.dAddOffset(a,0)),o&&i.ZERO.subTo(this,this)}function $(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(i.ONE.shiftLeft(t-1),at,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(i.ONE.shiftLeft(t-1),this);else{var s=new Array,o=7&t;s.length=1+(t>>3),e.nextBytes(s),o>0?s[0]&=(1<<o)-1:s[0]=0,this.fromString(s,256)}}function tt(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,s=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[s++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i);return e}function et(t){return 0==this.compareTo(t)}function it(t){return this.compareTo(t)<0?this:t}function nt(t){return this.compareTo(t)>0?this:t}function st(t,e,i){var n,s,o=Math.min(t.t,this.t);for(n=0;n<o;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(s=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],s);i.t=this.t}else{for(s=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(s,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function ot(t,e){return t&e}function rt(t){var e=n();return this.bitwiseTo(t,ot,e),e}function at(t,e){return t|e}function lt(t){var e=n();return this.bitwiseTo(t,at,e),e}function ht(t,e){return t^e}function ut(t){var e=n();return this.bitwiseTo(t,ht,e),e}function ct(t,e){return t&~e}function pt(t){var e=n();return this.bitwiseTo(t,ct,e),e}function dt(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function yt(t){var e=n();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function ft(t){var e=n();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function _t(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function mt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+_t(this[t]);return this.s<0?this.t*this.DB:-1}function gt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function vt(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=gt(this[i]^e);return t}function bt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function xt(t,e){var n=i.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Lt(t){return this.changeBit(t,at)}function wt(t){return this.changeBit(t,ct)}function St(t){return this.changeBit(t,ht)}function Pt(t,e){for(var i=0,n=0,s=Math.min(t.t,this.t);i<s;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function Tt(t){var e=n();return this.addTo(t,e),e}function Ct(t){var e=n();return this.subTo(t,e),e}function Mt(t){var e=n();return this.multiplyTo(t,e),e}function kt(){var t=n();return this.squareTo(t),t}function Et(t){var e=n();return this.divRemTo(t,e,null),e}function Dt(t){var e=n();return this.divRemTo(t,null,e),e}function It(t){var e=n(),i=n();return this.divRemTo(t,e,i),new Array(e,i)}function Bt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function At(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Gt(){}function Ot(t){return t}function Rt(t,e,i){t.multiplyTo(e,i)}function Ut(t,e){t.squareTo(e)}function zt(t){return this.exp(t,new Gt)}function jt(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var s;for(s=i.t-this.t;n<s;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(s=Math.min(t.t,e);n<s;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function Ft(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function Nt(t){this.r2=n(),this.q3=n(),i.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Ht(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function Zt(t){return t}function qt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Vt(t,e){t.squareTo(e),this.reduce(e)}function Wt(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Yt(t,e){var i,s,o=t.bitLength(),r=c(1);if(o<=0)return r;i=o<18?1:o<48?3:o<144?4:o<768?5:6,s=o<8?new k(e):e.isEven()?new Nt(e):new O(e);var a=new Array,l=3,h=i-1,u=(1<<i)-1;if(a[1]=s.convert(this),i>1){var p=n();for(s.sqrTo(a[1],p);l<=u;)a[l]=n(),s.mulTo(p,a[l-2],a[l]),l+=2}var d,y,f=t.t-1,_=!0,m=n();for(o=g(t[f])-1;f>=0;){for(o>=h?d=t[f]>>o-h&u:(d=(t[f]&(1<<o+1)-1)<<h-o,f>0&&(d|=t[f-1]>>this.DB+o-h)),l=i;0==(1&d);)d>>=1,--l;if((o-=l)<0&&(o+=this.DB,--f),_)a[d].copyTo(r),_=!1;else{for(;l>1;)s.sqrTo(r,m),s.sqrTo(m,r),l-=2;l>0?s.sqrTo(r,m):(y=r,r=m,m=y),s.mulTo(m,a[d],r)}for(;f>=0&&0==(t[f]&1<<o);)s.sqrTo(r,m),y=r,r=m,m=y,--o<0&&(o=this.DB-1,--f)}return s.revert(r)}function Xt(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var s=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(s<o&&(o=s),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function Jt(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function Kt(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return i.ZERO;for(var n=t.clone(),s=this.clone(),o=c(1),r=c(0),a=c(0),l=c(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&r.isEven()||(o.addTo(this,o),r.subTo(t,r)),o.rShiftTo(1,o)):r.isEven()||r.subTo(t,r),r.rShiftTo(1,r);for(;s.isEven();)s.rShiftTo(1,s),e?(a.isEven()&&l.isEven()||(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(s)>=0?(n.subTo(s,n),e&&o.subTo(a,o),r.subTo(l,r)):(s.subTo(n,s),e&&a.subTo(o,a),l.subTo(r,l))}return 0!=s.compareTo(i.ONE)?i.ZERO:l.compareTo(t)>=0?l.subtract(t):l.signum()<0?(l.addTo(t,l),l.signum()<0?l.add(t):l):l}function Qt(t){var e,i=this.abs();if(1==i.t&&i[0]<=fe[fe.length-1]){for(e=0;e<fe.length;++e)if(i[0]==fe[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<fe.length;){for(var n=fe[e],s=e+1;s<fe.length&&n<_e;)n*=fe[s++];for(n=i.modInt(n);e<s;)if(n%fe[e++]==0)return!1}return i.millerRabin(t)}function $t(t){var e=this.subtract(i.ONE),s=e.getLowestSetBit();if(s<=0)return!1;var o=e.shiftRight(s);(t=t+1>>1)>fe.length&&(t=fe.length);for(var r=n(),a=0;a<t;++a){r.fromInt(fe[Math.floor(Math.random()*fe.length)]);var l=r.modPow(o,this);if(0!=l.compareTo(i.ONE)&&0!=l.compareTo(e)){for(var h=1;h++<s&&0!=l.compareTo(e);)if(l=l.modPowInt(2,this),0==l.compareTo(i.ONE))return!1;if(0!=l.compareTo(e))return!1}}return!0}function te(t){ge[ve++]^=255&t,ge[ve++]^=t>>8&255,ge[ve++]^=t>>16&255,ge[ve++]^=t>>24&255,ve>=we&&(ve-=we)}function ee(){te((new Date).getTime())}function ie(){if(null==me){for(ee(),me=le(),me.init(ge),ve=0;ve<ge.length;++ve)ge[ve]=0;ve=0}return me.next()}function ne(t){var e;for(e=0;e<t.length;++e)t[e]=ie()}function se(){}function oe(){this.i=0,this.j=0,this.S=new Array}function re(t){var e,i,n;for(e=0;e<256;++e)this.S[e]=e;for(i=0,e=0;e<256;++e)i=i+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[i],this.S[i]=n;this.i=0,this.j=0}function ae(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function le(){return new oe}var he,ue="undefined"!=typeof navigator;ue&&"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=o,he=30):ue&&"Netscape"!=navigator.appName?(i.prototype.am=s,he=26):(i.prototype.am=r,he=28),i.prototype.DB=he,i.prototype.DM=(1<<he)-1,i.prototype.DV=1<<he,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-he,i.prototype.F2=2*he-52;var ce,pe,de="0123456789abcdefghijklmnopqrstuvwxyz",ye=new Array;for(ce="0".charCodeAt(0),pe=0;pe<=9;++pe)ye[ce++]=pe;for(ce="a".charCodeAt(0),pe=10;pe<36;++pe)ye[ce++]=pe;for(ce="A".charCodeAt(0),pe=10;pe<36;++pe)ye[ce++]=pe;k.prototype.convert=E,k.prototype.revert=D,k.prototype.reduce=I,k.prototype.mulTo=B,k.prototype.sqrTo=A,O.prototype.convert=R,O.prototype.revert=U,O.prototype.reduce=z,O.prototype.mulTo=F,O.prototype.sqrTo=j,i.prototype.copyTo=h,i.prototype.fromInt=u,i.prototype.fromString=p,i.prototype.clamp=d,i.prototype.dlShiftTo=b,i.prototype.drShiftTo=x,i.prototype.lShiftTo=L,i.prototype.rShiftTo=w,i.prototype.subTo=S,i.prototype.multiplyTo=P,i.prototype.squareTo=T,i.prototype.divRemTo=C,i.prototype.invDigit=G,i.prototype.isEven=N,i.prototype.exp=H,i.prototype.toString=y,i.prototype.negate=f,i.prototype.abs=_,i.prototype.compareTo=m,i.prototype.bitLength=v,i.prototype.mod=M,i.prototype.modPowInt=Z,i.ZERO=c(0),i.ONE=c(1),Gt.prototype.convert=Ot,Gt.prototype.revert=Ot,Gt.prototype.mulTo=Rt,Gt.prototype.sqrTo=Ut,Nt.prototype.convert=Ht,Nt.prototype.revert=Zt,Nt.prototype.reduce=qt,Nt.prototype.mulTo=Wt,Nt.prototype.sqrTo=Vt;var fe=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_e=(1<<26)/fe[fe.length-1];i.prototype.chunkSize=X,i.prototype.toRadix=K,i.prototype.fromRadix=Q,i.prototype.fromNumber=$,i.prototype.bitwiseTo=st,i.prototype.changeBit=xt,i.prototype.addTo=Pt,i.prototype.dMultiply=Bt,i.prototype.dAddOffset=At,i.prototype.multiplyLowerTo=jt,i.prototype.multiplyUpperTo=Ft,i.prototype.modInt=Jt,i.prototype.millerRabin=$t,i.prototype.clone=q,i.prototype.intValue=V,i.prototype.byteValue=W,i.prototype.shortValue=Y,i.prototype.signum=J,i.prototype.toByteArray=tt,i.prototype.equals=et,i.prototype.min=it,i.prototype.max=nt,i.prototype.and=rt,i.prototype.or=lt,i.prototype.xor=ut,i.prototype.andNot=pt,i.prototype.not=dt,i.prototype.shiftLeft=yt,i.prototype.shiftRight=ft,i.prototype.getLowestSetBit=mt,i.prototype.bitCount=vt,i.prototype.testBit=bt,i.prototype.setBit=Lt,i.prototype.clearBit=wt,i.prototype.flipBit=St,i.prototype.add=Tt,i.prototype.subtract=Ct,i.prototype.multiply=Mt,i.prototype.divide=Et,i.prototype.remainder=Dt,i.prototype.divideAndRemainder=It,i.prototype.modPow=Yt,i.prototype.modInverse=Kt,i.prototype.pow=zt,i.prototype.gcd=Xt,i.prototype.isProbablePrime=Qt,i.prototype.square=kt,i.prototype.Barrett=Nt;var me,ge,ve;if(null==ge){ge=new Array,ve=0;var be;if("undefined"!=typeof window&&window.crypto)if(window.crypto.getRandomValues){var xe=new Uint8Array(32);for(window.crypto.getRandomValues(xe),be=0;be<32;++be)ge[ve++]=xe[be]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var Le=window.crypto.random(32);for(be=0;be<Le.length;++be)ge[ve++]=255&Le.charCodeAt(be)}for(;ve<we;)be=Math.floor(65536*Math.random()),ge[ve++]=be>>>8,ge[ve++]=255&be;ve=0,ee()}se.prototype.nextBytes=ne,oe.prototype.init=re,oe.prototype.next=ae;var we=256;e=t.exports={default:i,BigInteger:i,SecureRandom:se}}).call(this)},function(t,e,i){function n(){return v}function s(){var t=new d("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFF",16),e=new d("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF00000000FFFFFFFFFFFFFFFC",16),i=new d("28E9FA9E9D9F5E344D5A9E4BCF6509A7F39789F515AB8F92DDBCBD414D940E93",16),n=new _(t,e,i);return{curve:n,G:n.decodePointHex("0432C4AE2C1F1981195F9904466A39C9948FE30BBFF2660BE1715A4589334C74C7BC3736A2F4F6779C59BDCEE36B692153D0A9877CC62A474002DF32E52139F0A0"),n:new d("FFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFF7203DF6B21C6052B53BBF40939D54123",16)}}function o(){var t=new d(x.bitLength(),m).mod(x.subtract(d.ONE)).add(d.ONE),e=l(t.toString(16),64),i=b.multiply(t);return{privateKey:e,publicKey:"04"+l(i.getX().toBigInteger().toString(16),64)+l(i.getY().toBigInteger().toString(16),64)}}function r(t){t=unescape(encodeURIComponent(t));for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;for(var s=[],o=0;o<e;o++){var r=i[o>>>2]>>>24-o%4*8&255;s.push((r>>>4).toString(16)),s.push((15&r).toString(16))}return s.join("")}function a(t){return Array.prototype.map.call(new Uint8Array(t),function(t){return("00"+t.toString(16)).slice(-2)}).join("")}function l(t,e){return t.length>=e?t:new Array(e-t.length+1).join("0")+t}function h(t){for(var e=[],i=0,n=0;n<2*t.length;n+=2)e[n>>>3]|=parseInt(t[i],10)<<24-n%8*4,i++;for(var s=[],o=0;o<t.length;o++){var r=e[o>>>2]>>>24-o%4*8&255;s.push((r>>>4).toString(16)),s.push((15&r).toString(16))}return s.join("")}function u(t){for(var e=[],i=0,n=0;n<2*t.length;n+=2)e[n>>>3]|=parseInt(t[i],10)<<24-n%8*4,i++;try{for(var s=[],o=0;o<t.length;o++){var r=e[o>>>2]>>>24-o%4*8&255;s.push(String.fromCharCode(r))}return decodeURIComponent(escape(s.join("")))}catch(t){throw new Error("Malformed UTF-8 data")}}function c(t){var e=[],i=t.length;i%2!=0&&(t=l(t,i+1)),i=t.length;for(var n=0;n<i;n+=2)e.push(parseInt(t.substr(n,2),16));return e}var p=i(0),d=p.BigInteger,y=p.SecureRandom,f=i(5),_=f.ECCurveFp,m=new y,g=s(),v=g.curve,b=g.G,x=g.n;t.exports={getGlobalCurve:n,generateEcparam:s,generateKeyPairHex:o,parseUtf8StringToHex:r,parseArrayBufferToHex:a,leftPad:l,arrayToHex:h,arrayToUtf8:u,hexToArray:c}},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,f.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),r=o.BigInteger,a=i(1),l=function(t,e,i,n,s){for(var o=0;o<s;o++)i[n+o]=t[e+o]},h={minValue:-parseInt("10000000000000000000000000000000",2),maxValue:parseInt("1111111111111111111111111111111",2),parse:function(t){if(t<this.minValue){for(var e=new Number(-t),i=e.toString(2),n=i.substr(i.length-31,31),s="",o=0;o<n.length;o++)s+="0"==n.substr(o,1)?"1":"0";return parseInt(s,2)+1}if(t>this.maxValue){for(var r=Number(t),a=r.toString(2),l=a.substr(a.length-31,31),h="",u=0;u<l.length;u++)h+="0"==l.substr(u,1)?"1":"0";return-(parseInt(h,2)+1)}return t},parseByte:function(t){if(t<0){for(var e=new Number(-t),i=e.toString(2),n=i.substr(i.length-8,8),s="",o=0;o<n.length;o++)s+="0"==n.substr(o,1)?"1":"0";return parseInt(s,2)+1}if(t>255){var r=Number(t),a=r.toString(2);return parseInt(a.substr(a.length-8,8),2)}return t}},u=function(){function t(){n(this,t),this.xBuf=new Array,this.xBufOff=0,this.byteCount=0,this.DIGEST_LENGTH=32,this.v0=[1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214],this.v0=[1937774191,1226093241,388252375,-628488704,-1452330820,372324522,-477237683,-1325724082],this.v=new Array(8),this.v_=new Array(8),this.X0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.X=new Array(68),this.xOff=0,this.T_00_15=2043430169,this.T_16_63=2055708042,arguments.length>0?this.initDigest(arguments[0]):this.init()}return s(t,[{key:"init",value:function(){this.xBuf=new Array(4),this.reset()}},{key:"initDigest",value:function(t){this.xBuf=[].concat(t.xBuf),this.xBufOff=t.xBufOff,this.byteCount=t.byteCount,l(t.X,0,this.X,0,t.X.length),this.xOff=t.xOff,l(t.v,0,this.v,0,t.v.length)}},{key:"getDigestSize",value:function(){return this.DIGEST_LENGTH}},{key:"reset",value:function(){this.byteCount=0,this.xBufOff=0;for(var t in this.xBuf)this.xBuf[t]=null;l(this.v0,0,this.v,0,this.v0.length),this.xOff=0,l(this.X0,0,this.X,0,this.X0.length)}},{key:"processBlock",value:function(){var t=void 0,e=this.X,i=new Array(64);for(t=16;t<68;t++)e[t]=this.p1(e[t-16]^e[t-9]^this.rotate(e[t-3],15))^this.rotate(e[t-13],7)^e[t-6];for(t=0;t<64;t++)i[t]=e[t]^e[t+4];var n=this.v,s=this.v_;l(n,0,s,0,this.v0.length);var o=void 0,r=void 0,a=void 0,u=void 0,c=void 0;for(t=0;t<16;t++)c=this.rotate(s[0],12),o=h.parse(h.parse(c+s[4])+this.rotate(this.T_00_15,t)),o=this.rotate(o,7),r=o^c,a=h.parse(h.parse(this.ff_00_15(s[0],s[1],s[2])+s[3])+r)+i[t],u=h.parse(h.parse(this.gg_00_15(s[4],s[5],s[6])+s[7])+o)+e[t],s[3]=s[2],s[2]=this.rotate(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=this.rotate(s[5],19),s[5]=s[4],s[4]=this.p0(u);for(t=16;t<64;t++)c=this.rotate(s[0],12),o=h.parse(h.parse(c+s[4])+this.rotate(this.T_16_63,t)),o=this.rotate(o,7),r=o^c,a=h.parse(h.parse(this.ff_16_63(s[0],s[1],s[2])+s[3])+r)+i[t],u=h.parse(h.parse(this.gg_16_63(s[4],s[5],s[6])+s[7])+o)+e[t],s[3]=s[2],s[2]=this.rotate(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=this.rotate(s[5],19),s[5]=s[4],s[4]=this.p0(u);for(t=0;t<8;t++)n[t]^=h.parse(s[t]);this.xOff=0,l(this.X0,0,this.X,0,this.X0.length)}},{key:"processWord",value:function(t,e){var i=t[e]<<24;i|=(255&t[++e])<<16,i|=(255&t[++e])<<8,i|=255&t[++e],this.X[this.xOff]=i,16==++this.xOff&&this.processBlock()}},{key:"processLength",value:function(t){this.xOff>14&&this.processBlock(),this.X[14]=this.urShiftLong(t,32),this.X[15]=4294967295&t}},{key:"intToBigEndian",value:function(t,e,i){e[i]=h.parseByte(this.urShift(t,24)),e[++i]=h.parseByte(this.urShift(t,16)),e[++i]=h.parseByte(this.urShift(t,8)),e[++i]=h.parseByte(t)}},{key:"doFinal",value:function(t,e){this.finish();for(var i=0;i<8;i++)this.intToBigEndian(this.v[i],t,e+4*i);return this.reset(),this.DIGEST_LENGTH}},{key:"update",value:function(t){this.xBuf[this.xBufOff++]=t,this.xBufOff==this.xBuf.length&&(this.processWord(this.xBuf,0),this.xBufOff=0),this.byteCount++}},{key:"blockUpdate",value:function(t,e,i){for(;0!=this.xBufOff&&i>0;)this.update(t[e]),e++,i--;for(;i>this.xBuf.length;)this.processWord(t,e),e+=this.xBuf.length,i-=this.xBuf.length,this.byteCount+=this.xBuf.length;for(;i>0;)this.update(t[e]),e++,i--}},{key:"finish",value:function(){var t=this.byteCount<<3;for(this.update(128);0!=this.xBufOff;)this.update(0);this.processLength(t),this.processBlock()}},{key:"rotate",value:function(t,e){return t<<e|this.urShift(t,32-e)}},{key:"p0",value:function(t){return t^this.rotate(t,9)^this.rotate(t,17)}},{key:"p1",value:function(t){return t^this.rotate(t,15)^this.rotate(t,23)}},{key:"ff_00_15",value:function(t,e,i){return t^e^i}},{key:"ff_16_63",value:function(t,e,i){return t&e|t&i|e&i}},{key:"gg_00_15",value:function(t,e,i){return t^e^i}},{key:"gg_16_63",value:function(t,e,i){return t&e|~t&i}},{key:"urShift",value:function(t,e){return(t>h.maxValue||t<h.minValue)&&(t=h.parse(t)),t>=0?t>>e:(t>>e)+(2<<~e)}},{key:"urShiftLong",value:function(t,e){var i=void 0,n=new r;if(n.fromInt(t),n.signum()>=0)i=n.shiftRight(e).intValue();else{var s=new r;s.fromInt(2);var o=~e,a="";if(o<0){for(var l=64+o,h=0;h<l;h++)a+="0";var u=new r;u.fromInt(t>>e);var c=new r("10"+a,2);a=c.toRadix(10),i=c.add(u).toRadix(10)}else a=s.shiftLeft(~e).intValue(),i=(t>>e)+a}return i}},{key:"getZ",value:function(t,e){var i=a.parseUtf8StringToHex("1234567812345678"),n=4*i.length;this.update(n>>8&255),this.update(255&n);var s=a.hexToArray(i);this.blockUpdate(s,0,s.length);var o=a.hexToArray(t.curve.a.toBigInteger().toRadix(16)),r=a.hexToArray(t.curve.b.toBigInteger().toRadix(16)),l=a.hexToArray(t.getX().toBigInteger().toRadix(16)),h=a.hexToArray(t.getY().toBigInteger().toRadix(16)),u=a.hexToArray(e.substr(0,64)),c=a.hexToArray(e.substr(64,64));this.blockUpdate(o,0,o.length),this.blockUpdate(r,0,r.length),this.blockUpdate(l,0,l.length),this.blockUpdate(h,0,h.length),this.blockUpdate(u,0,u.length),this.blockUpdate(c,0,c.length);var p=new Array(this.getDigestSize());return this.doFinal(p,0),p}}]),t}();t.exports=u},function(t,e,i){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new _;t=m.hexToArray(m.parseUtf8StringToHex(t)),e.length>128&&(e=e.substr(e.length-128));var s=e.substr(0,64),o=e.substr(64);e=n.createPoint(s,o);var r=n.initEncipher(e);n.encryptBlock(t);var a=m.arrayToHex(t),l=new Array(32);return n.doFinal(l),l=m.arrayToHex(l),i===L?r+a+l:r+l+a}function s(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=new _;e=new c(e,16);var s=t.substr(0,64),o=t.substr(0+s.length,64),r=s.length+o.length,a=t.substr(r,64),l=t.substr(r+64);i===L&&(a=t.substr(t.length-64),l=t.substr(r,t.length-r-64));var h=m.hexToArray(l),u=n.createPoint(s,o);n.initDecipher(e,u),n.decryptBlock(h);var p=new Array(32);return n.doFinal(p),m.arrayToHex(p)===a?m.arrayToUtf8(h):""}function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.pointPool,s=i.der,o=i.hash,r=i.publicKey,u="string"==typeof t?m.parseUtf8StringToHex(t):m.parseArrayBufferToHex(t);o&&(r=r||l(e),u=a(u,r));var p=new c(e,16),y=new c(u,16),f=null,_=null,g=null;do{do{var v=void 0;v=n&&n.length?n.pop():h(),f=v.k,_=y.add(v.x1).mod(x)}while(_.equals(c.ZERO)||_.add(f).equals(x))g=p.add(c.ONE).modInverse(x).multiply(f.subtract(_.multiply(p))).mod(x)}while(g.equals(c.ZERO))return s?d(_,g):m.leftPad(_.toString(16),64)+m.leftPad(g.toString(16),64)}function r(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n.der,o=n.hash,r="string"==typeof t?m.parseUtf8StringToHex(t):m.parseArrayBufferToHex(t);o&&(r=a(r,i));var l=void 0,h=void 0;if(s){var u=y(e);l=u.r,h=u.s}else l=new c(e.substring(0,64),16),h=new c(e.substring(64),16);var p=b.decodePointHex(i),d=new c(r,16),f=l.add(h).mod(x);if(f.equals(c.ZERO))return!1;var _=v.multiply(h).add(p.multiply(f)),g=d.add(_.getX().toBigInteger()).mod(x);return l.equals(g)}function a(t,e){var i=new f,n=(new f).getZ(v,e.substr(2,128)),s=m.hexToArray(m.arrayToHex(n).toString()),o=t,r=m.hexToArray(o),a=new Array(i.getDigestSize());return i.blockUpdate(s,0,s.length),i.blockUpdate(r,0,r.length),i.doFinal(a,0),m.arrayToHex(a).toString()}function l(t){var e=v.multiply(new c(t,16));return"04"+m.leftPad(e.getX().toBigInteger().toString(16),64)+m.leftPad(e.getY().toBigInteger().toString(16),64)}function h(){var t=m.generateKeyPairHex(),e=b.decodePointHex(t.publicKey);return t.k=new c(t.privateKey,16),t.x1=e.getX().toBigInteger(),t}var u=i(0),c=u.BigInteger,p=i(4),d=p.encodeDer,y=p.decodeDer,f=i(2),_=i(6),m=i(1),g=m.generateEcparam(),v=g.G,b=g.curve,x=g.n,L=0;t.exports={generateKeyPairHex:m.generateKeyPairHex,doEncrypt:n,doDecrypt:s,doSignature:o,doVerifySignature:r,getPoint:h}},function(t,e,i){function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":_(e))&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":_(e)));t.prototype=(0,d.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(c.default?(0,c.default)(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=t.toString(16);if("-"!==e.substr(0,1))e.length%2==1?e="0"+e:e.match(/^[0-7]/)||(e="00"+e);else{var i=e.substr(1),n=i.length;n%2==1?n+=1:e.match(/^[0-7]/)||(n+=2);for(var s="",o=0;o<n;o++)s+="f";e=new x(s,16).xor(t).add(x.ONE).toString(16).replace(/^-/,"")}return e}function a(t,e){if("8"!==t.substring(e+2,e+3))return 1;var i=parseInt(t.substring(e+3,e+4));return 0===i?-1:0<i&&i<10?i+1:-2}function l(t,e){var i=a(t,e);return i<1?"":t.substring(e+2,e+2+2*i)}function u(t,e){var i=l(t,e);if(""===i)return-1;var n=void 0;return n=parseInt(i.substring(0,1))<8?new x(i,16):new x(i.substring(2),16),n.intValue()}function p(t,e){var i=a(t,e);return i<0?l_len:e+2*(i+1)}function y(t,e){var i=p(t,e),n=u(t,e);return t.substring(i,i+2*n)}function m(t,e){return p(t,e)+2*u(t,e)}function g(t,e){var i=[],n=p(t,e);i.push(n);for(var s=u(t,e),o=n,r=0;;){var a=m(t,o);if(null===a||a-n>=2*s)break;if(r>=200)break;i.push(a),o=a,r++}return i}var v=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,f.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),b=i(0),x=b.BigInteger,L=function(){function t(){o(this,t),this.isModified=!0,this.hTLV=null,this.hT="00",this.hL="00",this.hV=""}return v(t,[{key:"getLengthHexFromValue",value:function(){var t=this.hV.length/2,e=t.toString(16);return e.length%2==1&&(e="0"+e),t<128?e:(128+e.length/2).toString(16)+e}},{key:"getEncodedHex",value:function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV}},{key:"getFreshValueHex",value:function(){return""}}]),t}(),w=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||(0,h.default)(e)).call(this));return i.hT="02",t&&t.bigint&&(i.hTLV=null,i.isModified=!0,i.hV=r(t.bigint)),i}return s(e,t),v(e,[{key:"getFreshValueHex",value:function(){return this.hV}}]),e}(L),S=function(t){function e(t){o(this,e);var i=n(this,(e.__proto__||(0,h.default)(e)).call(this));return i.hT="30",i.asn1Array=[],t&&t.array&&(i.asn1Array=t.array),i}return s(e,t),v(e,[{key:"getFreshValueHex",value:function(){for(var t="",e=0;e<this.asn1Array.length;e++)t+=this.asn1Array[e].getEncodedHex();return this.hV=t,this.hV}}]),e}(L);t.exports={encodeDer:function(t,e){return new S({array:[new w({bigint:t}),new w({bigint:e})]}).getEncodedHex()},decodeDer:function(t){var e=g(t,0),i=e[0],n=e[1],s=y(t,i),o=y(t,n);return{r:new x(s,16),s:new x(o,16)}}}},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,f.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),r=o.BigInteger,a=new r("3"),l=function(){function t(e,i){n(this,t),this.x=i,this.q=e}return s(t,[{key:"equals",value:function(t){return t===this||this.q.equals(t.q)&&this.x.equals(t.x)}},{key:"toBigInteger",value:function(){return this.x}},{key:"negate",value:function(){return new t(this.q,this.x.negate().mod(this.q))}},{key:"add",value:function(e){return new t(this.q,this.x.add(e.toBigInteger()).mod(this.q))}},{key:"subtract",value:function(e){return new t(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}},{key:"multiply",value:function(e){return new t(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}},{key:"divide",value:function(e){return new t(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}},{key:"square",value:function(){return new t(this.q,this.x.square().mod(this.q))}}]),t}(),h=function(){function t(e,i,s,o){n(this,t),this.curve=e,this.x=i,this.y=s,this.z=void 0===o?r.ONE:o,this.zinv=null}return s(t,[{key:"getX",value:function(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}},{key:"getY",value:function(){return null===this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}},{key:"equals",value:function(t){return t===this||(this.isInfinity()?t.isInfinity():t.isInfinity()?this.isInfinity():!!t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(r.ZERO)&&t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q).equals(r.ZERO))}},{key:"isInfinity",value:function(){return null===this.x&&null===this.y||this.z.equals(r.ZERO)&&!this.y.toBigInteger().equals(r.ZERO)}},{key:"negate",value:function(){return new t(this.curve,this.x,this.y.negate(),this.z)}},{key:"add",value:function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var i=this.x.toBigInteger(),n=this.y.toBigInteger(),s=this.z,o=e.x.toBigInteger(),a=e.y.toBigInteger(),l=e.z,h=this.curve.q,u=i.multiply(l).mod(h),c=o.multiply(s).mod(h),p=u.subtract(c),d=n.multiply(l).mod(h),y=a.multiply(s).mod(h),f=d.subtract(y);if(r.ZERO.equals(p))return r.ZERO.equals(f)?this.twice():this.curve.infinity;var _=u.add(c),m=s.multiply(l).mod(h),g=p.square().mod(h),v=p.multiply(g).mod(h),b=m.multiply(f.square()).subtract(_.multiply(g)).mod(h),x=p.multiply(b).mod(h),L=f.multiply(g.multiply(u).subtract(b)).subtract(d.multiply(v)).mod(h),w=v.multiply(m).mod(h);return new t(this.curve,this.curve.fromBigInteger(x),this.curve.fromBigInteger(L),w)}},{key:"twice",value:function(){if(this.isInfinity())return this;if(!this.y.toBigInteger().signum())return this.curve.infinity;var e=this.x.toBigInteger(),i=this.y.toBigInteger(),n=this.z,s=this.curve.q,o=this.curve.a.toBigInteger(),r=e.square().multiply(a).add(o.multiply(n.square())).mod(s),l=i.shiftLeft(1).multiply(n).mod(s),h=i.square().mod(s),u=h.multiply(e).multiply(n).mod(s),c=l.square().mod(s),p=r.square().subtract(u.shiftLeft(3)).mod(s),d=l.multiply(p).mod(s),y=r.multiply(u.shiftLeft(2).subtract(p)).subtract(c.shiftLeft(1).multiply(h)).mod(s),f=l.multiply(c).mod(s);return new t(this.curve,this.curve.fromBigInteger(d),this.curve.fromBigInteger(y),f)}},{key:"multiply",value:function(t){if(this.isInfinity())return this;if(!t.signum())return this.curve.infinity;for(var e=t.multiply(a),i=this.negate(),n=this,s=e.bitLength()-2;s>0;s--){n=n.twice();var o=e.testBit(s);o!==t.testBit(s)&&(n=n.add(o?this:i))}return n}}]),t}(),u=function(){function t(e,i,s){n(this,t),this.q=e,this.a=this.fromBigInteger(i),this.b=this.fromBigInteger(s),this.infinity=new h(this,null,null)}return s(t,[{key:"equals",value:function(t){return t===this||this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}},{key:"fromBigInteger",value:function(t){return new l(this.q,t)}},{key:"decodePointHex",value:function(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,i=t.substr(2,e),n=t.substr(e+2,e);return new h(this,this.fromBigInteger(new r(i,16)),this.fromBigInteger(new r(n,16)));default:return null}}}]),t}();t.exports={ECPointFp:h,ECCurveFp:u}},function(t,e,i){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,f.default)(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(0),r=o.BigInteger,a=i(2),l=i(1),h=function(){function t(){n(this,t),this.ct=1,this.p2=null,this.sm3keybase=null,this.sm3c3=null,this.key=new Array(32),this.keyOff=0}return s(t,[{key:"reset",value:function(){this.sm3keybase=new a,this.sm3c3=new a;var t=l.hexToArray(this.p2.getX().toBigInteger().toRadix(16)),e=l.hexToArray(this.p2.getY().toBigInteger().toRadix(16))
;this.sm3keybase.blockUpdate(t,0,t.length),this.sm3c3.blockUpdate(t,0,t.length),this.sm3keybase.blockUpdate(e,0,e.length),this.ct=1,this.nextKey()}},{key:"nextKey",value:function(){var t=new a(this.sm3keybase);t.update(this.ct>>24&255),t.update(this.ct>>16&255),t.update(this.ct>>8&255),t.update(255&this.ct),t.doFinal(this.key,0),this.keyOff=0,this.ct++}},{key:"initEncipher",value:function(t){var e=l.generateKeyPairHex(),i=new r(e.privateKey,16),n=e.publicKey;return this.p2=t.multiply(i),this.reset(),n.length>128&&(n=n.substr(n.length-128)),n}},{key:"encryptBlock",value:function(t){this.sm3c3.blockUpdate(t,0,t.length);for(var e=0;e<t.length;e++)this.keyOff===this.key.length&&this.nextKey(),t[e]^=255&this.key[this.keyOff++]}},{key:"initDecipher",value:function(t,e){this.p2=e.multiply(t),this.reset()}},{key:"decryptBlock",value:function(t){for(var e=0;e<t.length;e++)this.keyOff===this.key.length&&this.nextKey(),t[e]^=255&this.key[this.keyOff++];this.sm3c3.blockUpdate(t,0,t.length)}},{key:"doFinal",value:function(t){var e=l.hexToArray(this.p2.getY().toBigInteger().toRadix(16));this.sm3c3.blockUpdate(e,0,e.length),this.sm3c3.doFinal(t,0),this.reset()}},{key:"createPoint",value:function(t,e){var i="04"+t+e;return l.getGlobalCurve().decodePointHex(i)}}]),t}();t.exports=h}]);e.exports.sm2=m},{"babel-runtime/core-js/object/create":167,"babel-runtime/core-js/object/define-property":168,"babel-runtime/core-js/object/get-prototype-of":169,"babel-runtime/core-js/object/set-prototype-of":171,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],122:[function(require,module,exports){"use strict";function BigInteger(t,e,i){null!=t&&("number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,i,n,s,o){for(;--o>=0;){var r=e*this[t++]+i[n]+s;s=Math.floor(r/67108864),i[n++]=67108863&r}return s}function am2(t,e,i,n,s,o){for(var r=32767&e,a=e>>15;--o>=0;){var l=32767&this[t],h=this[t++]>>15,u=a*l+h*r;l=r*l+((32767&u)<<15)+i[n]+(1073741823&s),s=(l>>>30)+(u>>>15)+a*h+(s>>>30),i[n++]=1073741823&l}return s}function am3(t,e,i,n,s,o){for(var r=16383&e,a=e>>14;--o>=0;){var l=16383&this[t],h=this[t++]>>14,u=a*l+h*r;l=r*l+((16383&u)<<14)+i[n]+s,s=(l>>28)+(u>>14)+a*h,i[n++]=268435455&l}return s}function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var i=BI_RC[t.charCodeAt(e)];return null==i?-1:i}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,s=!1,o=0;--n>=0;){var r=8==i?255&t[n]:intAt(t,n);0>r?"-"==t.charAt(n)&&(s=!0):(s=!1,0==o?this[this.t++]=r:o+i>this.DB?(this[this.t-1]|=(r&(1<<this.DB-o)-1)<<o,this[this.t++]=r>>this.DB-o):this[this.t-1]|=r<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&0!=(128&t[0])&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,s=!1,o="",r=this.t,a=this.DB-r*this.DB%e;if(r-- >0)for(a<this.DB&&(i=this[r]>>a)>0&&(s=!0,o=int2char(i));r>=0;)e>a?(i=(this[r]&(1<<a)-1)<<e-a,i|=this[--r]>>(a+=this.DB-e)):(i=this[r]>>(a-=e)&n,0>=a&&(a+=this.DB,--r)),i>0&&(s=!0),s&&(o+=int2char(i));return s?o:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function nbits(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var i,n=t%this.DB,s=this.DB-n,o=(1<<s)-1,r=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+r+1]=this[i]>>s|a,a=(this[i]&o)<<n;for(i=r-1;i>=0;--i)e[i]=0;e[r]=a,e.t=this.t+r+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var n=t%this.DB,s=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var r=i+1;r<this.t;++r)e[r-i-1]|=(this[r]&o)<<s,e[r-i]=this[r]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<s),e.t=this.t-i,e.clamp()}function bnpSubTo(t,e){for(var i=0,n=0,s=Math.min(t.t,this.t);s>i;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=0>n?-1:0,-1>n?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function bnpMultiplyTo(t,e){var i=this.abs(),n=t.abs(),s=i.t;for(e.t=s+n.t;--s>=0;)e[s]=0;for(s=0;s<n.t;++s)e[s+i.t]=i.am(0,n[s],e,s,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,i){var n=t.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=nbi());var o=nbi(),r=this.s,a=t.s,l=this.DB-nbits(n[n.t-1]);l>0?(n.lShiftTo(l,o),s.lShiftTo(l,i)):(n.copyTo(o),s.copyTo(i));var h=o.t,u=o[h-1];if(0!=u){var c=u*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),p=this.FV/c,d=(1<<this.F1)/c,y=1<<this.F2,f=i.t,_=f-h,m=null==e?nbi():e;for(o.dlShiftTo(_,m),i.compareTo(m)>=0&&(i[i.t++]=1,i.subTo(m,i)),BigInteger.ONE.dlShiftTo(h,m),m.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--_>=0;){var g=i[--f]==u?this.DM:Math.floor(i[f]*p+(i[f-1]+y)*d);if((i[f]+=o.am(0,g,i,_,0,h))<g)for(o.dlShiftTo(_,m),i.subTo(m,i);i[f]<--g;)i.subTo(m,i)}null!=e&&(i.drShiftTo(h,e),r!=a&&BigInteger.ZERO.subTo(e,e)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),0>r&&BigInteger.ZERO.subTo(i,i)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,e){if(t>4294967295||1>t)return BigInteger.ONE;var i=nbi(),n=nbi(),s=e.convert(this),o=nbits(t)-1;for(s.copyTo(i);--o>=0;)if(e.sqrTo(i,n),(t&1<<o)>0)e.mulTo(n,s,i);else{var r=i;i=n,n=r}return e.revert(i)}function bnModPowInt(t,e){var i;return i=256>t||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,i)}function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=nbv(i),s=nbi(),o=nbi(),r="";for(this.divRemTo(n,s,o);s.signum()>0;)r=(i+o.intValue()).toString(t).substr(1)+r,s.divRemTo(n,s,o);return o.intValue().toString(t)+r}function bnpFromRadix(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),s=!1,o=0,r=0,a=0;a<t.length;++a){var l=intAt(t,a);0>l?"-"==t.charAt(a)&&0==this.signum()&&(s=!0):(r=e*r+l,++o>=i&&(this.dMultiply(n),this.dAddOffset(r,0),o=0,r=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(r,0)),s&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(t,e,i){if("number"==typeof e)if(2>t)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger.ONE.shiftLeft(t-1),this);else{var n=new Array,s=7&t;n.length=1+(t>>3),e.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,s=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[s++]=i|this.s<<this.DB-n);t>=0;)8>n?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,0>=n&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==s&&(128&this.s)!=(128&i)&&++s,(s>0||i!=this.s)&&(e[s++]=i);return e}function bnEquals(t){return 0==this.compareTo(t)}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,i){var n,s,o=Math.min(t.t,this.t);for(n=0;o>n;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(s=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],s);i.t=this.t}else{for(s=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(s,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+lbit(this[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=cbit(this[i]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function bnpChangeBit(t,e){var i=BigInteger.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var i=0,n=0,s=Math.min(t.t,this.t);s>i;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=0>n?-1:0,n>0?e[i++]=n:-1>n&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnSquare(){var t=nbi();return this.squareTo(t),t}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),i=nbi();return this.divRemTo(t,e,i),new Array(e,i)}function bnpDMultiply(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,i){t.multiplyTo(e,i)}function nSqrTo(t,e){t.squareTo(e)}function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var s;for(s=i.t-this.t;s>n;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(s=Math.min(t.t,e);s>n;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function bnpMultiplyUpperTo(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function bnModPow(t,e){var i,n,s=t.bitLength(),o=nbv(1);if(0>=s)return o;i=18>s?1:48>s?3:144>s?4:768>s?5:6,n=8>s?new Classic(e):e.isEven()?new Barrett(e):new Montgomery(e);var r=new Array,a=3,l=i-1,h=(1<<i)-1;if(r[1]=n.convert(this),i>1){var u=nbi();for(n.sqrTo(r[1],u);h>=a;)r[a]=nbi(),n.mulTo(u,r[a-2],r[a]),a+=2}var c,p,d=t.t-1,y=!0,f=nbi();for(s=nbits(t[d])-1;d>=0;){for(s>=l?c=t[d]>>s-l&h:(c=(t[d]&(1<<s+1)-1)<<l-s,d>0&&(c|=t[d-1]>>this.DB+s-l)),a=i;0==(1&c);)c>>=1,--a;if((s-=a)<0&&(s+=this.DB,--d),y)r[c].copyTo(o),y=!1;else{for(;a>1;)n.sqrTo(o,f),n.sqrTo(f,o),a-=2;a>0?n.sqrTo(o,f):(p=o,o=f,f=p),n.mulTo(f,r[c],o)}for(;d>=0&&0==(t[d]&1<<s);)n.sqrTo(o,f),p=o,o=f,f=p,--s<0&&(s=this.DB-1,--d)}return n.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var s=e.getLowestSetBit(),o=i.getLowestSetBit();if(0>o)return e;for(o>s&&(o=s),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=i.getLowestSetBit())>0&&i.rShiftTo(s,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function bnpModInt(t){if(0>=t)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return BigInteger.ZERO;for(var i=t.clone(),n=this.clone(),s=nbv(1),o=nbv(0),r=nbv(0),a=nbv(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(t,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?(r.isEven()&&a.isEven()||(r.addTo(this,r),a.subTo(t,a)),r.rShiftTo(1,r)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(n)>=0?(i.subTo(n,i),e&&s.subTo(r,s),o.subTo(a,o)):(n.subTo(i,n),e&&r.subTo(s,r),a.subTo(o,a))}return 0!=n.compareTo(BigInteger.ONE)?BigInteger.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}function bnIsProbablePrime(t){var e,i=this.abs();if(1==i.t&&i[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(i[0]==lowprimes[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<lowprimes.length;){for(var n=lowprimes[e],s=e+1;s<lowprimes.length&&lplim>n;)n*=lowprimes[s++];for(n=i.modInt(n);s>e;)if(n%lowprimes[e++]==0)return!1}return i.millerRabin(t)}function bnpMillerRabin(t){var r=this.subtract(BigInteger.ONE),i=r.getLowestSetBit();if(0>=i)return!1;var e=r.shiftRight(i);(t=t+1>>1)>lowprimes.length&&(t=lowprimes.length);for(var n=nbi(),o=0;t>o;++o){n.fromInt(lowprimes[Math.floor(eval(window.atob("TWF0aC5yYW5kb20oKQ=="))*lowprimes.length)]);var s=n.modPow(e,this);if(0!=s.compareTo(BigInteger.ONE)&&0!=s.compareTo(r)){for(var h=1;h++<i&&0!=s.compareTo(r);)if(s=s.modPowInt(2,this),0==s.compareTo(BigInteger.ONE))return!1;if(0!=s.compareTo(r))return!1}}return!0}function SM3Digest(){this.BYTE_LENGTH=64,this.xBuf=new Array,this.xBufOff=0,this.byteCount=0,this.DIGEST_LENGTH=32,this.v0=[1937774191,1226093241,388252375,-628488704,-1452330820,372324522,-477237683,-1325724082],this.v=new Array(8),this.v_=new Array(8),this.X0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.X=new Array(68),this.xOff=0,this.T_00_15=2043430169,this.T_16_63=2055708042,arguments.length>0?this.InitDigest(arguments[0]):this.Init()}function roateLeft(t,e){return t<<e|t>>>-e}function IntegerParse(t){if(t>2147483647||-2147483648>t){var e=4294967295&t;return e>2147483647?(e=2147483647&t,-((e^=2147483647)+1)):e}return t}function sm3(t){return(new SM3Digest).ComputeHash(t).toString()}var CryptoJS=require("./CryptoJS"),dbits,canary=0xdeadbeefcafe,j_lm=1;"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,52),BigInteger.prototype.F1=52-dbits,BigInteger.prototype.F2=2*dbits-52;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;9>=vv;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,function(){var t=CryptoJS,e=t.lib,i=e.WordArray,n=e.Hasher,s=t.algo,o=[],r=s.SM3=n.extend({_doReset:function(){this._hash=new i.init([1937774191,1226093241,388252375,3666478592,2842636476,372324522,3817729613,2969243214])},_doProcessBlock:function(t,e){for(var i=this._hash.words,n=i[0],s=i[1],r=i[2],a=i[3],l=i[4],h=0;80>h;h++){if(16>h)o[h]=0|t[e+h];else{var u=o[h-3]^o[h-8]^o[h-14]^o[h-16];o[h]=u<<1|u>>>31}var c=(n<<5|n>>>27)+l+o[h];c+=20>h?1518500249+(s&r|~s&a):40>h?1859775393+(s^r^a):60>h?(s&r|s&a|r&a)-1894007588:(s^r^a)-899497514,l=a,a=r,r=s<<30|s>>>2,s=n,n=c}i[0]=i[0]+n|0,i[1]=i[1]+s|0,i[2]=i[2]+r|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0},_doFinalize:function(){var t=this._data,e=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[14+(n+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(n+64>>>9<<4)]=i,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SM3=n._createHelper(r),t.HmacSM3=n._createHmacHelper(r)}(),SM3Digest.prototype={Init:function(){this.xBuf=new Array(4),this.Reset()},InitDigest:function(t){this.xBuf=new Array(t.xBuf.length),Array.Copy(t.xBuf,0,this.xBuf,0,t.xBuf.length),this.xBufOff=t.xBufOff,this.byteCount=t.byteCount,Array.Copy(t.X,0,this.X,0,t.X.length),this.xOff=t.xOff,Array.Copy(t.v,0,this.v,0,t.v.length)},GetDigestSize:function(){return this.DIGEST_LENGTH},Reset:function(){this.byteCount=0,this.xBufOff=0,Array.Clear(this.xBuf,0,this.xBuf.length),Array.Copy(this.v0,0,this.v,0,this.v0.length),this.xOff=0,Array.Copy(this.X0,0,this.X,0,this.X0.length)},GetByteLength:function(){return this.BYTE_LENGTH},ProcessBlock:function(){var t,e=this.X,i=new Array(64);for(t=16;68>t;t++)e[t]=this.P1(e[t-16]^e[t-9]^roateLeft(e[t-3],15))^roateLeft(e[t-13],7)^e[t-6];for(t=0;64>t;t++)i[t]=e[t]^e[t+4];var n=this.v,s=this.v_;Array.Copy(n,0,s,0,this.v0.length);var o,r,a,l,h;for(t=0;16>t;t++)h=roateLeft(s[0],12),o=h+s[4]+roateLeft(this.T_00_15,t),o=roateLeft(o,7),r=o^h,a=this.FF_00_15(s[0],s[1],s[2])+s[3]+r+i[t],l=this.GG_00_15(s[4],s[5],s[6])+s[7]+o+e[t],s[3]=s[2],s[2]=roateLeft(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=roateLeft(s[5],19),s[5]=s[4],s[4]=this.P0(l);for(t=16;64>t;t++)h=roateLeft(s[0],12),o=h+s[4]+roateLeft(this.T_16_63,t),o=roateLeft(o,7),r=o^h,a=this.FF_16_63(s[0],s[1],s[2])+s[3]+r+i[t],l=this.GG_16_63(s[4],s[5],s[6])+s[7]+o+e[t],s[3]=s[2],s[2]=roateLeft(s[1],9),s[1]=s[0],s[0]=a,s[7]=s[6],s[6]=roateLeft(s[5],19),s[5]=s[4],s[4]=this.P0(l);for(t=0;8>t;t++)n[t]^=s[t];this.xOff=0,Array.Copy(this.X0,0,this.X,0,this.X0.length)},ProcessWord:function(t,e){var i=t[e]<<24;i|=(255&t[++e])<<16,i|=(255&t[++e])<<8,i|=255&t[++e],this.X[this.xOff]=i,16==++this.xOff&&this.ProcessBlock()},ProcessLength:function(t){this.xOff>14&&this.ProcessBlock(),this.X[14]=this.URShiftLong(t,32),this.X[15]=4294967295&t},IntToBigEndian:function(t,e,i){e[i]=t>>>24&255,e[++i]=t>>>16&255,e[++i]=t>>>8&255,e[++i]=255&t},DoFinal:function(t,e){this.Finish();for(var i=0;8>i;i++)this.IntToBigEndian(this.v[i],t,e+4*i);return this.Reset(),this.DIGEST_LENGTH},Update:function(t){this.xBuf[this.xBufOff++]=t,this.xBufOff==this.xBuf.length&&(this.ProcessWord(this.xBuf,0),this.xBufOff=0),this.byteCount++},BlockUpdate:function(t,e,i){for(;0!=this.xBufOff&&i>0;)this.Update(t[e]),e++,i--;for(;i>this.xBuf.length;)this.ProcessWord(t,e),e+=this.xBuf.length,i-=this.xBuf.length,this.byteCount+=this.xBuf.length;for(;i>0;)this.Update(t[e]),e++,i--},Finish:function(){var t=this.byteCount<<3;for(this.Update(128);0!=this.xBufOff;)this.Update(0);this.ProcessLength(t),this.ProcessBlock()},ROTATE:function(t,e){return t<<e|this.URShift(t,32-e)},P0:function(t){return t^roateLeft(t,9)^roateLeft(t,17)},P1:function(t){return t^roateLeft(t,15)^roateLeft(t,23)},FF_00_15:function(t,e,i){return t^e^i},FF_16_63:function(t,e,i){return t&e|t&i|e&i},GG_00_15:function(t,e,i){return t^e^i},GG_16_63:function(t,e,i){return t&e|~t&i},URShift:function(t,e){return console.error(t),(t>Int32.maxValue||t<Int32.minValue)&&(console.error(t),t=IntegerParse(t)),t>=0?t>>e:(t>>e)+(2<<~e)},URShiftLong:function(t,e){var i,n=new BigInteger;if(n.fromInt(t),n.signum()>=0)i=n.shiftRight(e).intValue();else{var s=new BigInteger;s.fromInt(2);var o=~e,r="";if(0>o){for(var a=64+o,l=0;a>l;l++)r+="0";var h=new BigInteger;h.fromInt(t>>e);var u=new BigInteger("10"+r,2);r=u.toRadix(10);i=u.add(h).toRadix(10)}else r=s.shiftLeft(~e).intValue(),i=(t>>e)+r}return i},GetZ:function(t,e){var i=CryptoJS.enc.Utf8.parse("1234567812345679"),n=4*i.words.length*8;this.Update(n>>8&255),this.Update(255&n);var s=this.GetWords(i.toString());this.BlockUpdate(s,0,s.length);var o=this.GetWords(t.curve.a.toBigInteger().toRadix(16)),r=this.GetWords(t.curve.b.toBigInteger().toRadix(16)),a=this.GetWords(t.getX().toBigInteger().toRadix(16)),l=this.GetWords(t.getY().toBigInteger().toRadix(16)),h=this.GetWords(e.substr(0,64)),u=this.GetWords(e.substr(64,64));this.BlockUpdate(o,0,o.length),this.BlockUpdate(r,0,r.length),this.BlockUpdate(a,0,a.length),this.BlockUpdate(l,0,l.length),this.BlockUpdate(h,0,h.length),this.BlockUpdate(u,0,u.length);var c=new Array(this.GetDigestSize());return this.DoFinal(c,0),c},GetWords:function(t){for(var e=[],i=t.length,n=0;i>n;n+=2)e[e.length]=parseInt(t.substr(n,2),16);return e},GetHex:function(t){for(var e=[],i=0,n=0;n<2*t.length;n+=2)e[n>>>3]|=parseInt(t[i])<<24-n%8*4,i++;return new CryptoJS.lib.WordArray.init(e,t.length)},ComputeHash:function(t){if(!t)return null;var e=this.GetWords(CryptoJS.enc.Utf8.parse(t).toString());this.BlockUpdate(e,0,e.length);var i=new Array(this.GetDigestSize());return this.DoFinal(i,0),this.GetHex(i)}},Array.Clear=function(t,e,i){for(var n in t)t[n]=null},Array.Copy=function(t,e,i,n,s){for(var o=t.slice(e,e+s),r=0;r<o.length;r++)i[n]=o[r],n++},window.Int32={minValue:-parseInt("10000000000000000000000000000000",2),maxValue:parseInt("1111111111111111111111111111111",2),parse:function(t){if(t<this.minValue){for(var e=new Number(-t),i=e.toString(2),n=i.substr(i.length-31,31),s="",o=0;o<n.length;o++){var r=n.substr(o,1);s+="0"==r?"1":"0"}var a=parseInt(s,2);return a+1}if(t>this.maxValue){for(var e=Number(t),i=e.toString(2),n=i.substr(i.length-31,31),s="",o=0;o<n.length;o++){var r=n.substr(o,1);s+="0"==r?"1":"0"}var a=parseInt(s,2);return-(a+1)}return t},parseByte:function(t){if(t>255){var e=255&t;return e}if(-256>t){var e=255&t;return(e^=255)+1}return t}},module.exports.sm3=sm3},{"./CryptoJS":117}],123:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return(0,u.default)(t)}function o(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ACiGWnjaM9yLzflK",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"base64";if(M("iv",i)||M("key",e)){for(var s=L(m(e)),o=m(t),r=T(o),a=r.length/w,l=[],h=S(m(i)),u=0;u<a;u++){var c=u*w,p=S(r,c);h[0]=h[0]^p[0],h[1]=h[1]^p[1],h[2]=h[2]^p[2],h[3]=h[3]^p[3];var y=P(h,s);h=y;for(var f=0;f<w;f++)l[c+f]=y[parseInt(f/4)]>>(3-f)%4*8&255}return"base64"===n?d.fromByteArray(l):decodeURIComponent(escape(String.fromCharCode.apply(String,l)))}}function r(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"base64",n=L(m(e)),s=m(t),o=T(s),r=o.length/w,a=[],l=0;l<r;l++)for(var h=l*w,u=S(o,h),c=P(u,n),p=0;p<w;p++)a[h+p]=c[parseInt(p/4)]>>(3-p)%4*8&255;return"base64"===i?d.fromByteArray(a):decodeURIComponent(escape(String.fromCharCode.apply(String,a)))}function a(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ACiGWnjaM9yLzflK",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"base64";if(M("iv",i)||M("key",e)){var o=null,r=L(m(e)).reverse();o="base64"===n?d.toByteArray(t):m(t);for(var a=o.length/w,l=[],h=S(m(i)),u=0;u<a;u++){var c=u*w,p=S(o,c),y=P(p,r),f=[h[0]^y[0],h[1]^y[1],h[2]^y[2],h[3]^y[3]];h=p;for(var _=0;_<w;_++)l[c+_]=f[parseInt(_/4)]>>(3-_)%4*8&255}var g=C(l);return decodeURIComponent(escape(String.fromCharCode.apply(String,s(g))))}}function l(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"base64",n=L(m(e)).reverse(),o=null;o="base64"===i?d.toByteArray(t):m(t);for(var r=o.length/w,a=[],l=0;l<r;l++)for(var h=l*w,u=S(o,h),c=P(u,n),p=0;p<w;p++)a[h+p]=c[parseInt(p/4)]>>(3-p)%4*8&255;var y=C(a);return decodeURIComponent(escape(String.fromCharCode.apply(String,s(y))))}
var h=t("babel-runtime/core-js/array/from"),u=n(h),c=t("babel-runtime/core-js/json/stringify"),p=n(c),d=t("./base64"),y=[214,144,233,254,204,225,61,183,22,182,20,194,40,251,44,5,43,103,154,118,42,190,4,195,170,68,19,38,73,134,6,153,156,66,80,244,145,239,152,122,51,84,11,67,237,207,172,98,228,179,28,169,201,8,232,149,128,223,148,250,117,143,63,166,71,7,167,252,243,115,23,186,131,89,60,25,230,133,79,168,104,107,129,178,113,100,218,139,248,235,15,75,112,86,157,53,30,36,14,94,99,88,209,162,37,34,124,59,1,33,120,135,212,0,70,87,159,211,39,82,76,54,2,231,160,196,200,158,234,191,138,210,64,199,56,181,163,247,242,206,249,97,21,161,224,174,93,164,155,52,26,85,173,147,50,48,245,140,177,227,29,246,226,46,130,102,202,96,192,41,35,171,13,83,78,111,213,219,55,69,222,253,142,47,3,255,106,114,109,108,91,81,141,27,175,146,187,221,188,127,17,217,92,65,31,16,90,216,10,193,49,136,165,205,123,189,45,116,208,18,184,229,180,176,137,105,151,74,12,150,119,126,101,185,241,9,197,110,198,132,24,240,125,236,58,220,77,32,121,238,95,62,215,203,57,72],f=[462357,472066609,943670861,1415275113,1886879365,2358483617,2830087869,3301692121,3773296373,4228057617,404694573,876298825,1347903077,1819507329,2291111581,2762715833,3234320085,3705924337,4177462797,337322537,808926789,1280531041,1752135293,2223739545,2695343797,3166948049,3638552301,4110090761,269950501,741554753,1213159005,1684763257],_=[2746333894,1453994832,1736282519,2993693404],m=function(t){return/string/gi.test(Object.prototype.toString.call(t))||(t=(0,p.default)(t)),unescape(encodeURIComponent(t)).split("").map(function(t){return t.charCodeAt()})},g=function(t,e){return t<<e|t>>>32-e},v=function(t){return y[t>>>24&255]<<24|y[t>>>16&255]<<16|y[t>>>8&255]<<8|y[255&t]},b=function(t){var e=v(t);return e^g(e,2)^g(e,10)^g(e,18)^g(e,24)},x=function(t){var e=v(t);return e^g(e,13)^g(e,23)},L=function(t){var e=[],i=[t[0]<<24|t[1]<<16|t[2]<<8|t[3],t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[8]<<24|t[9]<<16|t[10]<<8|t[11],t[12]<<24|t[13]<<16|t[14]<<8|t[15]],n=new Array(36);n[0]=i[0]^_[0],n[1]=i[1]^_[1],n[2]=i[2]^_[2],n[3]=i[3]^_[3];for(var s=0;s<32;s++)n[s+4]=n[s]^x(n[s+1]^n[s+2]^n[s+3]^f[s]),e[s]=n[s+4];return e},w=16,S=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return[t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],t[e+4]<<24|t[e+5]<<16|t[e+6]<<8|t[e+7],t[e+8]<<24|t[e+9]<<16|t[e+10]<<8|t[e+11],t[e+12]<<24|t[e+13]<<16|t[e+14]<<8|t[e+15]]},P=function(t,e){var i=new Array(36);t.forEach(function(t,e){return i[e]=t});for(var n=0;n<32;n++)i[n+4]=i[n]^b(i[n+1]^i[n+2]^i[n+3]^e[n]);return[i[35],i[34],i[33],i[32]]},T=function(t){if(null===t)return null;var e=w-t.length%w,i=new Array(t.length+e);return t.forEach(function(t,e){return i[e]=t}),i.fill(e,t.length),i},C=function(t){if(null===t)return null;var e=t[t.length-1];return t.slice(0,t.length-e)},M=function(t,e){return!(!e||16!=e.length)||(console.error(t+" should be a 16 bytes string."),!1)},k={encryptSM4_ECB:r,decryptSM4_ECB:l,encryptSM4_CBC:o,decryptSM4_CBC:a};e.exports.EncUtil=k},{"./base64":119,"babel-runtime/core-js/array/from":161,"babel-runtime/core-js/json/stringify":164}],124:[function(t,e,i){"use strict";var n=L.DivIcon.extend({});e.exports.DivIcon=n,e.exports.divIcon=function(t,e){return new n(t,e)}},{}],125:[function(t,e,i){"use strict";var n=L.Icon.extend({});e.exports.Icon=n,e.exports.icon=function(t){return new n(t)}},{}],126:[function(t,e,i){"use strict";var n=L.Marker.extend({initialize:function(t,e){var i={lat:L.latLng(t).lng,lng:L.latLng(t).lat};L.Marker.prototype.initialize.call(this,i,e)},setLngLat:function(t){var e={lat:L.latLng(t).lng,lng:L.latLng(t).lat};return this.setLatLng(e),this},getLngLat:function(){var t=this.getLatLng(t);return[t.lng,t.lat]},setPoint:function(t){var e={lat:L.latLng(t).lng,lng:L.latLng(t).lat};return this.setLatLng(e),this},getPoint:function(){var t=this.getLatLng(t);return[t.lng,t.lat]}});e.exports.Marker=n,e.exports.marker=function(t,e){return new n(t,e)}},{}],127:[function(t,e,i){"use strict";var n=L.Popup.extend({setLngLat:function(t){var e={lat:L.latLng(t).lng,lng:L.latLng(t).lat};return this.setLatLng(e),this},getLngLat:function(){var t=this.getLatLng(t);return[t.lng,t.lat]},setPoint:function(t){var e={lat:L.latLng(t).lng,lng:L.latLng(t).lat};return this.setLatLng(e),this},getPoint:function(){var t=this.getLatLng(t);return[t.lng,t.lat]},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=L.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?L.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=0;switch(this._setAnchorPosition||(this._setAnchorPosition="top"),this._setAnchorPosition){case"bottom":case"top":n=this._containerWidth/2;break;case"left":n=this._containerWidth+20;break;case"right":n=20}var s=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(n)+e.x;this._container.style.bottom=s+"px",this._container.style.left=o+"px",this.setAnchorPosition(this._setAnchorPosition,e)}},setAnchorPosition:function(t,e){if(e||(e=this.options.offset?this.options.offset:{x:0,y:0}),!this._setAnchorPosition)return void(this._setAnchorPosition=t);switch(this._setAnchorPosition=t,t){case"bottom":this._tipContainer.style.top="-20px",this._tipContainer.style.bottom="",this._tipContainer.style.height="20px",this._tipContainer.style.width="40px",this._tipContainer.style.left="50%",this._tip.style.margin="10px auto 0",this._container.style.bottom="",this._container.style.top=10+e.y+"px",this._container.style.left=-this._containerWidth/2+e.x+"px";break;case"top":this._tipContainer.style.top="",this._tipContainer.style.bottom="",this._tipContainer.style.height="20px",this._tipContainer.style.width="40px",this._tipContainer.style.left="50%",this._tip.style.margin="-10px auto 0",this._container.style.top="",this._container.style.bottom=-7-e.y+"px",this._container.style.left=-this._containerWidth/2+e.x+"px";break;case"left":this._tipContainer.style.top="",this._tipContainer.style.left="calc(100% + 20px)",this._tipContainer.style.height="40px",this._tipContainer.style.width="20px";var i=0;i=e.y<0?Math.abs(e.y):e.y<40?-e.y:-40,this._tipContainer.style.bottom=i-(this._wrapper.clientHeight/2-20)+"px",this._tip.style.margin="10px 10px 10px -10px",this._container.style.bottom="0px",this._container.style.top=e.y-this._wrapper.clientHeight/2+"px",this._container.style.left=e.x-(this._containerWidth+20)+"px";break;case"right":this._tipContainer.style.top="",this._tipContainer.style.left="0px",this._tipContainer.style.height="40px",this._tipContainer.style.width="20px";var i=0;i=e.y<0?Math.abs(e.y):e.y<40?-e.y:-40,this._tipContainer.style.bottom=i-(this._wrapper.clientHeight/2-20)+"px",this._tip.style.margin="10px 10px 10px 10px",this._container.style.bottom="0px",this._container.style.top=e.y-this._wrapper.clientHeight/2+"px",this._container.style.left=20+e.x+"px"}}});e.exports.Popup=n,e.exports.popup=function(t,e){return new n(t,e)}},{}],128:[function(t,e,i){"use strict";var n=t("../Geometry/Geometry").Geometry,s=t("../Util"),o=L.Canvas.extend({initialize:function(t){t=E.Util.setOptions(this,t),this._isCacheCanvas=!!t.isCacheCavas&&t.isCacheCavas,L.Canvas.prototype.initialize.call(this,t)},onAdd:function(){if(this._container||(this._initContainer(),this._zoomAnimated&&L.DomUtil.addClass(this._container,"egis-zoom-animated")),!this._isCacheCanvas){var t=this._panel=this.getPane();t.appendChild(this._container),L.DomEvent.on(t,"mousemove",L.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this)}this._update(),this.on("update",this._updatePaths,this)},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(L.DomUtil.removeClass(this._panel,"egis-interactive"),e.options&&this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,s=this._drawFirst;s;s=s.next)i=s.layer,i._visible&&i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(L.DomUtil.addClass(this._panel,"egis-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_initContainer:function(){var t=this._container=document.createElement("canvas");this._ctx=t.getContext("2d")},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},L.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=L.Browser.retina?2:1;L.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",L.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_detectIconPath:function(){if(null==this._symbolImagePath){var t=L.DomUtil.create("div","egis-default-icon-path",document.body),e=L.DomUtil.getStyle(t,"background-image")||L.DomUtil.getStyle(t,"backgroundImage");document.body.removeChild(t),this._symbolImagePath=0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}},dashedLineTo:function(t,e,i,n,s){void 0===s&&(s=5);var o=i-t,r=n-e,a=Math.floor(Math.sqrt(o*o+r*r)),l=s<=0?a:a/s,h=r/a*s,u=o/a*s;this.beginPath();for(var c=0;c<l;c++)c%2?this.lineTo(t+c*u,e+c*h):this.moveTo(t+c*u,e+c*h);this.stroke()},drawLine:function(t,e,i){if(this._drawing){this._drawnLayers=s._drawnLayers;var n,o,r,a,l=this._ctx,h=t.length;if(h){for(l.beginPath(),n=0;n<h;n++)for(o=0,r=t[n].length;o<r;o++)a=t[n][o],l[o?"lineTo":"moveTo"](a.x,a.y);this._fillStrokeForSymbol(l,e,i)}}},drawCanvas:function(t,e,i,n){var s=this._ctx;if(s.save(),n&&(s.translate(e.x,e.y),s.rotate(n*Math.PI/180),s.translate(-e.x,-e.y)),i)try{s.drawImage(t,e.x-(t.width>>1)+(i[0]-0),e.y-(t.height>>1)+(i[1]-0),t.width,t.height)}catch(t){console.warn(t)}else s.drawImage(t,e.x-(t.width>>1),e.y-(t.height>>1),t.width,t.height);s.restore()},drawCanvastest:function(t){var e=this._ctx;e.save(),e.fillStyle="#0000FF",e.fillRect(t.x-2,t.y-2,4,4),e.restore()},_drawImage:function(t,e){var i=this._ctx;s.loadImage(t.src,function(e){t.opacity&&1!==t.opacity&&(i.globalAlpha=t.opacity),i.drawImage(e,0,0,t.width,t.height)})},drawPolygon:function(t,e,i){if(this._drawing){this._drawnLayers=s._drawnLayers;var n,o,r,a,l=this._ctx,h=t.length;if(h){for(l.beginPath(),n=0;n<h;n++){for(o=0,r=t[n].length;o<r;o++)a=t[n][o],l[o?"lineTo":"moveTo"](a.x,a.y);t[n][0].x==t[n][t[n].length-1].x&&t[n][0].y!=t[n][t[n].length-1].y||l.closePath()}this._fillStrokeForSymbol(l,e,i)}}},drawCircleSymbol:function(t,e,i){if(this._drawing&&!i._empty()){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=t.center,r=t.radius,a=(t.radiusY||t.radius)/t.radius;1!==a&&(n.save(),n.scale(1,a)),n.beginPath(),n.arc(o.x,o.y/a,r,0,2*Math.PI,!1),1!==a&&n.restore(),this._fillStrokeForSymbol(n,e,i)}},drawSector:function(t,e,i){if(this._drawing){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=(t.radiusY||t.radius)/t.radius;n.save(),n.beginPath(),n.moveTo(t.x,t.y),1!==o&&n.scale(1,o),n.arc(t.x,t.y/o,t.radius,t.beginAngle*Math.PI/180,t.endAngle*Math.PI/180,!1),1!==o&&n.scale(1,1/o),n.lineTo(t.x,t.y),n.closePath(),1!==o&&n.restore(),this._fillStrokeForSymbol(n,e,i)}},drawArc:function(t,e,i){if(this._drawing){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=(sectorObj.radiusY||sectorObj.radius)/sectorObj.radius;n.save(),n.beginPath(),n.moveTo(sectorObj.x,sectorObj.y),1!==o&&n.scale(1,o),n.arc(sectorObj.x,sectorObj.y/o,sectorObj.radius,sectorObj.beginAngle*Math.PI/180,sectorObj.endAngle*Math.PI/180,!1),1!==o&&n.scale(1,1/o),n.lineTo(sectorObj.x,sectorObj.y),n.closePath(),1!==o&&n.restore(),this._fillStrokeForSymbol(n,e,i)}},drawEllipse:function(t,e,i){if(this._drawing){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=t.center,r=t.width,a=t.height/t.width;n.save(),n.translate(o.x,o.y),1!==a&&n.scale(1,a),n.beginPath(),n.arc(0,0,r,0,2*Math.PI),n.restore(),this._fillStrokeForSymbol(n,e,i)}},_fillStrokeForSymbol:function(t,e,i){if(t.save(),e.fill){switch(t.globalAlpha=e.opacity,e.style){case"style_solid":t.fillStyle=e.color;break;case"style_vertical":var n=new Image;this._detectIconPath(),n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAEklEQVR42mNgIA78ZxhVSF+FADnECfcIwHeYAAAAAElFTkSuQmCC",t.fillStyle=t.createPattern(n,"repeat");break;case"style_horizontal":var n=new Image;this._detectIconPath(),n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAEElEQVR42mNgGAV0B/+JwQC+3An3dc4tsQAAAABJRU5ErkJggg==",t.fillStyle=t.createPattern(n,"repeat");break;case"style_cross":var n=new Image;this._detectIconPath(),n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAFUlEQVR42mNgIA78ZxhVSDWF/4nBAPYHEu7oyP2iAAAAAElFTkSuQmCC",t.fillStyle=t.createPattern(n,"repeat");break;case"style_forward":var n=new Image;this._detectIconPath(),n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAFElEQVR42mNgYGD4z0ACGFVMJ8UA7RAJ97b9jwIAAAAASUVORK5CYII=",t.fillStyle=t.createPattern(n,"repeat");break;case"style_backward":var n=new Image;this._detectIconPath(),n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAEUlEQVR42mNgIA78H1VEZ0UA7RAJ9w0UEO0AAAAASUVORK5CYII=",t.fillStyle=t.createPattern(n,"repeat");break;case"style_picture":if(e._img){var o="no-repeat";this._detectIconPath();var r=i._pxBounds,a=i._clickTolerance(),l=r.min.x+a,h=r.min.y+a;t.translate(l,h),e.repeatX&&e.repeatY?o="repeat":(e.repeatX&&(o="repeat-x"),e.repeatY&&(o="repeat-y")),t.fillStyle=t.createPattern(e._img,o)}}t.fill(e.fillRule||"evenodd")}if(e.stroke&&0!==e.outline.width){switch(t.globalAlpha=e.outline.opacity,t.lineWidth=e.outline.width?e.outline.width:1,e.outline.style){case"style_solid":t.setLineDash&&t.setLineDash([]);break;case"style_dash":t.setLineDash&&t.setLineDash([10,5]);break;case"style_dash_da1":t.setLineDash&&t.setLineDash([7,7]);break;case"style_dash_da2":t.setLineDash&&t.setLineDash([5,.1,10]);break;case"style_dash_da3":t.setLineDash&&t.setLineDash([10,.1,5]);break;case"style_dot":t.setLineDash&&t.setLineDash([5,5]);break;case"style_dash_dot":t.setLineDash&&t.setLineDash([5,5,1,5]);break;default:t.setLineDash&&t.setLineDash([])}t.strokeStyle=s.fixColorToRGBA(e.outline.color),t.lineCap=e.outline.lineCap,t.lineJoin=e.outline.lineJoin,t.stroke()}t.restore()},_drawCircleHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=e.radius,r=e.scale,a=(e.offset&&e.offset,new L.point(t.x,t.y));n.save(),n.translate(a.x,a.y),n.scale(r,r),n.translate(-a.x,-a.y),n.beginPath(),n.arc(a.x,a.y,o*r,0,2*Math.PI,!1),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore()},_drawCircle:function(t,e,i){this._drawing&&this._drawCircleHandle(t,e,i)},_drawRectHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=e.width,r=e.height,a=e.scale,l=e.angle,h=new L.point(t.x,t.y),u=h.subtract([o/2,r/2]);n.save(),n.translate(h.x,h.y),n.scale(a,a),n.rotate(l*Math.PI/180),n.translate(-h.x,-h.y),n.beginPath(),n.rect(u.x,u.y,o,r),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore()},_drawRect:function(t,e,i){this._drawing&&this._drawRectHandle(t,e,i)},_drawSquareHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=2*e.radius,r=e.scale,a=e.angle,l=new L.point(t.x,t.y),h=l.subtract([o/2,o/2]);n.save(),n.translate(l.x,l.y),n.scale(r,r),n.rotate(a*Math.PI/180),n.translate(-l.x,-l.y),n.beginPath(),n.rect(h.x,h.y,o,o),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore()},_drawSquare:function(t,e,i){this._drawing&&this._drawSquareHandle(t,e,i)},_drawTriangleHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=2*e.radius,r=e.scale,a=e.angle,l=new L.point(t.x,t.y),h=o*Math.sin(Math.PI/3),u=new L.Point(l.x,l.y-h/3*2),c=new L.Point(l.x-o/2,l.y+h/3),p=new L.Point(l.x+o/2,l.y+h/3);n.save(),n.translate(l.x,l.y),n.scale(r,r),n.rotate(a*Math.PI/180),n.translate(-l.x,-l.y),n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(c.x,c.y),n.lineTo(p.x,p.y),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore()},_drawTriangle:function(t,e,i){this._drawing&&this._drawTriangleHandle(t,e,i)},_drawCrossHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=2*e.radius,r=e.scale,a=e.rotate,l=new L.point(t.x,t.y),h=new L.Point(l.x,l.y-o/2),u=new L.Point(l.x,l.y+o/2),c=new L.Point(l.x-o/2,l.y),p=new L.Point(l.x+o/2,l.y);n.save(),n.translate(l.x,l.y),n.scale(r,r),n.rotate(a*Math.PI/180),n.translate(-l.x,-l.y),n.beginPath();var d=o/6;n.moveTo(h.x,h.y),n.lineTo(h.x+d,h.y),n.lineTo(h.x+d,h.y+2*d),n.lineTo(h.x+3*d,h.y+2*d),n.lineTo(h.x+3*d,h.y+4*d),n.lineTo(h.x+d,h.y+4*d),n.lineTo(h.x+d,h.y+6*d),n.lineTo(h.x-d,h.y+6*d),n.lineTo(h.x-d,h.y+4*d),n.lineTo(h.x-3*d,h.y+4*d),n.lineTo(h.x-3*d,h.y+2*d),n.lineTo(h.x-d,h.y+2*d),n.lineTo(h.x-d,h.y),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore(),t._pxGeometry=[h,u,c,p]},_drawCross:function(t,e,i){this._drawing&&this._drawCrossHandle(t,e,i)},_drawCrossAndSquareHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=2*e.radius,r=e.scale,a=e.rotate,l=new L.point(t.x,t.y),h=new L.Point(l.x,l.y-o/2),u=new L.Point(l.x,l.y+o/2),c=new L.Point(l.x-o/2,l.y),p=new L.Point(l.x+o/2,l.y),d=l.subtract([o/2,o/2]);n.save(),n.translate(l.x,l.y),n.scale(r,r),n.rotate(a*Math.PI/180),n.translate(-l.x,-l.y),n.beginPath();n.moveTo(h.x,h.y),n.lineTo(u.x,u.y),n.moveTo(c.x,c.y),n.lineTo(p.x,p.y),n.rect(d.x,d.y,o,o),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore(),t._pxGeometry=[h,u,c,p]},_drawCrossAndSquare:function(t,e,i){this._drawing&&this._drawCrossAndSquareHandle(t,e,i)},_drawLineAndSquareHandle:function(t,e,i){this._drawnLayers=s._drawnLayers;var n=this._ctx,o=2*e.radius,r=e.scale,a=e.rotate,l=new L.point(t.x,t.y),h=e.radius,u=new L.Point(l.x+h,l.y-h),c=new L.Point(l.x+h+h*Math.sin(45),l.y-h-h*Math.cos(45)),p=new L.Point(l.x-h,l.y+h),d=new L.Point(l.x-h-h*Math.sin(45),l.y+h+h*Math.cos(45)),y=l.subtract([o/2,o/2]);n.save(),n.translate(l.x,l.y),n.scale(r,r),n.rotate(a*Math.PI/180),n.translate(-l.x,-l.y),n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(c.x,c.y),n.moveTo(p.x,p.y),n.lineTo(d.x,d.y),n.rect(y.x,y.y,o,o),n.closePath(),this._fillStrokeForSymbol(n,e,i),n.restore(),t._pxGeometry=[u,c,p,d]},_drawLineAndSquare:function(t,e,i){this._drawing&&this._drawLineAndSquareHandle(t,e,i)},_updatePointSymbol:function(t,e){if(this._drawing&&(this._drawnLayers=s._drawnLayers,L.EleSymbol&&L.EleSymbol.loadEleSymbol)){var i=e.symbolId,n=this._ctx,o=s.fixColorToRGBA(e.color),r=e.rotate,a=e._scale,l=e.opacity;p=t;var h=new L.EleSymbol.SymbolStyle(o,r,a,l);L.EleSymbol.loadEleSymbol.draw(n,i,new L.EleSymbol.GeoPoint(p.x,p.y),h)}},_drawTextHandle:function(t,e,i,n,o,r){if(e.text){this._drawnLayers=s._drawnLayers;var a,l,h=this._ctx,u=e.angle,n=n||0,o=o||0,c=new L.point(t.x,t.y);if(h.save(),h.font=e.font?e.font:"10px sans-serif",h.fillStyle=e.color?"#"+s.fixColorToRGBA(e.color):"#000",h.textAlign=e.textAlign?e.textAlign:"left",h.textBaseline=e.textBaseline?e.textBaseline:"top",h.translate(c.x,c.y),h.scale(e._scale,e._scale),h.rotate(u*Math.PI/180),h.translate(-c.x,-c.y),(s.fixColorToRGBA(e.backgroundColor)||0===e.backgroundColor)&&(e.fill=!0),e.fill){switch(h.beginPath(),h.textAlign){case"left":a=c.x;break;case"center":a=c.x-n/2;break;case"right":a=c.x-n;break;default:a=c.x-n/2}switch(h.textBaseline){case"top":l=c.y;break;case"middle":l=c.y-o/2;break;case"bottom":l=c.y-o;break;default:l=c.y-o/2}var p=Number(e.font.split("px")[0])||0,d=e.text.split(/\n/);h.rect(a-2.5,l-2.5,n+5,o+(d.length-1)*p+5),h.closePath(),h.globalAlpha=e.opacity,h.fillStyle=s.fixColorToRGBA(e.backgroundColor),h.fill(e.fillRule||"evenodd")}if(e.outline){switch(h.textAlign){case"left":a=c.x;break;case"center":a=c.x-n/2;break;case"right":a=c.x-n;break;default:a=c.x-n/2}switch(h.textBaseline){case"top":l=c.y;break;case"middle":l=c.y-o/2;break;case"bottom":l=c.y-o;break;default:l=c.y-o/2}h.strokeStyle=e.outline.color?h.fillStyle="#"+s.fixColorToRGBA(e.outline.color):"#000",h.lineWidth=e.outline.linewidth,h.strokeRect(a-2.5,l-2.5,n+5,o+5)}if(h.globalAlpha=1,h.fillStyle=s.fixColorToRGBA(e.color),r)h.fillText(e.text,c.x,c.y);else for(var y=Number(e.font.split("px")[0])||0,f=e.text.split(/\n/),_=0;_<f.length;_++)h.fillText(f[_],c.x,c.y+(y+2)*_);h.restore()}},_drawText:function(t,e,i,n,s,o){this._drawing&&this._drawTextHandle(t,e,i,n,s,o)},drawEleSymbol:function(t,e){if(this._drawing){var i=this._ctx;if(null!=e.rotate&&0!=e._rotate&&(e._rotate=360-e.rotate),e.outline&&e.outline._linewidth&&e.outline._linewidth&&(i.lineWidth=e.outline._linewidth),this._drawnLayers=s._drawnLayers,L.EleSymbol){var o=new L.EleSymbol.LabelStyle;switch(o.text=e.text,o.fontFamily=e.fontFamily,o.color=e.color,o.height=e.height,o.position=e.position,o.direction=e.direction,o.rowCharNums=e.rowCharNums,o.offsetX=e.offsetX,o.offsetY=e.offsetY,o.bold=e.bold,t.type){case n.POINT:e.isLabel?L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPoint(t.geometry.x,t.geometry.y),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e._scale,e.outline.color,e.opacity),o):L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPoint(t.geometry.x,t.geometry.y),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e._scale,e.outline.color,e.opacity));break;case n.POLYLINE:for(var r=t.geometry[0],a=[],l=0;l<r.length;l++)a.push(new L.EleSymbol.GeoPoint(r[l].x,r[l].y));e.isLabel?L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolyline(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e._scale,e.outline.color,e.opacity),o):L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolyline(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e._scale,e.outline.color,e.opacity));break;case n.POLYGON:for(var r=t.geometry[0],a=[],l=0;l<r.length;l++)a.push(new L.EleSymbol.GeoPoint(r[l].x,r[l].y));e.isLabel?L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolygon(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e.scale,e.outline.color,e.opacity),o):L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolygon(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e.scale,e.outline.color,e.opacity));break;case n.CIRCLE:for(var h=t.geometry.center,u=t.geometry.radius,a=[],l=0;l<120;l++){var c=2*Math.PI/360*6*l,p=h.x+Math.sin(c)*u,d=h.y-Math.cos(c)*u;a.push(new L.EleSymbol.GeoPoint(p,d))}e.isLabel?L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolygon(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e.scale,e.outline.color,e.opacity),o):L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoPolygon(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e.scale,e.outline.color,e.opacity));break;case n.EXTENT:L.EleSymbol.loadEleSymbol.draw(i,e.symbolId,new L.EleSymbol.GeoEnvelope(a),new L.EleSymbol.SymbolStyle(e.color,e._rotate,e.scale,e.outline.color,e.opacity),o)}}}},_extendRedrawBounds:function(t){t._pxBounds&&L.Canvas.prototype._extendRedrawBounds.call(this,t)}});L.Bounds.prototype.contains=function(t){var e,i;return t="number"==typeof t[0]||t instanceof L.Point?L.point(t):t.hasOwnProperty("x")&&t.hasOwnProperty("y")?L.point(t.x,t.y):L.bounds(t),t instanceof L.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},L.bounds=function(t,e){return!t||t instanceof L.Bounds?t:!t||t.hasOwnProperty("min")||t.hasOwnProperty("max")?t:new L.Bounds(t,e)},L.Canvas.prototype._ex,e.exports.GISCanvas=o},{"../Geometry/Geometry":57,"../Util":154}],129:[function(t,e,i){"use strict";var n=t("./GISCanvas"),s=L.Canvas.extend({initialize:function(t){L.Util.setOptions(this,t),L.Canvas.prototype.initialize.call(this,t),this._initContainer(t)},onAdd:function(){this._container||this._initContainer()},_handleMouseOut:function(t){n.GISCanvas.prototype._handleMouseOut.call(this,t)},_handleMouseHover:function(t,e){n.GISCanvas.prototype._handleMouseHover.call(this,t)},_initContainer:function(t){var e=this._container=document.createElement("canvas");t.canvasCacheSize?(e.width=t.canvasCacheSize.width?t.canvasCacheSize.width:50,e.height=t.canvasCacheSize.height?t.canvasCacheSize.height:50):(e.width=50,e.height=50),this._ctx=e.getContext("2d")},_update:function(){n.GISCanvas.prototype._update.call(this)},_detectIconPath:function(){n.GISCanvas.prototype._detectIconPath.call(this)},dashedLineTo:function(t,e,i,s,o){n.GISCanvas.prototype.dashedLineTo.call(this,t,e,i,s,o)},drawLine:function(t,e,i){n.GISCanvas.prototype.drawLine.call(this,t,e,i)},drawCanvas:function(t,e){this._ctx.drawImage(t,e.x,e.y,t.width,t.height)},_drawImage:function(t,e){n.GISCanvas.prototype._drawImage.call(this,t,e)},_fillStrokeForSymbol:function(t,e,i){n.GISCanvas.prototype._fillStrokeForSymbol.call(this,t,e,i)},_drawCircle:function(t,e,i){n.GISCanvas.prototype._drawCircleHandle.call(this,t,e,i)},_drawRect:function(t,e,i){n.GISCanvas.prototype._drawRectHandle.call(this,t,e,i)},_drawSquare:function(t,e,i){n.GISCanvas.prototype._drawSquareHandle.call(this,t,e,i)},_drawTriangle:function(t,e,i){n.GISCanvas.prototype._drawTriangleHandle.call(this,t,e,i)},_drawCross:function(t,e,i){n.GISCanvas.prototype._drawCrossHandle.call(this,t,e,i)},_drawCrossAndSquare:function(t,e,i){n.GISCanvas.prototype._drawCrossAndSquareHandle.call(this,t,e,i)},_drawLineAndSquare:function(t,e,i){n.GISCanvas.prototype._drawLineAndSquareHandle.call(this,t,e,i)},_drawText:function(t,e,i){n.GISCanvas.prototype._drawTextHandle.call(this,t,e.layer)}});e.exports.GISCanvasCache=s},{"./GISCanvas":128}],130:[function(t,e,i){"use strict";var n=t("./Renderer"),s=n.extend({options:{field:"",defaultSymbol:null,defaultLabel:"",classBreakInfos:[]},type:"classBreak",initialize:function(t){L.Util.setOptions(this,t)},addClassBreakInfo:function(t){return this.options.classBreakInfos.push(t),this},_getRampSymbol:function(t){var e=this,i=this.options.defaultSymbol;return this.options.classBreakInfos.forEach(function(n){var s=t[e.options.field];s>=n.minValue&&s<=n.maxValue&&(i=n.symbol)}),this.options.visualVariables&&this.options.visualVariables.forEach(function(n){var s=n.type.toLowerCase();s=s[0].toUpperCase()+s.substr(1),i["set"+s](e._getRamp(n.type,n.stops,t[n.field]))}),i},getClassBreakInfos:function(){return this.options.classBreakInfos},getDefaultSymbol:function(){return this.options.defaultSymbol},getDefaultLabel:function(){return this.options.defaultLabel}});e.exports.ClassBreaksRenderer=s,e.exports.classBreaksRenderer=function(t){return new s(t)}},{"./Renderer":131}],131:[function(t,e,i){"use strict";var n=L.Class.extend({options:{visualVariables:null},_getRamp:function(t,e,i){var n=function(t){if(7!==t.length)throw'the length of hexadecimal value of color must be 6 except character "#"';for(var e=[],i=1;i<7;i+=2)e.push(parseInt(t.slice(i,i+2),16));return e};if(e.length<2)throw"stops must contain at least two items";e.sort(function(t,e){return t.value>e.value});for(var s,o=0;o<e.length-1;o++){var r=e[o],a=e[o+1];if(i<=r.value)return s=r[t];if(!(i>=a.value)){if("color"===t.toLowerCase()){var l=n(r[t]),h=n(a[t]),u=(i-r.value)/(a.value-r.value);s="#"+[l[0]+Math.ceil((h[0]-l[0])*u),l[1]+Math.ceil((h[1]-l[1])*u),l[2]+Math.ceil((h[2]-l[2])*u)].map(function(t){return t<16?"0"+t.toString(16):t.toString(16)}).join("")}else{var l=r[t],h=a[t];s=l+(i-r.value)/(a.value-r.value)*(h-l)}return s}return s=a[t]}return s},getVisualVariables:function(t,e,i){return this.options.visualVariables}});e.exports=n},{}],132:[function(t,e,i){"use strict";var n=t("./Renderer"),s=n.extend({options:{label:"",symbol:null},initialize:function(t){L.Util.setOptions(this,t)},type:"simple",_getRampSymbol:function(t){var e=this,i=this.options.symbol.clone();return this.options.visualVariables&&this.options.visualVariables.forEach(function(n){var s=n.type.toLowerCase();s=s[0].toUpperCase()+s.substr(1),i["set"+s](n.stops?e._getRamp(n.type,n.stops,t[n.field]):t[n.field])}),i},getLabel:function(){return this.options.label},getSymbol:function(){return this.options.symbol}});e.exports.SimpleRenderer=s,e.exports.simpleRenderer=function(t){return new s(t)}},{"./Renderer":131}],133:[function(t,e,i){"use strict";function n(t,e,i){return e in t?(0,r.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s,o=t("babel-runtime/core-js/object/define-property"),r=function(t){return t&&t.__esModule?t:{default:t}}(o),a=t("./Renderer"),l=a.extend((s={options:{field:"",defaultSymbol:null,defaultLabel:"",uniqueValueInfos:[]},type:"uniqueValue",initialize:function(t){L.Util.setOptions(this,t)}},n(s,"initialize",function(t){var e=this;L.Util.setOptions(this,t),this._uniqueValueInfosMap={},this._uniqueValueInfosMap.default=this.options.defaultSymbol,this.options.uniqueValueInfos.forEach(function(t){e._uniqueValueInfosMap[t.value]={symbol:t.symbol,label:t.label}})}),n(s,"addUniqueValueInfo",function(t){return this.options.uniqueValueInfos.push(t),this._uniqueValueInfosMap[t.value]={symbol:t.symbol,label:t.label},this}),n(s,"getUniqueValueInfos",function(){return this.options.uniqueValueInfos}),n(s,"_getRampSymbol",function(t){var e=this,i=(this._uniqueValueInfosMap[t[this.options.field]]||this._uniqueValueInfosMap.default).symbol.clone();return this.options.visualVariables&&this.options.visualVariables.forEach(function(n){var s=n.type.toLowerCase();s=s[0].toUpperCase()+s.substr(1),i["set"+s](e._getRamp(n.type,n.stops,t[n.field]))}),i}),n(s,"getDefaultSymbol",function(){return this.options.defaultSymbol}),n(s,"getDefaultLabel",function(){return this.options.defaultLabel}),s));e.exports.UniqueValueRenderer=l,e.exports.UniqueValueRenderer=function(t){return new l(t)}},{"./Renderer":131,"babel-runtime/core-js/object/define-property":168}],134:[function(t,e,i){"use strict";var n=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,s=""===document.documentElement.style.pointerEvents,o={cors:n,pointerEvents:s};e.exports=o},{}],135:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./EleSymbol"),r=t("./../Util").Util,a=o.EleSymbol.extend({options:{isChangeByScale:!1},draw:function(t){var e=t._renderer,i=t._projectGeometry,n=t._attribute,s=(i.type,this),o=s.options;o.outline._linewidth=o.isChangeByScale?96/25.4*parseFloat(o.outline.linewidth)*1e3/t._map.getScale():96/25.4*parseFloat(o.outline.linewidth),e.drawEleSymbol(i,this.options,n)},getType:function(){return"EleFillSymbol"},toJSON:function(){return this.options.type="EleFillSymbol",JSON.parse((0,s.default)(this.options))},formJSON:function(t){return new a(t)},clone:function(){return new a(r.objectHandle.clone(this.options))},clonenew:function(){return new a({symbolId:this.options.symbolId,isChangeByScale:this.options.isChangeByScale,scale:1,color:this.options.color,outline:{color:this.options.color,linewidth:this.options.outline.linewidth}})}});e.exports.EleFillSymbol=a,e.exports.eleFillSymbol=function(t){return new a(t)}},{"./../Util":154,"./EleSymbol":138,"babel-runtime/core-js/json/stringify":164}],136:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./EleSymbol"),r=t("./../Util").Util,a=o.EleSymbol.extend({options:{isChangeByScale:!1,opacity:1},draw:function(t){var e=t._renderer,i=t._projectGeometry,n=t._attribute,s=(i.type,this),o=s.options;if(i.geometry.length>1)this.MultiLineDraw(t);else{if(o.isChangeByScale){if(o.scale){var r=t._map.getScale();0!=r&&(o._scale=1e3*o.scale/r),r=null}}else o.scale&&(o._scale=o.scale);e.drawEleSymbol(i,this.options,n)}o=null,e=null,i=null,n=null},MultiLineDraw:function(t){for(var e=t._renderer,i=t._projectGeometry.geometry,n=t._attribute,s=this,o=s.options,r=0;r<i.length;r++){for(var a=[],l=0;l<i[r].length;l++)a.push(new L.point(i[r][l].x,i[r][l].y));var h={geometry:[a],type:"polyline"};if(o.isChangeByScale){if(o.scale){var u=t._map.getScale();0!=u&&(o._scale=1e3*o.scale/u),u=null}}else o.scale&&(o._scale=o.scale);e.drawEleSymbol(h,this.options,n),a=null,h=null}o=null,e=null,
i=null,n=null},getWidth:function(t){return L.EleSymbol.loadEleSymbol.getSymbol(t)._width},getType:function(){return"EleLineSymbol"},toJSON:function(){return this.options.type="EleLineSymbol",JSON.parse((0,s.default)(this.options))},formJSON:function(t){},clone:function(){return new a(r.objectHandle.clone(this.options))},clonenew:function(){return new a({symbolId:this.options.symbolId,scale:this.options.scale,isChangeByScale:this.options.isChangeByScale,color:this.options.color})}});e.exports.EleLineSymbol=a,e.exports.eleLineSymbol=function(t){return new a(t)}},{"./../Util":154,"./EleSymbol":138,"babel-runtime/core-js/json/stringify":164}],137:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./EleSymbol"),r=t("./../Util").Util,a=o.EleSymbol.extend({options:{isChangeByScale:!0},draw:function(t){var e=t._renderer,i=t._projectGeometry,n=t._attribute,s=(i.type,this),o=s.options;if(o.isChangeByScale){if(o.scale){var r=t._map.getScale();0!=r&&(o._scale=1e3*o.scale/r)}}else o.scale&&(o._scale=o.scale);e.drawEleSymbol(i,o,n)},_updateBounds:function(t){},getType:function(){return"EleMarkerSymbol"},toJSON:function(){return this.options.type="EleMarkerSymbol",JSON.parse((0,s.default)(this.options))},formJSON:function(t){return new EleFillSymbol(t)},clone:function(){return new a(r.objectHandle.clone(this.options))},clonenew:function(){return new a({isChangeByScale:this.options.isChangeByScale,symbolId:this.options.symbolId,rotate:this.options.rotate,color:this.options.color,scale:this.options.scale})}});e.exports.EleMarkerSymbol=a,e.exports.eleMarkerSymbol=function(t){return new a(t)}},{"./../Util":154,"./EleSymbol":138,"babel-runtime/core-js/json/stringify":164}],138:[function(t,e,i){"use strict";var n=t("./Symbol"),s=n.Symbol.extend({statics:{POSITION_MIDDLE:8,POSITION_LEFT:2,POSITION_RIGHT:5,POSITION_BOTTOM_LEFT:1,POSITION_BOTTOM_RIGHT:4,POSITION_BOTTOM_CENTER:7,POSITION_TOP_LEFT:0,POSITION_TOP_CENTER:6,POSITION_TOP_RIGHT:3},options:{symbolId:"",color:-1,rotate:0,scale:5,outline:{color:-1,linewidth:1},isLabel:!1,text:void 0,fontFamily:"宋体",height:14,position:7,direction:0,rowCharNums:0,offsetX:0,offsetY:0,bold:!1},initialize:function(t){L.setOptions(this,t||{})},setSymbolId:function(t){return this.options.symbolId=t,this},getSymbolId:function(){return this.options.symbolId},setColor:function(t){return this.options.color=t,this},getColor:function(){return this.options.color},setRotate:function(t){return this.options.rotate=t,this},getRotate:function(){return this.options.rotate},setScale:function(t){return this.options.scale=t,this},getScale:function(){return this.options.scale},getRealScale:function(t){var e=this.options;if(e.isChangeByScale){if(e.scale||0==e.scale){var i=t.getScale();0!=i&&(e._scale=1e3*e.scale/i)}}else(e.scale||0==e.scale)&&(e._scale=e.scale);return e._scale},setOutLineColor:function(t){return this.options.outline.color=t,this},getOutLineColor:function(){return this.options.outline.color},setOutline:function(t){return this.options.outline=L.extend(this.options.outline,t),this},getOutline:function(){return this.options.outline},setIsLabel:function(t){return this.options.isLabel=t,this},getIsLabel:function(){return this.options.isLabel},setEleLabelSymbol:function(t){return this.options.eleLabelSymbol=t,this},getEleLabelSymbol:function(){return this.options.eleLabelSymbol},setText:function(t){return this.options.text=t,this},getText:function(){return this.options.text},setFontFamily:function(t){return this.options.fontFamily=t,this},getFontFamily:function(){return this.options.fontFamily},setHeight:function(t){return this.options.height=t,this},getHeight:function(){return this.options.height},setPosition:function(t){return this.options.position=t,this},getPosition:function(){return this.options.position},setDirection:function(t){return this.options.direction=t,this},getDirection:function(){return this.options.direction},setRowCharNums:function(t){return this.options.rowCharNums=t,this},getRowCharNums:function(){return this.options.rowCharNums},setOffsetX:function(t){return this.options.offsetX=t,this},getOffsetX:function(){return this.options.offsetX},setOffsetY:function(t){return this.options.offsetY=t,this},getOffsetY:function(){return this.options.offsetY},setBold:function(t){return this.options.bold=t,this},getBold:function(){return this.options.bold},COLOR_LOCK:!0});e.exports.EleSymbol=s},{"./Symbol":149}],139:[function(t,e,i){"use strict";var n=t("./Symbol").Symbol,s=t("../Geometry/Geometry").Geometry,o={};o[s.POLYGON]="drawPolygon",o[s.EXTENT]="drawPolygon",o[s.STRAIGHTARROW]="drawPolygon",o[s.SQUADCOMBAT]="drawPolygon",o[s.GATHERINGPLACE]="drawPolygon",o[s.TAILEDSQUADCOMBAT]="drawPolygon",o[s.DOUBLEARROW]="drawPolygon",o[s.CIRCLE]="drawCircleSymbol",o[s.SECTOR]="drawSector",o[s.ELLIPSE]="drawEllipse";var r=n.extend({options:{fill:!0,opacity:.4,stroke:!0,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:3}},_DrawFunc:o,initialize:function(t){L.setOptions(this,t||{})},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._requestUpdate(),this},getFill:function(){return this.options.fill},setFill:function(t){this.options.fill=t,this._requestUpdate()},getStroke:function(){return this.options.stroke},setStroke:function(t){this.options.stroke=t,this._requestUpdate()},setOutline:function(t){return t?(this.options.outline=L.extend(this.options.outline||{},t),this._requestUpdate(),this):this},getOutline:function(){return this.options.outline},_requestUpdate:function(){this.fire("redraw")},setStrokeColor:function(t){return this.options.outline.color=t,this._requestUpdate(),this},getStrokeColor:function(t){return this.options.outline.color},setStrokeStyle:function(t){return this.options.outline.style=t,this._requestUpdate(),this},getStrokeStyle:function(t){return this.options.outline.style}});e.exports.FillSymbol=r},{"../Geometry/Geometry":57,"./Symbol":149}],140:[function(t,e,i){"use strict";var n=t("./Symbol"),s=n.Symbol.extend({options:{stroke:!0,opacity:.8,color:"#3388ff",width:3,fill:!1},setWidth:function(t){return this.options.outline.width=t,this._requestRedraw(),this},getWidth:function(){return this.options.outline.width},setColor:function(t){return this.options.outline.color=t,this._requestRedraw(),this},getColor:function(){return this.options.outline.color},setOpacity:function(t){return this.options.outline.opacity=t,this._requestRedraw(),this},getOpacity:function(){return this.options.outline.opacity},_requestRedraw:function(){this.fire("redraw")}});e.exports.LineSymbol=s},{"./Symbol":149}],141:[function(t,e,i){"use strict";var n=t("./Symbol"),s=t("./../Util"),o=t("../Error/DeveloperError"),r=n.Symbol.extend({options:{offset:[0,0],angle:0},initialize:function(t){n.Symbol.prototype.initialize.call(this,this.options)},getOffset:function(){return this.options.offset},setOffset:function(t){if(!s.objectHandle.isArray(t))throw new o.DeveloperError("badly formatted, Array format required");this.options.offset=t,this._callCacheUpdate()},getAngle:function(){return this.options.angle},setAngle:function(t){return this.options.angle=t,this._callCacheUpdate(),this},_callCacheUpdate:function(){this.CacheNeedUpdate=!0,this.fire("redraw")}});e.exports.MarkerSymbol=r},{"../Error/DeveloperError":33,"./../Util":154,"./Symbol":149}],142:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./FillSymbol"),r=t("../Error/DeveloperError"),a=t("./../Util").Util,l=function(t){return new h(t)},h=o.FillSymbol.extend({options:{fill:!0,style:"style_picture",url:"",width:12,height:12,xoffset:0,yoffset:0,xscale:1,yscale:1,repeatX:!0,repeatY:!0},initialize:function(t){if(!t.url)throw new r.DeveloperError("url for PictureFillSymbol not defined");t=t||{};var e=L.extend({},this.options.outline,t.outline||{});L.setOptions(this,t),this.options.outline=e,this._unitInit(),this._loadImg(t)},setOpacity:function(t){return this.options.opacity=t,this._requestDraw(),this},setRepeatX:function(t){return this.options.repeatX=t,this._requestDraw(),this},setRepeatY:function(t){return this.options.repeatY=t,this._requestDraw(),this},getRepeatX:function(){return this.options.repeatX},getRepeatY:function(){return this.options.repeatY},getOpacity:function(){return this.options.opacity},setWidth:function(t){return this.options.width=this._PtToPx(t),this._setImgCanvas(),this._requestDraw(),this},setHeight:function(t){return this.options.height=this._PtToPx(t),this._setImgCanvas(),this._requestDraw(),this},setOffsetX:function(t){return this.options.xoffset=this._PtToPx(t),this._setImgCanvas(),this._requestDraw(),this},setOffsetY:function(t){return this.options.yoffset=this._PtToPx(t),this._setImgCanvas(),this._requestDraw(),this},setScaleX:function(t){return this.options.xscale=parseFloat(t),this._setImgCanvas(),this._requestDraw(),this},setScaleY:function(t){return this.options.yscale=parseFloat(t),this._setImgCanvas(),this._requestDraw(),this},getOffsetX:function(){return this.options.xoffset},getOffsetY:function(){return this.options.yoffset},getWidth:function(){return this.options.width},getHeight:function(){return this.options.height},getScaleX:function(){return this.options.xscale},getScaleY:function(){return this.options.yscale},_loadImg:function(){var t=new Image;t.onload=function(){this._oriImg=t,this._setImgCanvas(),this._requestDraw(),this.fire("imgload")}.bind(this),t.src=this.options.url},_setImgCanvas:function(){var t=this.options;if(this._oriImg){this._cacheCanvas||(this._cacheCanvas=document.createElement("canvas"),this._cacheCtx=this._cacheCanvas.getContext("2d"));var e=t.width*t.xscale+.5<<0,i=t.height*t.yscale+.5<<0,n=this._cacheCanvas,s=this._cacheCtx;n.width=e+t.xoffset,n.height=i+t.yoffset,s.drawImage(this._oriImg,t.xoffset,t.yoffset,e,i),t._img=n}},_unitInit:function(){this.options.width=this._PtToPx(this.options.width),this.options.height=this._PtToPx(this.options.height),this.options.xoffset=this._PtToPx(this.options.xoffset),this.options.xoffset=this._PtToPx(this.options.xoffset)},_requestDraw:function(){this._graphic&&this._graphic.redraw()},draw:function(t){if(t._map){var e=this.options;if(this._graphic=t,!e._img)return!1;var i=t._renderer,n=t._projectGeometry,s=n.type;i[this._DrawFunc[s]](n.geometry,e,t)}},getType:function(){return"PictureFillSymbol"},toJSON:function(){return this.options.type="PictureFillSymbol",JSON.parse((0,s.default)(this.options))},fromJSON:l,clone:function(){return new h(a.objectHandle.clone(this.options))}});e.exports.PictureFillSymbol=h,e.exports.pictureFillSymbol=function(t){return new h(t)}},{"../Error/DeveloperError":33,"./../Util":154,"./FillSymbol":139,"babel-runtime/core-js/json/stringify":164}],143:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./MarkerSymbol"),r=t("./../Util").Util,a=function(t){return new l(t)},l=o.MarkerSymbol.extend({options:{url:"",width:15,height:15,scale:1},initialize:function(t){L.setOptions(this,t||{}),o.MarkerSymbol.prototype.initialize.call(this,this.options),this.loadImg(this.options.url)},loadImg:function(t){this._loadImg(t,function(t){this._img=t,this._callCacheUpdate()}.bind(this))},setWidth:function(t){return this.options.width=t,this._callCacheUpdate(),this},getWidth:function(){return this.options.width},setHeight:function(t){return this.options.height=t,this._callCacheUpdate(),this},getHeight:function(){return this.options.height},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._callCacheUpdate(),this},getFill:function(){return this.options.fill},setFill:function(t){this.options.fill=t,this._callCacheUpdate()},getScale:function(){return this.options.scale},setScale:function(t){return this.options.scale=t,this._callCacheUpdate(),this},setUrl:function(t){return this.options.url=t,this.loadImg(t),this},getUrl:function(){return this.options.url},draw:function(t){if(t._map&&0!=this.options.width&&0!=this.options.height&&0!=this.options.scale&&(this._graphic=t,this._img)){var e=t._renderer,i=t._projectGeometry.geometry;this.CacheNeedUpdate&&this._updateCache(this._img),e.drawCanvas(this._cacheCanvas.canvas,i,this.options.offset,this.options.angle)}},_updateCache:function(t){if(t){this.CacheNeedUpdate=!1;var e=this.options._width+.5<<0,i=this.options._height+.5<<0;this._cacheCanvas||(this._cacheCanvas=document.createElement("canvas").getContext("2d")),this._cacheCanvas.canvas.width=e,this._cacheCanvas.canvas.height=i,this._cacheCanvas.clearRect(0,0,e,i),this._cacheCanvas.globalAlpha=this.options.opacity,this._cacheCanvas.drawImage(t,0,0,e,i)}},getType:function(){return"PictureMarkerSymbol"},clone:function(){return new l(r.objectHandle.clone(this.options))},toJSON:function(){return this.options.type="PictureMarkerSymbol",JSON.parse((0,s.default)(this.options))},fromJSON:a});e.exports.PictureMarkerSymbol=l,e.exports.pictureMarkerSymbol=function(t){return new l(t)}},{"./../Util":154,"./MarkerSymbol":141,"babel-runtime/core-js/json/stringify":164}],144:[function(t,e,i){"use strict";var n=t("./Symbol"),s=t("./../Util").Util,o=n.Symbol.extend({statics:{POSITION_LEFT:{type:"left",left:"-9px",transform:"rotate(90deg)"},POSITION_RIGHT:{type:"right",transform:"rotate(90deg)"},POSITION_TOP:{type:"top",top:"-20px"},POSITION_BOTTOM:{type:"bottom"}},options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,offset:[0,7],zoomAnimation:!0,className:"",pane:"overlayPane",positionType:"",positionVal:"60",zIndexOffset:99999},getPositionType:function(){return this.options.positionType},setPositionType:function(t){return this.options.positionType=t,this},initialize:function(t,e){e&&L.setOptions(this,e),this.setContent(t)},_initLayout:function(t){var e=this,i=e.options,n=L.DomUtil,s="egis-popup",o=t._container=n.create("div",s+" "+(i.className||"")+" egis-zoom-hide"),r=e._wrapper=n.create("div",s+"-content-wrapper",o);t._contentNode=n.create("div",s+"-content",r);var a=L.DomEvent;a.disableClickPropagation(r).disableScrollPropagation(t._contentNode).on(r,"contextmenu",a.stopPropagation),e._tipContainer=n.create("div",s+"-tip-container",o),e._tip=n.create("div",s+"-tip",e._tipContainer),e._layoutChanged=!0},_updateLayout:function(t){var e=t._contentNode,i=e.style;i.width="",i.whiteSpace="nowrap";var n=e.offsetWidth,s=this,o=s.options;n=Math.min(n,o.maxWidth),n=Math.max(n,o.minWidth),i.width=n+1+"px",i.whiteSpace="",i.height="";var r=e.offsetHeight,a=o.maxHeight;a&&r>a?(i.height=a+"px",L.DomUtil.addClass(e,"egis-popup-scrolled")):L.DomUtil.removeClass(e,"egis-popup-scrolled"),s._containerWidth=t._container.offsetWidth,s._layoutChanged=!0},_updateZIndex:function(t,e){e._container.style.zIndex=this._zIndex+t},getContent:function(){return this._content},setContent:function(t){var e=this;return e._content=t,e._contentChanged=!0,e._layoutChanged=!0,e},draw:function(t){if(null!=t._map){var e=this;t._container||(e._initLayout(t),t.getPane(e.options.pane).appendChild(t._container),t._container.style.zIndex=this._zIndex+this.options.zIndexOffset);var i=t._container.style;i.visibility="hidden",e._contentChanged&&(e._updateContent(t),e._contentChanged=!1),e._layoutChanged&&(e._updateLayout(t),e._layoutChanged=!1),e._updatePosition(t._projectGeometry.geometry,t),t._dontshow?i.visibility="hidden":i.visibility="",e._setPos(t._projectGeometry.geometry,t)}},_setPos:function(t,e){this._zIndex=t.y+this.options.zIndexOffset,this._updateZIndex(0,e)},_remove:function(t){L.DomUtil.remove(t._container),t._container=null},_updateContent:function(t){var e=this,i=e._content;if(i){var n=t._contentNode,i="function"==typeof i?i(e._source||e):i;if("string"==typeof i)n.innerHTML=i;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(i)}}},_updatePosition:function(t,e){if(e._map){var i=this,n=i.options,s=L.point(n.offset),o=i._getAnchor(),r=e._container;e._zoomAnimated?L.DomUtil.setPosition(r,t.add(o)):s=s.add(t).add(o);var a=i._containerBottom=-s.y,l=i._containerLeft=-Math.round(i._containerWidth/2)+s.x,h=r.style;h.bottom=a+"px",h.left=l+"px";var u=n.positionType;if(""!=u&&void 0!=u){var r=r,c=parseInt(n.positionVal);c=Math.max(c,0),c=Math.min(c,100);var p=u.type;if("left"==p||"right"==p){var d=c/100*e._contentNode.offsetHeight-10;c=Math.max(d,10)+"px",u.top=c}if("top"==p||"bottom"==p){var y=c/100*e._contentNode.offsetWidth;c=Math.max(y,23)+"px",u.left=c}var f=r.lastElementChild.style;if(f.left="right"==p?e._contentNode.offsetWidth+31+"px":u.left,u.top){f.top=u.top;var _=i._tipContainer.lastElementChild.style;"left"!=p&&(_.margin="10px"),u.transform&&(f.transform=u.transform,_.transform="")}}}},_getAnchor:function(){return[0,0]},getType:function(){return"PopupSymbol"},clone:function(){return new o(this._content,s.objectHandle.clone(this.options))}});e.exports.PopupSymbol=o,e.exports.popupSymbol=function(t){return new o(t)}},{"./../Util":154,"./Symbol":149}],145:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./FillSymbol"),r=t("./../Util").Util,a=function(t){return new l(t)},l=o.FillSymbol.extend({statics:{STYLE_SOLID:"style_solid",STYLE_VERTICAL:"style_vertical",STYLE_HORIZONTAL:"style_horizontal",STYLE_DASH_CROSS:"style_cross",STYLE_FORWARD:"style_forward",STYLE_BACKWARD:"style_backward"},options:{style:"style_solid",color:"#3388ff"},initialize:function(t){t=t||{};var e=L.extend({},this.options.outline,t.outline||{});L.setOptions(this,t),this.options.outline=e},setStyle:function(t){return this.options.style=t,this._requestUpdate(),this},getStyle:function(){return this.options.style},setColor:function(t){return this.options.color=t,this._requestUpdate(),this},getColor:function(){return this.options.color},draw:function(t){this._graphic=t;var e=t._renderer,i=t._projectGeometry,n=i.type,s=this.options;s.width&&(s.weight=s.width),e[this._DrawFunc[n]](i.geometry,s,t)},getType:function(){return"SimpleFillSymbol"},toJSON:function(){return this.options.type="SimpleFillSymbol",JSON.parse((0,s.default)(this.options))},fromJSON:a,clone:function(){return new l(r.objectHandle.clone(this.options))},setFillColor:function(t){return this.setColor(t)},getFillColor:function(t){return this.options.color},setFillStyle:function(t){return this.setStyle(t)},getFillStyle:function(t){return this.options.style}});e.exports.SimpleFillSymbol=l,e.exports.simpleFillSymbol=function(t){return new l(t)}},{"./../Util":154,"./FillSymbol":139,"babel-runtime/core-js/json/stringify":164}],146:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./LineSymbol"),r=t("./../Util").Util,a=function(t){return new l(t)},l=o.LineSymbol.extend({statics:{STYLE_SOLID:"style_solid",STYLE_DASH:"style_dash",STYLE_DOT:"style_dot",STYLE_DASH_DOT:"style_dash_dot"},options:{style:"style_solid",lineJoin:"round",lineCap:"round"},initialize:function(t){var e=L.extend({},this.options,t||{});L.setOptions(this,{}),this.options.outline=e},setStyle:function(t){return this.options.outline.style=t,this._requestRedraw(),this},getLineJoin:function(){return this.options.outline.lineJoin},setLineJoin:function(t){return this.options.outline.lineJoin=t,this._requestRedraw(),this},getLineCap:function(){return this.options.outline.lineCap},setLineCap:function(t){return this.options.outline.lineCap=t,this._requestRedraw(),this},getStyle:function(){return this.options.outline.style},draw:function(t){var e=t._renderer,i=t._projectGeometry;this._graphic=t,e.drawLine(i.geometry,this.options)},getType:function(){return"SimpleLineSymbol"},toJSON:function(){return this.options.type="SimpleLineSymbol",JSON.parse((0,s.default)(this.options.outline))},fromJSON:a,setStrokeStyle:function(t){return this.options.outline.style=t,this._requestRedraw(),this},getStrokeStyle:function(){return this.options.outline.style},clone:function(){return new l(r.objectHandle.clone(this.options))}});e.exports.SimpleLineSymbol=l,e.exports.simpleLineSymbol=function(t){return new l(t)}},{"./../Util":154,"./LineSymbol":140,"babel-runtime/core-js/json/stringify":164}],147:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./../Render/GISCanvasCache"),r=t("./MarkerSymbol"),a=t("./../Geometry/Point"),l=t("./../Util").Util,h=function(t){return new u(t)},u=r.MarkerSymbol.extend({statics:{STYLE_CIRCLE:"circle",STYLE_CROSS:"cross",STYLE_SQUARE:"square",STYLE_TRIANGLE:"triangle",STYLE_CROSSSQUARE:"crosssquare",STYLE_LINESQUAREE:"linesquare"},_DrawFunc:{circle:"_drawCircle",square:"_drawSquare",triangle:"_drawTriangle",cross:"_drawCross",crosssquare:"_drawCrossAndSquare",linesquare:"_drawLineAndSquare"},options:{symbolStyle:"circle",size:20,style:"style_solid",color:"#3388ff",stroke:!0,opacity:.4,fill:!0,isCache:!1,scale:1,outline:{lineJoin:"round",lineCap:"round",opacity:.8,color:"#3388ff",style:"style_solid",width:2}},initialize:function(t){t=t||{};var e=L.extend({},this.options.outline,t.outline||{});L.setOptions(this,t),this.options.outline=e,this.options.isCache&&(this.CacheNeedUpdate=!0),this.options.radius=this.options.size/2},setColor:function(t){return this.options.color=t,this._callCacheUpdate(),this},getColor:function(){return this.options.color},setOutline:function(t){return t?(this.options.outline=L.extend(this.options.outline||{},t),this._callCacheUpdate(),this):this},getOutline:function(){return this.options.outline},getScale:function(){return this.options.scale},setStyle:function(t){return this.options.style=t,this._callCacheUpdate(),this},getStyle:function(){return this.options.style},setSymbolStyle:function(t){return this.options.symbolStyle=t,this._callCacheUpdate(),this},getSymbolStyle:function(){return this.options.symbolStyle},setWidth:function(t){return this.options.width=t,this._callCacheUpdate(),this},getWidth:function(){return this.options.width},setHeight:function(t){return this.options.height=t,this._callCacheUpdate(),this},getHeight:function(){return this.options.height},setSize:function(t){return this.options.size=t,this.options.radius=this.options.size/2,this._callCacheUpdate(),this},getSize:function(){return this.options.size},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._callCacheUpdate(),this},getFill:function(){return this.options.fill},setFill:function(t){return this.options.fill=t,this._callCacheUpdate(),this},getStroke:function(){return this.options.stroke},setStroke:function(t){return this.options.stroke=t,this._callCacheUpdate(),this},draw:function(t){if(t._map){this._graphic=t;var e=this.options.symbolStyle,i=t._renderer;if("multiPoint"==t.getGeometry().getType())this.MultiPointDraw(t);else{var n=t._projectGeometry.geometry,s=new a.Point(n.x,n.y).add(this.options.offset?this.options.offset:[0,0]);this.options.radius=this.options.size/2,this.options.isCache?(this.CacheNeedUpdate&&this._updateCache(e,t._pxBounds),i.drawCanvas(this._cacheCanvas._container,s,void 0,this.options.angle)):i[this._DrawFunc[e]](s,this.options)}}},MultiPointDraw:function(t){this._graphic=t;for(var e=this.options.symbolStyle,i=t._renderer,n=t._projectGeometry.geometry,s=0;s<n.length;s++){var o=new a.Point(n[s].x,n[s].y).add(this.options.offset?this.options.offset:[0,0]);this.options.radius=this.options.size/2,this.options.isCache?(this.CacheNeedUpdate&&this._updateCache(e,t._pxBounds),i.drawCanvas(this._cacheCanvas._container,o,void 0,this.options.angle)):i[this._DrawFunc[e]](o,this.options)}},_updateCache:function(t,e){this.CacheNeedUpdate=!1,this._cacheCanvas||(this._cacheCanvas=new o.GISCanvasCache({}));var i=this._width+.5<<0,n=this._height+.5<<0,s=this._cacheCanvas._container;s.width=i,s.height=n,this._cacheCanvas._ctx.clearRect(0,0,i,n),this._cacheCanvas[this._DrawFunc[t]]({x:i/2,y:n/2},this.options)},_callCacheUpdate:function(){this.CacheNeedUpdate=!0,this.fire("redraw")},getType:function(){return"SimpleMarkerSymbol"},clone:function(){return new u(l.objectHandle.clone(this.options))},toJSON:function(){return this.options.type="SimpleMarkerSymbol",JSON.parse((0,s.default)(this.options))},fromJSON:h,setFillColor:function(t){return this.setColor(t)},setStrokeColor:function(t){return this.options.outline.color=t,this._callCacheUpdate(),this},getFillColor:function(t){return this.options.color},getStrokeColor:function(t){return this.options.outline.color}});u.fromJSON=h,e.exports.SimpleMarkerSymbol=u,e.exports.simpleMarkerSymbol=function(t){return new u(t)}},{"./../Geometry/Point":61,"./../Render/GISCanvasCache":129,"./../Util":154,"./MarkerSymbol":141,"babel-runtime/core-js/json/stringify":164}],148:[function(t,e,i){"use strict";var n=t("./MarkerSymbol"),s=t("./../Geometry/Point"),o=t("./../Util").Util,r=n.MarkerSymbol.extend({options:{size:1,color:"#9c0",opacity:1,isCache:!0},initialize:function(t){L.setOptions(this,t||{});var e=document.createElement("div");e.innerHTML=this.options.svg,this._dom=e.firstChild,this._rat=this._dom.height.baseVal.valueInSpecifiedUnits/this._dom.width.baseVal.valueInSpecifiedUnits,this.options.isCache&&(this.CacheNeedUpdate=!0)},draw:function(t){if(t._map){var e=t._renderer,i=t._projectGeometry.geometry,n=new s.Point(i.x,i.y).add(this.options.offset?this.options.offset:[0,0]);this._updateCache(),e.drawCanvas(this._cacheCanvas.canvas,n,void 0,0)}},_updateCache:function(){var t=this._width,e=this._height;this._cacheCanvas||(this._cacheCanvas=document.createElement("canvas").getContext("2d")),this._cacheCanvas.canvas.width=t,this._cacheCanvas.canvas.height=e,this._dom.setAttribute("width",t),this._dom.setAttribute("height",e),canvg(this._cacheCanvas.canvas,this._dom.outerHTML)},getType:function(){return"SvgMarkerSymbol"},clone:function(){return new r(o.objectHandle.clone(this.options))}});e.exports.SvgMarkerSymbol=r,e.exports.svgMarkerSymbol=function(t){return new r(t)}},{"./../Geometry/Point":61,"./../Util":154,"./MarkerSymbol":141}],149:[function(t,e,i){"use strict";var n=L.Evented.extend({options:{globalClear:!0,fillRule:"evenodd",dashArray:null,dashOffset:null},initialize:function(t){L.setOptions(this,t||{})},_loadImg:function(t,e){var i=new Image;i.onload=function(){e&&e(i)}.bind(this),i.src=t},draw:function(t){t._renderer,t._projectGeometry,t._attribute},_PtToPx:function(t){return"string"==typeof t&&t.toLowerCase().indexOf("pt")>0?Math.ceil(3*parseInt(t)/4):parseInt(t)},destroy:function(t){},clear:function(t){},toJSON:function(){},fromJSON:function(t){}});L.symbol=function(t,e){return new n(t,e)},e.exports.Symbol=n},{}],150:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./MarkerSymbol"),r=t("./../Geometry/Point"),a=t("./../Util").Util,l=function(t){return new h(t)},h=o.MarkerSymbol.extend({options:{font:"10px sans-serif",text:void 0,color:"#000",backgroundColor:"",fill:!1,opacity:1,isCache:!1,textBaseline:"middle",textAlign:"center",scale:1,outline:{color:-1,linewidth:-1},isChangeByScale:!1},initialize:function(t){L.setOptions(this,t||{}),this.options.outline&&this.options.outline.linewidth==-1&&(this.options.outline=void 0),this.options._angle=[],this.options._text=[],Array.isArray(this.options.text)&&(this.options._text=L.extend(this.options._text,this.options.text)),Array.isArray(this.options.angle)&&(this.options._angle=L.extend(this.options._angle,this.options.angle)),o.MarkerSymbol.prototype.initialize.call(this,this.options),this.options.isCache&&(this.CacheNeedUpdate=!0)},setFont:function(t){return this.options.font=t,this._callCacheUpdate(),this},getFont:function(){return this.options.font},setText:function(t){return this.options.text=t,this.options._text=t,this._callCacheUpdate(),this},getText:function(){return this.options.text},setColor:function(t){if(this.options.color=t,this.options.colors&&[]instanceof Array==1)for(var e=0;e<this.options.colors.length;e++)this.options.colors[e]=t;return this._callCacheUpdate(),this},getColor:function(){return this.options.color},setBackgroundColor:function(t){return this.options.backgroundColor=t,this._callCacheUpdate(),this},getBackgroundColor:function(){return this.options.backgroundColor},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._callCacheUpdate(),this},getFill:function(){return this.options.fill},setFill:function(t){this.options.fill=t,this._callCacheUpdate()},getRealScale:function(t){var e=this.options;if(this.options.isChangeByScale){if(this.options.scale||0==this.options.scale){var i=t.getScale();0!=i&&(this.options._scale=this.options.scale/i)}}else this.options.scale&&(this.options._scale=1);return e._scale},draw:function(t){if(t._map&&this.options.text){this._graphic=t;var e=t._renderer;if("multiPoint"==t.getGeometry().getType())this.MultiPointDraw(t);else{Array.isArray(this.options.text)&&(this.options.text=this.options.text.join(""));var i=t._projectGeometry.geometry,n=new r.Point(i.x,i.y).add(this.options.offset?this.options.offset:[0,0]);if(this.options.isChangeByScale){if(this.options.scale){var s=t._map.getScale();0!=s&&(this.options._scale=this.options.scale/s)}}else this.options.scale&&(this.options._scale=1);if(this.options.isCache){var o,a;switch(this.CacheNeedUpdate&&this._updateCache(t._pxBounds),this._cacheCanvas.textAlign="center",this.options.textAlign){case"left":a=-1;break;case"right":a=1;break;case"center":a=0;break;default:a=0}switch(this.options.textBaseline){case"bottom":o=1;break;case"top":o=-1;break;case"middle":o=0;break;default:o=0}e.drawCanvas(this._cacheCanvas,n,[-a*(this._width>>1),-o*(this._height>>1)],this.options.angle)}else e._drawText(n,this.options,void 0,this._width,this._height)}}},MultiPointDraw:function(t){for(var e=t._renderer,i=t._projectGeometry.geometry,n=0;n<i.length;n++){var s=new r.Point(i[n].x,i[n].y).add(this.options.offset?this.options.offset:[0,0]),o={};if(o=L.extend(o,this.options),o.text=this.options._text[n],o.angle=this.options._angle[n],this.options.isChangeByScale){if(this.options.scale){var a=t._map.getScale();0!=a&&(this.options._scale=this.options.scale/a)}}else this.options.scale&&(this.options._scale=1);o=L.extend(o,this.options),o.text=this.options._text[n],o.angle=this.options._angle[n],o.color=this.options.colors?this.options.colors[n]:this.options.color;var l=void 0;l=this.options.sizes&&this.options.sizes[n]?this.options.sizes[n]:this.options.size;var h=void 0;h=this.options.fonts&&this.options.fonts[n]?this.options.fonts[n]||"微软雅黑":this.options.fontName||"微软雅黑";var u=1;u=1;var c=this.options.isChangeByScale?96/25.4*parseFloat(l*u)*1e3/this.options.scale:96/25.4*parseFloat(l);if(c=c<1?1:c,o.font=Math.round(c)+"px "+h,this.options._scale*Math.round(c)<egis.MicroService.serviceInfo.textMinSize)o.font="0px "+h;else if(this.options.isCache){var p,d;switch(this.CacheNeedUpdate&&this._updateCache(t._pxBounds),this._cacheCanvas.textAlign="center",this.options.textAlign){case"left":d=-1;break;case"right":d=1;break;case"center":d=0;break;default:d=0}switch(this.options.textBaseline){case"bottom":p=1;break;case"top":p=-1;break;case"middle":p=0;break;default:p=0}e.drawCanvas(this._cacheCanvas,s,[-d*(this._width>>1),-p*(this._height>>1)],o.angle)}else e._drawText(s,o,void 0,this._width,this._height,!0)}},_updateCache:function(t){var e=this.options;this.CacheNeedUpdate=!1,this._cacheCanvas||(this._cacheCanvas=document.createElement("canvas"),this._cacheCtx=this._cacheCanvas.getContext("2d"));var i=this._width+.5<<0,n=this._height+.5<<0,s=this._cacheCanvas,o=this._cacheCtx;if(s.width=i,s.height=n,
this._cacheCtx.clearRect(0,0,i,n),o.font=e.font,o.fillStyle=a.fixColorToRGBA(e.color),o.textAlign="center",o.textBaseline="middle",e.fill){o.beginPath();var r=Number(e.font.split("px")[0])||0,l=e.text.split(/\n/);o.rect(0,0,i,n+(l.length-1)*r),o.closePath(),o.globalAlpha=e.opacity,o.fillStyle=e.backgroundColor,o.fill(e.fillRule||"evenodd")}if(o.globalAlpha=1,o.fillStyle=e.color,!e.text)throw new Error("文本为内容为空!");o.fillText(e.text,i>>1,n>>1)},getType:function(){return"TextSymbol"},toJSON:function(){return this.options.type="TextSymbol",JSON.parse((0,s.default)(this.options))},fromJSON:l,clone:function(){return new h(a.objectHandle.clone(this.options))},clonenew:function(){return new h(a.objectHandle.clone(this.options))}});e.exports.TextSymbol=h,e.exports.textSymbol=function(t){return new h(t)}},{"./../Geometry/Point":61,"./../Util":154,"./MarkerSymbol":141,"babel-runtime/core-js/json/stringify":164}],151:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("when/es6-shim/Promise.browserify-es6"),r=t("../MicroService/MSManager").MSManager,a=L.Evented.extend({options:{baseUrl:"{{gisUrl}}"},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,L.Util.setOptions(this,t)},makeAPIURL:function(t){return this.getBaseUrl()+t},getBaseUrl:function(){return new RegExp("^http").test(this.options.baseUrl)?this.options.baseUrl:this._detectPath()+"/"+this.options.baseUrl},sendService:function(t,e,i,n,s){e=e||this.options.appkey,accessToken=this.options.accessToken,this._ajax({url:t,appkey:e,data:i,success:n,error:s})},_vecajaxold:function(t){try{t=t||{},t.method=t.method?t.method.toUpperCase():"POST",t.url=t.url||"",t.async=t.async||!0,t.data=t.data||null,this._xmlHttp&&(this._xmlHttp.abort(),this._xmlHttp=null);var e=this,i=null,n=null,s=new o(function(s,o){XMLHttpRequest?(i=new XMLHttpRequest,i.withCredentials=egis.MicroService.serviceInfo.xhrWithCredentials):i=new ActiveXObject("Microsoft.XMLHTTP"),e._xmlHttp=i;var r=[];for(var a in t.data)r.push(a+"="+t.data[a]);n=r.join("&"),"POST"===t.method.toUpperCase()?(i.open(t.method,t.url,t.async),"json"===t.type?(n=t.data,i.setRequestHeader("Content-Type","multipart/form-data")):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")):"GET"===t.method.toUpperCase()&&(~t.url.indexOf("?")?(n&&n.length,i.open(t.method,t.url,t.async)):i.open(t.method,t.url,t.async)),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)try{var t=i.responseText;i&&(delete i.responseText,delete i.response,delete i.onreadystatechange,i=null),s(t),t=null}catch(t){o(i.responseText),i&&(i.responseText=null,i.response=null,i.onreadystatechange=null,i=null)}else try{0==i.status&&i.responseText&&""==i.responseText?o({}):(o(JSON.parse(i.responseText)),i&&(i.responseText=null,i.response=null,i.onreadystatechange=null,i=null))}catch(t){o(i.responseText),i&&(i.responseText=null,i.response=null,i.onreadystatechange=null,i=null)}}});return function(){"POST"===t.method.toUpperCase()?i.send(n):"GET"===t.method.toUpperCase()&&i.send(null)}(),s}catch(t){return new o(function(t,e){})}},requestAbort:function(){this._xmlHttp&&(this._xmlHttp.abort(),this._xmlHttp=null)},_vecajax:function(t){try{t=t||{},t.method=t.method?t.method.toUpperCase():"POST",t.url=t.url||"",this.url=t.url,t.async=t.async||!0,t.data=t.data||null,this._xmlHttp&&(this._xmlHttp.abort(),this._xmlHttp=null);var e=this,i=null,n=null,a=new o(function(o,a){XMLHttpRequest?(i=new XMLHttpRequest,i.withCredentials=egis.MicroService.serviceInfo.xhrWithCredentials):i=new ActiveXObject("Microsoft.XMLHTTP"),e._xmlHttp=i;var l=[];for(var h in t.data)l.push(h+"="+t.data[h]);n=l.join("&");var u={};if(1==r.active){if(r.config.mapService.vectorMap.active){u.headers=r.getRequestHeaders(),t.url=decodeURIComponent(decodeURI(t.url));var c=t.url.split("?");i.open(t.method,c[0],t.async),i.responseType="arraybuffer";var p=c[1].split("&");if(n={},p.forEach(function(t){var e=t.split("="),i="",s="";1==e.length||(2==e.length?(i=e[0],s=e[1]):(i=e.shift(),s=e.join("="))),n[i]=s}),r.serviceInfo.encMode)n=r.getEncData(n,u.headers,c[0]);else if(i.setRequestHeader("Content-Type","application/json;charset=utf-8"),n=(0,s.default)(n),u.headers)for(var d in u.headers)i.setRequestHeader(d,u.headers[d])}}else if("POST"===t.method.toUpperCase()){var y=t.url.split("?");t.url=y[0],i.open(t.method,t.url,t.async),n=y[1],"json"===t.type?(n=t.data,i.setRequestHeader("Content-Type","multipart/form-data")):(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.responseType="arraybuffer")}else"GET"===t.method.toUpperCase()&&(i.open(t.method,t.url,t.async),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.responseType="arraybuffer");i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<300||304==i.status){var t;if("arraybuffer"==i.responseType){var e;try{e=i.getResponseHeader("interpretations")}catch(t){}if(null==e)try{t={message:String.fromCharCode.apply(null,new Uint8Array(i.response))}}catch(e){t={message:(0,s.default)({message:"读取相应消息头失败",success:!1})}}else{var n=i.response,r=new Uint8Array(n),l={buffer:r,message:e};t=l}}else t=i.responseText;try{i&&(i.readyState=null,i.status=null,i.responseText=null,i.response=null,i.onreadystatechange=null,i=null)}catch(t){i&&(i=null)}o(t),t=null}else{var h="";try{h=decodeURIComponent(escape(String.fromCharCode.apply(null,new Uint8Array(i.response))))}catch(t){h="{status:"+i.status+"}"}a(h)}}});return function(){"POST"===t.method.toUpperCase()?i.send(n):"GET"===t.method.toUpperCase()&&i.send(null)}(),a}catch(t){return new o(function(t,e){})}},_ajax:function(t){t=t||{},t.method=t.method?t.method.toUpperCase():"POST",t.url=t.url||"",t.async=t.async||!0,t.data=t.data||null;var e=null,i=null,n=new o(function(n,s){XMLHttpRequest?(e=new XMLHttpRequest,e.withCredentials=egis.MicroService.serviceInfo.xhrWithCredentials):e=new ActiveXObject("Microsoft.XMLHTTP");var o=[];for(var r in t.data)o.push(r+"="+t.data[r]);i=o.join("&"),"POST"===t.method.toUpperCase()?(e.open(t.method,t.url,t.async),"json"===t.type?(i=t.data,e.setRequestHeader("Content-Type","multipart/form-data")):e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")):"GET"===t.method.toUpperCase()&&(~t.url.indexOf("?")?i&&i.length>0?e.open(t.method,t.url+"&"+i,t.async):e.open(t.method,t.url,t.async):e.open(t.method,t.url+"?"+i,t.async)),e.onreadystatechange=function(){if(4==e.readyState)if(200==e.status)try{var t=JSON.parse(e.responseText);if(t.success||t.Success)n(t);else{t.resultValue?t.message+":"+t.resultValue:t.message,s(t)}}catch(t){s(e.responseText)}else try{s(JSON.parse(e.responseText))}catch(t){s(e.responseText)}}});return function(){t.accessToken=void 0!==t.accessToken?t.accessToken:egis.task.tokenTask.getAccessToken(),t.accessToken&&e.setRequestHeader("Authorization",t.accessToken),"POST"===t.method.toUpperCase()?e.send(i):"GET"===t.method.toUpperCase()&&e.send(null)}(),n},_detectPath:function(){var t=L.DomUtil.create("div","egis-default-icon-path",document.body),e=L.DomUtil.getStyle(t,"background-image")||L.DomUtil.getStyle(t,"backgroundImage");return document.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,"").split("/").splice(0,3).join("/"):""}});e.exports.GISService=a,e.exports.gisService=function(t){return new a(t)}},{"../MicroService/MSManager":118,"babel-runtime/core-js/json/stringify":164,"when/es6-shim/Promise.browserify-es6":306}],152:[function(t,e,i){"use strict";var n=t("./GISService"),s=(t("../Util"),t("../Error/DeveloperError")),o=(t("./TokenTask").getInstance(),n.GISService.extend({options:{},initialize:function(t){L.Util.setOptions(this,t)},getTile:function(t){if(void 0===t||null===t||""===t)throw new s.DeveloperError("获取地图元数据，参数 tileId 类型必填！");var e={};return t&&void 0!==t&&(e.tileId=t),this._ajax({url:this.getBaseUrl()+"/rest/gis/MetaServer/getTile/json",data:e}).then(function(t){var e=t.resultValue;return{minZoom:e.NEndLevel,maxZoom:e.NStartLevel,resolution:e.dGroundDPI,tileSize:parseFloat(e.nImageSize),tileName:e.tileName,tileId:e.nTileId,epsgCode:e.WKID?e.WKID:"4326",origin:[parseFloat(e.dox),parseFloat(e.doy)],extent:[[parseFloat(e.dXMin),parseFloat(e.dYMin)],[parseFloat(e.dXMax),parseFloat(e.dYMax)]],url:e.tileFilePath,name:e.name}}).catch(function(t){throw new Error(t)})},exportURLx:function(t){return this.getBaseUrl()+"/deployname/rest/epgis/MapServer/json"+L.Util.getParamString(t)},exportURL:function(t){return this.getBaseUrl()+"/mapserver/json"+L.Util.getParamString(t)},exportURLold:function(t){t.appkey=this.options.appkey;return this.getBaseUrl()+"/rest/gis/MapServer/export/json"+L.Util.getParamString(t)},exportURLtest:function(t){t.appkey=this.options.appkey;return"http://xxxxxxxxxxxxxxxxxxxxx/deployname/rest/epgis/MapServer/json"+L.Util.getParamString(t)}}));e.exports.MetaService=o,e.exports.metaService=function(t){return new o(t)}},{"../Error/DeveloperError":33,"../Util":154,"./GISService":151,"./TokenTask":153}],153:[function(t,e,i){"use strict";var n=t("babel-runtime/core-js/json/stringify"),s=function(t){return t&&t.__esModule?t:{default:t}}(n),o=t("./GISService"),r=o.GISService.extend({options:{authUrl:"{{authUrl}}"},initialize:function(){r.singleton||(this._requestQueqe=[])},_getAuthUrl:function(){return new RegExp("^http").test(this.options.authUrl)?this.options.authUrl:this._detectPath()+"/"+this.options.authUrl},_refreshTokens:function(){var t=this;return t._refreshing=!0,this._ajax({url:this._getAuthUrl()+"/token/refresh",type:"json",accessToken:null,data:(0,s.default)({refreshToken:this._refreshToken})}).then(function(e){if(1e4==e.Code){var i=e.ResultValue.accessToken,n=e.ResultValue.refreshToken;if(!t._validateToken(i)||!t._validateToken(n))throw"Fetch token failed: invalidated token";t.setTokens(i,n),t._refreshing=!1;for(var s=t._requestQueqe.length-1;s>=0;s--){var o=t._requestQueqe[s];"function"==typeof o&&o.call(),t._requestQueqe.splice(s,1)}}else code,t.fire("login")}).catch(function(t){throw t})},_triggerTimer:function(){setTimeout(L.bind(this._refreshTokens,this),this._getInterval())},setTokens:function(t,e){if(!this._validateToken(t)||!this._validateToken(e))throw"access token and refresh token must be both supplied!";var i=this._accessToken,n=this._refreshToken;this._accessToken=t,this._refreshToken=e,i||n?this._triggerTimer():this._refreshTokens()},login:function(t,e){if(t&&e){var i=this;return this._refreshing=!0,this._ajax({url:this._getAuthUrl()+"/login",type:"json",accessToken:null,data:(0,s.default)({key:t,sn:e})}).then(function(n){if(1e4!=n.Code)throw n;i._refreshing=!1,i.once("login",function(){i.login(t,e)}),i.setTokens(n.ResultValue.accessToken,n.ResultValue.refreshToken)})}},_validateToken:function(t){var e=/[a-zA-Z0-9\-]+/;return t&&e.test(t)},getAccessToken:function(){return this._accessToken},getRefreshToken:function(){return this._refreshToken},_getInterval:function(){var t=this._accessToken.split(".");try{var e=JSON.parse(atob(t[1]));return 1e3*(e.exp-e.iat-60)}catch(t){return 0}},_addToQueue:function(t){this._requestQueqe.push(t)},_isRefreshing:function(){return this._refreshing}});r.singleton=null,r.getInstance=function(){return r.singleton||(r.singleton=new r),r.singleton},e.exports=r},{"./GISService":151,"babel-runtime/core-js/json/stringify":164}],154:[function(require,module,exports){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function loadImage(t,e){var i=new Image;i.onload=function(){i.onload=null,e(i)},i.src=t}function getImageDataUri(t,e){var i=new Image;i.onload=function(){var t=document.createElement("canvas");t.width=this.naturalWidth,t.height=this.naturalHeight,t.getContext("2d").drawImage(this,0,0),e(t.toDataURL("image/png"))},i.src=t}function getCoordsArr(t,e,i){var n=[];i=i||t.length;for(var s=e;s<i-1;s+=2)n.push([t[s],t[s+1]]);return n}function formulaXtoY(t,e,i,n){var s=Math.sqrt(Math.pow(i,2)-Math.pow(t-e[0],2));return 1==n?Math.max(s+e[1],e[1]-s):3==n?Math.min(s+e[1],e[1]-s):void 0}function formulaYtoX(t,e,i,n){var s=Math.sqrt(Math.pow(i,2)-Math.pow(t-e[1],2));return 2==n?Math.max(s+e[0],e[0]-s):4==n?Math.min(s+e[0],e[0]-s):void 0}function interpolateCoords(t,e,i){var n=t,s=e,o=i,r=[(n[0]+o[0])/2,(n[1]+o[1])/2],a=Math.sqrt(Math.pow(n[0]-o[0],2)+Math.pow(n[1]-o[1],2))/2,l=1;s[1]>n[1]&&s[1]>o[1]&&(l=1,n[0]<s[0]&&(s[0],o[0]),n[0]>s[0]&&(s[0],o[0])),s[0]>n[0]&&s[0]>o[0]&&(l=2,n[1]<s[1]&&(s[1],o[1]),n[1]>s[1]&&(s[1],o[1])),s[1]<n[1]&&s[1]<o[1]&&(l=3,n[0]<s[0]&&(s[0],o[0]),n[0]>s[0]&&(s[0],o[0])),s[0]<n[0]&&s[0]<o[0]&&(l=4,n[1]<s[1]&&(s[1],o[1]),n[1]>s[1]&&(s[1],o[1]));var h=[t],u=0;if(1==l||3==l){u=(o[0]-n[0])/30;for(var c=1;c<30;c++){var p=n[0]+c*u,d=formulaXtoY(p,r,a,l);h.push([p,d])}}else if(2==l||4==l){u=(o[1]-n[1])/30;for(var y=1;y<30;y++){var f=n[1]+y*u,_=formulaYtoX(f,r,a,l);h.push([_,f])}}return h.push(i),h}function flatArray(t){var e=[];return t.map(function(t){Array.isArray(t)?e=e.concat(flatArray(t)):e.push(t)}),e}var _iterator=require("babel-runtime/core-js/symbol/iterator"),_iterator2=_interopRequireDefault(_iterator),_symbol=require("babel-runtime/core-js/symbol"),_symbol2=_interopRequireDefault(_symbol),_map=require("babel-runtime/core-js/map"),_map2=_interopRequireDefault(_map),_typeof="function"==typeof _symbol2.default&&"symbol"==typeof _iterator2.default?function(t){return typeof t}:function(t){return t&&"function"==typeof _symbol2.default&&t.constructor===_symbol2.default&&t!==_symbol2.default.prototype?"symbol":typeof t},geoObj=require("./Geometry/Geometry"),pointObj=require("./Geometry/Point"),polygonObj=require("./Geometry/Polygon"),L=require("./leaflet"),LUtil=L.Util,_calcTerminals=function(t,e,i,n,s,o,r){var a=0;switch(o){case 0:a=.5*i;break;case 1:a=.5*i/(2*Math.PI*this.EARTH_RADIUS_IN_METERS)*360}var l=[];if(e)for(var h=0;h<e.length;h++){var u=e[h],c=u.x*Math.cos(n)-u.y*Math.sin(n),p=u.x*Math.sin(n)+u.y*Math.cos(n);l.push([t.x+a*c,t.y+a*p])}return l},_calcEleTerminals=function(t,e,i,n,s){var o=s,r=2*Math.PI/360*i,a=[];if(e)for(var l=0;l<e.length;l++){var h=e[l],u=h[0]*Math.cos(r)-h[1]*Math.sin(r),c=h[0]*Math.sin(r)+h[1]*Math.cos(r);a.push([t.x+o*u,t.y+o*c])}return a},_terminalDefaultConf=[{sys_symbol:5,sys_terminaloffset:"",sys_subtypeid:4113e5},{sys_symbol:392,sys_terminaloffset:"0,0",sys_subtypeid:3218e5},{sys_symbol:392,sys_terminaloffset:"",sys_subtypeid:4101e5},{sys_symbol:399,sys_terminaloffset:"0,0",sys_subtypeid:35e6},{sys_symbol:399,sys_terminaloffset:"0,0",sys_subtypeid:18e6},{sys_symbol:399,sys_terminaloffset:"0,0",sys_subtypeid:18000001},{sys_symbol:399,sys_terminaloffset:"",sys_subtypeid:100102e3},{sys_symbol:399,sys_terminaloffset:"0,0",sys_subtypeid:35000001},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:100230100},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:19881400},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:19881100},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:19881300},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:19881200},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:10023e4},{sys_symbol:410,sys_terminaloffset:"",sys_subtypeid:100330100},{sys_symbol:420,sys_terminaloffset:"",sys_subtypeid:361e5},{sys_symbol:420,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:36000001},{sys_symbol:420,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:36e6},{sys_symbol:420,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:14000001},{sys_symbol:420,sys_terminaloffset:"",sys_subtypeid:10023e4},{sys_symbol:420,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:14e6},{sys_symbol:457,sys_terminaloffset:"",sys_subtypeid:100162200},{sys_symbol:457,sys_terminaloffset:"",sys_subtypeid:100152200},{sys_symbol:494,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:495,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101900},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:19881e3},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:10022e4},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100220100},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100320100},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100201900},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:100101800},{sys_symbol:20011,sys_terminaloffset:"",sys_subtypeid:10024e4},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4123e5},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4124e5},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4125e5},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4126e5},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4121e5},{sys_symbol:20016,sys_terminaloffset:"",sys_subtypeid:4122e5},{sys_symbol:30058,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:1001e5},{sys_symbol:850010,sys_terminaloffset:"0,0",sys_subtypeid:19000001},{sys_symbol:850020,sys_terminaloffset:"0,0",sys_subtypeid:19000002},{sys_symbol:850030,sys_terminaloffset:"0,0",sys_subtypeid:19000003},{sys_symbol:850040,sys_terminaloffset:"0,0",sys_subtypeid:19000004},{sys_symbol:1010010,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010020,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010030,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010040,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010050,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010060,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010070,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010080,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010090,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010100,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1010110,sys_terminaloffset:"",sys_subtypeid:30000003},{sys_symbol:1020010,sys_terminaloffset:"",sys_subtypeid:343e5},{sys_symbol:1020010,sys_terminaloffset:"",sys_subtypeid:3e7},{sys_symbol:1020030,sys_terminaloffset:"",sys_subtypeid:30000001},{sys_symbol:1030010,sys_terminaloffset:"",sys_subtypeid:30000004},{sys_symbol:1030020,sys_terminaloffset:"",sys_subtypeid:30000005},{sys_symbol:1030040,sys_terminaloffset:"",sys_subtypeid:323e5},{sys_symbol:1030050,sys_terminaloffset:"",sys_subtypeid:323e5},{sys_symbol:1030060,sys_terminaloffset:"",sys_subtypeid:204e5},{sys_symbol:1030060,sys_terminaloffset:"0,0",sys_subtypeid:209e5},{sys_symbol:1030060,sys_terminaloffset:"0,0",sys_subtypeid:3205e5},{sys_symbol:1030060,sys_terminaloffset:"",sys_subtypeid:326e5},{sys_symbol:1030070,sys_terminaloffset:"",sys_subtypeid:324e5},{sys_symbol:1030080,sys_terminaloffset:"",sys_subtypeid:325e5},{sys_symbol:1030090,sys_terminaloffset:"0,0",sys_subtypeid:311e6},{sys_symbol:1030110,sys_terminaloffset:"",sys_subtypeid:30000006},{sys_symbol:2010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:3101e5},{sys_symbol:2010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:101e5},{sys_symbol:2011806,sys_terminaloffset:"",sys_subtypeid:22200801},{sys_symbol:2011901,sys_terminaloffset:"",sys_subtypeid:22200901},{sys_symbol:2011902,sys_terminaloffset:"",sys_subtypeid:22200901},{sys_symbol:2012001,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012002,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012003,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012004,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012005,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012006,sys_terminaloffset:"",sys_subtypeid:22200601},{sys_symbol:2012101,sys_terminaloffset:"",sys_subtypeid:22200701},{sys_symbol:2012102,sys_terminaloffset:"",sys_subtypeid:22200701},{sys_symbol:2012103,sys_terminaloffset:"",sys_subtypeid:22200701},{sys_symbol:2012201,sys_terminaloffset:"",sys_subtypeid:22200501},{sys_symbol:2012202,sys_terminaloffset:"",sys_subtypeid:22200501},{sys_symbol:2012301,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012302,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012303,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012304,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012305,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012306,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012307,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012308,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012311,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012312,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012313,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012314,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012315,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012316,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012317,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012318,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012321,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012322,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012323,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012324,sys_terminaloffset:"",sys_subtypeid:22200401},{sys_symbol:2012325,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012326,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012327,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012328,sys_terminaloffset:"",sys_subtypeid:22200402},{sys_symbol:2012401,sys_terminaloffset:"",sys_subtypeid:22200301},{sys_symbol:2012402,sys_terminaloffset:"",sys_subtypeid:22200301},{sys_symbol:2012501,sys_terminaloffset:"",sys_subtypeid:22200201},{sys_symbol:2012501,sys_terminaloffset:"",sys_subtypeid:22100002},{sys_symbol:2012502,sys_terminaloffset:"",sys_subtypeid:22100001},{sys_symbol:2012601,sys_terminaloffset:"",sys_subtypeid:22200001},{sys_symbol:2012601,sys_terminaloffset:"",sys_subtypeid:22100101},{sys_symbol:2012602,sys_terminaloffset:"",sys_subtypeid:22100102},{sys_symbol:2012604,sys_terminaloffset:"",sys_subtypeid:22100201},{sys_symbol:2020010,sys_terminaloffset:"",sys_subtypeid:3102e5},{sys_symbol:2020010,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020020,sys_terminaloffset:"",sys_subtypeid:310200001},{sys_symbol:2020020,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020030,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020030,sys_terminaloffset:"",sys_subtypeid:3102e5},{sys_symbol:2020040,sys_terminaloffset:"",sys_subtypeid:310200001},{sys_symbol:2020040,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020050,sys_terminaloffset:"",sys_subtypeid:3102e5},{sys_symbol:2020050,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020051,sys_terminaloffset:"",sys_subtypeid:310200001},{sys_symbol:2020051,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020060,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020060,sys_terminaloffset:"",sys_subtypeid:3102e5},{sys_symbol:2020061,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020061,sys_terminaloffset:"",sys_subtypeid:310200001},{sys_symbol:2020070,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020070,sys_terminaloffset:"",sys_subtypeid:3102e5},{sys_symbol:2020071,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020071,sys_terminaloffset:"",sys_subtypeid:310200001},{sys_symbol:2020072,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020073,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020076,sys_terminaloffset:"",sys_subtypeid:103e5},{sys_symbol:2020077,sys_terminaloffset:"",sys_subtypeid:10300001},{sys_symbol:2020140,sys_terminaloffset:"0,0",sys_subtypeid:102e5},{sys_symbol:2020140,sys_terminaloffset:"0,0",sys_subtypeid:3114e5},{sys_symbol:2020141,sys_terminaloffset:"0,0",sys_subtypeid:311400001},{sys_symbol:2020141,sys_terminaloffset:"0,0",sys_subtypeid:10200001},{sys_symbol:2020142,sys_terminaloffset:"0,0",sys_subtypeid:10200001},{sys_symbol:2020142,sys_terminaloffset:"0,0",sys_subtypeid:102e5},{sys_symbol:2030010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11000001},{sys_symbol:2030020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11e6},{sys_symbol:2030030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11000002},{sys_symbol:2040010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:111e5},{sys_symbol:2040011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:111e5},{sys_symbol:2050010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3104e5},{sys_symbol:2050010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:112e5},{sys_symbol:2050011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:112e5},{sys_symbol:2050011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3104e5},{sys_symbol:2060010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:113e5},{sys_symbol:2060010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:310300001},{sys_symbol:2060011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:310300001},{sys_symbol:2060011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:113e5},{sys_symbol:2070010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:114e5},{sys_symbol:2070011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:114e5},{sys_symbol:2090010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:115e5},{sys_symbol:2090011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:115e5},{sys_symbol:2090020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11500001},{sys_symbol:2090021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11500001},{sys_symbol:2090030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11500002},{sys_symbol:2090031,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:11500002},{sys_symbol:2100010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3113e5},{sys_symbol:2100011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3113e5},{sys_symbol:2100013,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:311300001},{sys_symbol:2100014,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:311300001},{sys_symbol:2110010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:3108e5},{sys_symbol:2120011,sys_terminaloffset:"0,0",sys_subtypeid:117e5},{sys_symbol:2120011,sys_terminaloffset:"0,0",sys_subtypeid:333e5},{sys_symbol:2120011,sys_terminaloffset:"0.9,0",sys_subtypeid:399000010},{sys_symbol:2140010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:3216e5},{sys_symbol:2140011,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:3216e5},{sys_symbol:2150010,sys_terminaloffset:"0,-1",sys_subtypeid:3219e5},{sys_symbol:2160010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:22e6},{sys_symbol:3010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:3201e5},{sys_symbol:3010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:322e5},{sys_symbol:3010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:201e5},{sys_symbol:3020011,sys_terminaloffset:"0,0",sys_subtypeid:203e5},{sys_symbol:3020011,sys_terminaloffset:"0,0",sys_subtypeid:3203e5},{sys_symbol:3030010,sys_terminaloffset:"0,0",sys_subtypeid:3202e5},{sys_symbol:3030010,sys_terminaloffset:"0,0",sys_subtypeid:202e5},{sys_symbol:3040010,sys_terminaloffset:"0.7,0",sys_subtypeid:205e5},{sys_symbol:3050010,sys_terminaloffset:"0,0",sys_subtypeid:206e5},{sys_symbol:3070010,sys_terminaloffset:"",sys_subtypeid:1003e5},{sys_symbol:4010010,sys_terminaloffset:"",sys_subtypeid:34e6},{sys_symbol:4010020,sys_terminaloffset:"",sys_subtypeid:34e6},{sys_symbol:4010030,sys_terminaloffset:"1,0",sys_subtypeid:395e5},{sys_symbol:4020010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200001},{sys_symbol:4020010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020020,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020020,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200001},{sys_symbol:4020030,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020030,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200001},{sys_symbol:4020040,sys_terminaloffset:"0.9,0",sys_subtypeid:304e5},{sys_symbol:4020050,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020050,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020050,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020051,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020051,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020051,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020052,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020052,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020060,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020060,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020060,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020070,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020070,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020070,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020080,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020080,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020080,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020090,sys_terminaloffset:"0.9,0;-0.45,0.6;-0.9,0",sys_subtypeid:30100005},{sys_symbol:4020090,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020090,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020090,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020091,sys_terminaloffset:"0.9,0;-0.45,0.6;-0.9,0",sys_subtypeid:30100005},{sys_symbol:4020092,sys_terminaloffset:"0.9,0;-0.45,0.6;-0.9,0",sys_subtypeid:30100005},{sys_symbol:4020093,sys_terminaloffset:"0.9,0;-0.45,0.6;-0.9,0",sys_subtypeid:30100005},{sys_symbol:4020094,sys_terminaloffset:"0.9,0;-0.45,0.6;-0.9,0",sys_subtypeid:30100005},{sys_symbol:4020100,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020100,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020100,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2102e5},{sys_symbol:4020100,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020110,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020110,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2102e5},{sys_symbol:4020110,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020110,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020120,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020120,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020120,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020130,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020130,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020130,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020140,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020140,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020140,sys_terminaloffset:"-0.9,0;0.9,0",
sys_subtypeid:30200003},{sys_symbol:4020150,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020150,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020150,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020160,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020160,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020160,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020170,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020170,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020170,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020180,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020180,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020180,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020190,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020190,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020190,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020200,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020200,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020200,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020210,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020210,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020210,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020220,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020220,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020220,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020230,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100002},{sys_symbol:4020230,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200002},{sys_symbol:4020230,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30200003},{sys_symbol:4020240,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020240,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020250,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020250,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020250,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020260,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020260,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020260,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020270,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020270,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020270,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020280,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020280,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020280,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020290,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020290,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020290,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020300,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020300,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020300,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020310,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020310,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020310,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020320,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020320,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020320,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020330,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020330,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:302e5},{sys_symbol:4020330,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:210200001},{sys_symbol:4020331,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,-0.45",sys_subtypeid:30100003},{sys_symbol:4020350,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,0;-0.9,-0.45",sys_subtypeid:30100004},{sys_symbol:4020360,sys_terminaloffset:"0.9,0;-0.9,0.45;-0.9,0;-0.9,-0.45",sys_subtypeid:30100004},{sys_symbol:4020370,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:303e5},{sys_symbol:4020380,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020381,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020382,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020383,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020384,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4020385,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:30100001},{sys_symbol:4030010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4030010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4030010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3103e5},{sys_symbol:4030011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4030011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3103e5},{sys_symbol:4030011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4030020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4030020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4030021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4030021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4040010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:307e5},{sys_symbol:4040010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500002},{sys_symbol:4040011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:307e5},{sys_symbol:4040011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500002},{sys_symbol:4040020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500002},{sys_symbol:4040020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:307e5},{sys_symbol:4040020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:112e5},{sys_symbol:4040021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:112e5},{sys_symbol:4040021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500002},{sys_symbol:4040021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:307e5},{sys_symbol:4050010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4050010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4050011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4050011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4050020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:310300001},{sys_symbol:4050020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4050020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4050020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:113e5},{sys_symbol:4050021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:310300001},{sys_symbol:4050021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:113e5},{sys_symbol:4050021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4050021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4050030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3106e5},{sys_symbol:4050030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:331e6},{sys_symbol:4050030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:309e5},{sys_symbol:4050030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30600005},{sys_symbol:4050031,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:309e5},{sys_symbol:4050031,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30600005},{sys_symbol:4050031,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:331e6},{sys_symbol:4050031,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3106e5},{sys_symbol:4050040,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:30600004},{sys_symbol:4050040,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:321500099},{sys_symbol:4050040,sys_terminaloffset:"-0.9,0.6;-0.9,-0.6;0.9,0",sys_subtypeid:321500012},{sys_symbol:4050041,sys_terminaloffset:"-0.9,0.6;-0.9,-0.6;0.9,0",sys_subtypeid:321500012},{sys_symbol:4050041,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:30600004},{sys_symbol:4050041,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:321500099},{sys_symbol:4050042,sys_terminaloffset:"-0.9,0.6;-0.9,-0.6;0.9,0",sys_subtypeid:321500012},{sys_symbol:4050042,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:321500099},{sys_symbol:4050042,sys_terminaloffset:"0.9,0;-0.9,-0.6;-0.9,0.6",sys_subtypeid:30600004},{sys_symbol:4060010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:331000001},{sys_symbol:4060010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30900002},{sys_symbol:4070010,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30700002},{sys_symbol:4070011,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30700002},{sys_symbol:4070012,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30700002},{sys_symbol:4070013,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4070013,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30600007},{sys_symbol:4070014,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30600007},{sys_symbol:4070014,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4070015,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30600007},{sys_symbol:4070015,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4080001,sys_terminaloffset:"0.9,0;0.9,1.0;-0.9,0",sys_subtypeid:30600008},{sys_symbol:4080002,sys_terminaloffset:"0.9,0;0.9,1.0;-0.9,0",sys_subtypeid:30600008},{sys_symbol:4080003,sys_terminaloffset:"0.9,0;0.9,1.0;-0.9,0",sys_subtypeid:30600008},{sys_symbol:4080004,sys_terminaloffset:"0.9,0;0.9,1.0;-0.9,0",sys_subtypeid:30600008},{sys_symbol:4080010,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600006},{sys_symbol:4080011,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600006},{sys_symbol:4080012,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600006},{sys_symbol:4080013,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600006},{sys_symbol:4090010,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600002},{sys_symbol:4090011,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600002},{sys_symbol:4090012,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600002},{sys_symbol:4090013,sys_terminaloffset:"-0.6,0.75;0.6,0.75;0.6,-0.75;-0.6,-0.75",sys_subtypeid:30600002},{sys_symbol:4100010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4100010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4100011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4100011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4100012,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4100012,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4100013,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:4100013,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:4110010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4110010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4110011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4110011,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4110012,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3215e5},{sys_symbol:4110012,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:4121001,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:315e5},{sys_symbol:4130010,sys_terminaloffset:"0.9,0",sys_subtypeid:12e6},{sys_symbol:4130010,sys_terminaloffset:"0.9,0",sys_subtypeid:2504e5},{sys_symbol:4130010,sys_terminaloffset:"1.05,0",sys_subtypeid:399000013},{sys_symbol:4130010,sys_terminaloffset:"0.8,0",sys_subtypeid:314e5},{sys_symbol:4130020,sys_terminaloffset:"0.9,0",sys_subtypeid:2504e5},{sys_symbol:4130020,sys_terminaloffset:"0.8,0",sys_subtypeid:314e5},{sys_symbol:4130020,sys_terminaloffset:"1.05,0",sys_subtypeid:399000013},{sys_symbol:4130030,sys_terminaloffset:"0.8,0",sys_subtypeid:314e5},{sys_symbol:4130030,sys_terminaloffset:"0.9,0",sys_subtypeid:2504e5},{sys_symbol:4130040,sys_terminaloffset:"0.9,0",sys_subtypeid:2504e5},{sys_symbol:4130040,sys_terminaloffset:"1.05,0",sys_subtypeid:399000013},{sys_symbol:4130040,sys_terminaloffset:"0.8,0",sys_subtypeid:314e5},{sys_symbol:4130050,sys_terminaloffset:"0.7,0;-0.7,0",sys_subtypeid:31400001},{sys_symbol:4130051,sys_terminaloffset:"0.7,0;-0.7,0",sys_subtypeid:31400001},{sys_symbol:4130070,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:250400001},{sys_symbol:4140010,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140010,sys_terminaloffset:"-0.9,0",sys_subtypeid:121e5},{sys_symbol:4140010,sys_terminaloffset:"0,0",sys_subtypeid:3309e5},{sys_symbol:4140020,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140030,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140040,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:118e5},{sys_symbol:4140040,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140050,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140060,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140070,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140080,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140090,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140100,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140110,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140120,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140130,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140140,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140150,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140160,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140170,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140180,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140190,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140200,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140210,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4140220,sys_terminaloffset:"0,0",sys_subtypeid:31300001},{sys_symbol:4150010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:119e5},{sys_symbol:4150010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:316e5},{sys_symbol:4150010,sys_terminaloffset:"0.7,0;-0.7,0",sys_subtypeid:2507e5},{sys_symbol:4150010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3311e5},{sys_symbol:4150020,sys_terminaloffset:"0.7,0",sys_subtypeid:317e5},{sys_symbol:4150030,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:316e5},{sys_symbol:4150040,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:3314e5},{sys_symbol:4150050,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:3314e5},{sys_symbol:4150060,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:399000014},{sys_symbol:4160010,sys_terminaloffset:"1,0;-1,0",sys_subtypeid:399000001},{sys_symbol:4160010,sys_terminaloffset:"1,0;-1,0",sys_subtypeid:39000006},{sys_symbol:4160020,sys_terminaloffset:"1,0;-1,0",sys_subtypeid:39000006},{sys_symbol:4160020,sys_terminaloffset:"1,0;-1,0",sys_subtypeid:399000001},{sys_symbol:4170010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2103e5},{sys_symbol:4170010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:312e5},{sys_symbol:4170020,sys_terminaloffset:"0.7,0;-0.6,0.7;-0.6,-0.7",sys_subtypeid:31200001},{sys_symbol:4180010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:39000002},{sys_symbol:4180020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:39000007},{sys_symbol:4180030,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:319e5},{sys_symbol:4180040,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:319e5},{sys_symbol:4190010,sys_terminaloffset:"1,0;-1,0",sys_subtypeid:33e6},{sys_symbol:4190010,sys_terminaloffset:"0.5,0;-0.5,0",sys_subtypeid:2512e5},{sys_symbol:4200010,sys_terminaloffset:"0.75,0",sys_subtypeid:2514e5},{sys_symbol:4200010,sys_terminaloffset:"0.75,0",sys_subtypeid:318e5},{sys_symbol:4200010,sys_terminaloffset:"1,0",sys_subtypeid:116e5},{sys_symbol:4200010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:3109e5},{sys_symbol:4200010,sys_terminaloffset:"0.75,0",sys_subtypeid:3312e5},{sys_symbol:4200011,sys_terminaloffset:"0.75,0",sys_subtypeid:3312e5},{sys_symbol:4200011,sys_terminaloffset:"0.75,0",sys_subtypeid:251400001},{sys_symbol:4200011,sys_terminaloffset:"1,0",sys_subtypeid:116e5},{sys_symbol:4200011,sys_terminaloffset:"0.75,0",sys_subtypeid:31800001},{sys_symbol:4210010,sys_terminaloffset:"0.9,0",sys_subtypeid:3313e5},{sys_symbol:4210010,sys_terminaloffset:"0.9,0",sys_subtypeid:39000003},{sys_symbol:4210010,sys_terminaloffset:"0.9,0",sys_subtypeid:28e7},{sys_symbol:4210020,sys_terminaloffset:"0.9,0",sys_subtypeid:39000003},{sys_symbol:4210020,sys_terminaloffset:"0.9,0",sys_subtypeid:3313e5},{sys_symbol:4220010,sys_terminaloffset:"0.9,0",sys_subtypeid:2503e5},{sys_symbol:4220010,sys_terminaloffset:"0.75,0",sys_subtypeid:321500005},{sys_symbol:4220010,sys_terminaloffset:"0.75,0",sys_subtypeid:30600001},{sys_symbol:4220011,sys_terminaloffset:"0.75,0",sys_subtypeid:321500005},{sys_symbol:4220011,sys_terminaloffset:"0.75,0",sys_subtypeid:30600001},{sys_symbol:4220011,sys_terminaloffset:"0.9,0",sys_subtypeid:2503e5},{sys_symbol:4230010,sys_terminaloffset:"0.5,0;-0.5,0",sys_subtypeid:2506e5},{sys_symbol:4230010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:39000008},{sys_symbol:4230020,sys_terminaloffset:"0.9,0",sys_subtypeid:308e5},{sys_symbol:4240010,sys_terminaloffset:"0.6,0;-0.6,0",sys_subtypeid:39000005},{sys_symbol:4240020,sys_terminaloffset:"0.9,0",sys_subtypeid:39000004},{sys_symbol:4250010,sys_terminaloffset:"0,0",sys_subtypeid:3217e5},{sys_symbol:4250010,sys_terminaloffset:"0,0",sys_subtypeid:311e5},{sys_symbol:4250010,sys_terminaloffset:"0,0",sys_subtypeid:2125e5},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:13000001},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:13e6},{sys_symbol:4260010,sys_terminaloffset:"0,0",sys_subtypeid:100150200},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:36e6},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:26e7},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:111300001},{sys_symbol:4260010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:36000001},{sys_symbol:4270010,sys_terminaloffset:"0.9,0",sys_subtypeid:39000001},{sys_symbol:4270010,sys_terminaloffset:"-1,0;1,0",sys_subtypeid:399000012},{sys_symbol:4290010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2127e5},{sys_symbol:4290010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2101e5},{sys_symbol:4290020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:210300001},{sys_symbol:4290040,sys_terminaloffset:"0,0",sys_subtypeid:2505e5},{sys_symbol:4290041,sys_terminaloffset:"0,0",sys_subtypeid:2505e5},{sys_symbol:4290042,sys_terminaloffset:"0,0",sys_subtypeid:2505e5},{sys_symbol:4290043,sys_terminaloffset:"0,0",sys_subtypeid:2505e5},{sys_symbol:4290050,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2501e5},{sys_symbol:4290051,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2501e5},{sys_symbol:4290060,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2502e5},{sys_symbol:4290061,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2502e5},{sys_symbol:4290070,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2513e5},{sys_symbol:4290100,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:321500098},{sys_symbol:4290100,sys_terminaloffset:"-0.75,0;0.45,0",sys_subtypeid:321500011},{sys_symbol:4290100,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:4290110,sys_terminaloffset:"-0.75,0;0.45,0",sys_subtypeid:321500011},{sys_symbol:4290110,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:321500098},{sys_symbol:4290110,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:4290120,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:321500098},{sys_symbol:4290120,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:4290120,sys_terminaloffset:"-0.75,0;0.45,0",sys_subtypeid:321500011},{sys_symbol:4290130,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:321500098},{sys_symbol:4290130,sys_terminaloffset:"-0.75,0;0.45,0",sys_subtypeid:321500011},{sys_symbol:4290130,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:4290220,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:251e6},{sys_symbol:4290230,sys_terminaloffset:"0,0.9;0,-0.9",sys_subtypeid:2511e5},{sys_symbol:4290240,sys_terminaloffset:"0,0.9;0,-0.9",sys_subtypeid:2123e5},{sys_symbol:4290250,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2102e5},{sys_symbol:4290260,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:2102e5},{sys_symbol:4290270,sys_terminaloffset:"0,0",sys_subtypeid:2505e5},{sys_symbol:4300010,sys_terminaloffset:"0,0",sys_subtypeid:321e5},{sys_symbol:4300010,sys_terminaloffset:"0,0",sys_subtypeid:32e6},{sys_symbol:4300010,sys_terminaloffset:"0,0",sys_subtypeid:27e7},{sys_symbol:4300010,sys_terminaloffset:"0,0",sys_subtypeid:32000001},{sys_symbol:4300020,sys_terminaloffset:"-1,0;1,0",sys_subtypeid:399000011},{sys_symbol:4400010,sys_terminaloffset:"0,0.9;0,-0.9",sys_subtypeid:39000009},{sys_symbol:4600010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:339e5},{sys_symbol:4600020,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:339e5},{sys_symbol:4700010,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:345e5},{sys_symbol:5010010,sys_terminaloffset:"0,0",sys_subtypeid:37e6},{sys_symbol:5010010,sys_terminaloffset:"",sys_subtypeid:4108e5},{sys_symbol:5010020,sys_terminaloffset:"0,0",sys_subtypeid:37e6},{sys_symbol:5010030,sys_terminaloffset:"0,0",sys_subtypeid:37e6},{sys_symbol:5010040,sys_terminaloffset:"0,0",sys_subtypeid:37e6},{sys_symbol:5010050,sys_terminaloffset:"0,0",sys_subtypeid:37e6},{sys_symbol:5040010,sys_terminaloffset:"",sys_subtypeid:17e6},{sys_symbol:5040010,sys_terminaloffset:"0,0",sys_subtypeid:4103e5},{sys_symbol:5040020,sys_terminaloffset:"0,0",sys_subtypeid:4104e5},{sys_symbol:5040030,sys_terminaloffset:"0,0",sys_subtypeid:4106e5},{sys_symbol:5060010,sys_terminaloffset:"",sys_subtypeid:4117e5},{sys_symbol:5060050,sys_terminaloffset:"",sys_subtypeid:411700002},{sys_symbol:5060060,sys_terminaloffset:"",sys_subtypeid:411700001},{sys_symbol:5070010,sys_terminaloffset:"0,0",sys_subtypeid:4102e5},{sys_symbol:5080010,sys_terminaloffset:"",sys_subtypeid:411400001},{sys_symbol:5090010,sys_terminaloffset:"",sys_subtypeid:4114e5},{sys_symbol:5130010,sys_terminaloffset:"",sys_subtypeid:411600001},{sys_symbol:5160030,sys_terminaloffset:"0,0",sys_subtypeid:91000001},{sys_symbol:5170010,sys_terminaloffset:"0,-0.7",sys_subtypeid:4111e5},{sys_symbol:5180010,sys_terminaloffset:"",sys_subtypeid:4107e5},{sys_symbol:5190010,sys_terminaloffset:"",sys_subtypeid:4112e5},{sys_symbol:5200010,sys_terminaloffset:"",sys_subtypeid:411300001},{sys_symbol:5220010,sys_terminaloffset:"0,0.7",sys_subtypeid:15e6},{sys_symbol:5220010,sys_terminaloffset:"",sys_subtypeid:4115e5},{sys_symbol:5230010,sys_terminaloffset:"",sys_subtypeid:4105e5},{sys_symbol:5240010,sys_terminaloffset:"",sys_subtypeid:4116e5},{sys_symbol:5250010,sys_terminaloffset:"",sys_subtypeid:4118e5},{sys_symbol:5260010,sys_terminaloffset:"",sys_subtypeid:4119e5},{sys_symbol:5270010,sys_terminaloffset:"",sys_subtypeid:412e6},{sys_symbol:5280010,sys_terminaloffset:"",sys_subtypeid:412000001},{sys_symbol:5290010,sys_terminaloffset:"",sys_subtypeid:412000002},{sys_symbol:5300010,sys_terminaloffset:"",sys_subtypeid:412000003},{sys_symbol:5310010,sys_terminaloffset:"",sys_subtypeid:412000004},{sys_symbol:6070010,sys_terminaloffset:"0.8,0",sys_subtypeid:207e5},{sys_symbol:7010010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:10011e4},{sys_symbol:7010011,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:100110001},{sys_symbol:7020010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:10012e4},{sys_symbol:7030010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:10014e4},{sys_symbol:7040010,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:10013e4},{sys_symbol:7050010,sys_terminaloffset:"",sys_subtypeid:1004e5},{sys_symbol:7060010,sys_terminaloffset:"",sys_subtypeid:100100700},{sys_symbol:7080010,sys_terminaloffset:"0,0",sys_subtypeid:100100600},{sys_symbol:7090010,sys_terminaloffset:"0,0",sys_subtypeid:100100400},{sys_symbol:7120010,sys_terminaloffset:"0,0",sys_subtypeid:10015e4},{sys_symbol:7150010,sys_terminaloffset:"0,0",sys_subtypeid:100150300},{sys_symbol:7160010,sys_terminaloffset:"0,0",sys_subtypeid:100150400},{sys_symbol:7170010,sys_terminaloffset:"0,0",sys_subtypeid:100150500},{sys_symbol:7180010,sys_terminaloffset:"0,0",sys_subtypeid:100150600},{sys_symbol:7210010,sys_terminaloffset:"0,0",sys_subtypeid:100150100},{sys_symbol:7220010,sys_terminaloffset:"0,0",sys_subtypeid:100150900},{sys_symbol:7230010,sys_terminaloffset:"0,0",sys_subtypeid:100151e3},{sys_symbol:7240010,sys_terminaloffset:"0,0",sys_subtypeid:100151100},{sys_symbol:7250010,sys_terminaloffset:"0,0",sys_subtypeid:100151200},{sys_symbol:7260010,sys_terminaloffset:"0,0",sys_subtypeid:100151300},{sys_symbol:7270010,sys_terminaloffset:"0,0",sys_subtypeid:100151400},{sys_symbol:7280010,sys_terminaloffset:"0,0",sys_subtypeid:100151500},{sys_symbol:7290010,sys_terminaloffset:"0,0",sys_subtypeid:100151800},{sys_symbol:7300010,sys_terminaloffset:"0,0",sys_subtypeid:100151900},{sys_symbol:7310010,sys_terminaloffset:"0,0",sys_subtypeid:100152e3},{sys_symbol:7410010,sys_terminaloffset:"0,0",sys_subtypeid:100151600},{sys_symbol:7510010,sys_terminaloffset:"0,0",sys_subtypeid:100151700},{sys_symbol:8010050,sys_terminaloffset:"",sys_subtypeid:10022e4},{sys_symbol:9010001,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010002,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010003,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010010,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010010,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010020,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010020,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010030,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010030,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010040,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010040,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010050,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010050,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010060,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010060,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010070,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010070,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010080,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010080,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010090,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010090,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010100,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010100,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010110,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010110,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010120,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010120,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010130,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010130,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010140,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010140,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010150,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010150,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010160,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010160,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010170,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010170,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010180,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010180,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010190,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010190,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010191,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010191,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010192,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010192,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010193,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010193,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010194,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010194,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010200,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010200,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010230,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010230,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010240,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010240,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010250,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010250,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010260,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9010260,sys_terminaloffset:"0,0",sys_subtypeid:100101301},{sys_symbol:9010310,sys_terminaloffset:"0,0",sys_subtypeid:100101401},{sys_symbol:9030010,sys_terminaloffset:"",sys_subtypeid:21e6},{sys_symbol:9050010,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:16e6},{sys_symbol:9050011,sys_terminaloffset:"0,0",sys_subtypeid:1101e5},{sys_symbol:9050012,sys_terminaloffset:"-1.0,0;1.0,0",sys_subtypeid:1102e5},{sys_symbol:9050013,sys_terminaloffset:"0,0",sys_subtypeid:1103e5},{sys_symbol:9100010,sys_terminaloffset:"",sys_subtypeid:411e6},{sys_symbol:9200010,sys_terminaloffset:"0,0",sys_subtypeid:100152100},{sys_symbol:51020033,sys_terminaloffset:"0,0",sys_subtypeid:116700001},{sys_symbol:51112001,sys_terminaloffset:"0,0.9",sys_subtypeid:111200001},{sys_symbol:51114001,sys_terminaloffset:"0,0",sys_subtypeid:111400001},{sys_symbol:81030110,sys_terminaloffset:"",sys_subtypeid:30000099},{sys_symbol:82030040,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:83020005},{
sys_symbol:82030040,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:819e6},{sys_symbol:82290010,sys_terminaloffset:"0.75,0",sys_subtypeid:399000003},{sys_symbol:84020001,sys_terminaloffset:"-0.9,0;0.9,0",sys_subtypeid:8393e5},{sys_symbol:84020002,sys_terminaloffset:"0,0.9",sys_subtypeid:8347e5},{sys_symbol:8403e4,sys_terminaloffset:"0,0",sys_subtypeid:8103e5},{sys_symbol:84030050,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:84030051,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500001},{sys_symbol:84030060,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700098},{sys_symbol:84030061,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700098},{sys_symbol:84030062,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700098},{sys_symbol:84030070,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30500099},{sys_symbol:84030071,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30500099},{sys_symbol:84030072,sys_terminaloffset:"0.9,0; 0,0.6;-0.9,0",sys_subtypeid:30500099},{sys_symbol:84050050,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30900001},{sys_symbol:84050050,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:84050051,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:306e5},{sys_symbol:84050051,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30900001},{sys_symbol:84050070,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30600099},{sys_symbol:84050072,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30600099},{sys_symbol:84050073,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30600099},{sys_symbol:84100014,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:84100015,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:305e5},{sys_symbol:84100020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500097},{sys_symbol:84100020,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700099},{sys_symbol:84100021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500097},{sys_symbol:84100021,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700099},{sys_symbol:84100022,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500097},{sys_symbol:84100022,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700099},{sys_symbol:84100023,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:321500097},{sys_symbol:84100023,sys_terminaloffset:"0.9,0;-0.9,0",sys_subtypeid:30700099},{sys_symbol:84110022,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:84110032,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:84110090,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:84110091,sys_terminaloffset:"-0.6,0;0.6,0",sys_subtypeid:30600003},{sys_symbol:84170030,sys_terminaloffset:"0.75,0",sys_subtypeid:398000001},{sys_symbol:84210012,sys_terminaloffset:"0.9,0",sys_subtypeid:39000003},{sys_symbol:84210012,sys_terminaloffset:"0.9,0",sys_subtypeid:3313e5},{sys_symbol:84340010,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:39000098},{sys_symbol:84340010,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:399000002},{sys_symbol:84340011,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:399000002},{sys_symbol:84340011,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:39000098},{sys_symbol:84340020,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:399000002},{sys_symbol:84340020,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:39000098},{sys_symbol:84340021,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:399000002},{sys_symbol:84340021,sys_terminaloffset:"0.8,0;-0.8,0",sys_subtypeid:39000098}],treminalDatatmp=null,_updateTerminalConf=function(t){if(treminalDatatmp||(treminalDatatmp=new _map2.default),t){try{for(var e=0;e<t.length;e++){var i=t[e];if(i.sys_terminaloffset||""==i.sys_terminaloffset){for(var n=i.sys_terminaloffset.split(";"),s=[],o=0;o<n.length;o++)if(n[o]&&n[o].length>0){var r=n[o].split(",");s.push([parseFloat(r[0]),parseFloat(r[1])])}treminalDatatmp.set(i.sys_symbol+"-"+i.sys_subtypeid,s)}}}catch(t){console.warn("端子更新数据格式有误，请确保数据正确")}t=null}};_updateTerminalConf(_terminalDefaultConf);var _treminals=function(t){return _updateTerminalConf(t),treminalDatatmp},setTerminalData=function(t){_treminals(t)},_rand=function _rand(rMi,rMa){return~~(eval(window.atob("TWF0aC5yYW5kb20oKQ=="))*(rMa-rMi+1)+rMi)},_warn=function(){console&&console.warn&&console.warn.apply(console,arguments)},_cleanUrl=function(t){return t=E.Util.trim(t),"/"!==t[t.length-1]&&(t+="/"),t},_mmToPixel=function(t){return t/25.4*96},_eLineWidth=function(){return.5},_mmToPixelByLevel=function(t,e,i){return.0393701*t*96*1e3/i},_distanceMeasure=function(t,e,i){t=L.latLng(t.y,t.x),e=L.latLng(e.y,e.x);var n=L.CRS.Earth.distance(t,e);switch(i){case"km":n/=1e3;break;case"m":default:n=n}return n},_colorHex=function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,i=t;if(/^(rgb|RGB)/.test(i)){for(var n=i.replace(/(?:||rgb|RGB)*/g,"").replace("(","").replace(")","").split(","),s="#",o=0;o<n.length;o++){var r=Number(n[o]).toString(16);"0"===r&&(r+=r),s+=r}return 7!==s.length&&(s=i),s}if(!e.test(i))return i;var a=i.replace(/#/,"").split("");if(6===a.length)return i;if(3===a.length){for(var l="#",o=0;o<a.length;o+=1)l+=a[o]+a[o];return l}},_coordinateTransByAngle=function(t,e,i){var n,s,o=[],r=t.x,a=t.y;i?(n=Math.sin(i),s=Math.cos(i)):(n=0,s=1);for(var l=0,h=e.length;l<h;l++){var u=e[l].x-r,c=e[l].y-a;o.push(new L.point(u*s-c*n+r,u*n+c*s+a))}return o},_cartesiancoorTransByAngle=function(t,e,i){var n,s,o=[],r=t.x,a=t.y;i?(n=Math.sin(i),s=Math.cos(i)):(n=0,s=1);for(var l=0,h=e.length;l<h;l++){var u=e[l].x-r,c=e[l].y-a;o.push(new L.point(u*s-c*n+r,u*n+c*s+a))}return o},_getParamsJSONString=function(t,e,i){var n=[];for(var s in t)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},_isPointInEllipse=function(t,e,i,n,s){var o,r,a,l,h,u;return s?(o=Math.sin(-s),r=Math.cos(-s)):(o=0,r=1),h=e.x-t.x,u=e.y-t.y,a=h*r-u*o,l=h*o+u*r,Math.pow(a/i,2)+Math.pow(l/n,2)<1},_colorRgb=function(t){var e=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,i=t.toLowerCase();if(i&&e.test(i)){if(4===i.length){for(var n="#",s=1;s<4;s+=1)n+=i.slice(s,s+1).concat(i.slice(s,s+1));i=n}for(var o=[],s=1;s<7;s+=2)o.push(parseInt("0x"+i.slice(s,s+2)));return"rgb("+o.join(",")+")"}return i},_areaMeasure=function(t,e){var i=0;if(!(t instanceof Array)&&t.length<3)return-1;var n,s,o,r,a,l=t[0],h=0,u=0,c=0;for(n=1;n<t.length-1;n++){s=t[n],o=t[n+1],r=new pointObj.Point(s.x-l.x,s.y-l.y),a=new pointObj.Point(o.x-s.x,o.y-s.y),h=r.x*a.y-r.y*a.x,h>0?u=1:h<0&&(u=-1);var p=2*pointObj.Point.distance(l,s)*Math.PI*Util.EARTH_RADIUS_IN_METERS/360,d=2*pointObj.Point.distance(s,o)*Math.PI*Util.EARTH_RADIUS_IN_METERS/360,y=2*pointObj.Point.distance(o,l)*Math.PI*Util.EARTH_RADIUS_IN_METERS/360,f=(p+d+y)/2,_=f*(f-p)*(f-d)*(f-y);_=Math.sqrt(_),c=_*u,i+=c}return Math.abs(i)},_angleMeasure=function(t,e,i){var n=0,s=pointObj.Point.distance(t,e),o=pointObj.Point.distance(e,i),r=pointObj.Point.distance(i,t),a=(s*s+o*o-r*r)/(2*s*o);return n=180*Math.acos(a)/Math.PI,Math.abs(n)},_convertMetersToDegrees=function(t){return t/(6378137*Math.PI/180)},_mercatorToDegree=function(t,e){var i={lng:0,lat:0};i.lng=t/(6378137*Math.PI/180);var n=e/(6378137*Math.PI/180);return i.lat=180/Math.PI*(2*Math.atan(Math.exp(n*Math.PI/180))-Math.PI/2),i},_degreeToMercator=function(t,e){var i={lng:0,lat:0};i.lng=t*(6378137*Math.PI/180);var n=Math.log(Math.tan((90+e)*Math.PI/360))/(Math.PI/180);return i.lat=n*(6378137*Math.PI/180),i},_convertDegreeToMeters=function(t){return t*(6378137*Math.PI/180)},_getPolygonByPoints=function(t){if(0==t.length)return null;var e=[];for(var i in t){var n=[i.x,i.y];e.push(n)}return e},_getPxBoundByPoints=function(t,e){if(0==t.length)return null;for(var i=t[0].x,n=t[0].y,s=t[0].x,o=t[0].y,r=1;r<t.length;r++)i>t[r].x&&(i=t[r].x),n>t[r].y&&(n=t[r].y),s<t[r].x&&(s=t[r].x),o<t[r].y&&(o=t[r].y);var a=new L.Point(i,n),l=new L.Point(s,o);return null!=e?new L.Bounds(a.subtract(e),l.add(e)):new L.Bounds(a,l)},_getExtentByPoints=function(t){if(0==t.length)return null;for(var e=t[0].x,i=t[0].y,n=t[0].x,s=t[0].y,o=1;o<t.length;o++)e>t[o].x&&(e=t[o].x),i>t[o].y&&(i=t[o].y),n<t[o].x&&(n=t[o].x),s<t[o].y&&(s=t[o].y);new L.Point(e,i),new L.Point(n,s);return new egis.geometry.Extent(e,i,n,s)},_convertExtentToScale=function(t,e,i,n){var s=NaN;switch(n=n||96,i){case"deg":s=(t.xmax-t.xmin)*(2*Math.PI*Util.EARTH_RADIUS_IN_METERS/360)*n*100/(2.54*e);break;case"m":s=100*(t.xmax-t.xmin)*n/(2.54*e)}return s},_diyAnimate=function(t){function e(){a||(t.resId=requestAnimationFrame(e),s=Date.now(),(r=s-o)>i&&(o=s-r%i,l(t.param)))}var i,n,s,o,r,a=!1,l=t.draw,h=t.fps?t.fps:5;!function(s){i=1e3/s,o=Date.now(),n=o,t.resId&&(cancelAnimationFrame(t.resId),t.resId=""),e()}(h)},_transGeoToPoint=function(t,e){var i=[];switch(t.getType()){case geoObj.Geometry.POLYLINE:var n,s,o,r,a=new L.Bounds,l=t,h=l.getPaths(),u=h.length;for(n=0;n<u;n++){var c=[];for(s=0,o=h[n].length;s<o;s++){r=h[n][s];var p=e.latLngToLayerPoint(r.toLatLng());a.extend(p),c.push(p)}i=c}}return i},objectHandle={},isDimenensionArray=function(t){if(!LUtil.isArray(t))return!1;var e=t.length;if(0==e)return!1;for(var i=0;i<e;i++)if(!LUtil.isArray(t[i]))return!1;return!0},_snap=function(t,e,i,n,s){var o=_createSnapList(i,n);if(o)return _calcClosestLayer(t,e,o,s)},_calcClosestLayer=function(t,e,i,n){if(void 0!=i&&0!=i.length){for(var s={},o=void 0,r=0;r<i.length;r++)o=_calcLayerDistances(t,e,i[r]),(s&&void 0===s.distance||o&&s&&o.distance<s.distance)&&(s=o)&&(s.graphic=i[r]);return s&&s.distance&&s.distance>n&&(s.graphic=void 0),s}},_calcLayerDistances=function(t,e,i,n){var s=i.getGeometry().getType();if(s==geoObj.Geometry.POINT){var o=new pointObj.Point(i.getGeometry().x,i.getGeometry().y),r=o.toLatLng();return{distance:_getDistance(t,r,e),closestCoor:o}}if(s==geoObj.Geometry.POLYLINE){var r=i.getGeometry().getPaths()[0],a={distance:0,closestCoor:void 0};if(r&&r.length>0)for(var l=0;l<r.length;l++)0==a.distance?(a.distance=_getDistance(t,r[l].toLatLng(),e),a.closestCoor=r[l]):_getDistance(t,r[l].toLatLng(),e)<a.distance&&(a.distance=_getDistance(t,r[l].toLatLng(),e),a.closestCoor=r[l]);return a}},_getDistance=function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))},_createSnapList=function(t,e){var i=[];if(void 0!=t&&t instanceof egis.layer.GraphicsLayer){var n=t.getGraphics();if(void 0!=e)for(var s=0;s<n.length;s++)n[s].id!=e.id&&i.push(n[s]);else n&&n.length>0&&(i=i.concat(n))}return i},_projectWebMercatorToLngLat=function(t,e){var i=L.CRS.EPSG3857.projection.unproject(L.point(t,e));return{x:i.lng,y:i.lat}},_projectLngLatToWebMercator=function(t,e){var i=L.CRS.EPSG3857.projection.project(L.latLng(e,t));return{x:i.x,y:i.y}};!function(){for(var t=["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],e=t.length-1;e>=0;e--)!function(e){objectHandle["is"+t[e]]=function(i){return toString.call(i)==="[object "+t[e]+"]"}}(e)}(),objectHandle.isNaN=function(t){return _.isNumber(t)&&isNaN(t)},objectHandle.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===toString.call(t)},objectHandle.isNull=function(t){return null===t},objectHandle.isUndefined=function(t){return void 0===t},objectHandle.clone=function(t){var e;if("object"==(void 0===t?"undefined":_typeof(t)))if(null===t)e=null;else if(t instanceof Array){e=[];for(var i=0,n=t.length;i<n;i++)e.push(objectHandle.clone(t[i]))}else{e={};for(var s in t)e[s]=objectHandle.clone(t[s])}else e=t;return e},objectHandle.isDimenensionArray=isDimenensionArray,objectHandle.isArray=LUtil.isArray;var _colorTenToHex=function(t,e){var i=Number(t).toString(16),n="";if(i.length<6)for(var s=6-i.length,o=0;o<s;o++)n+="0";return(e=e?e:"")+n+i},_fixColorToRGBA=function(t){if("number"==typeof t)return t<0?t:_colorTenToRGBA(t);if("rgba"===String(t).substr(0,4).toLowerCase())return t;if("0x"===String(t).substr(0,2)){if(!([1,2,5,7].indexOf(String(t).length-2)>-1))return _colorHexToRgba("#"+t.substr(2));console.log("color value invalid")}return"#"===String(t).substr(0,1)?_colorHexToRgba(t):"rgb"===String(t).substr(0,3).toLowerCase()?t=_rgbaStrToHex(t):"argb"===String(t).substr(0,4).toLowerCase()?(console.error("argb not supported"),null):void 0},_rgbaStrToHex=function(t){for(var e=t.match(/[0-9]{0,3}/g),i=e.length-1;i>=0;i--)""===e[i]&&e.splice(i,1);3==e.length&&e.push("1"),5==e.length&&(e[3]=e[3]+"."+e[4],e.pop());var n=Number(e[0]).toString(16);n=2==n.length?n:"0"+n;var s=Number(e[1]).toString(16);s=2==s.length?s:"0"+s;var o=Number(e[2]).toString(16);o=2==o.length?o:"0"+o;var r=Number(e[3]);return r=Math.floor(255*Number(e[3])).toString(16),n+s+o+r},_colorTenToRGBA=function(t){var e=255&t,i=t>>8&255,n=t>>16&255,s=t>>24&255;return s=0==s||1==s?1-s:1,"rgba("+e+","+i+","+n+","+s+")"},_colorHexToRgba=function(t){var e,i,n,s;switch(t.length){case 7:e=parseInt(t.substr(1,2),16),i=parseInt(t.substr(3,2),16),n=parseInt(t.substr(5,2),16),s=1;break;case 9:e=parseInt(t.substr(1,2),16),i=parseInt(t.substr(3,2),16),n=parseInt(t.substr(5,2),16),s=parseInt(t.substr(7,2),16)/255}return"rgba("+e+","+i+","+n+","+s+")"},_transGeoByRelation=function(t,e){var i=!0;try{for(var n=[],s=0;s<e.length;s+=3)n.push([e[s],e[s+1],e[s+2]]);for(var o=flatArray(t),r=[],a=0;a<n.length;a++){var l=n[a][0]-1,h=n[a][1],u=n[a][2],c=0;switch(h){case 0:return null;case 1:switch(u){case 1:}break;case 2:switch(u){case 1:a<n.length-1&&(c=n[a+1][0]+1),r.push(getCoordsArr(o,l,c));break;case 2:a<n.length-1&&(c=n[a+1][0]+1);var p=getCoordsArr(o,l,c);3==p.length&&1==egis.MicroService.serviceInfo.curveLine&&(p=interpolateCoords(p[0],p[1],p[2])),r.push(p)}break;case 3:case 1003:case 2003:switch(u){case 1:break;case 2:break;case 3:break;case 4:break;default:return null}break;case 4:case 5:if(u==n.length-1){i=!1;continue}return null;default:return null}}}catch(t){console.error(t),i=!0}return i?t:resultCoords},Util={objectHandle:objectHandle,_drawnLayers:{},warn:_warn,eLineWidth:_eLineWidth,cleanUrl:_cleanUrl,mmToPixel:_mmToPixel,mmToPixelByLevel:_mmToPixelByLevel,EARTH_RADIUS_IN_METERS:6378137,DPI:96,METERS_PRE_INCH:.0254,distanceMeasure:_distanceMeasure,areaMeasures:_areaMeasure,angleMeasure:_angleMeasure,coorTransByAngle:_coordinateTransByAngle,cartesiancoorTransByAngle:_cartesiancoorTransByAngle,getParamString:_getParamsJSONString,isPointInEllipse:_isPointInEllipse,getExtentByPoints:_getExtentByPoints,_getPxBoundByPoints:_getPxBoundByPoints,_getPolygonByPoints:_getPolygonByPoints,convertMetersToDegrees:_convertMetersToDegrees,convertDegreeToMeters:_convertDegreeToMeters,convertExtentToScale:_convertExtentToScale,transGeoToPoint:_transGeoToPoint,mercatorToDegree:_mercatorToDegree,degreeToMercator:_degreeToMercator,convertCoordsByRelation:_transGeoByRelation,diyAnimate:_diyAnimate,fixColorToRGBA:_fixColorToRGBA,snap:_snap,getImageDataUri:getImageDataUri,loadImage:loadImage,projectWebMercatorToLngLat:_projectWebMercatorToLngLat,projectLngLatToWebMercator:_projectLngLatToWebMercator,calcTerminals:_calcTerminals,eleTreminals:_treminals,calcEleTerminals:_calcEleTerminals,flatArray:flatArray,Math:{rand:_rand},setTerminalConf:setTerminalData};module.exports=Util,module.exports.Util=Util},{"./Geometry/Geometry":57,"./Geometry/Point":61,"./Geometry/Polygon":62,"./leaflet":156,"babel-runtime/core-js/map":165,"babel-runtime/core-js/symbol":173,"babel-runtime/core-js/symbol/iterator":174}],155:[function(t,e,i){"use strict";for(var n=t("./Map"),s=t("./Render/GISCanvas"),o=t("./Renderer/SimpleRenderer"),r=t("./Renderer/UniqueValueRenderer"),a=t("./Renderer/ClassBreaksRenderer"),l=t("./Geometry/Geometry"),h=t("./Geometry/Point"),u=t("./Geometry/MultiPoint"),c=t("./Geometry/Polyline"),p=t("./Geometry/Polygon"),d=t("./Geometry/Extent"),y=t("./Geometry/Circle"),f=t("./Geometry/Ellipse"),_=t("./Geometry/Sector"),m=t("./Geometry/StraightArrow"),g=t("./Geometry/SquadCombat"),v=t("./Geometry/TailedSquadCombat"),b=t("./Geometry/DoubleArrow"),x=t("./Geometry/GatheringPlace"),L=t("./Geometry/GeometryUtil"),w=t("./Features/Graphic"),S=t("./Layers/Layer"),P=t("./Layers/GroupLayer"),T=t("./Layers/DynamicLayer"),C=t("./Editor/GridLayer"),M=t("./Layers/TileLayer"),k=t("./Layers/SGMapLayer"),E=t("./Layers/SGMapLayerV3"),D=t("./Layers/EGISTileLayer"),I=t("./Layers/EGISDynamicLayer"),B=t("./Layers/FeaturesLayer"),A=t("./Layers/FeatureFilterLayer"),G=t("./Layers/GraphicsLayer"),O=t("./Layers/FeatureLayer"),R=t("./Layers/VectorTileLayer"),U=t("./Layers/HeatLayer"),z=t("./Layers/AnimateLayer"),j=t("./Layers/FlowAnimateLayer"),F=t("./Layers/FlickerAnimateLayer"),N=t("./Layers/ImageryLayer"),H=t("./Layers/ClusterLayer"),Z=t("./Layers/EChartThemeLayer"),q=t("./Symbol/Symbol"),V=t("./Symbol/MarkerSymbol"),W=t("./Symbol/SimpleMarkerSymbol"),Y=t("./Symbol/SvgMarkerSymbol"),X=t("./Symbol/PictureMarkerSymbol"),J=t("./Symbol/TextSymbol"),K=t("./Symbol/PopupSymbol"),Q=t("./Symbol/LineSymbol"),$=t("./Symbol/SimpleLineSymbol"),tt=t("./Symbol/PictureFillSymbol"),et=t("./Symbol/FillSymbol"),it=t("./Symbol/SimpleFillSymbol"),nt=t("./Symbol/EleMarkerSymbol"),st=t("./Symbol/EleLineSymbol"),ot=t("./Symbol/EleFillSymbol"),rt=t("./CRS/CRSCustom"),at=t("./CRS/CRS"),lt=t("./Util"),ht=t("./Control/OverViewMap"),ut=(t("./Handler/BoxZoomInOrOut"),t("./Control/AttributionControl")),ct=t("./Control/MousePosition"),pt=t("./Control/ZoomSlider"),dt=t("./Control/PanControl"),yt=t("./Control/Zoom"),ft=t("./Control/Scale"),_t=t("./Control/DrawAndEdit"),mt=t("./Control/BoxZoom"),gt=t("./Control/MeasureControl"),vt=t("./Control/FrontAndBackView"),bt=t("./Control/Legend"),xt=t("./Control/Control"),Lt=t("./Control/ShareLocation"),wt=t("./Control/LayerSwitcher"),St=t("./Event/Evented"),Pt=t("./Event/DomEvent"),Tt=t("./Error/DeveloperError"),Ct=t("./Overlay/Popup"),Mt=t("./Overlay/Marker"),kt=t("./Overlay/Icon"),Et=t("./Overlay/DivIcon"),Dt=t("./Handler/DrawCircle"),It=t("./Handler/DrawPoint"),Bt=t("./Handler/DrawPolyline"),At=t("./Handler/DrawPolygon"),Gt=t("./Handler/DrawRectangle"),Ot=t("./Handler/DrawSquadCombat"),Rt=t("./Handler/DrawDoubleArrow"),Ut=t("./Handler/DrawTailedSquadCombat"),zt=t("./Handler/DrawGatheringPlace"),jt=t("./Handler/DrawHandPolygon"),Ft=t("./Handler/DrawHandPolyline"),Nt=(t("./Handler/EditPoint"),t("./Handler/EditCircle"),t("./Handler/EditPolyline"),t("./Handler/EditPolygon"),t("./Handler/EditRectangle"),t("./Handler/Edit")),Ht=t("./Handler/Draw"),Zt=t("./Handler/Select"),qt=t("./Handler/SelectRenderedFeature"),Vt=t("./Editor/GridSnapAgent"),Wt=t("./Editor/DeviceSnapAgent"),Yt=t("./Editor/GridSnapEnum"),Xt=t("./Editor/FeatureSnapEnum"),Jt=t("./Editor/Editor"),Kt=t("./Editor/QueryParam"),Qt=t("./Editor/SpatialParam"),$t=t("./Editor/FeatureCache"),te=t("./Editor/Feature"),ee=t("./MicroService/MSManager").MSManager,ie=document.querySelectorAll("script"),ne="",se=0;se<ie.length;se++){var oe=ie[se].src,re=oe.search(/egis(.min)?(-)?[0-9|.]*.js/);if(re!==-1){ne=oe.substring(0,re);break}}window.egis=e.exports={MicroService:ee,baseUrl:ne,libPath:{symbolLib:"",symbolData:""},Map:n.Map,map:n.map,Evented:St,DomEvent:Pt,renderer:{GISCanvas:s.GISCanvas,SimpleRenderer:o.SimpleRenderer,simpleRenderer:o.simpleRenderer,UniqueValueRenderer:r.UniqueValueRenderer,uniqueValueRenderer:r.UniqueValueRenderer,ClassBreaksRenderer:a.ClassBreaksRenderer,classBreaksRenderer:a.classBreaksRenderer},layer:{Layer:S.Layer,TileLayer:M.TileLayer,tileLayer:M.tileLayer,GroupLayer:P.GroupLayer,groupLayer:P.groupLayer,DynamicLayer:T.DynamicLayer,SGLayer:k.SGLayer,sgMapLayer:k.sgLayer,SGLayerV3:E.SGLayer,sgMapLayerV3:E.sgLayer,EGISTileLayer:D.EGISTileLayer,egisTileLayer:D.egisTileLayer,EGISDynamicLayer:I.EGISDynamicLayer,egisDynamicLayer:I.egisDynamicLayer,GraphicsLayer:G.GraphicsLayer,graphicsLayer:G.graphicsLayer,VectorTileLayer:R.VectorTileLayer,vectorTileLayer:R.vectorTileLayer,FeatureLayer:O.FeatureLayer,featureLayer:O.featureLayer,FeaturesLayer:B.FeaturesLayer,featuresLayer:B.featuresLayer,FeatureFilterLayer:A.FeatureFilterLayer,featureFilterLayer:A.featureFilterLayer,gridLayer:C.gridLayer,GridLayer:C.GridLayer,HeatLayer:U.HeatLayer,heatLayer:U.heatLayer,EChartThemeLayer:Z.EChartThemeLayer,eChartThemeLayer:Z.eChartThemeLayer,AnimateLayer:z.AnimateLayer,animateLayer:z.animateLayer,FlowAnimateLayer:j.FlowAnimateLayer,flowAnimateLayer:j.flowAnimateLayer,ImageryLayer:N.ImageryLayer,imageryLayer:N.imageryLayer,FlickerAnimateLayer:F.FlickerAnimateLayer,flickerAnimateLayer:F.flickerAnimateLayer,ClusterLayer:H.ClusterLayer,clusterLayer:H.clusterLayer},geometry:{Geometry:l.Geometry,MapPoint:h.MapPoint,Point:h.MapPoint,point:h.point,MultiPoint:u.MultiPoint,multiPoint:u.multiPoint,Polyline:c.Polyline,polyline:c.polyline,Polygon:p.Polygon,polygon:p.polygon,Extent:d.Extent,extent:d.extent,Circle:y.Circle,circle:y.circle,Ellipse:f.Ellipse,ellipse:f.ellipse,Sector:_.Sector,sector:_.sector,StraightArrow:m.StraightArrow,straightArrow:m.straightArrow,SquadCombat:g.SquadCombat,squadCombat:g.squadCombat,TailedSquadCombat:v.TailedSquadCombat,tailedSquadCombat:v.tailedSquadCombat,DoubleArrow:b.DoubleArrow,doubleArrow:b.doubleArrow,GatheringPlace:x.GatheringPlace,gatheringPlace:x.gatheringPlace,GeometryUtilObj:L.GeometryUtil},symbol:{Symbol:q.Symbol,LineSymbol:Q.LineSymbol,MarkerSymbol:V.MarkerSymbol,FillSymbol:et.FillSymbol,SimpleMarkerSymbol:W.SimpleMarkerSymbol,simpleMarkerSymbol:W.simpleMarkerSymbol,SvgMarkerSymbol:Y.SvgMarkerSymbol,svgMarkerSymbol:Y.svgMarkerSymbol,PictureMarkerSymbol:X.PictureMarkerSymbol,pictureMarkerSymbol:X.pictureMarkerSymbol,TextSymbol:J.TextSymbol,textSymbol:J.textSymbol,PopupSymbol:K.PopupSymbol,popupSymbol:K.popupSymbol,PictureFillSymbol:tt.PictureFillSymbol,pictureFillSymbol:tt.pictureFillSymbol,SimpleLineSymbol:$.SimpleLineSymbol,simpleLineSymbol:$.simpleLineSymbol,SimpleFillSymbol:it.SimpleFillSymbol,simpleFillSymbol:it.simpleFillSymbol,EleMarkerSymbol:nt.EleMarkerSymbol,eleMarkerSymbol:nt.eleMarkerSymbol,EleLineSymbol:st.EleLineSymbol,eleLineSymbol:st.eleLineSymbol,EleFillSymbol:ot.EleFillSymbol,eleFillSymbol:ot.eleFillSymbol},Graphic:w.Graphic,graphic:w.graphic,overlay:{Popup:Ct.Popup,popup:Ct.popup,Marker:Mt.Marker,marker:Mt.marker,Icon:kt.Icon,icon:kt.icon,DivIcon:Et.DivIcon,divIcon:Et.divIcon},Popup:Ct.Popup,popup:Ct.popup,CRSCustom:rt.CRSCustom,crsCustom:rt.crsCustom,CRS:at.CRS,crs:at.crs,tool:{Util:lt.Util},control:{AttributionControl:ut.AttributionControl,OverViewMap:ht.OverViewMap,MousePosition:ct.MousePosition,ZoomSlider:pt.ZoomSlider,PanControl:dt.PanControl,Zoom:yt.Zoom,Scale:ft.Scale,Control:xt.Control,LayerSwitcher:wt.LayerSwitcher,ShareLocation:Lt.ShareLocation,DrawAndEdit:_t.DrawAndEdit,BoxZoom:mt.BoxZoom,Legend:bt.Legend,legend:bt.legend,FrontAndBackView:vt.FrontAndBackView,MeasureControl:gt.MeasureControl},error:{DeveloperError:Tt.DeveloperError},editing:{DeviceSnapAgent:Wt.DeviceSnapAgent,GridSnapAgent:Vt.GridSnapAgent,Editor:Jt.Editor,FeatureSnapEnum:Xt.FeatureSnapEnum,GridSnapEnum:Yt.GridSnapEnum,QueryParam:Kt.QueryParam,SpatialParam:Qt.SpatialParam,FeatureCache:$t.FeatureCache,Feature:te.Feature},handler:{DrawCircle:Dt.DrawCircle,drawCircle:Dt.drawCircle,DrawPoint:It.DrawPoint,drawPoint:It.drawPoint,DrawPolyline:Bt.DrawPolyline,drawPolyline:Bt.drawPolyline,DrawPolygon:At.DrawPolygon,drawPolygon:At.drawPolygon,DrawRectangle:Gt.DrawRectangle,drawRectangle:Gt.drawRectangle,DrawSquadCombat:Ot.DrawSquadCombat,drawSquadCombat:Ot.drawSquadCombat,DrawDoubleArrow:Rt.DrawDoubleArrow,drawDoubleArrow:Rt.drawDoubleArrow,DrawTailedSquadCombat:Ut.DrawTailedSquadCombat,drawTailedSquadCombat:Ut.drawTailedSquadCombat,DrawGatheringPlace:zt.DrawGatheringPlace,drawGatheringPlace:zt.drawGatheringPlace,DrawHandPolygon:jt.DrawHandPolygon,drawHandPolygon:jt.drawHandPolygon,DrawHandPolyline:Ft.DrawHandPolyline,drawHandPolyline:Ft.drawHandPolyline,Draw:Ht.Draw,draw:Ht.draw,Edit:Nt.Edit,edit:Nt.edit,Select:Zt.Select,select:Zt.select,SelectRenderedFeature:qt.SelectRenderedFeature,selectRenderedFeature:qt.selectRenderedFeature}}},{"./CRS/CRS":1,"./CRS/CRSCustom":2,"./Control/AttributionControl":5,"./Control/BoxZoom":6,"./Control/Control":7,"./Control/DrawAndEdit":8,"./Control/FrontAndBackView":9,"./Control/LayerSwitcher":10,"./Control/Legend":11,"./Control/MeasureControl":12,"./Control/MousePosition":13,"./Control/OverViewMap":14,"./Control/PanControl":15,"./Control/Scale":16,"./Control/ShareLocation":17,"./Control/Zoom":18,"./Control/ZoomSlider":19,"./Editor/DeviceSnapAgent":21,"./Editor/Editor":22,"./Editor/Feature":23,"./Editor/FeatureCache":24,"./Editor/FeatureSnapEnum":25,"./Editor/GridLayer":26,"./Editor/GridSnapAgent":27,"./Editor/GridSnapEnum":28,"./Editor/QueryParam":29,"./Editor/SpatialParam":31,"./Error/DeveloperError":33,"./Event/DomEvent":34,"./Event/Evented":35,"./Features/Graphic":36,"./Geometry/Circle":51,"./Geometry/DoubleArrow":52,"./Geometry/Ellipse":53,"./Geometry/Extent":54,"./Geometry/GatheringPlace":55,"./Geometry/Geometry":57,"./Geometry/GeometryUtil":58,"./Geometry/MultiPoint":59,"./Geometry/Point":61,"./Geometry/Polygon":62,"./Geometry/Polyline":63,"./Geometry/Sector":64,"./Geometry/SquadCombat":65,"./Geometry/StraightArrow":66,"./Geometry/TailedSquadCombat":67,"./Handler/BoxZoomInOrOut":69,"./Handler/Draw":70,"./Handler/DrawCircle":71,"./Handler/DrawDoubleArrow":72,"./Handler/DrawGatheringPlace":73,"./Handler/DrawHandPolygon":74,"./Handler/DrawHandPolyline":75,"./Handler/DrawPoint":76,"./Handler/DrawPolygon":77,"./Handler/DrawPolyline":78,"./Handler/DrawRectangle":79,"./Handler/DrawSquadCombat":81,"./Handler/DrawTailedSquadCombat":82,"./Handler/Edit":83,"./Handler/EditCircle":84,"./Handler/EditPoint":85,"./Handler/EditPolygon":86,"./Handler/EditPolyline":87,"./Handler/EditRectangle":88,"./Handler/Select":90,"./Handler/SelectRenderedFeature":91,"./Layers/AnimateLayer":92,"./Layers/ClusterLayer":93,"./Layers/DynamicLayer":94,"./Layers/EChartThemeLayer":95,"./Layers/EGISDynamicLayer":96,"./Layers/EGISTileLayer":97,"./Layers/FeatureFilterLayer":98,"./Layers/FeatureLayer":99,"./Layers/FeaturesLayer":100,"./Layers/FlickerAnimateLayer":101,"./Layers/FlowAnimateLayer":102,"./Layers/GraphicsLayer":103,"./Layers/GroupLayer":104,"./Layers/HeatLayer":105,"./Layers/ImageryLayer":106,"./Layers/Layer":107,"./Layers/SGMapLayer":108,"./Layers/SGMapLayerV3":109,"./Layers/TileLayer":114,"./Layers/VectorTileLayer":115,"./Map":116,"./MicroService/MSManager":118,"./Overlay/DivIcon":124,"./Overlay/Icon":125,"./Overlay/Marker":126,"./Overlay/Popup":127,"./Render/GISCanvas":128,"./Renderer/ClassBreaksRenderer":130,"./Renderer/SimpleRenderer":132,"./Renderer/UniqueValueRenderer":133,"./Symbol/EleFillSymbol":135,"./Symbol/EleLineSymbol":136,"./Symbol/EleMarkerSymbol":137,"./Symbol/FillSymbol":139,"./Symbol/LineSymbol":140,"./Symbol/MarkerSymbol":141,"./Symbol/PictureFillSymbol":142,"./Symbol/PictureMarkerSymbol":143,"./Symbol/PopupSymbol":144,"./Symbol/SimpleFillSymbol":145,"./Symbol/SimpleLineSymbol":146,"./Symbol/SimpleMarkerSymbol":147,"./Symbol/SvgMarkerSymbol":148,"./Symbol/Symbol":149,"./Symbol/TextSymbol":150,"./Util":154}],156:[function(t,e,i){"use strict";e.exports=window.E=window.L=t("leaflet/dist/egis-src")},{"leaflet/dist/egis-src":302}],157:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=t("babel-runtime/core-js/get-iterator"),o=n(s),r=t("babel-runtime/core-js/map"),a=n(r),l=L.Class.extend({options:{maxlevel:3,nodes:[],geos:[],geoNodes:new a.default,treeNodes:new a.default,hasNodes:!1,rootExtent:{xmin:0,ymin:0,xmax:0,ymax:0},target:void 0},initialize:function(t){L.Util.setOptions(this,t),this.nodes=this.options.nodes,this.hasNodes=this.options.hasNodes,this.maxlevel=this.options.maxlevel,this.rootExtent=this.options.rootExtent,this.geoNodes=this.options.geoNodes,this.treeNodes=new a.default,this.geos=this.options.geos,this.geoscache=[],this.insertEv={},this.queryEv={},this._map=this.options.target,this.createQuadTree()},refreshindex:function(t){this.nodes=[],this.hasNodes=!1,this.maxlevel=3,this.rootExtent=t,this.geoNodes=new a.default,this.treeNodes=new a.default,this.geos=this.geoscache,this.geoscache=[],this.insertEv={},this.queryEv={},this.createQuadTree()},getNodes:function(t){var e=[],i=!0,n=!1,s=void 0;try{for(var r,a=(0,o.default)(this.treeNodes);!(i=(r=a.next()).done);i=!0){var l=r.value,h=l[1].extent;Math.max(t.xmax,t.xmin)<=h.xmin||Math.max(t.ymax,t.ymin)<=h.ymin||Math.min(t.xmin,t.xmax)>=h.xmax||Math.min(t.ymax,t.ymin)>=h.ymax||(e=e.concat(l[1].psrids))}}catch(t){n=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}return e},getLyrCache:function(t,e,i){var n=new a.default;if(t&&t.length>0)for(var s=0;s<t.length;s++){var r=i.layerRelationship.get(t[s]),l=e.get(r);if(l){var h=!0,u=!1,c=void 0;try{for(var p,d=(0,o.default)(l);!(h=(p=d.next()).done);h=!0){var y=p.value,f=y[1].getAttribute().subtype+"",_=t[s]+"";(f.length>_.length||f==_)&&n.set(y[0],y[1])}}catch(t){u=!0,c=t}finally{try{!h&&d.return&&d.return()}finally{if(u)throw c}}}}else{var m=!0,g=!1,v=void 0;try{for(var b,x=(0,o.default)(e);!(m=(b=x.next()).done);m=!0){var L=b.value,w=L[1],S=!0,P=!1,T=void 0;try{for(var C,M=(0,o.default)(w);!(S=(C=M.next()).done);S=!0){var y=C.value;L[0],n.set(y[0],y[1])}}catch(t){P=!0,T=t}finally{try{!S&&M.return&&M.return()}finally{if(P)throw T}}}}catch(t){g=!0,v=t}finally{try{!m&&x.return&&x.return()}finally{if(g)throw v}}}return n},createQuadTree:function(){for(this.nn=0,this.insertEv.treeKey=0,this.treeNodes.clear();this.geos.length>0;){var t=!1,e=!1,i=!1,n=!1;if(0==!this.insertEv.treeKey){var s=this.treeNodes.get(0);s.ne&&(t=!0),s.se&&(e=!0),s.nw&&(i=!0),s.sw&&(n=!0)}this.setInsertEv(this.rootExtent,0,0,0,t,e,i,n),this.insertNode(this.geos[0]),this.geoscache.push(this.geos[0]),this.geos.splice(0,1),s=null,t=null,e=null,i=null,n=null}},insertSingleNode:function(t){var e=!1,i=!1,n=!1,s=!1;if(this.treeNodes.get(0)){var o=this.treeNodes.get(0);o.ne&&(e=!0),o.se&&(i=!0),o.nw&&(n=!0),o.sw&&(s=!0)}this.setInsertEv(this.rootExtent,0,0,0,e,i,n,s),this.insertNode(t)},delSingleNode:function(t){var e=!0,i=!1,n=void 0;try{for(var s,r=(0,o.default)(this.treeNodes);!(e=(s=r.next()).done);e=!0)for(var a=s.value,l=a[1].psrids.length-1;l>-1;l--)a[1].psrids[l]==t.psrid&&a[1].psrids.splice(l,1)}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}},refreshSingleNode:function(t){this.delSingleNode(t),this.insertSingleNode(t)},clear:function(){},setInsertEv:function(t,e,i,n,s,o,r,a){this.insertEv.extent=t,this.insertEv.lvl=e,this.insertEv.nodekey=i,this.insertEv.parentKey=n,this.insertEv.hasNW=r,this.insertEv.hasNE=s,this.insertEv.hasSW=a,this.insertEv.hasSE=o},insertNode:function(t){var e=this.insertEv.extent,i=(e.xmin+e.xmax)/2,n=(e.ymin+e.ymax)/2,s=3;switch(t.geotype){case 0:s=4;break;case 1:s=4;break;case 2:s=3}if(t.MBR.xmin<i&&t.MBR.xmax>i||t.MBR.ymax>n&&t.MBR.ymin<n)this.treeNodes.has(this.insertEv.nodekey)?this.treeNodes.get(this.insertEv.nodekey).psrids.push(t.psrid):(this.treeNodes.set(this.insertEv.nodekey,{extent:this.insertEv.extent,psrids:[t.psrid],parentKey:this.insertEv.parentKey}),this.nn++);else if(this.insertEv.lvl>=s)this.treeNodes.has(this.insertEv.nodekey)?this.treeNodes.get(this.insertEv.nodekey).psrids.push(t.psrid):(this.treeNodes.set(this.insertEv.nodekey,{extent:this.insertEv.extent,psrids:[t.psrid],parentKey:this.insertEv.parentKey}),this.nn++);else if(t.MBR.xmin>i&&t.MBR.ymin>n){var o,r=this.insertEv.lvl+1,a="",l=!1,h=!1,u=!1,c=!1;if(this.treeNodes.has(this.insertEv.nodekey))if(this.insertEv.hasNE){var p=this.treeNodes.get(this.treeNodes.get(this.insertEv.nodekey).ne);o=p.extent,a=this.treeNodes.get(this.insertEv.nodekey).ne,p.ne&&(l=!0),p.se&&(h=!0),p.nw&&(c=!0),p.sw&&(u=!0),p=null}else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:(e.xmin+e.xmax)/2,ymin:(e.ymin+e.ymax)/2,xmax:e.xmax,ymax:e.ymax},this.treeNodes.get(this.insertEv.nodekey).ne=this.insertEv.treeKey;else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:(e.xmin+e.xmax)/2,ymin:(e.ymin+e.ymax)/2,xmax:e.xmax,ymax:e.ymax},this.treeNodes.set(this.insertEv.nodekey,{
extent:this.insertEv.extent,psrids:[],ne:this.insertEv.treeKey,parentKey:this.insertEv.parentKey}),this.nn++;this.setInsertEv(o,r,a,this.insertEv.nodekey,l,h,c,u),r=null,a=null,o=null,l=null,h=null,u=null,c=null,this.insertNode(t)}else if(t.MBR.xmin>i&&t.MBR.ymax<n){var o,r=this.insertEv.lvl+1,a="",l=!1,h=!1,u=!1,c=!1;if(this.treeNodes.has(this.insertEv.nodekey))if(this.insertEv.hasSE){var p=this.treeNodes.get(this.treeNodes.get(this.insertEv.nodekey).se);o=p.extent,a=this.treeNodes.get(this.insertEv.nodekey).se,p.ne&&(l=!0),p.se&&(h=!0),p.nw&&(c=!0),p.sw&&(u=!0),p=null}else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:(e.xmin+e.xmax)/2,ymin:e.ymin,xmax:e.xmax,ymax:(e.ymin+e.ymax)/2},this.treeNodes.get(this.insertEv.nodekey).se=this.insertEv.treeKey;else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:(e.xmin+e.xmax)/2,ymin:e.ymin,xmax:e.xmax,ymax:(e.ymin+e.ymax)/2},this.treeNodes.set(this.insertEv.nodekey,{extent:this.insertEv.extent,psrids:[],se:this.insertEv.treeKey,parentKey:this.insertEv.parentKey}),this.nn++;this.setInsertEv(o,r,a,this.insertEv.nodekey,l,h,c,u),r=null,a=null,o=null,l=null,h=null,u=null,c=null,this.insertNode(t)}else if(t.MBR.xmax<i&&t.MBR.ymin>n){var o,r=this.insertEv.lvl+1,a="",l=!1,h=!1,u=!1,c=!1;if(this.treeNodes.has(this.insertEv.nodekey))if(this.insertEv.hasNW){var p=this.treeNodes.get(this.treeNodes.get(this.insertEv.nodekey).nw);o=p.extent,a=this.treeNodes.get(this.insertEv.nodekey).nw,p.ne&&(l=!0),p.se&&(h=!0),p.nw&&(c=!0),p.sw&&(u=!0),p=null}else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:e.xmin,ymin:(e.ymin+e.ymax)/2,xmax:(e.xmin+e.xmax)/2,ymax:e.ymax},this.treeNodes.get(this.insertEv.nodekey).nw=this.insertEv.treeKey;else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:e.xmin,ymin:(e.ymin+e.ymax)/2,xmax:(e.xmin+e.xmax)/2,ymax:e.ymax},this.treeNodes.set(this.insertEv.nodekey,{extent:this.insertEv.extent,psrids:[],nw:this.insertEv.treeKey,parentKey:this.insertEv.parentKey}),this.nn++;this.setInsertEv(o,r,a,this.insertEv.nodekey,l,h,c,u),r=null,a=null,o=null,l=null,h=null,u=null,c=null,this.insertNode(t)}else if(t.MBR.xmax<i&&t.MBR.ymax<n){var o,r=this.insertEv.lvl+1,a="",l=!1,h=!1,u=!1,c=!1;if(this.treeNodes.has(this.insertEv.nodekey))if(this.insertEv.hasSW){var p=this.treeNodes.get(this.treeNodes.get(this.insertEv.nodekey).sw);o=p.extent,a=this.treeNodes.get(this.insertEv.nodekey).sw,p.ne&&(l=!0),p.se&&(h=!0),p.nw&&(c=!0),p.sw&&(u=!0),p=null}else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:e.xmin,ymin:e.ymin,xmax:(e.xmin+e.xmax)/2,ymax:(e.ymin+e.ymax)/2},this.treeNodes.get(this.insertEv.nodekey).sw=this.insertEv.treeKey;else this.insertEv.treeKey++,a=this.insertEv.treeKey,o={xmin:e.xmin,ymin:e.ymin,xmax:(e.xmin+e.xmax)/2,ymax:(e.ymin+e.ymax)/2},this.treeNodes.set(this.insertEv.nodekey,{extent:this.insertEv.extent,psrids:[],sw:this.insertEv.treeKey,parentKey:this.insertEv.parentKey}),this.nn++;this.setInsertEv(o,r,a,this.insertEv.nodekey,l,h,c,u),r=null,a=null,o=null,l=null,h=null,u=null,c=null,this.insertNode(t)}e=null,i=null,n=null,t=null,s=null},splitQuadtree:function(t){t.xmin,t.ymin,t.ymax,t.xmin,t.xmax,t.ymax,t.xmin,t.xmax,t.ymin,t.ymax,t.xmax,t.ymax,t.xmin,t.ymin,t.xmin,t.xmax,t.ymin,t.ymax,t.xmin,t.xmax,t.ymin,t.xmax,t.ymin,t.ymax}});e.exports.QuadTreeNode=l,e.exports.quadTreeNode=function(t){return new l(t)}},{"babel-runtime/core-js/get-iterator":162,"babel-runtime/core-js/map":165}],158:[function(t,e,i){"use strict";var n=t("./Worker").Worker,s=n.extend({options:{type:void 0,workerName:"timerworker"},initialize:function(t){this.getWorkerJS(),n.prototype.initialize.call(this,this.options)},getWorkerJS:function(){this.options.jscontent='onmessage = function(e){\n    sleep(e.data.delay);\n    postMessage("1");\n}\nfunction sleep(delay) {\n    var start = (new Date()).getTime();\n    while ((new Date()).getTime() - start < delay) {\n        continue;\n    }\n}'}});e.exports.TimerWorker=s,e.exports.timerWorker=function(t){return new s(t)}},{"./Worker":160}],159:[function(t,e,i){"use strict";var n=t("./Worker").Worker,s=n.extend({options:{type:void 0,workerName:"vectorworker"},initialize:function(t){this.getWorkerJS(),n.prototype.initialize.call(this,this.options)},getWorkerJS:function(){this.options.jscontent="onmessage = function (e) {\n    var isCampatibility = false\n    if(!Uint8Array.prototype.slice){\n       Uint8Array.prototype.slice = Uint8Array.prototype.subarray\n       isCampatibility = true;\n    }\n    buffertmp = e.data.buffer;\n    if (!(buffertmp instanceof Uint8Array)) {\n        buffertmp = new Uint8Array(buffertmp)\n    }\n    var geoMap = decodebuffer();\n    buffertmp = null;\n   if(isCampatibility){\n      var keys = geoMap.keys()\n      var objData = {}\n      for (var key of keys) {\n        var devGroup = geoMap.get(key);\n        for(var i = 0;i < devGroup.length; i++){\n          var devKeys = devGroup[i].keys()\n          var devObj = {}\n          for(var devKey of devKeys){\n             devObj[devKey] = devGroup[i].get(devKey);\n          }\n          devGroup[i] = devObj\n        }\n        objData[key] = geoMap.get(key)\n       }\n       postMessage(objData)\n    }else{\n    postMessage(geoMap);\n    }\n    geoMap = null;\n}\n\nvar buffertmp, postmp = 0, bytelen = 0, charlen = 1, uintlen = 2, intlen = 4, floatlen = 4, dblen = 8, end = 0,\n    bufferstep = 0, labelcount = 0, labelinfocount = 0;\n\nfunction decodebuffer() {\n    var grasMap = new Map();\n    /*获取解释json字符串*/\n    var explainMap = new Map();\n    if (buffertmp.length < 1) return grasMap;\n    bytelen = intlen;\n    end = postmp + bytelen;\n    var explainlen = getInt32(postmp, end)\n    bytelen = explainlen;\n    explainlen = null;\n    postmp = end;\n    end = postmp + bytelen;\n    var explainstr = getStr(postmp, end);\n    var explain = JSON.parse(explainstr);\n    for (var n = 0; n < explain.length; n++) {\n        explainMap.set(explain[n].type, explain[n].attributes)\n    }\n    //Add By CaiQinhui\n    var explainMapTmp = explainMap.get(131406);\n    if (explainMapTmp) {\n        explainMapTmp[11] = {style: 1};\n        explainMapTmp[14] = {horizonalign: 1};\n        explainMapTmp[15] = {verticalalign: 1};\n    }\n\n    postmp = end;\n    \n    try {\n        for (bufferstep = 0; end < buffertmp.length; postmp = end, bufferstep++) {\n            var obj = new Map();\n            /*对象数值*/\n            bytelen = intlen;\n            end = postmp + bytelen;\n            if (end > buffertmp.length) {\n                continue\n            }\n            var objtype = 0;\n            try {\n                objtype = getInt32(postmp, end);\n            } catch (e) {\n            }\n\n            var objexplain = explainMap.get(objtype);//获取属性字段解释数据\n            if (!objexplain) {\n                continue;\n            }\n            obj.set('byteNodetype', objtype);\n            for (var n = 0; n < objexplain.length; n++) {\n                var filed = objexplain[n];\n                var filedtmp = {};\n                for (var f in filed) {\n                    filedtmp.name = f;\n                    filedtmp.type = filed[f];\n                }\n                switch (filedtmp.type) {\n                    case 0://char\n                        var charattr = 0;\n                        bytelen = charlen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        charattr = getInt8(postmp, end);\n                        obj.set(filedtmp.name, charattr)\n                        break;\n                    case 1://int\n                        var intattr = 0;\n                        bytelen = intlen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        intattr = getInt32(postmp, end);\n                        obj.set(filedtmp.name, intattr)\n                        break;\n                    case 2://uint\n                        var uintattr = 0;\n                        bytelen = uintlen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        uintattr = getUInt32(postmp, end);\n                        obj.set(filedtmp.name, uintattr)\n                        break;\n                    case 3://float\n                        var floatattr = 0.0;\n                        bytelen = floatlen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        floatattr = getFloat(postmp, end);\n                        obj.set(filedtmp.name, floatattr);\n                        break;\n                    case 4://double\n                        var doubleattr = 0.0;\n                        bytelen = dblen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        doubleattr = getDouble(postmp, end);\n                        obj.set(filedtmp.name, doubleattr);\n                        break;\n                    case 5://string\n                        var strattr = '';\n                        var strlen = 0;\n                        bytelen = intlen;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        strlen = getInt32(postmp, end);\n\n                        bytelen = strlen;\n                        strlen = null;\n                        postmp = end;\n                        end = postmp + bytelen;\n                        try {\n                            strattr = getStr(postmp, end);\n                        } catch (e) {\n                            strattr = '';\n                        }\n                        obj.set(filedtmp.name, strattr)\n                        if (obj.get('layerid') == '9000000' || obj.get('layerid') == '9100000') {\n                            if (filedtmp.name == 'versionid') {\n                                if (strattr.substr(0, 7) == obj.get('layerid')) {\n                                    end -= (intlen + bytelen);\n                                }\n                            }\n                        }\n                        break;\n                    case 6://date\n                        break;\n                    case 7://geometry\n                        obj.set(filedtmp.name, getGeom());\n                        break;\n                    case 8://bolb\n\n                        break;\n                    default:\n                        break;\n                }\n            }\n            var sbid = obj.get('oid');\n            obj.set('sbid', sbid)\n            obj.set('psrid', sbid)\n            obj.delete('graphyid');\n            if (obj.has('layerid') && (obj.get('byteNodetype') == 131404 || obj.get('byteNodetype') == 131405)) {\n                obj.set('layeridtmp', obj.get('layerid'))\n                obj.delete('layerid');\n                obj.set('layerid', obj.get('byteNodetype'))\n            }\n            try {\n                if (grasMap.has(obj.get('layerid'))) {\n                    grasMap.get(obj.get('layerid')).push(obj);\n                } else {\n                    grasMap.set(obj.get('layerid'), [obj]);\n                }\n            } catch (e) {\n                if (obj.get('byteNodetype') == '131405') {\n                    console.log(e);\n                }\n            }\n        }\n    } catch (e) {\n        console.warn('Vector Binary Data Parse Error')\n    }\n    return grasMap;\n}\n\nfunction getGeom() {\n    var geom = {};\n    /*m_pData长度 即坐标个数*2*sizeof(double) (int)*/\n    bytelen = intlen;\n    postmp = end;\n    end = postmp + bytelen;\n    var coorslenint = getInt32(postmp, end);\n    var path = [];\n    var pathtmp = [];\n    for (var step = 0; step < coorslenint / 16; step++) {\n        /*m_pData坐标值(double)*/\n        bytelen = dblen;\n        postmp = end;\n        end = postmp + bytelen;\n        var coorsXdb = getDouble(postmp, end);\n\n        /*m_pData坐标值(double)*/\n        bytelen = dblen;\n        postmp = end;\n        end = postmp + bytelen;\n        var coorsYdb = getDouble(postmp, end);\n        pathtmp.push(coorsXdb, coorsYdb);\n        coorsYdb = null, coorsXdb = null;\n    }\n\n    /* m_pInfo[5] geometry三元组存储长度当前三元组个数*sizeof(int)(int) */\n    bytelen = intlen;\n    postmp = end;\n    end = postmp + bytelen;\n    var geothreelength = getInt32(postmp, end);\n    var georelation = [];\n    var georel = [];\n    for (var intstep = 0; intstep < geothreelength / 4; intstep++) {\n        /*GEOMETRY(m_pInfo内容)(int)*/\n        bytelen = intlen;\n        postmp = end;\n        end = postmp + bytelen;\n        var geo = getInt32(postmp, end);\n        georelation.push(geo);\n        if (intstep % 3 == 0) {\n            georel.push(geo);\n        }\n        geo = null;\n    }\n    geothreelength = null;\n    geom.georelation = georelation;\n    georelation = null;\n    for (var n = 0, m = n + 1; n < georel.length; n++, m++) {\n        var start1 = georel[n] - 1;\n        var end1;\n        if (n == georel.length - 1) {\n            end1 = pathtmp.length;\n        } else {\n            end1 = georel[m] - 1;\n        }\n        var patharr = pathtmp.slice(start1, end1);\n        var pathtmp1 = [];\n        for (var i = 0, j = i + 1; i < patharr.length - 1; i = i + 2, j = i + 1) {\n            pathtmp1.push([patharr[i], patharr[j]])\n        }\n        path.push(pathtmp1);\n    }\n    postmp = end1;\n    coorslenint = null;\n    geom.coords = path;\n    path = null;\n    return geom;\n}\n\nfunction getFloat(postmp, end) {\n    var doublebyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var doublebyteDataView = new DataView(doublebyte.buffer);\n    var double = doublebyteDataView.getFloat32(0, true);\n    doublebyte = null, doublebyteDataView = null;\n    return double;\n}\n\nfunction getDouble(postmp, end) {\n    var doublebyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var doublebyteDataView = new DataView(doublebyte.buffer);\n    var double = doublebyteDataView.getFloat64(0, true);\n    doublebyte = null, doublebyteDataView = null;\n    return double;\n}\n\n\nfunction getUInt32(postmp, end) {\n    var intbyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var intbyteDataView = new DataView(intbyte.buffer);\n    var int = intbyteDataView.getUint32(0, true);\n    intbyte = null, intbyteDataView = null;\n    return int;\n}\n\nfunction getInt32(postmp, end) {\n    var intbyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var intbyteDataView = new DataView(intbyte.buffer);\n    var int = intbyteDataView.getInt32(0, true);\n    intbyte = null, intbyteDataView = null;\n    return int;\n}\n\nfunction getInt8(postmp, end) {\n    var intbyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var intbyteDataView = new DataView(intbyte.buffer);\n    var int = intbyteDataView.getUint8(0, true);\n    intbyte = null, intbyteDataView = null;\n    return int;\n}\n\nfunction getStr(postmp, end) {\n    var strbyte = new Uint8Array(buffertmp.slice(postmp, end));\n    var str = byteToString(strbyte);\n    strbyte = null;\n    return str;\n}\n\nfunction byteToString(arr) {\n    if (typeof arr === 'string') {\n        return arr;\n    }\n    var str = '',\n        _arr = arr;\n    for (var i = 0; i < _arr.length; i++) {\n        var one = _arr[i].toString(2),\n            v = one.match(/^1+?(?=0)/);\n        if (v && one.length == 8) {\n            var bytesLength = v[0].length;\n            var store = _arr[i].toString(2).slice(7 - bytesLength);\n            for (var st = 1; st < bytesLength; st++) {\n                if (!_arr[st + i]) {\n\n                }\n                store += _arr[st + i].toString(2).slice(2);\n            }\n            str += String.fromCharCode(parseInt(store, 2));\n            i += bytesLength - 1;\n        } else {\n            str += String.fromCharCode(_arr[i]);\n        }\n    }\n    return str;\n}"}});e.exports.VectorWorker=s,e.exports.vectorWorker=function(t){return new s(t)}},{"./Worker":160}],160:[function(t,e,i){"use strict";var n=L.Class.extend({includes:L.Mixin.Events,options:{type:void 0,workerName:"worker"},initialize:function(t){L.Util.setOptions(this,t),this.createWorkerBolb()},createWorkerBolb:function(){var t=this;this.worker_blob=new Blob([this.options.jscontent]),this.worker=new window.Worker(window.URL.createObjectURL(this.worker_blob)),this.worker.onmessage=function(e){t.fire("workerMsg",{data:e.data}),delete e.data}},sendMessge:function(t){this.worker.postMessage(t)},clear:function(){this.worker.terminate(),this.worker_blob=null,this.worker=null,this.options.jscontent=null,delete this.options},getWorkerJS:function(){}});e.exports.Worker=n,e.exports.worker=function(t){return new n(t)}},{}],161:[function(t,e,i){e.exports={default:t("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":176}],162:[function(t,e,i){e.exports={default:t("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":177}],163:[function(t,e,i){e.exports={default:t("core-js/library/fn/is-iterable"),__esModule:!0}},{"core-js/library/fn/is-iterable":178}],164:[function(t,e,i){e.exports={default:t("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":179}],165:[function(t,e,i){e.exports={default:t("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":180}],166:[function(t,e,i){e.exports={default:t("core-js/library/fn/math/sinh"),__esModule:!0}},{"core-js/library/fn/math/sinh":181}],167:[function(t,e,i){e.exports={default:t("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":182}],168:[function(t,e,i){e.exports={default:t("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":183}],169:[function(t,e,i){e.exports={default:t("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":184}],170:[function(t,e,i){e.exports={default:t("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":185}],171:[function(t,e,i){e.exports={default:t("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":186}],172:[function(t,e,i){e.exports={default:t("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":187}],173:[function(t,e,i){e.exports={default:t("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":188}],174:[function(t,e,i){e.exports={default:t("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":189}],175:[function(t,e,i){e.exports=t("regenerator-runtime")},{"regenerator-runtime":304}],176:[function(t,e,i){t("../../modules/es6.string.iterator"),t("../../modules/es6.array.from"),e.exports=t("../../modules/_core").Array.from},{"../../modules/_core":204,"../../modules/es6.array.from":278,"../../modules/es6.string.iterator":289}],177:[function(t,e,i){t("../modules/web.dom.iterable"),t("../modules/es6.string.iterator"),e.exports=t("../modules/core.get-iterator")},{"../modules/core.get-iterator":276,"../modules/es6.string.iterator":289,"../modules/web.dom.iterable":298}],178:[function(t,e,i){t("../modules/web.dom.iterable"),t("../modules/es6.string.iterator"),e.exports=t("../modules/core.is-iterable")},{"../modules/core.is-iterable":277,"../modules/es6.string.iterator":289,"../modules/web.dom.iterable":298}],179:[function(t,e,i){var n=t("../../modules/_core"),s=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(t){return s.stringify.apply(s,arguments)}},{"../../modules/_core":204}],180:[function(t,e,i){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.map"),t("../modules/es7.map.to-json"),t("../modules/es7.map.of"),t("../modules/es7.map.from"),e.exports=t("../modules/_core").Map},{"../modules/_core":204,"../modules/es6.map":280,"../modules/es6.object.to-string":287,"../modules/es6.string.iterator":289,"../modules/es7.map.from":291,"../modules/es7.map.of":292,"../modules/es7.map.to-json":293,"../modules/web.dom.iterable":298}],181:[function(t,e,i){t("../../modules/es6.math.sinh"),e.exports=t("../../modules/_core").Math.sinh},{"../../modules/_core":204,"../../modules/es6.math.sinh":281}],182:[function(t,e,i){t("../../modules/es6.object.create");var n=t("../../modules/_core").Object;e.exports=function(t,e){return n.create(t,e)}},{"../../modules/_core":204,"../../modules/es6.object.create":282}],183:[function(t,e,i){t("../../modules/es6.object.define-property");var n=t("../../modules/_core").Object;e.exports=function(t,e,i){return n.defineProperty(t,e,i)}},{"../../modules/_core":204,"../../modules/es6.object.define-property":283}],184:[function(t,e,i){t("../../modules/es6.object.get-prototype-of"),e.exports=t("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":204,"../../modules/es6.object.get-prototype-of":284}],185:[function(t,e,i){t("../../modules/es6.object.keys"),e.exports=t("../../modules/_core").Object.keys},{"../../modules/_core":204,"../../modules/es6.object.keys":285}],186:[function(t,e,i){t("../../modules/es6.object.set-prototype-of"),e.exports=t("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":204,"../../modules/es6.object.set-prototype-of":286}],187:[function(t,e,i){t("../modules/es6.object.to-string"),t("../modules/es6.string.iterator"),t("../modules/web.dom.iterable"),t("../modules/es6.promise"),t("../modules/es7.promise.finally"),t("../modules/es7.promise.try"),e.exports=t("../modules/_core").Promise},{"../modules/_core":204,"../modules/es6.object.to-string":287,"../modules/es6.promise":288,"../modules/es6.string.iterator":289,"../modules/es7.promise.finally":294,"../modules/es7.promise.try":295,"../modules/web.dom.iterable":298}],188:[function(t,e,i){t("../../modules/es6.symbol"),t("../../modules/es6.object.to-string"),t("../../modules/es7.symbol.async-iterator"),t("../../modules/es7.symbol.observable"),e.exports=t("../../modules/_core").Symbol},{"../../modules/_core":204,"../../modules/es6.object.to-string":287,"../../modules/es6.symbol":290,"../../modules/es7.symbol.async-iterator":296,"../../modules/es7.symbol.observable":297}],189:[function(t,e,i){t("../../modules/es6.string.iterator"),t("../../modules/web.dom.iterable"),e.exports=t("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":273,"../../modules/es6.string.iterator":289,"../../modules/web.dom.iterable":298}],190:[function(t,e,i){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],191:[function(t,e,i){e.exports=function(){}},{}],192:[function(t,e,i){e.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},{}],193:[function(t,e,i){var n=t("./_is-object");e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":224}],194:[function(t,e,i){var n=t("./_for-of");e.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},{"./_for-of":214}],195:[function(t,e,i){var n=t("./_to-iobject"),s=t("./_to-length"),o=t("./_to-absolute-index");e.exports=function(t){return function(e,i,r){var a,l=n(e),h=s(l.length),u=o(r,h);if(t&&i!=i){for(;h>u;)if((a=l[u++])!=a)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},{"./_to-absolute-index":263,"./_to-iobject":265,"./_to-length":266}],196:[function(t,e,i){var n=t("./_ctx"),s=t("./_iobject"),o=t("./_to-object"),r=t("./_to-length"),a=t("./_array-species-create");e.exports=function(t,e){var i=1==t,l=2==t,h=3==t,u=4==t,c=6==t,p=5==t||c,d=e||a;return function(e,a,y){for(var f,_,m=o(e),g=s(m),v=n(a,y,3),b=r(g.length),x=0,L=i?d(e,b):l?d(e,0):void 0;b>x;x++)if((p||x in g)&&(f=g[x],_=v(f,x,m),t))if(i)L[x]=_;else if(_)switch(t){case 3:return!0;case 5:return f;case 6:return x;case 2:L.push(f)}else if(u)return!1;return c?-1:h||u?u:L}}},{"./_array-species-create":198,"./_ctx":206,"./_iobject":221,"./_to-length":266,"./_to-object":267}],197:[function(t,e,i){var n=t("./_is-object"),s=t("./_is-array"),o=t("./_wks")("species");e.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},{"./_is-array":223,"./_is-object":224,"./_wks":274}],198:[function(t,e,i){var n=t("./_array-species-constructor");e.exports=function(t,e){return new(n(t))(e)}},{"./_array-species-constructor":197}],199:[function(t,e,i){var n=t("./_cof"),s=t("./_wks")("toStringTag"),o="Arguments"==n(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(t){}};e.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=r(e=Object(t),s))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},{"./_cof":200,"./_wks":274}],200:[function(t,e,i){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],201:[function(t,e,i){"use strict";var n=t("./_object-dp").f,s=t("./_object-create"),o=t("./_redefine-all"),r=t("./_ctx"),a=t("./_an-instance"),l=t("./_for-of"),h=t("./_iter-define"),u=t("./_iter-step"),c=t("./_set-species"),p=t("./_descriptors"),d=t("./_meta").fastKey,y=t("./_validate-collection"),f=p?"_s":"size",_=function(t,e){var i,n=d(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};e.exports={getConstructor:function(t,e,i,h){var u=t(function(t,n){a(t,u,e,"_i"),t._t=e,t._i=s(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=n&&l(n,i,t[h],t)});return o(u.prototype,{clear:function(){for(var t=y(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=y(this,e),n=_(i,t);if(n){var s=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=s),s&&(s.p=o),i._f==n&&(i._f=s),i._l==n&&(i._l=o),i[f]--}return!!n},forEach:function(t){y(this,e);for(var i,n=r(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!_(y(this,e),t)}}),p&&n(u.prototype,"size",{get:function(){return y(this,e)[f]}}),u},def:function(t,e,i){var n,s,o=_(t,e);return o?o.v=i:(t._l=o={i:s=d(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[f]++,"F"!==s&&(t._i[s]=o)),t},getEntry:_,setStrong:function(t,e,i){h(t,e,function(t,i){this._t=y(t,e),this._k=i,this._l=void 0},function(){for(var t=this,e=t._k,i=t._l;i&&i.r;)i=i.p;return t._t&&(t._l=i=i?i.n:t._t._f)?"keys"==e?u(0,i.k):"values"==e?u(0,i.v):u(0,[i.k,i.v]):(t._t=void 0,u(1))},i?"entries":"values",!i,!0),c(e)}}},{"./_an-instance":192,"./_ctx":206,"./_descriptors":208,"./_for-of":214,"./_iter-define":227,"./_iter-step":229,"./_meta":233,"./_object-create":236,"./_object-dp":237,"./_redefine-all":251,"./_set-species":256,"./_validate-collection":271}],202:[function(t,e,i){var n=t("./_classof"),s=t("./_array-from-iterable");e.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return s(this)}}},{"./_array-from-iterable":194,"./_classof":199}],203:[function(t,e,i){"use strict";var n=t("./_global"),s=t("./_export"),o=t("./_meta"),r=t("./_fails"),a=t("./_hide"),l=t("./_redefine-all"),h=t("./_for-of"),u=t("./_an-instance"),c=t("./_is-object"),p=t("./_set-to-string-tag"),d=t("./_object-dp").f,y=t("./_array-methods")(0),f=t("./_descriptors");e.exports=function(t,e,i,_,m,g){var v=n[t],b=v,x=m?"set":"add",L=b&&b.prototype,w={};return f&&"function"==typeof b&&(g||L.forEach&&!r(function(){(new b).entries().next()}))?(b=e(function(e,i){u(e,b,t,"_c"),e._c=new v,void 0!=i&&h(i,m,e[x],e)}),y("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in L&&(!g||"clear"!=t)&&a(b.prototype,t,function(i,n){if(u(this,b,t),!e&&g&&!c(i))return"get"==t&&void 0;var s=this._c[t](0===i?0:i,n);return e?this:s})}),g||d(b.prototype,"size",{get:function(){return this._c.size}})):(b=_.getConstructor(e,t,m,x),l(b.prototype,i),o.NEED=!0),p(b,t),w[t]=b,s(s.G+s.W+s.F,w),g||_.setStrong(b,t,m),b}},{"./_an-instance":192,"./_array-methods":196,"./_descriptors":208,"./_export":212,"./_fails":213,"./_for-of":214,"./_global":215,"./_hide":217,"./_is-object":224,"./_meta":233,"./_object-dp":237,"./_redefine-all":251,"./_set-to-string-tag":257}],204:[function(t,e,i){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},{}],205:[function(t,e,i){"use strict";var n=t("./_object-dp"),s=t("./_property-desc");e.exports=function(t,e,i){e in t?n.f(t,e,s(0,i)):t[e]=i}},{"./_object-dp":237,"./_property-desc":250}],206:[function(t,e,i){var n=t("./_a-function");e.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":190}],207:[function(t,e,i){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],208:[function(t,e,i){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":213}],209:[function(t,e,i){var n=t("./_is-object"),s=t("./_global").document,o=n(s)&&n(s.createElement);e.exports=function(t){return o?s.createElement(t):{}}},{"./_global":215,"./_is-object":224}],210:[function(t,e,i){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],211:[function(t,e,i){var n=t("./_object-keys"),s=t("./_object-gops"),o=t("./_object-pie");e.exports=function(t){var e=n(t),i=s.f;if(i)for(var r,a=i(t),l=o.f,h=0;a.length>h;)l.call(t,r=a[h++])&&e.push(r);return e}},{"./_object-gops":242,"./_object-keys":245,"./_object-pie":246}],212:[function(t,e,i){var n=t("./_global"),s=t("./_core"),o=t("./_ctx"),r=t("./_hide"),a=t("./_has"),l=function(t,e,i){var h,u,c,p=t&l.F,d=t&l.G,y=t&l.S,f=t&l.P,_=t&l.B,m=t&l.W,g=d?s:s[e]||(s[e]={}),v=g.prototype,b=d?n:y?n[e]:(n[e]||{}).prototype;d&&(i=e);for(h in i)(u=!p&&b&&void 0!==b[h])&&a(g,h)||(c=u?b[h]:i[h],g[h]=d&&"function"!=typeof b[h]?i[h]:_&&u?o(c,n):m&&b[h]==c?function(t){var e=function(e,i,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):f&&"function"==typeof c?o(Function.call,c):c,f&&((g.virtual||(g.virtual={}))[h]=c,t&l.R&&v&&!v[h]&&r(v,h,c)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},{"./_core":204,"./_ctx":206,"./_global":215,"./_has":216,"./_hide":217}],213:[function(t,e,i){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],214:[function(t,e,i){var n=t("./_ctx"),s=t("./_iter-call"),o=t("./_is-array-iter"),r=t("./_an-object"),a=t("./_to-length"),l=t("./core.get-iterator-method"),h={},u={},i=e.exports=function(t,e,i,c,p){var d,y,f,_,m=p?function(){return t}:l(t),g=n(i,c,e?2:1),v=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=a(t.length);d>v;v++)if((_=e?g(r(y=t[v])[0],y[1]):g(t[v]))===h||_===u)return _}else for(f=m.call(t);!(y=f.next()).done;)if((_=s(f,g,y.value,e))===h||_===u)return _};i.BREAK=h,i.RETURN=u},{"./_an-object":193,"./_ctx":206,"./_is-array-iter":222,"./_iter-call":225,"./_to-length":266,"./core.get-iterator-method":275}],215:[function(t,e,i){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],216:[function(t,e,i){var n={}.hasOwnProperty;e.exports=function(t,e){return n.call(t,e)}},{}],217:[function(t,e,i){var n=t("./_object-dp"),s=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,i){return n.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},{"./_descriptors":208,"./_object-dp":237,"./_property-desc":250
}],218:[function(t,e,i){var n=t("./_global").document;e.exports=n&&n.documentElement},{"./_global":215}],219:[function(t,e,i){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":208,"./_dom-create":209,"./_fails":213}],220:[function(t,e,i){e.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},{}],221:[function(t,e,i){var n=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},{"./_cof":200}],222:[function(t,e,i){var n=t("./_iterators"),s=t("./_wks")("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(n.Array===t||o[s]===t)}},{"./_iterators":230,"./_wks":274}],223:[function(t,e,i){var n=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==n(t)}},{"./_cof":200}],224:[function(t,e,i){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],225:[function(t,e,i){var n=t("./_an-object");e.exports=function(t,e,i,s){try{return s?e(n(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},{"./_an-object":193}],226:[function(t,e,i){"use strict";var n=t("./_object-create"),s=t("./_property-desc"),o=t("./_set-to-string-tag"),r={};t("./_hide")(r,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,i){t.prototype=n(r,{next:s(1,i)}),o(t,e+" Iterator")}},{"./_hide":217,"./_object-create":236,"./_property-desc":250,"./_set-to-string-tag":257,"./_wks":274}],227:[function(t,e,i){"use strict";var n=t("./_library"),s=t("./_export"),o=t("./_redefine"),r=t("./_hide"),a=t("./_iterators"),l=t("./_iter-create"),h=t("./_set-to-string-tag"),u=t("./_object-gpo"),c=t("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(t,e,i,y,f,_,m){l(i,e,y);var g,v,b,x=function(t){if(!p&&t in P)return P[t];switch(t){case"keys":return function(){return new i(this,t)};case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},L=e+" Iterator",w="values"==f,S=!1,P=t.prototype,T=P[c]||P["@@iterator"]||f&&P[f],C=T||x(f),M=f?w?x("entries"):C:void 0,k="Array"==e?P.entries||T:T;if(k&&(b=u(k.call(new t)))!==Object.prototype&&b.next&&(h(b,L,!0),n||"function"==typeof b[c]||r(b,c,d)),w&&T&&"values"!==T.name&&(S=!0,C=function(){return T.call(this)}),n&&!m||!p&&!S&&P[c]||r(P,c,C),a[e]=C,a[L]=d,f)if(g={values:w?C:x("values"),keys:_?C:x("keys"),entries:M},m)for(v in g)v in P||o(P,v,g[v]);else s(s.P+s.F*(p||S),e,g);return g}},{"./_export":212,"./_hide":217,"./_iter-create":226,"./_iterators":230,"./_library":231,"./_object-gpo":243,"./_redefine":252,"./_set-to-string-tag":257,"./_wks":274}],228:[function(t,e,i){var n=t("./_wks")("iterator"),s=!1;try{var o=[7][n]();o.return=function(){s=!0},Array.from(o,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!s)return!1;var i=!1;try{var o=[7],r=o[n]();r.next=function(){return{done:i=!0}},o[n]=function(){return r},t(o)}catch(t){}return i}},{"./_wks":274}],229:[function(t,e,i){e.exports=function(t,e){return{value:e,done:!!t}}},{}],230:[function(t,e,i){e.exports={}},{}],231:[function(t,e,i){e.exports=!0},{}],232:[function(t,e,i){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},{}],233:[function(t,e,i){var n=t("./_uid")("meta"),s=t("./_is-object"),o=t("./_has"),r=t("./_object-dp").f,a=0,l=Object.isExtensible||function(){return!0},h=!t("./_fails")(function(){return l(Object.preventExtensions({}))}),u=function(t){r(t,n,{value:{i:"O"+ ++a,w:{}}})},c=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},p=function(t,e){if(!o(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},d=function(t){return h&&y.NEED&&l(t)&&!o(t,n)&&u(t),t},y=e.exports={KEY:n,NEED:!1,fastKey:c,getWeak:p,onFreeze:d}},{"./_fails":213,"./_has":216,"./_is-object":224,"./_object-dp":237,"./_uid":269}],234:[function(t,e,i){var n=t("./_global"),s=t("./_task").set,o=n.MutationObserver||n.WebKitMutationObserver,r=n.process,a=n.Promise,l="process"==t("./_cof")(r);e.exports=function(){var t,e,i,h=function(){var n,s;for(l&&(n=r.domain)&&n.exit();t;){s=t.fn,t=t.next;try{s()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){r.nextTick(h)};else if(!o||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);i=function(){u.then(h)}}else i=function(){s.call(n,h)};else{var c=!0,p=document.createTextNode("");new o(h).observe(p,{characterData:!0}),i=function(){p.data=c=!c}}return function(n){var s={fn:n,next:void 0};e&&(e.next=s),t||(t=s,i()),e=s}}},{"./_cof":200,"./_global":215,"./_task":262}],235:[function(t,e,i){"use strict";function n(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=s(e),this.reject=s(i)}var s=t("./_a-function");e.exports.f=function(t){return new n(t)}},{"./_a-function":190}],236:[function(t,e,i){var n=t("./_an-object"),s=t("./_object-dps"),o=t("./_enum-bug-keys"),r=t("./_shared-key")("IE_PROTO"),a=function(){},l=function(){var e,i=t("./_dom-create")("iframe"),n=o.length;for(i.style.display="none",t("./_html").appendChild(i),i.src="javascript:",e=i.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),l=e.F;n--;)delete l.prototype[o[n]];return l()};e.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[r]=t):i=l(),void 0===e?i:s(i,e)}},{"./_an-object":193,"./_dom-create":209,"./_enum-bug-keys":210,"./_html":218,"./_object-dps":238,"./_shared-key":258}],237:[function(t,e,i){var n=t("./_an-object"),s=t("./_ie8-dom-define"),o=t("./_to-primitive"),r=Object.defineProperty;i.f=t("./_descriptors")?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),s)try{return r(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},{"./_an-object":193,"./_descriptors":208,"./_ie8-dom-define":219,"./_to-primitive":268}],238:[function(t,e,i){var n=t("./_object-dp"),s=t("./_an-object"),o=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){s(t);for(var i,r=o(e),a=r.length,l=0;a>l;)n.f(t,i=r[l++],e[i]);return t}},{"./_an-object":193,"./_descriptors":208,"./_object-dp":237,"./_object-keys":245}],239:[function(t,e,i){var n=t("./_object-pie"),s=t("./_property-desc"),o=t("./_to-iobject"),r=t("./_to-primitive"),a=t("./_has"),l=t("./_ie8-dom-define"),h=Object.getOwnPropertyDescriptor;i.f=t("./_descriptors")?h:function(t,e){if(t=o(t),e=r(e,!0),l)try{return h(t,e)}catch(t){}if(a(t,e))return s(!n.f.call(t,e),t[e])}},{"./_descriptors":208,"./_has":216,"./_ie8-dom-define":219,"./_object-pie":246,"./_property-desc":250,"./_to-iobject":265,"./_to-primitive":268}],240:[function(t,e,i){var n=t("./_to-iobject"),s=t("./_object-gopn").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return s(t)}catch(t){return r.slice()}};e.exports.f=function(t){return r&&"[object Window]"==o.call(t)?a(t):s(n(t))}},{"./_object-gopn":241,"./_to-iobject":265}],241:[function(t,e,i){var n=t("./_object-keys-internal"),s=t("./_enum-bug-keys").concat("length","prototype");i.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},{"./_enum-bug-keys":210,"./_object-keys-internal":244}],242:[function(t,e,i){i.f=Object.getOwnPropertySymbols},{}],243:[function(t,e,i){var n=t("./_has"),s=t("./_to-object"),o=t("./_shared-key")("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=s(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?r:null}},{"./_has":216,"./_shared-key":258,"./_to-object":267}],244:[function(t,e,i){var n=t("./_has"),s=t("./_to-iobject"),o=t("./_array-includes")(!1),r=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var i,a=s(t),l=0,h=[];for(i in a)i!=r&&n(a,i)&&h.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(h,i)||h.push(i));return h}},{"./_array-includes":195,"./_has":216,"./_shared-key":258,"./_to-iobject":265}],245:[function(t,e,i){var n=t("./_object-keys-internal"),s=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return n(t,s)}},{"./_enum-bug-keys":210,"./_object-keys-internal":244}],246:[function(t,e,i){i.f={}.propertyIsEnumerable},{}],247:[function(t,e,i){var n=t("./_export"),s=t("./_core"),o=t("./_fails");e.exports=function(t,e){var i=(s.Object||{})[t]||Object[t],r={};r[t]=e(i),n(n.S+n.F*o(function(){i(1)}),"Object",r)}},{"./_core":204,"./_export":212,"./_fails":213}],248:[function(t,e,i){e.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},{}],249:[function(t,e,i){var n=t("./_an-object"),s=t("./_is-object"),o=t("./_new-promise-capability");e.exports=function(t,e){if(n(t),s(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},{"./_an-object":193,"./_is-object":224,"./_new-promise-capability":235}],250:[function(t,e,i){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],251:[function(t,e,i){var n=t("./_hide");e.exports=function(t,e,i){for(var s in e)i&&t[s]?t[s]=e[s]:n(t,s,e[s]);return t}},{"./_hide":217}],252:[function(t,e,i){e.exports=t("./_hide")},{"./_hide":217}],253:[function(t,e,i){"use strict";var n=t("./_export"),s=t("./_a-function"),o=t("./_ctx"),r=t("./_for-of");e.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,l=arguments[1];return s(this),e=void 0!==l,e&&s(l),void 0==t?new this:(i=[],e?(n=0,a=o(l,arguments[2],2),r(t,!1,function(t){i.push(a(t,n++))})):r(t,!1,i.push,i),new this(i))}})}},{"./_a-function":190,"./_ctx":206,"./_export":212,"./_for-of":214}],254:[function(t,e,i){"use strict";var n=t("./_export");e.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},{"./_export":212}],255:[function(t,e,i){var n=t("./_is-object"),s=t("./_an-object"),o=function(t,e){if(s(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,i,n){try{n=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(e,[]),i=!(e instanceof Array)}catch(t){i=!0}return function(t,e){return o(t,e),i?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:o}},{"./_an-object":193,"./_ctx":206,"./_is-object":224,"./_object-gopd":239}],256:[function(t,e,i){"use strict";var n=t("./_global"),s=t("./_core"),o=t("./_object-dp"),r=t("./_descriptors"),a=t("./_wks")("species");e.exports=function(t){var e="function"==typeof s[t]?s[t]:n[t];r&&e&&!e[a]&&o.f(e,a,{configurable:!0,get:function(){return this}})}},{"./_core":204,"./_descriptors":208,"./_global":215,"./_object-dp":237,"./_wks":274}],257:[function(t,e,i){var n=t("./_object-dp").f,s=t("./_has"),o=t("./_wks")("toStringTag");e.exports=function(t,e,i){t&&!s(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},{"./_has":216,"./_object-dp":237,"./_wks":274}],258:[function(t,e,i){var n=t("./_shared")("keys"),s=t("./_uid");e.exports=function(t){return n[t]||(n[t]=s(t))}},{"./_shared":259,"./_uid":269}],259:[function(t,e,i){var n=t("./_core"),s=t("./_global"),o=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(e.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:t("./_library")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":204,"./_global":215,"./_library":231}],260:[function(t,e,i){var n=t("./_an-object"),s=t("./_a-function"),o=t("./_wks")("species");e.exports=function(t,e){var i,r=n(t).constructor;return void 0===r||void 0==(i=n(r)[o])?e:s(i)}},{"./_a-function":190,"./_an-object":193,"./_wks":274}],261:[function(t,e,i){var n=t("./_to-integer"),s=t("./_defined");e.exports=function(t){return function(e,i){var o,r,a=String(s(e)),l=n(i),h=a.length;return l<0||l>=h?t?"":void 0:(o=a.charCodeAt(l),o<55296||o>56319||l+1===h||(r=a.charCodeAt(l+1))<56320||r>57343?t?a.charAt(l):o:t?a.slice(l,l+2):r-56320+(o-55296<<10)+65536)}}},{"./_defined":207,"./_to-integer":264}],262:[function(t,e,i){var n,s,o,r=t("./_ctx"),a=t("./_invoke"),l=t("./_html"),h=t("./_dom-create"),u=t("./_global"),c=u.process,p=u.setImmediate,d=u.clearImmediate,y=u.MessageChannel,f=u.Dispatch,_=0,m={},g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},v=function(t){g.call(t.data)};p&&d||(p=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return m[++_]=function(){a("function"==typeof t?t:Function(t),e)},n(_),_},d=function(t){delete m[t]},"process"==t("./_cof")(c)?n=function(t){c.nextTick(r(g,t,1))}:f&&f.now?n=function(t){f.now(r(g,t,1))}:y?(s=new y,o=s.port2,s.port1.onmessage=v,n=r(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",v,!1)):n="onreadystatechange"in h("script")?function(t){l.appendChild(h("script")).onreadystatechange=function(){l.removeChild(this),g.call(t)}}:function(t){setTimeout(r(g,t,1),0)}),e.exports={set:p,clear:d}},{"./_cof":200,"./_ctx":206,"./_dom-create":209,"./_global":215,"./_html":218,"./_invoke":220}],263:[function(t,e,i){var n=t("./_to-integer"),s=Math.max,o=Math.min;e.exports=function(t,e){return t=n(t),t<0?s(t+e,0):o(t,e)}},{"./_to-integer":264}],264:[function(t,e,i){var n=Math.ceil,s=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?s:n)(t)}},{}],265:[function(t,e,i){var n=t("./_iobject"),s=t("./_defined");e.exports=function(t){return n(s(t))}},{"./_defined":207,"./_iobject":221}],266:[function(t,e,i){var n=t("./_to-integer"),s=Math.min;e.exports=function(t){return t>0?s(n(t),9007199254740991):0}},{"./_to-integer":264}],267:[function(t,e,i){var n=t("./_defined");e.exports=function(t){return Object(n(t))}},{"./_defined":207}],268:[function(t,e,i){var n=t("./_is-object");e.exports=function(t,e){if(!n(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!n(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!n(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!n(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":224}],269:[function(t,e,i){var n=0,s=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+s).toString(36))}},{}],270:[function(t,e,i){var n=t("./_global"),s=n.navigator;e.exports=s&&s.userAgent||""},{"./_global":215}],271:[function(t,e,i){var n=t("./_is-object");e.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},{"./_is-object":224}],272:[function(t,e,i){var n=t("./_global"),s=t("./_core"),o=t("./_library"),r=t("./_wks-ext"),a=t("./_object-dp").f;e.exports=function(t){var e=s.Symbol||(s.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:r.f(t)})}},{"./_core":204,"./_global":215,"./_library":231,"./_object-dp":237,"./_wks-ext":273}],273:[function(t,e,i){i.f=t("./_wks")},{"./_wks":274}],274:[function(t,e,i){var n=t("./_shared")("wks"),s=t("./_uid"),o=t("./_global").Symbol,r="function"==typeof o;(e.exports=function(t){return n[t]||(n[t]=r&&o[t]||(r?o:s)("Symbol."+t))}).store=n},{"./_global":215,"./_shared":259,"./_uid":269}],275:[function(t,e,i){var n=t("./_classof"),s=t("./_wks")("iterator"),o=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||o[n(t)]}},{"./_classof":199,"./_core":204,"./_iterators":230,"./_wks":274}],276:[function(t,e,i){var n=t("./_an-object"),s=t("./core.get-iterator-method");e.exports=t("./_core").getIterator=function(t){var e=s(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},{"./_an-object":193,"./_core":204,"./core.get-iterator-method":275}],277:[function(t,e,i){var n=t("./_classof"),s=t("./_wks")("iterator"),o=t("./_iterators");e.exports=t("./_core").isIterable=function(t){var e=Object(t);return void 0!==e[s]||"@@iterator"in e||o.hasOwnProperty(n(e))}},{"./_classof":199,"./_core":204,"./_iterators":230,"./_wks":274}],278:[function(t,e,i){"use strict";var n=t("./_ctx"),s=t("./_export"),o=t("./_to-object"),r=t("./_iter-call"),a=t("./_is-array-iter"),l=t("./_to-length"),h=t("./_create-property"),u=t("./core.get-iterator-method");s(s.S+s.F*!t("./_iter-detect")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,s,c,p=o(t),d="function"==typeof this?this:Array,y=arguments.length,f=y>1?arguments[1]:void 0,_=void 0!==f,m=0,g=u(p);if(_&&(f=n(f,y>2?arguments[2]:void 0,2)),void 0==g||d==Array&&a(g))for(e=l(p.length),i=new d(e);e>m;m++)h(i,m,_?f(p[m],m):p[m]);else for(c=g.call(p),i=new d;!(s=c.next()).done;m++)h(i,m,_?r(c,f,[s.value,m],!0):s.value);return i.length=m,i}})},{"./_create-property":205,"./_ctx":206,"./_export":212,"./_is-array-iter":222,"./_iter-call":225,"./_iter-detect":228,"./_to-length":266,"./_to-object":267,"./core.get-iterator-method":275}],279:[function(t,e,i){"use strict";var n=t("./_add-to-unscopables"),s=t("./_iter-step"),o=t("./_iterators"),r=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=r(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,s(1)):"keys"==e?s(0,i):"values"==e?s(0,t[i]):s(0,[i,t[i]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":191,"./_iter-define":227,"./_iter-step":229,"./_iterators":230,"./_to-iobject":265}],280:[function(t,e,i){"use strict";var n=t("./_collection-strong"),s=t("./_validate-collection");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(s(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(s(this,"Map"),0===t?0:t,e)}},n,!0)},{"./_collection":203,"./_collection-strong":201,"./_validate-collection":271}],281:[function(t,e,i){var n=t("./_export"),s=t("./_math-expm1"),o=Math.exp;n(n.S+n.F*t("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(s(t)-s(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{"./_export":212,"./_fails":213,"./_math-expm1":232}],282:[function(t,e,i){var n=t("./_export");n(n.S,"Object",{create:t("./_object-create")})},{"./_export":212,"./_object-create":236}],283:[function(t,e,i){var n=t("./_export");n(n.S+n.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":208,"./_export":212,"./_object-dp":237}],284:[function(t,e,i){var n=t("./_to-object"),s=t("./_object-gpo");t("./_object-sap")("getPrototypeOf",function(){return function(t){return s(n(t))}})},{"./_object-gpo":243,"./_object-sap":247,"./_to-object":267}],285:[function(t,e,i){var n=t("./_to-object"),s=t("./_object-keys");t("./_object-sap")("keys",function(){return function(t){return s(n(t))}})},{"./_object-keys":245,"./_object-sap":247,"./_to-object":267}],286:[function(t,e,i){var n=t("./_export");n(n.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":212,"./_set-proto":255}],287:[function(t,e,i){},{}],288:[function(t,e,i){"use strict";var n,s,o,r,a=t("./_library"),l=t("./_global"),h=t("./_ctx"),u=t("./_classof"),c=t("./_export"),p=t("./_is-object"),d=t("./_a-function"),y=t("./_an-instance"),f=t("./_for-of"),_=t("./_species-constructor"),m=t("./_task").set,g=t("./_microtask")(),v=t("./_new-promise-capability"),b=t("./_perform"),x=t("./_user-agent"),L=t("./_promise-resolve"),w=l.TypeError,S=l.process,P=S&&S.versions,T=P&&P.v8||"",C=l.Promise,M="process"==u(S),k=function(){},E=s=v.f,D=!!function(){try{var e=C.resolve(1),i=(e.constructor={})[t("./_wks")("species")]=function(t){t(k,k)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(k)instanceof i&&0!==T.indexOf("6.6")&&x.indexOf("Chrome/66")===-1}catch(t){}}(),I=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},B=function(t,e){if(!t._n){t._n=!0;var i=t._c;g(function(){for(var n=t._v,s=1==t._s,o=0;i.length>o;)!function(e){var i,o,r,a=s?e.ok:e.fail,l=e.resolve,h=e.reject,u=e.domain;try{a?(s||(2==t._h&&O(t),t._h=1),a===!0?i=n:(u&&u.enter(),i=a(n),u&&(u.exit(),r=!0)),i===e.promise?h(w("Promise-chain cycle")):(o=I(i))?o.call(i,l,h):l(i)):h(n)}catch(t){u&&!r&&u.exit(),h(t)}}(i[o++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){m.call(l,function(){var e,i,n,s=t._v,o=G(t);if(o&&(e=b(function(){M?S.emit("unhandledRejection",s,t):(i=l.onunhandledrejection)?i({promise:t,reason:s}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",s)}),t._h=M||G(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},G=function(t){return 1!==t._h&&0===(t._a||t._c).length},O=function(t){m.call(l,function(){var e;M?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),B(e,!0))},U=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw w("Promise can't be resolved itself");(e=I(t))?g(function(){var n={_w:i,_d:!1};try{e.call(t,h(U,n,1),h(R,n,1))}catch(t){R.call(n,t)}}):(i._v=t,i._s=1,B(i,!1))}catch(t){R.call({_w:i,_d:!1},t)}}};D||(C=function(t){y(this,C,"Promise","_h"),d(t),n.call(this);try{t(h(U,this,1),h(R,this,1))}catch(t){R.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=t("./_redefine-all")(C.prototype,{then:function(t,e){var i=E(_(this,C));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=M?S.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&B(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=h(U,t,1),this.reject=h(R,t,1)},v.f=E=function(t){return t===C||t===r?new o(t):s(t)}),c(c.G+c.W+c.F*!D,{Promise:C}),t("./_set-to-string-tag")(C,"Promise"),t("./_set-species")("Promise"),r=t("./_core").Promise,c(c.S+c.F*!D,"Promise",{reject:function(t){var e=E(this);return(0,e.reject)(t),e.promise}}),c(c.S+c.F*(a||!D),"Promise",{resolve:function(t){return L(a&&this===r?C:this,t)}}),c(c.S+c.F*!(D&&t("./_iter-detect")(function(t){C.all(t).catch(k)})),"Promise",{all:function(t){var e=this,i=E(e),n=i.resolve,s=i.reject,o=b(function(){var i=[],o=0,r=1;f(t,!1,function(t){var a=o++,l=!1;i.push(void 0),r++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--r||n(i))},s)}),--r||n(i)});return o.e&&s(o.v),i.promise},race:function(t){var e=this,i=E(e),n=i.reject,s=b(function(){f(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return s.e&&n(s.v),i.promise}})},{"./_a-function":190,"./_an-instance":192,"./_classof":199,"./_core":204,"./_ctx":206,"./_export":212,"./_for-of":214,"./_global":215,"./_is-object":224,"./_iter-detect":228,"./_library":231,"./_microtask":234,"./_new-promise-capability":235,"./_perform":248,"./_promise-resolve":249,"./_redefine-all":251,"./_set-species":256,"./_set-to-string-tag":257,"./_species-constructor":260,"./_task":262,"./_user-agent":270,"./_wks":274}],289:[function(t,e,i){"use strict";var n=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":227,"./_string-at":261}],290:[function(t,e,i){"use strict";var n=t("./_global"),s=t("./_has"),o=t("./_descriptors"),r=t("./_export"),a=t("./_redefine"),l=t("./_meta").KEY,h=t("./_fails"),u=t("./_shared"),c=t("./_set-to-string-tag"),p=t("./_uid"),d=t("./_wks"),y=t("./_wks-ext"),f=t("./_wks-define"),_=t("./_enum-keys"),m=t("./_is-array"),g=t("./_an-object"),v=t("./_is-object"),b=t("./_to-object"),x=t("./_to-iobject"),L=t("./_to-primitive"),w=t("./_property-desc"),S=t("./_object-create"),P=t("./_object-gopn-ext"),T=t("./_object-gopd"),C=t("./_object-gops"),M=t("./_object-dp"),k=t("./_object-keys"),E=T.f,D=M.f,I=P.f,B=n.Symbol,A=n.JSON,G=A&&A.stringify,O=d("_hidden"),R=d("toPrimitive"),U={}.propertyIsEnumerable,z=u("symbol-registry"),j=u("symbols"),F=u("op-symbols"),N=Object.prototype,H="function"==typeof B&&!!C.f,Z=n.QObject,q=!Z||!Z.prototype||!Z.prototype.findChild,V=o&&h(function(){return 7!=S(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=E(N,e);n&&delete N[e],D(t,e,i),n&&t!==N&&D(N,e,n)}:D,W=function(t){var e=j[t]=S(B.prototype);return e._k=t,e},Y=H&&"symbol"==typeof B.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof B},X=function(t,e,i){return t===N&&X(F,e,i),g(t),e=L(e,!0),g(i),s(j,e)?(i.enumerable?(s(t,O)&&t[O][e]&&(t[O][e]=!1),i=S(i,{enumerable:w(0,!1)})):(s(t,O)||D(t,O,w(1,{})),t[O][e]=!0),V(t,e,i)):D(t,e,i)},J=function(t,e){g(t);for(var i,n=_(e=x(e)),s=0,o=n.length;o>s;)X(t,i=n[s++],e[i]);return t},K=function(t,e){return void 0===e?S(t):J(S(t),e)},Q=function(t){var e=U.call(this,t=L(t,!0));return!(this===N&&s(j,t)&&!s(F,t))&&(!(e||!s(this,t)||!s(j,t)||s(this,O)&&this[O][t])||e)},$=function(t,e){if(t=x(t),e=L(e,!0),t!==N||!s(j,e)||s(F,e)){var i=E(t,e);return!i||!s(j,e)||s(t,O)&&t[O][e]||(i.enumerable=!0),i}},tt=function(t){for(var e,i=I(x(t)),n=[],o=0;i.length>o;)s(j,e=i[o++])||e==O||e==l||n.push(e);return n},et=function(t){for(var e,i=t===N,n=I(i?F:x(t)),o=[],r=0;n.length>r;)!s(j,e=n[r++])||i&&!s(N,e)||o.push(j[e]);return o};H||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(i){this===N&&e.call(F,i),s(this,O)&&s(this[O],t)&&(this[O][t]=!1),V(this,t,w(1,i))};return o&&q&&V(N,t,{configurable:!0,set:e}),W(t)},a(B.prototype,"toString",function(){return this._k}),T.f=$,M.f=X,t("./_object-gopn").f=P.f=tt,t("./_object-pie").f=Q,C.f=et,o&&!t("./_library")&&a(N,"propertyIsEnumerable",Q,!0),y.f=function(t){return W(d(t))}),r(r.G+r.W+r.F*!H,{Symbol:B});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;it.length>nt;)d(it[nt++]);for(var st=k(d.store),ot=0;st.length>ot;)f(st[ot++]);r(r.S+r.F*!H,"Symbol",{for:function(t){return s(z,t+="")?z[t]:z[t]=B(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),r(r.S+r.F*!H,"Object",{create:K,defineProperty:X,defineProperties:J,getOwnPropertyDescriptor:$,getOwnPropertyNames:tt,getOwnPropertySymbols:et});var rt=h(function(){C.f(1)});r(r.S+r.F*rt,"Object",{getOwnPropertySymbols:function(t){return C.f(b(t))}}),A&&r(r.S+r.F*(!H||h(function(){var t=B();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],s=1;arguments.length>s;)n.push(arguments[s++]);if(i=e=n[1],(v(e)||void 0!==t)&&!Y(t))return m(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!Y(e))return e}),n[1]=e,G.apply(A,n)}}),B.prototype[R]||t("./_hide")(B.prototype,R,B.prototype.valueOf),c(B,"Symbol"),c(Math,"Math",!0),c(n.JSON,"JSON",!0)},{"./_an-object":193,"./_descriptors":208,"./_enum-keys":211,"./_export":212,"./_fails":213,"./_global":215,"./_has":216,"./_hide":217,"./_is-array":223,"./_is-object":224,"./_library":231,"./_meta":233,"./_object-create":236,"./_object-dp":237,"./_object-gopd":239,"./_object-gopn":241,"./_object-gopn-ext":240,"./_object-gops":242,"./_object-keys":245,"./_object-pie":246,"./_property-desc":250,"./_redefine":252,"./_set-to-string-tag":257,"./_shared":259,"./_to-iobject":265,"./_to-object":267,"./_to-primitive":268,"./_uid":269,"./_wks":274,"./_wks-define":272,"./_wks-ext":273}],291:[function(t,e,i){t("./_set-collection-from")("Map")},{"./_set-collection-from":253}],292:[function(t,e,i){t("./_set-collection-of")("Map")},{"./_set-collection-of":254}],293:[function(t,e,i){var n=t("./_export");n(n.P+n.R,"Map",{toJSON:t("./_collection-to-json")("Map")})},{"./_collection-to-json":202,"./_export":212}],294:[function(t,e,i){"use strict";var n=t("./_export"),s=t("./_core"),o=t("./_global"),r=t("./_species-constructor"),a=t("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(t){var e=r(this,s.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},{"./_core":204,"./_export":212,"./_global":215,"./_promise-resolve":249,"./_species-constructor":260}],295:[function(t,e,i){"use strict";var n=t("./_export"),s=t("./_new-promise-capability"),o=t("./_perform");n(n.S,"Promise",{try:function(t){var e=s.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},{"./_export":212,"./_new-promise-capability":235,"./_perform":248}],296:[function(t,e,i){t("./_wks-define")("asyncIterator")},{"./_wks-define":272}],297:[function(t,e,i){t("./_wks-define")("observable")},{"./_wks-define":272}],298:[function(t,e,i){t("./es6.array.iterator");for(var n=t("./_global"),s=t("./_hide"),o=t("./_iterators"),r=t("./_wks")("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var h=a[l],u=n[h],c=u&&u.prototype;c&&!c[r]&&s(c,r,h),o[h]=o.Array}},{"./_global":215,"./_hide":217,"./_iterators":230,"./_wks":274,"./es6.array.iterator":279}],299:[function(t,e,i){!function(t,i,n){void 0!==e&&e.exports?e.exports=n():"function"==typeof define&&define.amd?define(n):i.h337=n()}("h337",this,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},e=function(){var e=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},i=t.defaultRadius;return e.prototype={_organiseData:function(t,e){var n=t[this._xField],s=t[this._yField],o=this._radi,r=this._data,a=this._max,l=this._min,h=t[this._valueField]||1,u=t.radius||this._cfgRadius||i;r[n]||(r[n]=[],o[n]=[]),r[n][s]?r[n][s]+=h:(r[n][s]=h,o[n][s]=u);var c=r[n][s];return c>a?(e?this.setDataMax(c):this._max=c,!1):c<l?(e?this.setDataMin(c):this._min=c,!1):{x:n,y:s,value:h,radius:u,min:l,max:a}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var n in e)for(var s in e[n])t.push({x:n,y:s,radius:i[n][s],value:e[n][s]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&(0===this._data.length&&(this._min=this._max=i.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]}))}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[]
;for(var n=0;n<i;n++)this._organiseData(e[n],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e}(),i=function(){function t(t){var i=t.container,n=this.shadowCanvas=document.createElement("canvas"),s=this.canvas=t.canvas||document.createElement("canvas"),o=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});s.className="heatmap-canvas",this._width=s.width=n.width=t.width||+o.width.replace(/px/,""),this._height=s.height=n.height=t.height||+o.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=s.getContext("2d"),s.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",i.style.position="relative",i.appendChild(s),this._palette=e(t),this._templates={},this._setStyles(t)}var e=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),n=i.getContext("2d");i.width=256,i.height=1;var s=n.createLinearGradient(0,0,256,1);for(var o in e)s.addColorStop(o,e[o]);return n.fillStyle=s,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},i=function(t,e){var i=document.createElement("canvas"),n=i.getContext("2d"),s=t,o=t;if(i.width=i.height=2*t,1==e)n.beginPath(),n.arc(s,o,t,0,2*Math.PI,!1),n.fillStyle="rgba(0,0,0,1)",n.fill();else{var r=n.createRadialGradient(s,o,t*e,s,o,t);r.addColorStop(0,"rgba(0,0,0,1)"),r.addColorStop(1,"rgba(0,0,0,0)"),n.fillStyle=r,n.fillRect(0,0,2*t,2*t)}return i},n=function(t){for(var e=[],i=t.min,n=t.max,s=t.radi,t=t.data,o=Object.keys(t),r=o.length;r--;)for(var a=o[r],l=Object.keys(t[a]),h=l.length;h--;){var u=l[h],c=t[a][u],p=s[a][u];e.push({x:a,y:u,value:c,radius:p})}return{min:i,max:n,data:e}};return t.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(n(t)),this._colorize())},_updateGradient:function(t){this._palette=e(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,n=this._max=t.max,t=t.data||[],s=t.length,o=1-this._blur;s--;){var r,a=t[s],l=a.x,h=a.y,u=a.radius,c=Math.min(a.value,n),p=l-u,d=h-u,y=this.shadowCtx;this._templates[u]?r=this._templates[u]:this._templates[u]=r=i(u,o);var f=(c-e)/(n-e);y.globalAlpha=f<.01?.01:f,y.drawImage(r,p,d),p<this._renderBoundaries[0]&&(this._renderBoundaries[0]=p),d<this._renderBoundaries[1]&&(this._renderBoundaries[1]=d),p+2*u>this._renderBoundaries[2]&&(this._renderBoundaries[2]=p+2*u),d+2*u>this._renderBoundaries[3]&&(this._renderBoundaries[3]=d+2*u)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,n=this._renderBoundaries[3]-e,s=this._width,o=this._height,r=this._opacity,a=this._maxOpacity,l=this._minOpacity,h=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>s&&(i=s-t),e+n>o&&(n=o-e);for(var u=this.shadowCtx.getImageData(t,e,i,n),c=u.data,p=c.length,d=this._palette,y=3;y<p;y+=4){var f=c[y],_=4*f;if(_){var m;m=r>0?r:f<a?f<l?l:f:a,c[y-3]=d[_],c[y-2]=d[_+1],c[y-1]=d[_+2],c[y]=h?d[_+3]:m}}u.data=c,this.ctx.putImageData(u,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx,i=e.getImageData(t.x,t.y,1,1),n=i.data[3],s=this._max,o=this._min;return Math.abs(s-o)*(n/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),n=function(){var e=!1;return"canvas2d"===t.defaultRenderer&&(e=i),e}(),s={merge:function(){for(var t={},e=arguments.length,i=0;i<e;i++){var n=arguments[i];for(var s in n)t[s]=n[s]}return t}},o=function(){function i(){var i=this._config=s.merge(t,arguments[0]||{});if(this._coordinator=new o,i.plugin){var a=i.plugin;if(!t.plugins[a])throw new Error("Plugin '"+a+"' not found. Maybe it was not registered.");var l=t.plugins[a];this._renderer=new l.renderer(i),this._store=new l.store(i)}else this._renderer=new n(i),this._store=new e(i);r(this)}var o=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var n=this.cStore;n[t]||(n[t]=[]),n[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var n=i[t].length,s=0;s<n;s++){var o=i[t][s];o(e)}}},t}(),r=function(t){var e=t._renderer,i=t._coordinator,n=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),n.setCoordinator(i)};return i.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=s.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},i}();return{create:function(t){return new o(t)},register:function(e,i){t.plugins[e]=i}}})},{}],300:[function(t,e,i){!function(i,n,s){if(void 0!==e&&e.exports)e.exports=s(t("heatmap.js"),t("leaflet"));else if("function"==typeof define&&define.amd)define(["heatmap.js","leaflet"],s);else{if(void 0===window.h337)throw new Error("heatmap.js must be loaded before the leaflet heatmap plugin");if(void 0===window.L)throw new Error("Leaflet must be loaded before the leaflet heatmap plugin");n.HeatmapOverlay=s(window.h337,window.L)}}("HeatmapOverlay",this,function(t,e){"use strict";void 0===e.Layer&&(e.Layer=e.Class);var i=e.Layer.extend({initialize:function(t){this.cfg=t,this._el=e.DomUtil.create("div","egis-zoom-hide"),this._data=[],this._max=1,this._min=0,this.cfg.container=this._el},onAdd:function(i){var n=i.getSize();this._map=i,this._width=n.x,this._height=n.y,this._el.style.width=n.x+"px",this._el.style.height=n.y+"px",this._el.style.position="absolute",this._origin=this._map.layerPointToLatLng(new e.Point(0,0)),i.getPanes().overlayPane.appendChild(this._el),this._heatmap||(this._heatmap=t.create(this.cfg)),i.on("moveend",this._reset,this),this._draw()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._el),t.off("moveend",this._reset,this)},_draw:function(){if(this._map){var t=this._map.getPanes().mapPane,e=t._leaflet_pos;this._el.style[i.CSS_TRANSFORM]="translate("+-Math.round(e.x)+"px,"+-Math.round(e.y)+"px)",this._update()}},_update:function(){var t,e,i,n={max:this._max,min:this._min,data:[]};if(t=this._map.getBounds(),e=this._map.getZoom(),i=Math.pow(2,e),0==this._data.length)return void(this._heatmap&&this._heatmap.setData(n));for(var s=[],o=this.cfg.scaleRadius?i:1,r=0,a=0,l=this.cfg.valueField,h=this._data.length;h--;){var u=this._data[h],c=u[l],p=u.latlng;if(t.contains(p)){r=Math.max(c,r),a=Math.min(c,a);var d=this._map.latLngToContainerPoint(p),y={x:Math.round(d.x),y:Math.round(d.y)};y[l]=c;var f;f=u.radius?u.radius*o:(this.cfg.radius||2)*o,y.radius=f,s.push(y)}}this.cfg.useLocalExtrema&&(n.max=r,n.min=a),n.data=s,this._heatmap.setData(n)},setData:function(t){this._max=t.max||this._max,this._min=t.min||this._min;for(var i=this.cfg.latField||"lat",n=this.cfg.lngField||"lng",s=this.cfg.valueField||"value",t=t.data,o=t.length,r=[];o--;){var a=t[o],l=new e.LatLng(a[i],a[n]),h={latlng:l};h[s]=a[s],a.radius&&(h.radius=a.radius),r.push(h)}this._data=r,this._draw()},addData:function(t){if(t.length>0)for(var i=t.length;i--;)this.addData(t[i]);else{var n=this.cfg.latField||"lat",s=this.cfg.lngField||"lng",o=this.cfg.valueField||"value",r=t,a=new e.LatLng(r[n],r[s]),l={latlng:a};l[o]=r[o],this._max=Math.max(this._max,l[o]),this._min=Math.min(this._min,l[o]),r.radius&&(l.radius=r.radius),this._data.push(l),this._draw()}},_reset:function(){this._origin=this._map.layerPointToLatLng(new e.Point(0,0));var t=this._map.getSize();this._width===t.x&&this._height===t.y||(this._width=t.x,this._height=t.y,this._el.style.width=this._width+"px",this._el.style.height=this._height+"px",this._heatmap._renderer.setDimensions(this._width,this._height)),this._draw()}});return i.CSS_TRANSFORM=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],i=0;i<e.length;i++){var n=e[i];if(void 0!==t.style[n])return n}return e[0]}(),i})},{"heatmap.js":299,leaflet:302}],301:[function(t,e,i){!function(t,n){"object"==typeof i&&void 0!==e?n(i):"function"==typeof define&&define.amd?define(["exports"],n):n((t.Leaflet=t.Leaflet||{},t.Leaflet.markercluster=t.Leaflet.markercluster||{}))}(this,function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,n=this._featureGroup,s=this._nonPointGroup,o=this.options.chunkedLoading,r=this.options.chunkInterval,a=this.options.chunkProgress,l=t.length,h=0,u=!0;if(this._map){var c=(new Date).getTime(),p=L.bind(function(){for(var d=(new Date).getTime();h<l;h++){if(o&&h%200==0){if((new Date).getTime()-d>r)break}if((i=t[h])instanceof L.LayerGroup)u&&(t=t.slice(),u=!1),this._extractNonGroupLayers(i,t),l=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var y=i.__parent.getAllChildMarkers(),f=y[0]===i?y[1]:y[0];n.removeLayer(f)}}else s.addLayer(i),e||this.fire("layeradd",{layer:i})}a&&a(h,l,(new Date).getTime()-c),h===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)},this);p()}else for(var d=this._needsClustering;h<l;h++)i=t[h],i instanceof L.LayerGroup?(u&&(t=t.slice(),u=!1),this._extractNonGroupLayers(i,t),l=t.length):i.getLatLng?this.hasLayer(i)||d.push(i):s.addLayer(i);return this},removeLayers:function(t){var e,i,n=t.length,s=this._featureGroup,o=this._nonPointGroup,r=!0;if(!this._map){for(e=0;e<n;e++)i=t[e],i instanceof L.LayerGroup?(r&&(t=t.slice(),r=!1),this._extractNonGroupLayers(i,t),n=t.length):(this._arraySplice(this._needsClustering,i),o.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var a=t.slice(),l=n;for(e=0;e<l;e++)i=a[e],i instanceof L.LayerGroup?(this._extractNonGroupLayers(i,a),l=a.length):this._unspiderfyLayer(i)}for(e=0;e<n;e++)i=t[e],i instanceof L.LayerGroup?(r&&(t=t.slice(),r=!1),this._extractNonGroupLayers(i,t),n=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),s.hasLayer(i)&&(s.removeLayer(i),i.clusterShow&&i.clusterShow())):(o.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,s,o=this._needsClustering.slice(),r=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(o),n=o.length-1;n>=0;n--){for(i=!0,s=r.length-1;s>=0;s--)if(r[s].layer===o[n]){i=!1;break}i&&t.call(e,o[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var i=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],n.newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" egis-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,s=Math.floor(this._map.getMinZoom());e>=s&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,s=this._gridUnclustered,o=this._featureGroup,r=this._map,a=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,h=t.__parent,u=h._markers;for(this._arraySplice(u,t);h&&(h._childCount--,h._boundsNeedUpdate=!0,!(h._zoom<a));)e&&h._childCount<=1?(l=h._markers[0]===t?h._markers[1]:h._markers[0],n[h._zoom].removeObject(h,r.project(h._cLatLng,h._zoom)),s[h._zoom].addObject(l,r.project(l.getLatLng(),h._zoom)),this._arraySplice(h.__parent._childClusters,h),h.__parent._markers.push(l),l.__parent=h.__parent,h._icon&&(o.removeLayer(h),i||o.addLayer(l))):h._iconNeedsUpdate=!0,h=h.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,i=e;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var s=t;s>=e;s--)this._gridClusters[s]=new L.DistanceGrid(n(s)),this._gridUnclustered[s]=new L.DistanceGrid(n(s));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n,s=this._gridClusters,o=this._gridUnclustered,r=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=r;e--){i=this._map.project(t.getLatLng(),e);var a=s[e].getNearObject(i);if(a)return a._addChild(t),void(t.__parent=a);if(a=o[e].getNearObject(i)){var l=a.__parent;l&&this._removeLayer(a,!1);var h=new this._markerCluster(this,e,a,t);s[e].addObject(h,this._map.project(h._cLatLng,e)),a.__parent=h,t.__parent=h;var u=h;for(n=e-1;n>l._zoom;n--)u=new this._markerCluster(this,n,u),s[n].addObject(u,this._map.project(a.getLatLng(),n));return l._addChild(u),void this._removeFromGridUnclustered(a,e)}o[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-(1/0))),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),s=0;for(e=e||[];s<n.length;s++)i=n[s],i instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-(1/0),-(1/0)),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" egis-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),s=this._featureGroup,o=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,t,o,function(o){var r,a=o._latlng,l=o._markers;for(n.contains(a)||(a=null),o._isSingleParent()&&t+1===e?(s.removeLayer(o),o._recursivelyAddChildrenToMap(null,e,n)):(o.clusterHide(),o._recursivelyAddChildrenToMap(a,e,n)),i=l.length-1;i>=0;i--)r=l[i],n.contains(r._latlng)||s.removeLayer(r)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),s.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(n,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(n,t,o,function(t){s.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),s=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,s,e+1,i);var o=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(1===t._childCount){var r=t._markers[0];this._ignoreMove=!0,r.setLatLng(r.getLatLng()),this._ignoreMove=!1,r.clusterShow&&r.clusterShow()}else t._recursively(n,i,s,function(t){t._recursivelyRemoveChildrenFromMap(n,s,e+1)});o._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" egis-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),n=this._group._map,s=n.getBoundsZoom(this._bounds),o=this._zoom+1,r=n.getZoom();i.length>0&&s>o;){o++;var a=[];for(e=0;e<i.length;e++)a=a.concat(i[e]._childClusters);i=a}s>o?this._group._map.setView(this._latlng,o):s<=r?this._group._map.setView(this._latlng,r+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-(1/0),t._northEast.lng=-(1/0))},_recalculateBounds:function(){var t,e,i,n,s=this._markers,o=this._childClusters,r=0,a=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<s.length;t++)i=s[t]._latlng,this._bounds.extend(i),r+=i.lat,a+=i.lng;for(t=0;t<o.length;t++)e=o[t],e._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,n=e._childCount,r+=i.lat*n,a+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(r/l,a/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),
this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(t){var i,n,s=t._markers;for(i=s.length-1;i>=0;i--)n=s[i],n._icon&&(n._setPos(e),n.clusterHide())},function(t){var i,n,s=t._childClusters;for(i=s.length-1;i>=0;i--)n=s[i],n._icon&&(n._setPos(e),n.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,function(s){s._recursivelyAnimateChildrenIn(t,s._group._map.latLngToLayerPoint(s.getLatLng()).round(),i),s._isSingleParent()&&i-1===n?(s.clusterShow(),s._recursivelyRemoveChildrenFromMap(t,e,i)):s.clusterHide(),s._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(n){if(e!==n._zoom)for(var s=n._markers.length-1;s>=0;s--){var o=n._markers[s];i.contains(o._latlng)&&(t&&(o._backupLatlng=o.getLatLng(),o.setLatLng(t),o.clusterHide&&o.clusterHide()),n._group._featureGroup.addLayer(o))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var s=this._childClusters.length-1;s>=0;s--)this._childClusters[s]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var s,o;this._recursively(t,e-1,i-1,function(t){for(o=t._markers.length-1;o>=0;o--)s=t._markers[o],n&&n.contains(s._latlng)||(t._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())},function(t){for(o=t._childClusters.length-1;o>=0;o--)s=t._childClusters[o],n&&n.contains(s._latlng)||(t._group._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow())})},_recursively:function(t,e,i,n,s){var o,r,a=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),s&&l===i&&s(this)),l<e||l<i)for(o=a.length-1;o>=0;o--)r=a[o],r._boundsNeedUpdate&&r._recalculateBounds(),t.intersects(r._bounds)&&r._recursively(t,e,i,n,s)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),s=this._grid,o=s[n]=s[n]||{},r=o[i]=o[i]||[],a=L.Util.stamp(t);this._objectPoint[a]=e,r.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,s=this._getCoord(e.x),o=this._getCoord(e.y),r=this._grid,a=r[o]=r[o]||{},l=a[s]=a[s]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;i<n;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete a[s],!0},eachObject:function(t,e){var i,n,s,o,r,a,l=this._grid;for(i in l){r=l[i];for(n in r)for(a=r[n],s=0,o=a.length;s<o;s++)t.call(e,a[s])&&(s--,o--)}},getNearObject:function(t){var e,i,n,s,o,r,a,l,h=this._getCoord(t.x),u=this._getCoord(t.y),c=this._objectPoint,p=this._sqCellSize,d=null;for(e=u-1;e<=u+1;e++)if(s=this._grid[e])for(i=h-1;i<=h+1;i++)if(o=s[i])for(n=0,r=o.length;n<r;n++)a=o[n],((l=this._sqDist(c[L.Util.stamp(a)],t))<p||l<=p&&null===d)&&(p=l,d=a);return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,s,o=0,r=null,a=[];for(i=e.length-1;i>=0;i--)n=e[i],(s=this.getDistant(n,t))>0&&(a.push(n),s>o&&(o=s,r=n));return{maxPoint:r,newPoints:a}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints))):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,s=!1,o=!1,r=null,a=null,l=null,h=null,u=null,c=null;for(e=t.length-1;e>=0;e--){var p=t[e];(i===!1||p.lat>i)&&(r=p,i=p.lat),(n===!1||p.lat<n)&&(a=p,n=p.lat),(s===!1||p.lng>s)&&(l=p,s=p.lng),(o===!1||p.lng<o)&&(h=p,o=p.lng)}return n!==i?(c=a,u=r):(c=h,u=l),[].concat(this.buildConvexHull([c,u],t),this.buildConvexHull([u,c],t))}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),i=this._group,n=i._map,s=n.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,s):(s.y+=10,t=this._generatePointsCircle(e.length,s)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,s=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),o=s/this._2PI,r=this._2PI/t,a=[];for(o=Math.max(o,35),a.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*r,a[i]=new L.Point(e.x+o*Math.cos(n),e.y+o*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier,s=n*this._spiralLengthStart,o=n*this._spiralFootSeparation,r=n*this._spiralLengthFactor*this._2PI,a=0,l=[];for(l.length=t,i=t;i>=0;i--)i<t&&(l[i]=new L.Point(e.x+s*Math.cos(a),e.y+s*Math.sin(a))._round()),a+=o/s+5e-4*i,s+=r/a;return l},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,s=i._featureGroup,o=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=o.length-1;e>=0;e--)t=o[e],s.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:o}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,s,o,r=this._group,a=r._map,l=r._featureGroup,h=this._group.options.spiderLegPolylineOptions;for(r._ignoreMove=!0,i=0;i<t.length;i++)o=a.layerPointToLatLng(e[i]),n=t[i],s=new L.Polyline([this._latlng,o],h),a.addLayer(s),n._spiderLeg=s,n._preSpiderfyLatlng=n._latlng,n.setLatLng(o),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),r._ignoreMove=!1,r.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,s,o,r,a,l=this,h=this._group,u=h._map,c=h._featureGroup,p=this._latlng,d=u.latLngToLayerPoint(p),y=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),_=f.opacity;for(void 0===_&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),y?(f.opacity=0,f.className=(f.className||"")+" egis-cluster-spider-leg"):f.opacity=_,h._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],a=u.layerPointToLatLng(e[i]),s=new L.Polyline([p,a],f),u.addLayer(s),n._spiderLeg=s,y&&(o=s._path,r=o.getTotalLength()+.1,o.style.strokeDasharray=r,o.style.strokeDashoffset=r),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),c.addLayer(n),n._setPos&&n._setPos(d);for(h._forceLayout(),h._animationStart(),i=t.length-1;i>=0;i--)a=u.layerPointToLatLng(e[i]),n=t[i],n._preSpiderfyLatlng=n._latlng,n.setLatLng(a),n.clusterShow&&n.clusterShow(),y&&(s=n._spiderLeg,o=s._path,o.style.strokeDashoffset=0,s.setStyle({opacity:_}));this.setOpacity(.3),h._ignoreMove=!1,setTimeout(function(){h._animationEnd(),h.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,n,s,o,r,a=this,l=this._group,h=l._map,u=l._featureGroup,c=t?h._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):h.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),d=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=p.length-1;i>=0;i--)e=p[i],e._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,r=!0,e._setPos&&(e._setPos(c),r=!1),e.clusterHide&&(e.clusterHide(),r=!1),r&&u.removeLayer(e),d&&(n=e._spiderLeg,s=n._path,o=s.getTotalLength()+.1,s.style.strokeDashoffset=o,n.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var t=0;for(i=p.length-1;i>=0;i--)e=p[i],e._spiderLeg&&t++;for(i=p.length-1;i>=0;i--)e=p[i],e._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&u.removeLayer(e),h.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:a,markers:p})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"egis-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i})},{}],302:[function(t,e,i){!function(t,i,n){var s={version:"1.0.3"};"object"==typeof e&&"object"==typeof e.exports?e.exports=s:"function"==typeof define&&define.amd&&define(s),void 0!==t&&function(){var e=t.L;s.noConflict=function(){return t.L=e,this},t.L=s}(),s.Util={extend:function(t){var e,i,n,s;for(i=1,n=arguments.length;i<n;i++){s=arguments[i];for(e in s)t[e]=s[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++s.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,s,o,r;return r=function(){n=!1,s&&(o.apply(i,s),s=!1)},o=function(){n?s=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],s=e[0],o=n-s;return t===n&&i?t:((t-s)%o+o)%o+s},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return s.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?s.Util.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var s in t)n.push(encodeURIComponent(i?s.toUpperCase():s)+"="+encodeURIComponent(t[s]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,e){return t.replace(s.Util.templateRe,function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return t["webkit"+e]||t["moz"+e]||t["ms"+e]}function i(e){var i=+new Date,s=Math.max(0,16-(i-n));return n=i+s,t.setTimeout(e,s)}var n=0,o=t.requestAnimationFrame||e("RequestAnimationFrame")||i,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};s.Util.requestAnimFrame=function(e,n,r){if(!r||o!==i)return o.call(t,s.bind(e,n));e.call(n)},s.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),s.extend=s.Util.extend,s.bind=s.Util.bind,s.stamp=s.Util.stamp,s.setOptions=s.Util.setOptions,s.Class=function(){},s.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=s.Util.create(i);n.constructor=e,e.prototype=n;for(var o in this)this.hasOwnProperty(o)&&"prototype"!==o&&(e[o]=this[o]);return t.statics&&(s.extend(e,t.statics),delete t.statics),t.includes&&(s.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=s.Util.extend(s.Util.create(n.options),t.options)),s.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},s.Class.include=function(t){return s.extend(this.prototype,t),this},s.Class.mergeOptions=function(t){return s.extend(this.prototype.options,t),this},s.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},s.Evented=s.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=s.Util.splitWords(t);for(var o=0,r=t.length;o<r;o++)this._on(t[o],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=s.Util.splitWords(t);for(var o=0,r=t.length;o<r;o++)this._off(t[o],e,i)}else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var s={fn:e,ctx:i},o=n,r=0,a=o.length;r<a;r++)if(o[r].fn===e&&o[r].ctx===i)return;o.push(s)},_off:function(t,e,i){var n,o,r;if(this._events&&(n=this._events[t])){if(!e){for(o=0,r=n.length;o<r;o++)n[o].fn=s.Util.falseFn;return void delete this._events[t]}if(i===this&&(i=void 0),n)for(o=0,r=n.length;o<r;o++){var a=n[o];if(a.ctx===i&&a.fn===e)return a.fn=s.Util.falseFn,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=s.Util.extend({},e,{type:t,target:this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var r=0,a=o.length;r<a;r++){var l=o[r];l.fn.call(l.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=s.bind(function(){this.off(t,e,i).off(t,o,i)},this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,s.extend({layer:t.target},t),!0)}});var o=s.Evented.prototype;o.addEventListener=o.on,o.removeEventListener=o.clearAllEventListeners=o.off,o.addOneTimeEventListener=o.once,o.fireEvent=o.fire,o.hasEventListeners=o.listens,s.Mixin={Events:o},function(){var e=navigator.userAgent.toLowerCase(),n=i.documentElement,o="ActiveXObject"in t,r=e.indexOf("webkit")!==-1,a=e.indexOf("phantom")!==-1,l=e.search("android [23]")!==-1,h=e.indexOf("chrome")!==-1,u=e.indexOf("gecko")!==-1&&!r&&!t.opera&&!o,c=0===navigator.platform.indexOf("Win"),p="undefined"!=typeof orientation||e.indexOf("mobile")!==-1,d=!t.PointerEvent&&t.MSPointerEvent,y=t.PointerEvent||d,f=o&&"transition"in n.style,_="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!l,m="MozPerspective"in n.style,g="OTransition"in n.style,v=!t.L_NO_TOUCH&&(y||"ontouchstart"in t||t.DocumentTouch&&i instanceof t.DocumentTouch);s.Browser={ie:o,ielt9:o&&!i.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in i),webkit:r,gecko:u,android:e.indexOf("android")!==-1,android23:l,chrome:h,safari:!h&&e.indexOf("safari")!==-1,win:c,ie3d:f,webkit3d:_,gecko3d:m,opera12:g,any3d:!t.L_DISABLE_3D&&(f||_||m)&&!g&&!a,mobile:p,mobileWebkit:p&&r,mobileWebkit3d:p&&_,mobileOpera:p&&t.opera,mobileGecko:p&&u,touch:!!v,msPointer:!!d,pointer:!!y,retina:(t.devicePixelRatio||t.screen.deviceXDPI/t.screen.logicalXDPI)>1}}(),s.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},s.Point.prototype={clone:function(){return new s.Point(this.x,this.y)},add:function(t){return this.clone()._add(s.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(s.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new s.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new s.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=s.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=s.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=s.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+s.Util.formatNum(this.x)+", "+s.Util.formatNum(this.y)+")"}},s.point=function(t,e,i){return t instanceof s.Point?t:s.Util.isArray(t)?new s.Point(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new s.Point(t.x,t.y):new s.Point(t,e,i)},s.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;n<s;n++)this.extend(i[n])},s.Bounds.prototype={extend:function(t){return t=s.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new s.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new s.Point(this.min.x,this.max.y)},getTopRight:function(){return new s.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof s.Point?s.point(t):s.bounds(t),t instanceof s.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=s.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=s.bounds(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,a=o.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},s.bounds=function(t,e){return!t||t instanceof s.Bounds?t:new s.Bounds(t,e)},s.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},s.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new s.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},s.DomUtil={get:function(t){return"string"==typeof t?i.getElementById(t):t},getStyle:function(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&i.defaultView){var s=i.defaultView.getComputedStyle(t,null);n=s?s[e]:null}return"auto"===n?null:n},create:function(t,e,n){var s=i.createElement(t);return s.className=e||"",n&&n.appendChild(s),s},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=s.DomUtil.getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)},addClass:function(t,e){if(void 0!==t.classList)for(var i=s.Util.splitWords(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!s.DomUtil.hasClass(t,e)){var r=s.DomUtil.getClass(t);s.DomUtil.setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){void 0!==t.classList?t.classList.remove(e):s.DomUtil.setClass(t,s.Util.trim((" "+s.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e},getClass:function(t){return void 0===t.className.baseVal?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&s.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var e=i.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1},setTransform:function(t,e,i){var n=e||new s.Point(0,0);t.style[s.DomUtil.TRANSFORM]=(s.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,s.Browser.any3d?s.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new s.Point(0,0)}},function(){s.DomUtil.TRANSFORM=s.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var e=s.DomUtil.TRANSITION=s.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(s.DomUtil.TRANSITION_END="webkitTransition"===e||"OTransition"===e?e+"End":"transitionend","onselectstart"in i)s.DomUtil.disableTextSelection=function(){s.DomEvent.on(t,"selectstart",s.DomEvent.preventDefault)},s.DomUtil.enableTextSelection=function(){s.DomEvent.off(t,"selectstart",s.DomEvent.preventDefault)};else{var n=s.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);s.DomUtil.disableTextSelection=function(){if(n){var t=i.documentElement.style;this._userSelect=t[n],t[n]="none"}},s.DomUtil.enableTextSelection=function(){n&&(i.documentElement.style[n]=this._userSelect,delete this._userSelect)}}s.DomUtil.disableImageDrag=function(){s.DomEvent.on(t,"dragstart",s.DomEvent.preventDefault)},s.DomUtil.enableImageDrag=function(){s.DomEvent.off(t,"dragstart",s.DomEvent.preventDefault)},s.DomUtil.preventOutline=function(e){for(;e.tabIndex===-1;)e=e.parentNode;e&&e.style&&(s.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",s.DomEvent.on(t,"keydown",s.DomUtil.restoreOutline,this))},s.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,s.DomEvent.off(t,"keydown",s.DomUtil.restoreOutline,this))}}(),s.LatLng=function(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)},s.LatLng.prototype={equals:function(t,e){return!!t&&(t=s.latLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+s.Util.formatNum(this.lat,t)+", "+s.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return s.CRS.Earth.distance(this,s.latLng(t))},wrap:function(){return s.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return s.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new s.LatLng(this.lat,this.lng,this.alt)}},s.latLng=function(t,e,i){return t instanceof s.LatLng?t:s.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new s.LatLng(t[0],t[1],t[2]):2===t.length?new s.LatLng(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new s.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new s.LatLng(t,e,i)},s.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,s=i.length;n<s;n++)this.extend(i[n])},s.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof s.LatLng)e=t,i=t;else{if(!(t instanceof s.LatLngBounds))return t?this.extend(s.latLng(t)||s.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new s.LatLng(e.lat,e.lng),this._northEast=new s.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new s.LatLngBounds(new s.LatLng(e.lat-n,e.lng-o),new s.LatLng(i.lat+n,i.lng+o))},getCenter:function(){return new s.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new s.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new s.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof s.LatLng||"lat"in t?s.latLng(t):s.latLngBounds(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof s.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=s.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=s.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,a=o.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=s.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},s.latLngBounds=function(t,e){return t instanceof s.LatLngBounds?t:new s.LatLngBounds(t,e)},s.Projection={},s.Projection.LonLat={project:function(t){return new s.Point(t.lng,t.lat)},unproject:function(t){return new s.LatLng(t.y,t.x)},bounds:s.bounds([-180,-90],[180,90])},s.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new s.Point(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new s.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return s.bounds([-t,-t],[t,t])}()},s.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),o=this.transformation.transform(e.max,i);return s.bounds(n,o)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?s.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?s.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return s.latLng(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast(),l=s.latLng({lat:r.lat-n,lng:r.lng-o}),h=s.latLng({lat:a.lat-n,lng:a.lng-o});return new s.LatLngBounds(l,h)}},s.CRS.Simple=s.extend({},s.CRS,{projection:s.Projection.LonLat,transformation:new s.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),s.CRS.Earth=s.extend({},s.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,s=e.lat*i,o=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(o,1))}}),s.CRS.EPSG3857=s.extend({},s.CRS.Earth,{code:"EPSG:3857",projection:s.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*s.Projection.SphericalMercator.R);return new s.Transformation(t,.5,-t,.5)}()}),
s.CRS.EPSG900913=s.extend({},s.CRS.EPSG3857,{code:"EPSG:900913"}),s.CRS.EPSG4326=s.extend({},s.CRS.Earth,{code:"EPSG:4326",projection:s.Projection.LonLat,transformation:new s.Transformation(1/180,1,-1/180,.5)}),s.Map=s.Evented.extend({options:{crs:s.CRS.EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=s.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=s.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(s.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=s.DomUtil.TRANSITION&&s.Browser.any3d&&!s.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),s.DomEvent.on(this._proxy,s.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(s.latLng(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){void 0!==i.animate&&(i.zoom=s.extend({animate:i.animate},i.zoom),i.pan=s.extend({animate:i.animate,duration:i.duration},i.pan));if(this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(s.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(s.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=t instanceof s.Point?t:this.latLngToContainerPoint(t),a=r.subtract(o).multiplyBy(1-1/n),l=this.containerPointToLatLng(o.add(a));return this.setView(l,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():s.latLngBounds(t);var i=s.point(e.paddingTopLeft||e.padding||[0,0]),n=s.point(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o;var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),l=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(l).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(t=s.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=s.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new s.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){s.DomUtil.addClass(this._mapPane,"egis-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){function n(t){var e=t?-1:1,i=t?m:_,n=m*m-_*_+e*b*b*g*g,s=2*i*b*g,o=n/s,r=Math.sqrt(o*o+1)-o;return r<1e-9?-18:Math.log(r)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function r(t){return(Math.exp(t)+Math.exp(-t))/2}function a(t){return o(t)/r(t)}function l(t){return _*(r(x)/r(x+v*t))}function h(t){return _*(r(x)*a(x+v*t)-o(x))/b}function u(t){return 1-Math.pow(1-t,1.5)}function c(){var i=(Date.now()-L)/S,n=u(i)*w;i<=1?(this._flyToFrame=s.Util.requestAnimFrame(c,this),this._move(this.unproject(p.add(d.subtract(p).multiplyBy(h(n)/g)),f),this.getScaleZoom(_/l(n),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(i=i||{},i.animate===!1||!s.Browser.any3d)return this.setView(t,e,i);this._stop();var p=this.project(this.getCenter()),d=this.project(t),y=this.getSize(),f=this._zoom;t=s.latLng(t),e=void 0===e?f:e;var _=Math.max(y.x,y.y),m=_*this.getZoomScale(f,e),g=d.distanceTo(p)||1,v=1.42,b=v*v,x=n(0),L=Date.now(),w=(n(1)-x)/v,S=i.duration?1e3*i.duration:1e3*w*.8;return this._moveStart(!0),c.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=s.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,s.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=s.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),o=i.divideBy(2).round(),r=n.subtract(o);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=s.bind(this._handleGeolocationResponse,this),i=s.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new s.LatLng(e,i),o=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(o);this.setView(n,r.maxZoom?Math.min(a,r.maxZoom):a)}var l={latlng:n,bounds:o,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(l[h]=t.coords[h]);this.fire("locationfound",l)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}s.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var i="egis-pane"+(t?" egis-"+t.replace("Pane","")+"-pane":""),n=s.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new s.LatLngBounds(e,i)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=s.latLngBounds(t),i=s.point(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),l=t.getSouthEast(),h=this.getSize().subtract(i),u=s.bounds(this.project(l,n),this.project(a,n)).getSize(),c=s.Browser.any3d?this.options.zoomSnap:1,p=Math.min(h.x/u.x,h.y/u.y);return n=this.getScaleZoom(p,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new s.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new s.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(s.latLng(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(s.point(t),e)},layerPointToLatLng:function(t){var e=s.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(s.latLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(s.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(s.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(s.latLng(t),s.latLng(e))},containerPointToLayerPoint:function(t){return s.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return s.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(s.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(s.latLng(t)))},mouseEventToContainerPoint:function(t){return s.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=s.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");s.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=s.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&s.Browser.any3d,s.DomUtil.addClass(t,"egis-container"+(s.Browser.touch?" egis-touch":"")+(s.Browser.retina?" egis-retina":"")+(s.Browser.ielt9?" egis-oldie":"")+(s.Browser.safari?" egis-safari":"")+(this._fadeAnimated?" egis-fade-anim":""));var e=s.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),s.DomUtil.setPosition(this._mapPane,new s.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(s.DomUtil.addClass(t.markerPane,"egis-zoom-hide"),s.DomUtil.addClass(t.shadowPane,"egis-zoom-hide"))},_resetView:function(t,e){s.DomUtil.setPosition(this._mapPane,new s.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return s.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){s.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(s.DomEvent){this._targets={},this._targets[s.stamp(this._container)]=this;var i=e?"off":"on";s.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&s.DomEvent[i](t,"resize",this._onResize,this),s.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)}},_onResize:function(){s.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=s.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((i=this._targets[s.stamp(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!s.DomEvent._isExternalTarget(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n.length||a||o||!s.DomEvent._isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!s.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&s.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=s.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&s.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=o instanceof s.Marker;r.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?o.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(e,r,!0),r.originalEvent._stopped||i[l].options.nonBubblingEvents&&s.Util.indexOf(i[l].options.nonBubblingEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return s.DomUtil.getPosition(this._mapPane)||new s.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return s.bounds([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new s.Bounds(n.subtract(o),n.add(o)),a=this._getBoundsOffset(r,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new s.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=s.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max),a=this._rebound(o.x,-r.x),l=this._rebound(o.y,-r.y);return new s.Point(a,l)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=s.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){s.DomUtil.removeClass(this._mapPane,"egis-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=s.DomUtil.create("div","egis-proxy egis-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=s.DomUtil.TRANSFORM,n=t.style[i];s.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===t.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),i=this.getZoom();s.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("egis-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(i.animate!==!0&&!this.getSize().contains(o))&&(s.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,s.DomUtil.addClass(this._mapPane,"egis-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(s.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(s.DomUtil.removeClass(this._mapPane,"egis-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),s.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),s.map=function(t,e){return new s.Map(t,e)},s.Layer=s.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),s.Map.include({addLayer:function(t){var e=s.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=s.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?s.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var s=this._zoomBoundLayers[n].options;t=void 0===s.minZoom?t:Math.min(t,s.minZoom),e=void 0===s.maxZoom?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-(1/0)?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var r="_leaflet_events";s.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._on(t,o,e[o],i);else{e=s.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._on(t,e[r],i,n)}return this},off:function(t,e,i,n){if("object"==typeof e)for(var o in e)this._off(t,o,e[o],i);else{e=s.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._off(t,e[r],i,n)}return this},_on:function(e,i,n,o){var a=i+s.stamp(n)+(o?"_"+s.stamp(o):"");if(e[r]&&e[r][a])return this;var l=function(i){return n.call(o||e,i||t.event)},h=l;return s.Browser.pointer&&0===i.indexOf("touch")?this.addPointerListener(e,i,l,a):!s.Browser.touch||"dblclick"!==i||!this.addDoubleTapListener||s.Browser.pointer&&s.Browser.chrome?"addEventListener"in e?"mousewheel"===i?e.addEventListener("onwheel"in e?"wheel":"mousewheel",l,!1):"mouseenter"===i||"mouseleave"===i?(l=function(i){i=i||t.event,s.DomEvent._isExternalTarget(e,i)&&h(i)},e.addEventListener("mouseenter"===i?"mouseover":"mouseout",l,!1)):("click"===i&&s.Browser.android&&(l=function(t){return s.DomEvent._filterClick(t,h)}),e.addEventListener(i,l,!1)):"attachEvent"in e&&e.attachEvent("on"+i,l):this.addDoubleTapListener(e,l,a),e[r]=e[r]||{},e[r][a]=l,this},_off:function(t,e,i,n){var o=e+s.stamp(i)+(n?"_"+s.stamp(n):""),a=t[r]&&t[r][o];return a?(s.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,o):s.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,o):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[r][o]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,s.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return s.DomEvent.on(t,"mousewheel",s.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=s.DomEvent.stopPropagation;return s.DomEvent.on(t,s.Draggable.START.join(" "),e),s.DomEvent.on(t,{click:s.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return s.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new s.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new s.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:s.Browser.win&&s.Browser.chrome?2:s.Browser.gecko?t.devicePixelRatio:1,getWheelDelta:function(t){return s.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/s.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){s.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=s.DomEvent._lastClick&&i-s.DomEvent._lastClick;if(n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated)return void s.DomEvent.stop(t);s.DomEvent._lastClick=i,e(t)}},s.DomEvent.addListener=s.DomEvent.on,s.DomEvent.removeListener=s.DomEvent.off,s.PosAnimation=s.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=s.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=s.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),s.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){s.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),s.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:s.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=r*Math.sin(n),l=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(l,1e-10)),new s.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/n),l=Math.PI/2-2*Math.atan(a),h=0,u=.1;h<15&&Math.abs(u)>1e-7;h++)e=r*Math.sin(l),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(a*e)-l,l+=u;return new s.LatLng(l*i,t.x*i/n)}},s.CRS.EPSG3395=s.extend({},s.CRS.Earth,{code:"EPSG:3395",projection:s.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*s.Projection.Mercator.R);return new s.Transformation(t,.5,-t,.5)}()}),s.GridLayer=s.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:s.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){s.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),s.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(s.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(s.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return i.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof s.Point?t:new s.Point(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),s=0,o=i.length;s<o;s++)e=i[s].style.zIndex,i[s]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!s.Browser.ielt9){s.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);s.DomUtil.setOpacity(o.el,r),r<1?e=!0:(o.active&&(i=!0),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(s.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=s.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=s.DomUtil.create("div","egis-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?this._levels[i].el.style.zIndex=e-Math.abs(t-i):(s.DomUtil.remove(this._levels[i].el),this._removeTilesAtZoom(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||(n=this._levels[t]={},n.el=s.DomUtil.create("div","egis-tile-container egis-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),s.Util.falseFn(n.el.offsetWidth)),this._level=n,n}},_pruneTiles:function(){if(this._map){
var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)s.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,l=new s.Point(+o,+r);l.z=+a;var h=this._tileCoordsToKey(l),u=this._tiles[h];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>n&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new s.Point(o,r);a.z=i+1;var l=this._tileCoordsToKey(a),h=this._tiles[l];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,i,n){var s=Math.round(e);(void 0!==this.options.maxZoom&&s>this.options.maxZoom||void 0!==this.options.minZoom&&s<this.options.minZoom)&&(s=void 0);var o=this.options.updateWhenZooming&&s!==this._tileZoom;n&&!o||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==s&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();s.Browser.any3d?s.DomUtil.setTransform(t.el,o,n):s.DomUtil.setPosition(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,s=this._map.getPixelWorldBounds(this._tileZoom);s&&(this._globalTileRange=this._pxBoundsToTileRange(s)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new s.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var n=e.getZoom();if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var o=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(o),a=r.getCenter(),l=[],h=this.options.keepBuffer,u=new s.Bounds(r.getBottomLeft().subtract([h,-h]),r.getTopRight().add([h,-h]));for(var c in this._tiles){var p=this._tiles[c].coords;p.z===this._tileZoom&&u.contains(s.point(p.x,p.y))||(this._tiles[c].current=!1)}if(Math.abs(n-this._tileZoom)>1)return void this._setView(t,n);for(var d=r.min.y;d<=r.max.y;d++)for(var y=r.min.x;y<=r.max.x;y++){var f=new s.Point(y,d);if(f.z=this._tileZoom,this._isValidTile(f)){var _=this._tiles[this._tileCoordsToKey(f)];_?_.current=!0:l.push(f)}}if(l.sort(function(t,e){return t.distanceTo(a)-e.distanceTo(a)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var m=i.createDocumentFragment();for(y=0;y<l.length;y++)this._addTile(l[y],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return s.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i),r=e.unproject(n,t.z),a=e.unproject(o,t.z),l=new s.LatLngBounds(r,a);return this.options.noWrap||e.wrapLatLngBounds(l),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new s.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(s.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){s.DomUtil.addClass(t,"egis-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=s.Util.falseFn,t.onmousemove=s.Util.falseFn,s.Browser.ielt9&&this.options.opacity<1&&s.DomUtil.setOpacity(t,this.options.opacity),s.Browser.android&&!s.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),s.bind(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&s.Util.requestAnimFrame(s.bind(this._tileReady,this,t,null,o)),s.DomUtil.setPosition(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(s.DomUtil.setOpacity(i.el,0),s.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=s.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(s.DomUtil.addClass(i.el,"egis-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),s.Browser.ielt9||!this._map._fadeAnimated?s.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(s.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new s.Point(this._wrapX?s.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?s.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new s.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),s.gridLayer=function(t){return new s.GridLayer(t)},s.TileLayer=s.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=s.setOptions(this,e),e.detectRetina&&s.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),s.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=i.createElement("img");return s.DomEvent.on(n,"load",s.bind(this._tileOnLoad,this,e,n)),s.DomEvent.on(n,"error",s.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:s.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return s.Util.template(this._url,s.extend(e,this.options))},_tileOnLoad:function(t,e){s.Browser.ielt9?setTimeout(s.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.src!==n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=s.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.minNativeZoom,o=this.options.maxNativeZoom;return null!==n&&i<n?e.divideBy(t.getZoomScale(n,i)).round():null!==o&&i>o?e.divideBy(t.getZoomScale(o,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset,s=this.options.minNativeZoom,o=this.options.maxNativeZoom;return i&&(t=e-t),t+=n,null!==s&&t<s?s:null!==o&&t>o?o:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=s.Util.falseFn,e.onerror=s.Util.falseFn,e.complete||(e.src=s.Util.emptyImageUrl,s.DomUtil.remove(e)))}}),s.tileLayer=function(t,e){return new s.TileLayer(t,e)},s.TileLayer.WMS=s.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=s.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=s.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&s.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,s.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),o=(this._wmsVersion>=1.3&&this._crs===s.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),r=s.TileLayer.prototype.getTileUrl.call(this,t);return r+s.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return s.extend(this.wmsParams,t),e||this.redraw(),this}}),s.tileLayer.wms=function(t,e){return new s.TileLayer.WMS(t,e)},s.ImageOverlay=s.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=s.latLngBounds(e),s.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(s.DomUtil.addClass(this._image,"egis-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){s.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&s.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&s.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=s.DomUtil.create("img","egis-image-layer "+(this._zoomAnimated?"egis-zoom-animated":""));t.onselectstart=s.Util.falseFn,t.onmousemove=s.Util.falseFn,t.onload=s.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;s.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new s.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();s.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){s.DomUtil.setOpacity(this._image,this.options.opacity)}}),s.imageOverlay=function(t,e,i){return new s.ImageOverlay(t,e,i)},s.Icon=s.Class.extend({initialize:function(t){s.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=s.point(n),r=s.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="egis-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return e=e||i.createElement("img"),e.src=t,e},_getIconUrl:function(t){return s.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),s.icon=function(t){return new s.Icon(t)},s.Icon.Default=s.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return s.Icon.Default.imagePath||(s.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||s.Icon.Default.imagePath)+s.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=s.DomUtil.create("div","egis-default-icon-path",i.body),e=s.DomUtil.getStyle(t,"background-image")||s.DomUtil.getStyle(t,"backgroundImage");return i.body.removeChild(t),0===e.indexOf("url")?e.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),s.Marker=s.Layer.extend({options:{icon:new s.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=s.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="egis-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),s.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(s.DomUtil.addClass(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),s.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&s.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){s.DomUtil.setPosition(this._icon,t),this._shadow&&s.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(s.DomUtil.addClass(this._icon,"egis-interactive"),this.addInteractiveTarget(this._icon),s.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new s.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;s.DomUtil.setOpacity(this._icon,t),this._shadow&&s.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),s.marker=function(t,e){return new s.Marker(t,e)},s.DivIcon=s.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"egis-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:i.createElement("div"),n=this.options;if(e.innerHTML=n.html!==!1?n.html:"",n.bgPos){var o=s.point(n.bgPos);e.style.backgroundPosition=-o.x+"px "+-o.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}}),s.divIcon=function(t){return new s.DivIcon(t)},s.DivOverlay=s.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){s.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&s.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&s.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(s.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(s.bind(s.DomUtil.remove,s.DomUtil,this._container),200)):s.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=s.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&s.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&s.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=s.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?s.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),s.Popup=s.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){s.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof s.Path||this._source.on("preclick",s.DomEvent.stopPropagation))},onRemove:function(t){s.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof s.Path||this._source.off("preclick",s.DomEvent.stopPropagation))},getEvents:function(){var t=s.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="egis-popup",e=this._container=s.DomUtil.create("div",t+" "+(this.options.className||"")+" egis-zoom-animated");if(this.options.closeButton){var i=this._closeButton=s.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",s.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=s.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=s.DomUtil.create("div",t+"-content",n),s.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",s.DomEvent.stopPropagation),this._tipContainer=s.DomUtil.create("div",t+"-tip-container",e),this._tip=s.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight;o&&n>o?(e.height=o+"px",s.DomUtil.addClass(t,"egis-popup-scrolled")):s.DomUtil.removeClass(t,"egis-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();s.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(s.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new s.Point(this._containerLeft,-i-this._containerBottom);o._add(s.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(o),a=s.point(this.options.autoPanPadding),l=s.point(this.options.autoPanPaddingTopLeft||a),h=s.point(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,p=0;r.x+n+h.x>u.x&&(c=r.x+n-u.x+h.x),r.x-c-l.x<0&&(c=r.x-l.x),r.y+i+h.y>u.y&&(p=r.y+i-u.y+h.y),r.y-p-l.y<0&&(p=r.y-l.y),(c||p)&&t.fire("autopanstart").panBy([c,p])}},_onCloseButtonClick:function(t){this._close(),s.DomEvent.stop(t)},_getAnchor:function(){return s.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),s.popup=function(t,e){return new s.Popup(t,e)},s.Map.mergeOptions({closePopupOnClick:!0}),s.Map.include({openPopup:function(t,e,i){return t instanceof s.Popup||(t=new s.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),s.Layer.include({bindPopup:function(t,e){return t instanceof s.Popup?(s.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new s.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof s.Layer||(e=t,t=this),t instanceof s.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map){if(s.DomEvent.stop(t),e instanceof s.Path)return void this.openPopup(t.layer||t.target,t.latlng);this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),s.Tooltip=s.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){s.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){s.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=s.DivOverlay.prototype.getEvents.call(this);return s.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="egis-tooltip "+(this.options.className||"")+" egis-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=s.DomUtil.create("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,l=i.offsetHeight,h=s.point(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(s.point(-a/2+h.x,-l+h.y+u.y,!0)):"bottom"===r?t=t.subtract(s.point(a/2-h.x,-h.y,!0)):"center"===r?t=t.subtract(s.point(a/2+h.x,l/2-u.y+h.y,!0)):"right"===r||"auto"===r&&o.x<n.x?(r="right",t=t.add(s.point(h.x+u.x,u.y-l/2+h.y,!0))):(r="left",t=t.subtract(s.point(a+u.x-h.x,l/2-u.y-h.y,!0))),s.DomUtil.removeClass(i,"egis-tooltip-right"),s.DomUtil.removeClass(i,"egis-tooltip-left"),s.DomUtil.removeClass(i,"egis-tooltip-top"),s.DomUtil.removeClass(i,"egis-tooltip-bottom"),s.DomUtil.addClass(i,"egis-tooltip-"+r),s.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&s.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return s.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),s.tooltip=function(t,e){return new s.Tooltip(t,e)},s.Map.include({openTooltip:function(t,e,i){return t instanceof s.Tooltip||(t=new s.Tooltip(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),s.Layer.include({bindTooltip:function(t,e){return t instanceof s.Tooltip?(s.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=s.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),s.Browser.touch&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof s.Layer||(e=t,t=this),t instanceof s.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(s.DomUtil.addClass(this._tooltip._container,"egis-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(s.DomUtil.removeClass(this._tooltip._container,"egis-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}}),s.LayerGroup=s.Layer.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){
return s.stamp(t)}}),s.layerGroup=function(t){return new s.LayerGroup(t)},s.FeatureGroup=s.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),s.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),s.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new s.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),s.featureGroup=function(t){return new s.FeatureGroup(t)},s.Renderer=s.Layer.extend({options:{padding:.1},initialize:function(t){s.setOptions(this,t),s.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&s.DomUtil.addClass(this._container,"egis-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){s.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=s.DomUtil.getPosition(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),l=a.subtract(r),h=o.multiplyBy(-i).add(n).add(o).subtract(l);s.Browser.any3d?s.DomUtil.setTransform(this._container,h,i):s.DomUtil.setPosition(this._container,h)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new s.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),s.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&s.canvas()||s.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=s.SVG&&s.svg({pane:t})||s.Canvas&&s.canvas({pane:t}),this._paneRenderers[t]=e),e}}),s.Path=s.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return s.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(s.Browser.touch?10:0)}}),s.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var i=t.length,n=typeof Uint8Array!=void 0+""?Uint8Array:Array,s=new n(i);s[0]=s[i-1]=1,this._simplifyDPStep(t,s,e,0,i-1);var o,r=[];for(o=0;o<i;o++)s[o]&&r.push(t[o]);return r},_simplifyDPStep:function(t,e,i,n,s){var o,r,a,l=0;for(r=n+1;r<=s-1;r++)(a=this._sqClosestPointOnSegment(t[r],t[n],t[s],!0))>l&&(o=r,l=a);l>i&&(e[o]=1,this._simplifyDPStep(t,e,i,n,o),this._simplifyDPStep(t,e,i,o,s))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,s=0,o=t.length;n<o;n++)this._sqDist(t[n],t[s])>e&&(i.push(t[n]),s=n);return s<o-1&&i.push(t[o-1]),i},clipSegment:function(t,e,i,n,s){var o,r,a,l=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(l|h))return[t,e];if(l&h)return!1;o=l||h,r=this._getEdgeIntersection(t,e,o,i,s),a=this._getBitCode(r,i),o===l?(t=r,l=a):(e=r,h=a)}},_getEdgeIntersection:function(t,e,i,n,o){var r,a,l=e.x-t.x,h=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+l*(c.y-t.y)/h,a=c.y):4&i?(r=t.x+l*(u.y-t.y)/h,a=u.y):2&i?(r=c.x,a=t.y+h*(c.x-t.x)/l):1&i&&(r=u.x,a=t.y+h*(u.x-t.x)/l),new s.Point(r,a,o)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var o,r=e.x,a=e.y,l=i.x-r,h=i.y-a,u=l*l+h*h;return u>0&&(o=((t.x-r)*l+(t.y-a)*h)/u,o>1?(r=i.x,a=i.y):o>0&&(r+=l*o,a+=h*o)),l=t.x-r,h=t.y-a,n?l*l+h*h:new s.Point(r,a)}},s.Polyline=s.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){s.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=s.LineUtil._sqClosestPointOnSegment,a=0,l=this._parts.length;a<l;a++)for(var h=this._parts[a],u=1,c=h.length;u<c;u++){e=h[u-1],i=h[u];var p=r(t,e,i,!0);p<n&&(n=p,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,s,o,r,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<l-1;t++)if(s=a[t],o=a[t+1],i=s.distanceTo(o),(n+=i)>e)return r=(n-e)/i,this._map.layerPointToLatLng([o.x-r*(o.x-s.x),o.y-r*(o.y-s.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=s.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new s.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return s.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=s.Polyline._flat(t),n=0,o=t.length;n<o;n++)i?(e[n]=s.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new s.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new s.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof s.LatLng,a=t.length;if(r){for(o=[],n=0;n<a;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,o,r,a,l,h=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(l=this._rings[e],i=0,r=l.length;i<r-1;i++)(a=s.LineUtil.clipSegment(l[i],l[i+1],t,i,!0))&&(h[n]=h[n]||[],h[n].push(a[0]),a[1]===l[i+1]&&i!==r-2||(h[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=s.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),s.polyline=function(t,e){return new s.Polyline(t,e)},s.Polyline._flat=function(t){return!s.Util.isArray(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]},s.PolyUtil={},s.PolyUtil.clipPolygon=function(t,e,i){var n,o,r,a,l,h,u,c,p,d=[1,4,2,8],y=s.LineUtil;for(o=0,u=t.length;o<u;o++)t[o]._code=y._getBitCode(t[o],e);for(a=0;a<4;a++){for(c=d[a],n=[],o=0,u=t.length,r=u-1;o<u;r=o++)l=t[o],h=t[r],l._code&c?h._code&c||(p=y._getEdgeIntersection(h,l,c,e,i),p._code=y._getBitCode(p,e),n.push(p)):(h._code&c&&(p=y._getEdgeIntersection(h,l,c,e,i),p._code=y._getBitCode(p,e),n.push(p)),n.push(l));t=n}return t},s.Polygon=s.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,s,o,r,a,l,h=this._rings[0],u=h.length;if(!u)return null;for(o=r=a=0,t=0,e=u-1;t<u;e=t++)i=h[t],n=h[e],s=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*s,a+=(i.y+n.y)*s,o+=3*s;return l=0===o?h[0]:[r/o,a/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=s.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof s.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){s.Polyline.prototype._setLatLngs.call(this,t),s.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return s.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new s.Point(e,e);if(t=new s.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,o=0,r=this._rings.length;o<r;o++)n=s.PolyUtil.clipPolygon(this._rings[o],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),s.polygon=function(t,e){return new s.Polygon(t,e)},s.Rectangle=s.Polygon.extend({initialize:function(t,e){s.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=s.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),s.rectangle=function(t,e){return new s.Rectangle(t,e)},s.CircleMarker=s.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){s.setOptions(this,e),this._latlng=s.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=s.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return s.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new s.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),s.circleMarker=function(t,e){return new s.CircleMarker(t,e)},s.Circle=s.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=s.extend({},i,{radius:e})),s.setOptions(this,e),this._latlng=s.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new s.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:s.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===s.CRS.Earth.distance){var o=Math.PI/180,r=this._mRadius/s.CRS.Earth.R/o,a=i.project([e+r,t]),l=i.project([e-r,t]),h=a.add(l).divideBy(2),u=i.unproject(h).lat,c=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(u*o))/(Math.cos(e*o)*Math.cos(u*o)))/o;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=h.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(h.x-i.project([u,t-c]).x),1),this._radiusY=Math.max(Math.round(h.y-a.y),1)}else{var p=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(p).x}this._updateBounds()}}),s.circle=function(t,e,i){return new s.Circle(t,e,i)},s.SVG=s.Renderer.extend({getEvents:function(){var t=s.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=s.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=s.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){s.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),s.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=s.SVG.create("path");t.options.className&&s.DomUtil.addClass(e,t.options.className),t.options.interactive&&s.DomUtil.addClass(e,"egis-interactive"),this._updateStyle(t),this._layers[s.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){s.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,s.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n=t._radiusY||i,s="a"+i+","+n+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+s+2*i+",0 "+s+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){s.DomUtil.toFront(t._path)},_bringToBack:function(t){s.DomUtil.toBack(t._path)}}),s.extend(s.SVG,{create:function(t){return i.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,o,r,a,l,h="";for(i=0,o=t.length;i<o;i++){for(a=t[i],n=0,r=a.length;n<r;n++)l=a[n],h+=(n?"L":"M")+l.x+" "+l.y;h+=e?s.Browser.svg?"z":"x":""}return h||"M0 0"}}),s.Browser.svg=!(!i.createElementNS||!s.SVG.create("svg").createSVGRect),s.svg=function(t){return s.Browser.svg||s.Browser.vml?new s.SVG(t):null},s.Browser.vml=!s.Browser.svg&&function(){try{var t=i.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),s.SVG.include(s.Browser.vml?{_initContainer:function(){this._container=s.DomUtil.create("div","egis-vml-container")},_update:function(){this._map._animatingZoom||(s.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=s.SVG.create("shape");s.DomUtil.addClass(e,"egis-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=s.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;s.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[s.stamp(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=s.SVG.create("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=s.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=s.SVG.create("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){s.DomUtil.toFront(t._container)},_bringToBack:function(t){s.DomUtil.toBack(t._container)}}:{}),s.Browser.vml&&(s.SVG.create=function(){try{return i.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return i.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return i.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),s.Canvas=s.Renderer.extend({getEvents:function(){var t=s.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){s.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=i.createElement("canvas");s.DomEvent.on(t,"mousemove",s.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},s.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=s.Browser.retina?2:1;s.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",s.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){s.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[s.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||s.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new s.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,s,o,r=t._parts,a=r.length,l=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),l.setLineDash&&l.setLineDash(t.options&&t.options._dashArray||[]),i=0;i<a;i++){for(n=0,s=r[i].length;n<s;n++)o=r[i][n],l[n?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=t._radius,s=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==s&&(i.save(),i.scale(1,s)),i.beginPath(),i.arc(e.x,e.y/s,n,0,2*Math.PI,!1),1!==s&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(s.DomEvent._fakeStop(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(s.DomUtil.removeClass(this._container,"egis-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,o=this._drawFirst;o;o=o.next)i=o.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(s.DomUtil.addClass(this._container,"egis-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),s.Browser.canvas=function(){return!!i.createElement("canvas").getContext}(),s.canvas=function(t){return s.Browser.canvas?new s.Canvas(t):null},s.Polyline.prototype._containsPoint=function(t,e){var i,n,o,r,a,l,h=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(l=this._parts[i],n=0,a=l.length,o=a-1;n<a;o=n++)if((e||0!==n)&&s.LineUtil.pointToSegmentDistance(t,l[o],l[n])<=h)return!0;return!1},s.Polygon.prototype._containsPoint=function(t){var e,i,n,o,r,a,l,h,u=!1;if(!this._pxBounds.contains(t))return!1;for(o=0,l=this._parts.length;o<l;o++)for(e=this._parts[o],r=0,h=e.length,a=h-1;r<h;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||s.Polyline.prototype._containsPoint.call(this,t,!0)},s.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},s.GeoJSON=s.FeatureGroup.extend({initialize:function(t,e){s.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=s.Util.isArray(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)n=o[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=s.GeoJSON.geometryToLayer(t,r);return a?(a.feature=s.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=s.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),s.extend(s.GeoJSON,{geometryToLayer:function(t,e){var i,n,o,r,a="Feature"===t.type?t.geometry:t,l=a?a.coordinates:null,h=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!l&&!a)return null;switch(a.type){case"Point":return i=c(l),u?u(t,i):new s.Marker(i);case"MultiPoint":for(o=0,r=l.length;o<r;o++)i=c(l[o]),h.push(u?u(t,i):new s.Marker(i));return new s.FeatureGroup(h);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(l,"LineString"===a.type?0:1,c),new s.Polyline(n,e);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(l,"Polygon"===a.type?1:2,c),new s.Polygon(n,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var p=this.geometryToLayer({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);p&&h.push(p)}return new s.FeatureGroup(h);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new s.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){for(var n,s=[],o=0,r=t.length;o<r;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),s.push(n);return s},latLngToCoords:function(t){return void 0!==t.alt?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,i){for(var n=[],o=0,r=t.length;o<r;o++)n.push(e?s.GeoJSON.latLngsToCoords(t[o],e-1,i):s.GeoJSON.latLngToCoords(t[o]));return!e&&i&&n.push(n[0]),n},getFeature:function(t,e){return t.feature?s.extend({},t.feature,{geometry:e}):s.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return s.GeoJSON.getFeature(this,{type:"Point",coordinates:s.GeoJSON.latLngToCoords(this.getLatLng())})}};s.Marker.include(a),s.Circle.include(a),s.CircleMarker.include(a),s.Polyline.prototype.toGeoJSON=function(){var t=!s.Polyline._flat(this._latlngs),e=s.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return s.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},s.Polygon.prototype.toGeoJSON=function(){var t=!s.Polyline._flat(this._latlngs),e=t&&!s.Polyline._flat(this._latlngs[0]),i=s.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(i=[i]),s.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:i})},s.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),s.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var n=t.toGeoJSON();i.push(e?n.geometry:s.GeoJSON.asFeature(n))}}),e?s.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}}),s.geoJSON=function(t,e){return new s.GeoJSON(t,e)},s.geoJson=s.geoJSON,s.Draggable=s.Evented.extend({options:{clickTolerance:3},statics:{START:s.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(s.DomEvent.on(this._dragStartTarget,s.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(s.Draggable._dragging===this&&this.finishDrag(),s.DomEvent.off(this._dragStartTarget,s.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!s.DomUtil.hasClass(this._element,"egis-zoom-anim")&&!(s.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(s.Draggable._dragging=this,this._preventOutline&&s.DomUtil.preventOutline(this._element),s.DomUtil.disableImageDrag(),s.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new s.Point(e.clientX,e.clientY),s.DomEvent.on(i,s.Draggable.MOVE[t.type],this._onMove,this).on(i,s.Draggable.END[t.type],this._onUp,this)}},_onMove:function(e){if(!e._simulated&&this._enabled){if(e.touches&&e.touches.length>1)return void(this._moved=!0);var n=e.touches&&1===e.touches.length?e.touches[0]:e,o=new s.Point(n.clientX,n.clientY),r=o.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(s.DomEvent.preventDefault(e),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=s.DomUtil.getPosition(this._element).subtract(r),s.DomUtil.addClass(i.body,"egis-dragging"),this._lastTarget=e.target||e.srcElement,t.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),s.DomUtil.addClass(this._lastTarget,"egis-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,s.Util.cancelAnimFrame(this._animRequest),this._lastEvent=e,this._animRequest=s.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),s.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){s.DomUtil.removeClass(i.body,"egis-dragging"),this._lastTarget&&(s.DomUtil.removeClass(this._lastTarget,"egis-drag-target"),this._lastTarget=null);for(var t in s.Draggable.MOVE)s.DomEvent.off(i,s.Draggable.MOVE[t],this._onMove,this).off(i,s.Draggable.END[t],this._onUp,this);s.DomUtil.enableImageDrag(),s.DomUtil.enableTextSelection(),this._moved&&this._moving&&(s.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,s.Draggable._dragging=!1}}),s.Handler=s.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),s.Map.mergeOptions({dragging:!0,inertia:!s.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),
s.Map.Drag=s.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new s.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}s.DomUtil.addClass(this._map._container,"egis-grab egis-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){s.DomUtil.removeClass(this._map._container,"egis-grab"),s.DomUtil.removeClass(this._map._container,"egis-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=s.latLngBounds(this._map.options.maxBounds);this._offsetLimit=s.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,s=(n-e+i)%t+e-i,o=(n+e+i)%t-e-i,r=Math.abs(s+i)<Math.abs(o+i)?s:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,l=o.multiplyBy(a/r),h=l.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,h),c=l.multiplyBy(u/h),p=u/(i.inertiaDeceleration*a),d=c.multiplyBy(-p/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),s.Util.requestAnimFrame(function(){e.panBy(d,{duration:p,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),s.Map.addInitHook("addHandler","dragging",s.Map.Drag),s.Map.mergeOptions({doubleClickZoom:!0}),s.Map.DoubleClickZoom=s.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,s=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(s):e.setZoomAround(t.containerPoint,s)}}),s.Map.addInitHook("addHandler","doubleClickZoom",s.Map.DoubleClickZoom),s.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),s.Map.ScrollWheelZoom=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){s.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=s.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s.bind(this._performZoom,this),n),s.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),s=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,o=i?Math.ceil(s/i)*i:s,r=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),s.Map.addInitHook("addHandler","scrollWheelZoom",s.Map.ScrollWheelZoom),s.extend(s.DomEvent,{_touchstart:s.Browser.msPointer?"MSPointerDown":s.Browser.pointer?"pointerdown":"touchstart",_touchend:s.Browser.msPointer?"MSPointerUp":s.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function n(t){var e;if(s.Browser.pointer){if(!s.Browser.edge||"mouse"===t.pointerType)return;e=s.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var i=Date.now(),n=i-(r||i);a=t.touches?t.touches[0]:t,l=n>0&&n<=h,r=i}}function o(t){if(l&&!a.cancelBubble){if(s.Browser.pointer){if(!s.Browser.edge||"mouse"===t.pointerType)return;var i,n,o={};for(n in a)i=a[n],o[n]=i&&i.bind?i.bind(a):i;a=o}a.type="dblclick",e(a),r=null}}var r,a,l=!1,h=250,u="_leaflet_",c=this._touchstart,p=this._touchend;return t[u+c+i]=n,t[u+p+i]=o,t[u+"dblclick"+i]=e,t.addEventListener(c,n,!1),t.addEventListener(p,o,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],o=t[i+this._touchend+e],r=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,o,!1),s.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),s.extend(s.DomEvent,{POINTER_DOWN:s.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:s.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:s.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:s.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,e,n){var o=s.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;s.DomEvent.preventDefault(t)}this._handlePointer(t,e)},this);if(t["_leaflet_touchstart"+n]=o,t.addEventListener(this.POINTER_DOWN,o,!1),!this._pointerDocListener){var r=s.bind(this._globalPointerUp,this);i.documentElement.addEventListener(this.POINTER_DOWN,s.bind(this._globalPointerDown,this),!0),i.documentElement.addEventListener(this.POINTER_MOVE,s.bind(this._globalPointerMove,this),!0),i.documentElement.addEventListener(this.POINTER_UP,r,!0),i.documentElement.addEventListener(this.POINTER_CANCEL,r,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var i in this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=s.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=s.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),s.Map.mergeOptions({touchZoom:s.Browser.touch&&!s.Browser.android23,bounceAtZoomLimits:!0}),s.Map.TouchZoom=s.Handler.extend({addHooks:function(){s.DomUtil.addClass(this._map._container,"egis-touch-zoom"),s.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){s.DomUtil.removeClass(this._map._container,"egis-touch-zoom"),s.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),o=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(o)._divideBy(2))),this._startDist=n.distanceTo(o),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),s.DomEvent.on(i,"touchmove",this._onTouchMove,this).on(i,"touchend",this._onTouchEnd,this),s.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),s.Util.cancelAnimFrame(this._animRequest);var a=s.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=s.Util.requestAnimFrame(a,this,!0),s.DomEvent.preventDefault(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,s.Util.cancelAnimFrame(this._animRequest),s.DomEvent.off(i,"touchmove",this._onTouchMove).off(i,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}}),s.Map.addInitHook("addHandler","touchZoom",s.Map.TouchZoom),s.Map.mergeOptions({tap:!0,tapTolerance:15}),s.Map.Tap=s.Handler.extend({addHooks:function(){s.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){s.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(s.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new s.Point(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.addClass(n,"egis-active"),this._holdTimeout=setTimeout(s.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),s.DomEvent.on(i,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),s.DomEvent.off(i,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&s.DomUtil.removeClass(n,"egis-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new s.Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(e,n){var s=i.createEvent("MouseEvents");s._simulated=!0,n.target._simulatedClick=!0,s.initMouseEvent(e,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(s)}}),s.Browser.touch&&!s.Browser.pointer&&s.Map.addInitHook("addHandler","tap",s.Map.Tap),s.Map.mergeOptions({boxZoom:!0}),s.Map.BoxZoom=s.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){s.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){s.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._resetState(),s.DomUtil.disableTextSelection(),s.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),s.DomEvent.on(i,{contextmenu:s.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=s.DomUtil.create("div","egis-zoom-box",this._container),s.DomUtil.addClass(this._container,"egis-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new s.Bounds(this._point,this._startPoint),i=e.getSize();s.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(s.DomUtil.remove(this._box),s.DomUtil.removeClass(this._container,"egis-crosshair")),s.DomUtil.enableTextSelection(),s.DomUtil.enableImageDrag(),s.DomEvent.off(i,{contextmenu:s.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(s.bind(this._resetState,this),0);var e=new s.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),s.Map.addInitHook("addHandler","boxZoom",s.Map.BoxZoom),s.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),s.Map.Keyboard=s.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),s.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),s.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=i.body,n=i.documentElement,s=e.scrollTop||n.scrollTop,o=e.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(o,s)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},s=this.keyCodes;for(e=0,i=s.left.length;e<i;e++)n[s.left[e]]=[-1*t,0];for(e=0,i=s.right.length;e<i;e++)n[s.right[e]]=[t,0];for(e=0,i=s.down.length;e<i;e++)n[s.down[e]]=[0,t];for(e=0,i=s.up.length;e<i;e++)n[s.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},s=this.keyCodes;for(e=0,i=s.zoomIn.length;e<i;e++)n[s.zoomIn[e]]=t;for(e=0,i=s.zoomOut.length;e<i;e++)n[s.zoomOut[e]]=-t},_addHooks:function(){s.DomEvent.on(i,"keydown",this._onKeyDown,this)},_removeHooks:function(){s.DomEvent.off(i,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=s.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}s.DomEvent.stop(t)}}}),s.Map.addInitHook("addHandler","keyboard",s.Map.Keyboard),s.Handler.MarkerDrag=s.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new s.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),s.DomUtil.addClass(t,"egis-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&s.DomUtil.removeClass(this._marker._icon,"egis-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=s.DomUtil.getPosition(e._icon),o=e._map.layerPointToLatLng(n);i&&s.DomUtil.setPosition(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),s.Control=s.Class.extend({options:{position:"topright"},initialize:function(t){s.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return s.DomUtil.addClass(e,"egis-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(s.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),s.control=function(t){return new s.Control(t)},s.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var r=i+t+" "+i+o;e[t+o]=s.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="egis-",n=this._controlContainer=s.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){s.DomUtil.remove(this._controlContainer)}}),s.Control.Zoom=s.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="egis-control-zoom",i=s.DomUtil.create("div",e+" egis-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var r=s.DomUtil.create("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),s.DomEvent.on(r,"mousedown dblclick",s.DomEvent.stopPropagation).on(r,"click",s.DomEvent.stop).on(r,"click",o,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="egis-disabled";s.DomUtil.removeClass(this._zoomInButton,e),s.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&s.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&s.DomUtil.addClass(this._zoomInButton,e)}}),s.Map.mergeOptions({zoomControl:!0}),s.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new s.Control.Zoom,this.addControl(this.zoomControl))}),s.control.zoom=function(t){return new s.Control.Zoom(t)},s.Control.Attribution=s.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){s.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=s.DomUtil.create("div","egis-control-attribution"),s.DomEvent&&s.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),s.Map.mergeOptions({attributionControl:!0}),s.Map.addInitHook(function(){this.options.attributionControl&&(new s.Control.Attribution).addTo(this)}),s.control.attribution=function(t){return new s.Control.Attribution(t)},s.Control.Scale=s.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=s.DomUtil.create("div","egis-control-scale"),i=this.options;return this._addScales(i,"egis-control-scale-line",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=s.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=s.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,s=3.2808399*t;s>5280?(e=s/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(s),this._updateScale(this._iScale,n+" ft",n/s))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),s.control.scale=function(t){return new s.Control.Scale(t)},s.Control.Layers=s.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){s.setOptions(this,i),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){s.DomUtil.addClass(this._container,"egis-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(s.DomUtil.addClass(this._form,"egis-control-layers-scrollbar"),this._form.style.height=t+"px"):s.DomUtil.removeClass(this._form,"egis-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return s.DomUtil.removeClass(this._container,"egis-control-layers-expanded"),this},_initLayout:function(){var t="egis-control-layers",e=this._container=s.DomUtil.create("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),s.DomEvent.disableClickPropagation(e),s.Browser.touch||s.DomEvent.disableScrollPropagation(e);var n=this._form=s.DomUtil.create("form",t+"-list");i&&(this._map.on("click",this.collapse,this),s.Browser.android||s.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=s.DomUtil.create("a",t+"-toggle",e);o.href="#",o.title="Layers",s.Browser.touch?s.DomEvent.on(o,"click",s.DomEvent.stop).on(o,"click",this.expand,this):s.DomEvent.on(o,"focus",this.expand,this),s.DomEvent.on(n,"click",function(){setTimeout(s.bind(this._onInputClick,this),0)},this),i||this.expand(),this._baseLayersList=s.DomUtil.create("div",t+"-base",n),this._separator=s.DomUtil.create("div",t+"-separator",n),this._overlaysList=s.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(s.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;s.DomUtil.empty(this._baseLayersList),s.DomUtil.empty(this._overlaysList);var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="egis-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",s=i.createElement("div");return s.innerHTML=n,s.firstChild},_addItem:function(t){var e,n=i.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(e=i.createElement("input"),e.type="checkbox",e.className="egis-control-layers-selector",e.defaultChecked=o):e=this._createRadioElement("egis-base-layers",o),e.layerId=s.stamp(t.layer),s.DomEvent.on(e,"click",this._onInputClick,this);var r=i.createElement("span");r.innerHTML=" "+t.name;var a=i.createElement("div");return n.appendChild(a),a.appendChild(e),a.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),s=[],o=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,i=this._map.hasLayer(e),t.checked&&!i?s.push(e):!t.checked&&i&&o.push(e);for(r=0;r<o.length;r++)this._map.removeLayer(o[r]);for(r=0;r<s.length;r++)this._map.addLayer(s[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._form.getElementsByTagName("input"),n=this._map.getZoom(),s=i.length-1;s>=0;s--)t=i[s],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),s.control.layers=function(t,e,i){return new s.Control.Layers(t,e,i)}}(window,document)},{}],303:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function r(t){if(p===clearTimeout)return clearTimeout(t);if((p===s||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){_&&y&&(_=!1,y.length?f=y.concat(f):m=-1,f.length&&l())}function l(){if(!_){var t=o(a);_=!0;for(var e=f.length;e;){for(y=f,f=[];++m<e;)y&&y[m].run();m=-1,e=f.length}y=null,_=!1,r(t)}}function h(t,e){this.fun=t,this.array=e}function u(){}var c,p,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:s}catch(t){p=s}}();var y,f=[],_=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new h(t,e)),1!==f.length||_||o(l)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],304:[function(t,e,i){var n=function(){return this}()||Function("return this")(),s=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=s&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=t("./runtime"),s)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},{"./runtime":305}],305:[function(t,e,i){!function(t){"use strict";function i(t,e,i,n){var o=e&&e.prototype instanceof s?e:s,r=Object.create(o.prototype),a=new d(n||[]);return r._invoke=h(t,i,a),r}function n(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function s(){}function o(){}function r(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){function e(i,s,o,r){var a=n(t[i],t,s);if("throw"!==a.type){var l=a.arg,h=l.value
;return h&&"object"==typeof h&&g.call(h,"__await")?Promise.resolve(h.__await).then(function(t){e("next",t,o,r)},function(t){e("throw",t,o,r)}):Promise.resolve(h).then(function(t){l.value=t,o(l)},r)}r(a.arg)}function i(t,i){function n(){return new Promise(function(n,s){e(t,i,n,s)})}return s=s?s.then(n,n):n()}var s;this._invoke=i}function h(t,e,i){var s=P;return function(o,r){if(s===C)throw new Error("Generator is already running");if(s===M){if("throw"===o)throw r;return f()}for(i.method=o,i.arg=r;;){var a=i.delegate;if(a){var l=u(a,i);if(l){if(l===k)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(s===P)throw s=M,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);s=C;var h=n(t,e,i);if("normal"===h.type){if(s=i.done?M:T,h.arg===k)continue;return{value:h.arg,done:i.done}}"throw"===h.type&&(s=M,i.method="throw",i.arg=h.arg)}}}function u(t,e){var i=t.iterator[e.method];if(i===_){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=_,u(t,e),"throw"===e.method))return k;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var s=n(i,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,k;var o=s.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=_),e.delegate=null,k):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,k)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function y(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(g.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=_,e.done=!0,e};return n.next=n}}return{next:f}}function f(){return{value:_,done:!0}}var _,m=Object.prototype,g=m.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},b=v.iterator||"@@iterator",x=v.asyncIterator||"@@asyncIterator",L=v.toStringTag||"@@toStringTag",w="object"==typeof e,S=t.regeneratorRuntime;if(S)return void(w&&(e.exports=S));S=t.regeneratorRuntime=w?e.exports:{},S.wrap=i;var P="suspendedStart",T="suspendedYield",C="executing",M="completed",k={},E={};E[b]=function(){return this};var D=Object.getPrototypeOf,I=D&&D(D(y([])));I&&I!==m&&g.call(I,b)&&(E=I);var B=r.prototype=s.prototype=Object.create(E);o.prototype=B.constructor=r,r.constructor=o,r[L]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,r):(t.__proto__=r,L in t||(t[L]="GeneratorFunction")),t.prototype=Object.create(B),t},S.awrap=function(t){return{__await:t}},a(l.prototype),l.prototype[x]=function(){return this},S.AsyncIterator=l,S.async=function(t,e,n,s){var o=new l(i(t,e,n,s));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(B),B[L]="Generator",B[b]=function(){return this},B.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},S.values=y,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=_)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,n){return o.type="throw",o.arg=t,i.next=e,n&&(i.method="next",i.arg=_),!!n}if(this.done)throw t;for(var i=this,n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return e("end");if(s.tryLoc<=this.prev){var r=g.call(s,"catchLoc"),a=g.call(s,"finallyLoc");if(r&&a){if(this.prev<s.catchLoc)return e(s.catchLoc,!0);if(this.prev<s.finallyLoc)return e(s.finallyLoc)}else if(r){if(this.prev<s.catchLoc)return e(s.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return e(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&g.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,k):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),k},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),p(i),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var s=n.arg;p(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:y(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=_),k}}}(function(){return this}()||Function("return this")())},{}],306:[function(t,e,i){(function(i){var n=t("../lib/decorators/unhandledRejection"),s=n(t("../lib/Promise"));e.exports=void 0!==i?i.Promise=s:"undefined"!=typeof self?self.Promise=s:s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/Promise":307,"../lib/decorators/unhandledRejection":309}],307:[function(t,e,i){!function(t){"use strict";t(function(t){return t("./makePromise")({scheduler:new(t("./Scheduler"))(t("./env").asap)})})}("function"==typeof define&&define.amd?define:function(i){e.exports=i(t)})},{"./Scheduler":308,"./env":310,"./makePromise":312}],308:[function(t,e,i){!function(t){"use strict";t(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],309:[function(t,e,i){!function(t){"use strict";t(function(t){function e(t){throw t}function i(){}var n=t("../env").setTimer,s=t("../format");return function(t){function o(t){t.handled||(d.push(t),u("Potentially unhandled rejection ["+t.id+"] "+s.formatError(t.value)))}function r(t){var e=d.indexOf(t);e>=0&&(d.splice(e,1),c("Handled previous rejection ["+t.id+"] "+s.formatObject(t.value)))}function a(t,e){p.push(t,e),null===y&&(y=n(l,0))}function l(){for(y=null;p.length>0;)p.shift()(p.shift())}var h,u=i,c=i;"undefined"!=typeof console&&(h=console,u=void 0!==h.error?function(t){h.error(t)}:function(t){h.log(t)},c=void 0!==h.info?function(t){h.info(t)}:function(t){h.log(t)}),t.onPotentiallyUnhandledRejection=function(t){a(o,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){a(r,t)},t.onFatalRejection=function(t){a(e,t.value)};var p=[],d=[],y=null;return t}})}("function"==typeof define&&define.amd?define:function(i){e.exports=i(t)})},{"../env":310,"../format":311}],310:[function(t,e,i){(function(i){!function(t){"use strict";t(function(t){var e,n="undefined"!=typeof setTimeout&&setTimeout,s=function(t,e){return setTimeout(t,e)},o=function(t){return clearTimeout(t)},r=function(t){return n(t,0)};if(function(){return void 0!==i&&"[object process]"===Object.prototype.toString.call(i)}())r=function(t){return i.nextTick(t)};else if(e=function(){return"undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver}())r=function(t){function e(){var t=i;i=void 0,t()}var i,n=document.createTextNode("");new t(e).observe(n,{characterData:!0});var s=0;return function(t){i=t,n.data=s^=1}}(e);else if(!n){var a=t,l=a("vertx");s=function(t,e){return l.setTimer(e,t)},o=l.cancelTimer,r=l.runOnLoop||l.runOnContext}return{setTimer:s,clearTimer:o,asap:r}})}("function"==typeof define&&define.amd?define:function(i){e.exports=i(t)})}).call(this,t("_process"))},{_process:303}],311:[function(t,e,i){!function(t){"use strict";t(function(){function t(t){var i="object"==typeof t&&null!==t&&(t.stack||t.message)?t.stack||t.message:e(t);return t instanceof Error?i:i+" (WARNING: non-Error used)"}function e(t){var e=String(t);return"[object Object]"===e&&"undefined"!=typeof JSON&&(e=i(t,e)),e}function i(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:t,formatObject:e,tryStringify:i}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})},{}],312:[function(t,e,i){(function(t){!function(e){"use strict";e(function(){return function(e){function i(t,e){this._handler=t===b?e:n(t)}function n(t){function e(t){s.resolve(t)}function i(t){s.reject(t)}function n(t){s.notify(t)}var s=new L;try{t(e,i,n)}catch(t){i(t)}return s}function s(t){return G(t)?t:new i(b,new w(m(t)))}function o(t){return new i(b,new w(new T(t)))}function r(){return et}function a(){return new i(b,new L)}function l(t,e){return new e(b,new L(t.receiver,t.join().context))}function h(t){return c(q,null,t)}function u(t,e){return c(j,t,e)}function c(t,e,n){function s(i,s,r){r.resolved||p(n,o,i,t(e,s,i),r)}function o(t,e,i){u[t]=e,0==--h&&i.become(new P(u))}for(var r,a="function"==typeof e?s:o,l=new L,h=n.length>>>0,u=new Array(h),c=0;c<n.length&&!l.resolved;++c)r=n[c],void 0!==r||c in n?p(n,a,c,r,l):--h;return 0===h&&l.become(new P(u)),new i(b,l)}function p(t,e,i,n,s){if(O(n)){var o=g(n),r=o.state();0===r?o.fold(e,i,void 0,s):r>0?e(i,o.value,s):(s.become(o),d(t,i+1,o))}else e(i,n,s)}function d(t,e,i){for(var n=e;n<t.length;++n)y(m(t[n]),i)}function y(t,e){if(t!==e){var i=t.state();0===i?t.visit(t,void 0,t._unreport):i<0&&t._unreport()}}function f(t){return"object"!=typeof t||null===t?o(new TypeError("non-iterable passed to race()")):0===t.length?r():1===t.length?s(t[0]):_(t)}function _(t){var e,n,s,o=new L;for(e=0;e<t.length;++e)if(void 0!==(n=t[e])||e in t){if(s=m(n),0!==s.state()){o.become(s),d(t,e+1,s);break}s.visit(o,o.resolve,o.reject)}return new i(b,o)}function m(t){return G(t)?t._handler.join():O(t)?v(t):new P(t)}function g(t){return G(t)?t._handler.join():v(t)}function v(t){try{var e=t.then;return"function"==typeof e?new S(e,t):new P(t)}catch(t){return new T(t)}}function b(){}function x(){}function L(t,e){i.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function w(t){this.handler=t}function S(t,e){L.call(this),X.enqueue(new I(t,e,this))}function P(t){i.createContext(this),this.value=t}function T(t){i.createContext(this),this.id=++$,this.value=t,this.handled=!1,this.reported=!1,this._report()}function C(t,e){this.rejection=t,this.context=e}function M(t){this.rejection=t}function k(){return new T(new TypeError("Promise cycle"))}function E(t,e){this.continuation=t,this.handler=e}function D(t,e){this.handler=e,this.value=t}function I(t,e,i){this._then=t,this.thenable=e,this.resolver=i}function B(t,e,i,n,s){try{t.call(e,i,n,s)}catch(t){n(t)}}function A(t,e,i,n){this.f=t,this.z=e,this.c=i,this.to=n,this.resolver=Q,this.receiver=this}function G(t){return t instanceof i}function O(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function R(t,e,n,s){if("function"!=typeof t)return s.become(e);i.enterContext(e),F(t,e.value,n,s),i.exitContext()}function U(t,e,n,s,o){if("function"!=typeof t)return o.become(n);i.enterContext(n),N(t,e,n.value,s,o),i.exitContext()}function z(t,e,n,s,o){if("function"!=typeof t)return o.notify(e);i.enterContext(n),H(t,e,s,o),i.exitContext()}function j(t,e,i){try{return t(e,i)}catch(t){return o(t)}}function F(t,e,i,n){try{n.become(m(t.call(i,e)))}catch(t){n.become(new T(t))}}function N(t,e,i,n,s){try{t.call(n,e,i,s)}catch(t){s.become(new T(t))}}function H(t,e,i,n){try{n.notify(t.call(i,e))}catch(t){n.notify(t)}}function Z(t,e){e.prototype=K(t.prototype),e.prototype.constructor=e}function q(t,e){return e}function V(){}function W(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(t){}return!1}function Y(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}var X=e.scheduler,J=function(){return void 0!==t&&null!==t&&"function"==typeof t.emit?function(e,i){return"unhandledRejection"===e?t.emit(e,i.value,i):t.emit(e,i)}:"undefined"!=typeof self&&W()?function(t,e){return function(i,n){var s=new e(i,{detail:{reason:n.value,key:n},bubbles:!1,cancelable:!0});return!t.dispatchEvent(s)}}(self,CustomEvent):"undefined"!=typeof self&&Y()?function(t,e){return function(i,n){var s=e.createEvent("CustomEvent");return s.initCustomEvent(i,!1,!0,{reason:n.value,key:n}),!t.dispatchEvent(s)}}(self,document):V}(),K=Object.create||function(t){function e(){}return e.prototype=t,new e};i.resolve=s,i.reject=o,i.never=r,i._defer=a,i._handler=m,i.prototype.then=function(t,e,i){var n=this._handler,s=n.join().state();if("function"!=typeof t&&s>0||"function"!=typeof e&&s<0)return new this.constructor(b,n);var o=this._beget(),r=o._handler;return n.chain(r,n.receiver,t,e,i),o},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype._beget=function(){return l(this._handler,this.constructor)},i.all=h,i.race=f,i._traverse=u,i._visitRemaining=d,b.prototype.when=b.prototype.become=b.prototype.notify=b.prototype.fail=b.prototype._unreport=b.prototype._report=V,b.prototype._state=0,b.prototype.state=function(){return this._state},b.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},b.prototype.chain=function(t,e,i,n,s){this.when({resolver:t,receiver:e,fulfilled:i,rejected:n,progress:s})},b.prototype.visit=function(t,e,i,n){this.chain(Q,t,e,i,n)},b.prototype.fold=function(t,e,i,n){this.when(new A(t,e,i,n))},Z(b,x),x.prototype.become=function(t){t.fail()};var Q=new x;Z(b,L),L.prototype._state=0,L.prototype.resolve=function(t){this.become(m(t))},L.prototype.reject=function(t){this.resolved||this.become(new T(t))},L.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=k();return t},L.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var i=0;i<t.length;++i)e.when(t[i])},L.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&X.enqueue(this),void 0!==this.context&&t._report(this.context))},L.prototype.when=function(t){this.resolved?X.enqueue(new E(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},L.prototype.notify=function(t){this.resolved||X.enqueue(new D(t,this))},L.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},L.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},L.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},Z(b,w),w.prototype.when=function(t){X.enqueue(new E(t,this))},w.prototype._report=function(t){this.join()._report(t)},w.prototype._unreport=function(){this.join()._unreport()},Z(L,S),Z(b,P),P.prototype._state=1,P.prototype.fold=function(t,e,i,n){U(t,e,this,i,n)},P.prototype.when=function(t){R(t.fulfilled,this,t.receiver,t.resolver)};var $=0;Z(b,T),T.prototype._state=-1,T.prototype.fold=function(t,e,i,n){n.become(this)},T.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),R(t.rejected,this,t.receiver,t.resolver)},T.prototype._report=function(t){X.afterQueue(new C(this,t))},T.prototype._unreport=function(){this.handled||(this.handled=!0,X.afterQueue(new M(this)))},T.prototype.fail=function(t){this.reported=!0,J("unhandledRejection",this),i.onFatalRejection(this,void 0===t?this.context:t)},C.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,J("unhandledRejection",this.rejection)||i.onPotentiallyUnhandledRejection(this.rejection,this.context))},M.prototype.run=function(){this.rejection.reported&&(J("rejectionHandled",this.rejection)||i.onPotentiallyUnhandledRejectionHandled(this.rejection))},i.createContext=i.enterContext=i.exitContext=i.onPotentiallyUnhandledRejection=i.onPotentiallyUnhandledRejectionHandled=i.onFatalRejection=V;var tt=new b,et=new i(b,tt);return E.prototype.run=function(){this.handler.join().when(this.continuation)},D.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,i=0;i<t.length;++i)e=t[i],z(e.progress,this.value,this.handler,e.receiver,e.resolver)},I.prototype.run=function(){function t(t){n.resolve(t)}function e(t){n.reject(t)}function i(t){n.notify(t)}var n=this.resolver;B(this._then,this.thenable,t,e,i)},A.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},A.prototype.rejected=function(t){this.to.reject(t)},A.prototype.progress=function(t){this.to.notify(t)},i}})}("function"==typeof define&&define.amd?define:function(t){e.exports=t()})}).call(this,t("_process"))},{_process:303}]},{},[156,155]);